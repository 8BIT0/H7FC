ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"Dev_W25Qxx.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.DevW25Qxx_GetSspiInstance,"ax",%progbits
  17              		.align	1
  18              		.arch armv7e-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-d16
  24              	DevW25Qxx_GetSspiInstance:
  25              	.LFB144:
  26              		.file 1 "Device/Dev_W25Qxx.c"
   1:Device/Dev_W25Qxx.c **** #include "Dev_W25Qxx.h"
   2:Device/Dev_W25Qxx.c **** 
   3:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Init(DevW25QxxObj_TypeDef dev, DevW25QxxPin_Config_TypeDef De
   4:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Reset(DevW25QxxObj_TypeDef dev);
   5:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Write(DevW25QxxObj_TypeDef dev, uint32_t WriteAddr, uint8_t *
   6:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Read(DevW25QxxObj_TypeDef dev, uint32_t ReadAddr, uint32_t *p
   7:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_EraseBlock(DevW25QxxObj_TypeDef dev, uint32_t Address);
   8:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_EraseChip(DevW25QxxObj_TypeDef dev);
   9:Device/Dev_W25Qxx.c **** 
  10:Device/Dev_W25Qxx.c **** /* without pin config in this down */
  11:Device/Dev_W25Qxx.c **** static const BspSPI_NorModeConfig_TypeDef DevW25QxxSPI_Cfg = {
  12:Device/Dev_W25Qxx.c ****     .CLKPolarity = SPI_POLARITY_HIGH,
  13:Device/Dev_W25Qxx.c ****     .CLKPhase = SPI_PHASE_2EDGE,
  14:Device/Dev_W25Qxx.c ****     .BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128,
  15:Device/Dev_W25Qxx.c **** };
  16:Device/Dev_W25Qxx.c **** 
  17:Device/Dev_W25Qxx.c **** DevW25Qxx_TypeDef DevW25Q64 = {
  18:Device/Dev_W25Qxx.c ****     .init = DevW25Qxx_Init,
  19:Device/Dev_W25Qxx.c ****     .reset = DevW25Qxx_Reset,
  20:Device/Dev_W25Qxx.c ****     .write = DevW25Qxx_Write,
  21:Device/Dev_W25Qxx.c ****     .read = DevW25Qxx_Read,
  22:Device/Dev_W25Qxx.c ****     .erase_block = DevW25Qxx_EraseBlock,
  23:Device/Dev_W25Qxx.c ****     .erase_chip = DevW25Qxx_EraseChip,
  24:Device/Dev_W25Qxx.c **** };
  25:Device/Dev_W25Qxx.c **** 
  26:Device/Dev_W25Qxx.c **** /* DevW25Qxx Base SPI communicate interface */
  27:Device/Dev_W25Qxx.c **** static BspSpi_TypeDef *DevW25Qxx_GetSspiInstance(DevW25QxxObj_TypeDef dev)
  28:Device/Dev_W25Qxx.c **** {
  27              		.loc 1 28 1 view -0
  28              		.cfi_startproc
  29              		@ args = 24, pretend = 16, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 2


  31              		@ link register save eliminated.
  32 0000 84B0     		sub	sp, sp, #16
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 16
  35 0002 8DE80F00 		stm	sp, {r0, r1, r2, r3}
  29:Device/Dev_W25Qxx.c ****     if (dev.bus_type == DevW25Qxx_Norm_SpiBus)
  36              		.loc 1 29 5 view .LVU1
  37              		.loc 1 29 12 is_stmt 0 view .LVU2
  38 0006 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
  39              		.loc 1 29 8 view .LVU3
  40 000a 0BB1     		cbz	r3, .L4
  41              	.L1:
  30:Device/Dev_W25Qxx.c ****         return (BspSpi_TypeDef *)(&BspSPI);
  31:Device/Dev_W25Qxx.c **** }
  42              		.loc 1 31 1 view .LVU4
  43 000c 04B0     		add	sp, sp, #16
  44              	.LCFI1:
  45              		.cfi_remember_state
  46              		.cfi_def_cfa_offset 0
  47 000e 7047     		bx	lr
  48              	.L4:
  49              	.LCFI2:
  50              		.cfi_restore_state
  30:Device/Dev_W25Qxx.c ****         return (BspSpi_TypeDef *)(&BspSPI);
  51              		.loc 1 30 9 is_stmt 1 view .LVU5
  30:Device/Dev_W25Qxx.c ****         return (BspSpi_TypeDef *)(&BspSPI);
  52              		.loc 1 30 16 is_stmt 0 view .LVU6
  53 0010 0048     		ldr	r0, .L5
  54 0012 FBE7     		b	.L1
  55              	.L6:
  56              		.align	2
  57              	.L5:
  58 0014 00000000 		.word	BspSPI
  59              		.cfi_endproc
  60              	.LFE144:
  62              		.section	.text.DevW25Qxx_BusTrans,"ax",%progbits
  63              		.align	1
  64              		.syntax unified
  65              		.thumb
  66              		.thumb_func
  67              		.fpu fpv5-d16
  69              	DevW25Qxx_BusTrans:
  70              	.LVL0:
  71              	.LFB145:
  32:Device/Dev_W25Qxx.c **** 
  33:Device/Dev_W25Qxx.c **** static bool DevW25Qxx_BusTrans(DevW25QxxObj_TypeDef dev, uint8_t *tx, uint16_t size)
  34:Device/Dev_W25Qxx.c **** {
  72              		.loc 1 34 1 is_stmt 1 view -0
  73              		.cfi_startproc
  74              		@ args = 32, pretend = 16, frame = 0
  75              		@ frame_needed = 0, uses_anonymous_args = 0
  76              		.loc 1 34 1 is_stmt 0 view .LVU8
  77 0000 84B0     		sub	sp, sp, #16
  78              	.LCFI3:
  79              		.cfi_def_cfa_offset 16
  80 0002 70B5     		push	{r4, r5, r6, lr}
  81              	.LCFI4:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 3


  82              		.cfi_def_cfa_offset 32
  83              		.cfi_offset 4, -32
  84              		.cfi_offset 5, -28
  85              		.cfi_offset 6, -24
  86              		.cfi_offset 14, -20
  87 0004 82B0     		sub	sp, sp, #8
  88              	.LCFI5:
  89              		.cfi_def_cfa_offset 40
  90 0006 06AC     		add	r4, sp, #24
  91 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
  35:Device/Dev_W25Qxx.c ****     bool state = false;
  92              		.loc 1 35 5 is_stmt 1 view .LVU9
  93              	.LVL1:
  36:Device/Dev_W25Qxx.c **** 
  37:Device/Dev_W25Qxx.c ****     if (dev.bus_instance == DevW25Qxx_Norm_SpiBus)
  94              		.loc 1 37 5 view .LVU10
  95              		.loc 1 37 12 is_stmt 0 view .LVU11
  96 000c DDF81940 		ldr	r4, [sp, #25]	@ unaligned
  97              		.loc 1 37 8 view .LVU12
  98 0010 34B1     		cbz	r4, .L13
  35:Device/Dev_W25Qxx.c ****     bool state = false;
  99              		.loc 1 35 10 view .LVU13
 100 0012 0024     		movs	r4, #0
 101              	.LVL2:
 102              	.L8:
  38:Device/Dev_W25Qxx.c ****     {
  39:Device/Dev_W25Qxx.c ****         if ((DevW25Qxx_GetSspiInstance(dev) == NULL) || (DevW25Qxx_GetSspiInstance(dev)->trans == N
  40:Device/Dev_W25Qxx.c ****             return false;
  41:Device/Dev_W25Qxx.c **** 
  42:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(true);
  43:Device/Dev_W25Qxx.c **** 
  44:Device/Dev_W25Qxx.c ****         state = DevW25Qxx_GetSspiInstance(dev)->trans(dev.bus_instance, tx, size, W25Qx_TIMEOUT_VAL
  45:Device/Dev_W25Qxx.c **** 
  46:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(false);
  47:Device/Dev_W25Qxx.c ****     }
  48:Device/Dev_W25Qxx.c **** 
  49:Device/Dev_W25Qxx.c ****     return state;
  50:Device/Dev_W25Qxx.c **** }
 103              		.loc 1 50 1 view .LVU14
 104 0014 2046     		mov	r0, r4
 105 0016 02B0     		add	sp, sp, #8
 106              	.LCFI6:
 107              		.cfi_remember_state
 108              		.cfi_def_cfa_offset 32
 109              		@ sp needed
 110 0018 BDE87040 		pop	{r4, r5, r6, lr}
 111              	.LCFI7:
 112              		.cfi_restore 14
 113              		.cfi_restore 6
 114              		.cfi_restore 5
 115              		.cfi_restore 4
 116              		.cfi_def_cfa_offset 16
 117 001c 04B0     		add	sp, sp, #16
 118              	.LCFI8:
 119              		.cfi_def_cfa_offset 0
 120 001e 7047     		bx	lr
 121              	.LVL3:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 4


 122              	.L13:
 123              	.LCFI9:
 124              		.cfi_restore_state
  39:Device/Dev_W25Qxx.c ****             return false;
 125              		.loc 1 39 9 is_stmt 1 view .LVU15
  39:Device/Dev_W25Qxx.c ****             return false;
 126              		.loc 1 39 14 is_stmt 0 view .LVU16
 127 0020 0B99     		ldr	r1, [sp, #44]
 128 0022 0A98     		ldr	r0, [sp, #40]
 129 0024 0090     		str	r0, [sp]
 130 0026 8DF80410 		strb	r1, [sp, #4]
 131 002a 06AB     		add	r3, sp, #24
 132 002c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 133 002e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 134              	.LVL4:
  39:Device/Dev_W25Qxx.c ****             return false;
 135              		.loc 1 39 12 view .LVU17
 136 0032 D0B1     		cbz	r0, .L10
  39:Device/Dev_W25Qxx.c ****             return false;
 137              		.loc 1 39 88 discriminator 1 view .LVU18
 138 0034 8368     		ldr	r3, [r0, #8]
  39:Device/Dev_W25Qxx.c ****             return false;
 139              		.loc 1 39 54 discriminator 1 view .LVU19
 140 0036 D3B1     		cbz	r3, .L11
  42:Device/Dev_W25Qxx.c **** 
 141              		.loc 1 42 9 is_stmt 1 view .LVU20
  42:Device/Dev_W25Qxx.c **** 
 142              		.loc 1 42 18 is_stmt 0 view .LVU21
 143 0038 DDF82550 		ldr	r5, [sp, #37]	@ unaligned
  42:Device/Dev_W25Qxx.c **** 
 144              		.loc 1 42 9 view .LVU22
 145 003c 0120     		movs	r0, #1
 146 003e A847     		blx	r5
 147              	.LVL5:
  44:Device/Dev_W25Qxx.c **** 
 148              		.loc 1 44 9 is_stmt 1 view .LVU23
  44:Device/Dev_W25Qxx.c **** 
 149              		.loc 1 44 17 is_stmt 0 view .LVU24
 150 0040 0B99     		ldr	r1, [sp, #44]
 151 0042 0A98     		ldr	r0, [sp, #40]
 152 0044 0090     		str	r0, [sp]
 153 0046 8DF80410 		strb	r1, [sp, #4]
 154 004a 06AB     		add	r3, sp, #24
 155 004c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 156 004e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 157              	.LVL6:
  44:Device/Dev_W25Qxx.c **** 
 158              		.loc 1 44 47 view .LVU25
 159 0052 8668     		ldr	r6, [r0, #8]
  44:Device/Dev_W25Qxx.c **** 
 160              		.loc 1 44 17 view .LVU26
 161 0054 4FF47A73 		mov	r3, #1000
 162 0058 BDF83420 		ldrh	r2, [sp, #52]
 163 005c 0C99     		ldr	r1, [sp, #48]
 164 005e 2046     		mov	r0, r4
 165 0060 B047     		blx	r6
 166              	.LVL7:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 5


 167 0062 0446     		mov	r4, r0
 168              	.LVL8:
  46:Device/Dev_W25Qxx.c ****     }
 169              		.loc 1 46 9 is_stmt 1 view .LVU27
 170 0064 0020     		movs	r0, #0
 171 0066 A847     		blx	r5
 172              	.LVL9:
 173 0068 D4E7     		b	.L8
 174              	.LVL10:
 175              	.L10:
  40:Device/Dev_W25Qxx.c **** 
 176              		.loc 1 40 20 is_stmt 0 view .LVU28
 177 006a 0024     		movs	r4, #0
 178 006c D2E7     		b	.L8
 179              	.L11:
 180 006e 0024     		movs	r4, #0
 181 0070 D0E7     		b	.L8
 182              		.cfi_endproc
 183              	.LFE145:
 185              		.section	.text.DevW25Qxx_BusReceive,"ax",%progbits
 186              		.align	1
 187              		.syntax unified
 188              		.thumb
 189              		.thumb_func
 190              		.fpu fpv5-d16
 192              	DevW25Qxx_BusReceive:
 193              	.LVL11:
 194              	.LFB146:
  51:Device/Dev_W25Qxx.c **** 
  52:Device/Dev_W25Qxx.c **** static bool DevW25Qxx_BusReceive(DevW25QxxObj_TypeDef dev, uint8_t *rx, uint16_t size)
  53:Device/Dev_W25Qxx.c **** {
 195              		.loc 1 53 1 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 32, pretend = 16, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199              		.loc 1 53 1 is_stmt 0 view .LVU30
 200 0000 84B0     		sub	sp, sp, #16
 201              	.LCFI10:
 202              		.cfi_def_cfa_offset 16
 203 0002 70B5     		push	{r4, r5, r6, lr}
 204              	.LCFI11:
 205              		.cfi_def_cfa_offset 32
 206              		.cfi_offset 4, -32
 207              		.cfi_offset 5, -28
 208              		.cfi_offset 6, -24
 209              		.cfi_offset 14, -20
 210 0004 82B0     		sub	sp, sp, #8
 211              	.LCFI12:
 212              		.cfi_def_cfa_offset 40
 213 0006 06AC     		add	r4, sp, #24
 214 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
  54:Device/Dev_W25Qxx.c ****     bool state = false;
 215              		.loc 1 54 5 is_stmt 1 view .LVU31
 216              	.LVL12:
  55:Device/Dev_W25Qxx.c **** 
  56:Device/Dev_W25Qxx.c ****     if (dev.bus_instance == DevW25Qxx_Norm_SpiBus)
 217              		.loc 1 56 5 view .LVU32
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 6


 218              		.loc 1 56 12 is_stmt 0 view .LVU33
 219 000c DDF81940 		ldr	r4, [sp, #25]	@ unaligned
 220              		.loc 1 56 8 view .LVU34
 221 0010 34B1     		cbz	r4, .L20
  54:Device/Dev_W25Qxx.c ****     bool state = false;
 222              		.loc 1 54 10 view .LVU35
 223 0012 0024     		movs	r4, #0
 224              	.LVL13:
 225              	.L15:
  57:Device/Dev_W25Qxx.c ****     {
  58:Device/Dev_W25Qxx.c ****         if ((DevW25Qxx_GetSspiInstance(dev) == NULL) || (DevW25Qxx_GetSspiInstance(dev)->receive ==
  59:Device/Dev_W25Qxx.c ****             return false;
  60:Device/Dev_W25Qxx.c **** 
  61:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(true);
  62:Device/Dev_W25Qxx.c **** 
  63:Device/Dev_W25Qxx.c ****         state = DevW25Qxx_GetSspiInstance(dev)->receive(dev.bus_instance, rx, size, W25Qx_TIMEOUT_V
  64:Device/Dev_W25Qxx.c **** 
  65:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(false);
  66:Device/Dev_W25Qxx.c ****     }
  67:Device/Dev_W25Qxx.c **** 
  68:Device/Dev_W25Qxx.c ****     return state;
  69:Device/Dev_W25Qxx.c **** }
 226              		.loc 1 69 1 view .LVU36
 227 0014 2046     		mov	r0, r4
 228 0016 02B0     		add	sp, sp, #8
 229              	.LCFI13:
 230              		.cfi_remember_state
 231              		.cfi_def_cfa_offset 32
 232              		@ sp needed
 233 0018 BDE87040 		pop	{r4, r5, r6, lr}
 234              	.LCFI14:
 235              		.cfi_restore 14
 236              		.cfi_restore 6
 237              		.cfi_restore 5
 238              		.cfi_restore 4
 239              		.cfi_def_cfa_offset 16
 240 001c 04B0     		add	sp, sp, #16
 241              	.LCFI15:
 242              		.cfi_def_cfa_offset 0
 243 001e 7047     		bx	lr
 244              	.LVL14:
 245              	.L20:
 246              	.LCFI16:
 247              		.cfi_restore_state
  58:Device/Dev_W25Qxx.c ****             return false;
 248              		.loc 1 58 9 is_stmt 1 view .LVU37
  58:Device/Dev_W25Qxx.c ****             return false;
 249              		.loc 1 58 14 is_stmt 0 view .LVU38
 250 0020 0B99     		ldr	r1, [sp, #44]
 251 0022 0A98     		ldr	r0, [sp, #40]
 252 0024 0090     		str	r0, [sp]
 253 0026 8DF80410 		strb	r1, [sp, #4]
 254 002a 06AB     		add	r3, sp, #24
 255 002c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 256 002e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 257              	.LVL15:
  58:Device/Dev_W25Qxx.c ****             return false;
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 7


 258              		.loc 1 58 12 view .LVU39
 259 0032 D0B1     		cbz	r0, .L17
  58:Device/Dev_W25Qxx.c ****             return false;
 260              		.loc 1 58 88 discriminator 1 view .LVU40
 261 0034 C368     		ldr	r3, [r0, #12]
  58:Device/Dev_W25Qxx.c ****             return false;
 262              		.loc 1 58 54 discriminator 1 view .LVU41
 263 0036 D3B1     		cbz	r3, .L18
  61:Device/Dev_W25Qxx.c **** 
 264              		.loc 1 61 9 is_stmt 1 view .LVU42
  61:Device/Dev_W25Qxx.c **** 
 265              		.loc 1 61 18 is_stmt 0 view .LVU43
 266 0038 DDF82550 		ldr	r5, [sp, #37]	@ unaligned
  61:Device/Dev_W25Qxx.c **** 
 267              		.loc 1 61 9 view .LVU44
 268 003c 0120     		movs	r0, #1
 269 003e A847     		blx	r5
 270              	.LVL16:
  63:Device/Dev_W25Qxx.c **** 
 271              		.loc 1 63 9 is_stmt 1 view .LVU45
  63:Device/Dev_W25Qxx.c **** 
 272              		.loc 1 63 17 is_stmt 0 view .LVU46
 273 0040 0B99     		ldr	r1, [sp, #44]
 274 0042 0A98     		ldr	r0, [sp, #40]
 275 0044 0090     		str	r0, [sp]
 276 0046 8DF80410 		strb	r1, [sp, #4]
 277 004a 06AB     		add	r3, sp, #24
 278 004c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 279 004e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 280              	.LVL17:
  63:Device/Dev_W25Qxx.c **** 
 281              		.loc 1 63 47 view .LVU47
 282 0052 C668     		ldr	r6, [r0, #12]
  63:Device/Dev_W25Qxx.c **** 
 283              		.loc 1 63 17 view .LVU48
 284 0054 4FF47A73 		mov	r3, #1000
 285 0058 BDF83420 		ldrh	r2, [sp, #52]
 286 005c 0C99     		ldr	r1, [sp, #48]
 287 005e 2046     		mov	r0, r4
 288 0060 B047     		blx	r6
 289              	.LVL18:
 290 0062 0446     		mov	r4, r0
 291              	.LVL19:
  65:Device/Dev_W25Qxx.c ****     }
 292              		.loc 1 65 9 is_stmt 1 view .LVU49
 293 0064 0020     		movs	r0, #0
 294 0066 A847     		blx	r5
 295              	.LVL20:
 296 0068 D4E7     		b	.L15
 297              	.LVL21:
 298              	.L17:
  59:Device/Dev_W25Qxx.c **** 
 299              		.loc 1 59 20 is_stmt 0 view .LVU50
 300 006a 0024     		movs	r4, #0
 301 006c D2E7     		b	.L15
 302              	.L18:
 303 006e 0024     		movs	r4, #0
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 8


 304 0070 D0E7     		b	.L15
 305              		.cfi_endproc
 306              	.LFE146:
 308              		.section	.text.DevW25Qxx_BusTrans_Receive,"ax",%progbits
 309              		.align	1
 310              		.syntax unified
 311              		.thumb
 312              		.thumb_func
 313              		.fpu fpv5-d16
 315              	DevW25Qxx_BusTrans_Receive:
 316              	.LVL22:
 317              	.LFB147:
  70:Device/Dev_W25Qxx.c **** 
  71:Device/Dev_W25Qxx.c **** static bool DevW25Qxx_BusTrans_Receive(DevW25QxxObj_TypeDef dev, uint8_t *tx, uint8_t *rx, uint16_t
  72:Device/Dev_W25Qxx.c **** {
 318              		.loc 1 72 1 is_stmt 1 view -0
 319              		.cfi_startproc
 320              		@ args = 36, pretend = 16, frame = 0
 321              		@ frame_needed = 0, uses_anonymous_args = 0
 322              		.loc 1 72 1 is_stmt 0 view .LVU52
 323 0000 84B0     		sub	sp, sp, #16
 324              	.LCFI17:
 325              		.cfi_def_cfa_offset 16
 326 0002 70B5     		push	{r4, r5, r6, lr}
 327              	.LCFI18:
 328              		.cfi_def_cfa_offset 32
 329              		.cfi_offset 4, -32
 330              		.cfi_offset 5, -28
 331              		.cfi_offset 6, -24
 332              		.cfi_offset 14, -20
 333 0004 82B0     		sub	sp, sp, #8
 334              	.LCFI19:
 335              		.cfi_def_cfa_offset 40
 336 0006 06AC     		add	r4, sp, #24
 337 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
 338 000c 0024     		movs	r4, #0
  73:Device/Dev_W25Qxx.c ****     bool state;
 339              		.loc 1 73 5 is_stmt 1 view .LVU53
  74:Device/Dev_W25Qxx.c **** 
  75:Device/Dev_W25Qxx.c ****     if (dev.bus_instance == DevW25Qxx_Norm_SpiBus)
 340              		.loc 1 75 5 view .LVU54
 341              		.loc 1 75 12 is_stmt 0 view .LVU55
 342 000e DDF81950 		ldr	r5, [sp, #25]	@ unaligned
 343              		.loc 1 75 8 view .LVU56
 344 0012 2DB1     		cbz	r5, .L26
 345              	.L22:
  76:Device/Dev_W25Qxx.c ****     {
  77:Device/Dev_W25Qxx.c ****         if ((DevW25Qxx_GetSspiInstance(dev) == NULL) || (DevW25Qxx_GetSspiInstance(dev)->trans_rece
  78:Device/Dev_W25Qxx.c ****             return false;
  79:Device/Dev_W25Qxx.c **** 
  80:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(true);
  81:Device/Dev_W25Qxx.c **** 
  82:Device/Dev_W25Qxx.c ****         state = DevW25Qxx_GetSspiInstance(dev)->trans_receive(dev.bus_instance, tx, rx, size, W25Qx
  83:Device/Dev_W25Qxx.c **** 
  84:Device/Dev_W25Qxx.c ****         dev.CSPin.ctl(false);
  85:Device/Dev_W25Qxx.c ****     }
  86:Device/Dev_W25Qxx.c **** 
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 9


  87:Device/Dev_W25Qxx.c ****     return state;
  88:Device/Dev_W25Qxx.c **** }
 346              		.loc 1 88 1 view .LVU57
 347 0014 2046     		mov	r0, r4
 348 0016 02B0     		add	sp, sp, #8
 349              	.LCFI20:
 350              		.cfi_remember_state
 351              		.cfi_def_cfa_offset 32
 352              		@ sp needed
 353 0018 BDE87040 		pop	{r4, r5, r6, lr}
 354              	.LCFI21:
 355              		.cfi_restore 14
 356              		.cfi_restore 6
 357              		.cfi_restore 5
 358              		.cfi_restore 4
 359              		.cfi_def_cfa_offset 16
 360 001c 04B0     		add	sp, sp, #16
 361              	.LCFI22:
 362              		.cfi_def_cfa_offset 0
 363 001e 7047     		bx	lr
 364              	.L26:
 365              	.LCFI23:
 366              		.cfi_restore_state
  77:Device/Dev_W25Qxx.c ****             return false;
 367              		.loc 1 77 9 is_stmt 1 view .LVU58
  77:Device/Dev_W25Qxx.c ****             return false;
 368              		.loc 1 77 14 is_stmt 0 view .LVU59
 369 0020 0B99     		ldr	r1, [sp, #44]
 370 0022 0A98     		ldr	r0, [sp, #40]
 371 0024 0090     		str	r0, [sp]
 372 0026 8DF80410 		strb	r1, [sp, #4]
 373 002a 06AB     		add	r3, sp, #24
 374 002c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 375 002e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 376              	.LVL23:
  77:Device/Dev_W25Qxx.c ****             return false;
 377              		.loc 1 77 12 view .LVU60
 378 0032 E0B1     		cbz	r0, .L23
  77:Device/Dev_W25Qxx.c ****             return false;
 379              		.loc 1 77 88 discriminator 1 view .LVU61
 380 0034 0369     		ldr	r3, [r0, #16]
  77:Device/Dev_W25Qxx.c ****             return false;
 381              		.loc 1 77 54 discriminator 1 view .LVU62
 382 0036 E3B1     		cbz	r3, .L24
  80:Device/Dev_W25Qxx.c **** 
 383              		.loc 1 80 9 is_stmt 1 view .LVU63
  80:Device/Dev_W25Qxx.c **** 
 384              		.loc 1 80 18 is_stmt 0 view .LVU64
 385 0038 DDF82560 		ldr	r6, [sp, #37]	@ unaligned
  80:Device/Dev_W25Qxx.c **** 
 386              		.loc 1 80 9 view .LVU65
 387 003c 0120     		movs	r0, #1
 388 003e B047     		blx	r6
 389              	.LVL24:
  82:Device/Dev_W25Qxx.c **** 
 390              		.loc 1 82 9 is_stmt 1 view .LVU66
  82:Device/Dev_W25Qxx.c **** 
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 10


 391              		.loc 1 82 17 is_stmt 0 view .LVU67
 392 0040 0B99     		ldr	r1, [sp, #44]
 393 0042 0A98     		ldr	r0, [sp, #40]
 394 0044 0090     		str	r0, [sp]
 395 0046 8DF80410 		strb	r1, [sp, #4]
 396 004a 06AB     		add	r3, sp, #24
 397 004c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 398 004e FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 399              	.LVL25:
  82:Device/Dev_W25Qxx.c **** 
 400              		.loc 1 82 47 view .LVU68
 401 0052 0469     		ldr	r4, [r0, #16]
  82:Device/Dev_W25Qxx.c **** 
 402              		.loc 1 82 17 view .LVU69
 403 0054 4FF47A73 		mov	r3, #1000
 404 0058 0093     		str	r3, [sp]
 405 005a BDF83830 		ldrh	r3, [sp, #56]
 406 005e 0D9A     		ldr	r2, [sp, #52]
 407 0060 0C99     		ldr	r1, [sp, #48]
 408 0062 2846     		mov	r0, r5
 409 0064 A047     		blx	r4
 410              	.LVL26:
 411 0066 0446     		mov	r4, r0
 412              	.LVL27:
  84:Device/Dev_W25Qxx.c ****     }
 413              		.loc 1 84 9 is_stmt 1 view .LVU70
 414 0068 0020     		movs	r0, #0
 415 006a B047     		blx	r6
 416              	.LVL28:
 417 006c D2E7     		b	.L22
 418              	.LVL29:
 419              	.L23:
  78:Device/Dev_W25Qxx.c **** 
 420              		.loc 1 78 20 is_stmt 0 view .LVU71
 421 006e 0024     		movs	r4, #0
 422 0070 D0E7     		b	.L22
 423              	.L24:
 424 0072 0024     		movs	r4, #0
 425 0074 CEE7     		b	.L22
 426              		.cfi_endproc
 427              	.LFE147:
 429              		.section	.text.DevW25Qxx_Reset,"ax",%progbits
 430              		.align	1
 431              		.syntax unified
 432              		.thumb
 433              		.thumb_func
 434              		.fpu fpv5-d16
 436              	DevW25Qxx_Reset:
 437              	.LFB149:
  89:Device/Dev_W25Qxx.c **** 
  90:Device/Dev_W25Qxx.c **** /* W25Qxx device driver */
  91:Device/Dev_W25Qxx.c **** static bool DevW25Qxx_ReadID(DevW25QxxObj_TypeDef dev)
  92:Device/Dev_W25Qxx.c **** {
  93:Device/Dev_W25Qxx.c ****     uint8_t cmd[4] = {READ_ID_CMD, 0x00, 0x00, 0x00};
  94:Device/Dev_W25Qxx.c ****     uint8_t ID[2] = {0};
  95:Device/Dev_W25Qxx.c **** 
  96:Device/Dev_W25Qxx.c ****     /* Send the read ID command */
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 11


  97:Device/Dev_W25Qxx.c ****     DevW25Qxx_BusTrans(dev, cmd, sizeof(cmd));
  98:Device/Dev_W25Qxx.c ****     /* Reception of the data */
  99:Device/Dev_W25Qxx.c ****     DevW25Qxx_BusReceive(dev, ID, sizeof(ID));
 100:Device/Dev_W25Qxx.c **** 
 101:Device/Dev_W25Qxx.c ****     return true;
 102:Device/Dev_W25Qxx.c **** }
 103:Device/Dev_W25Qxx.c **** 
 104:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Reset(DevW25QxxObj_TypeDef dev)
 105:Device/Dev_W25Qxx.c **** {
 438              		.loc 1 105 1 is_stmt 1 view -0
 439              		.cfi_startproc
 440              		@ args = 24, pretend = 16, frame = 8
 441              		@ frame_needed = 0, uses_anonymous_args = 0
 442 0000 84B0     		sub	sp, sp, #16
 443              	.LCFI24:
 444              		.cfi_def_cfa_offset 16
 445 0002 00B5     		push	{lr}
 446              	.LCFI25:
 447              		.cfi_def_cfa_offset 20
 448              		.cfi_offset 14, -20
 449 0004 87B0     		sub	sp, sp, #28
 450              	.LCFI26:
 451              		.cfi_def_cfa_offset 48
 452 0006 0DF1200C 		add	ip, sp, #32
 453 000a 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 106:Device/Dev_W25Qxx.c ****     uint8_t cmd[2] = {RESET_ENABLE_CMD, RESET_MEMORY_CMD};
 454              		.loc 1 106 5 view .LVU73
 455              		.loc 1 106 13 is_stmt 0 view .LVU74
 456 000e 49F66613 		movw	r3, #39270
 457 0012 ADF81430 		strh	r3, [sp, #20]	@ movhi
 107:Device/Dev_W25Qxx.c **** 
 108:Device/Dev_W25Qxx.c ****     /* Send the reset command */
 109:Device/Dev_W25Qxx.c ****     if (DevW25Qxx_BusTrans(dev, cmd, sizeof(cmd)))
 458              		.loc 1 109 5 is_stmt 1 view .LVU75
 459              		.loc 1 109 9 is_stmt 0 view .LVU76
 460 0016 0223     		movs	r3, #2
 461 0018 0393     		str	r3, [sp, #12]
 462 001a 05AB     		add	r3, sp, #20
 463 001c 0293     		str	r3, [sp, #8]
 464 001e 0D99     		ldr	r1, [sp, #52]
 465 0020 0C98     		ldr	r0, [sp, #48]
 466 0022 0090     		str	r0, [sp]
 467 0024 8DF80410 		strb	r1, [sp, #4]
 468 0028 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 469 002c FFF7FEFF 		bl	DevW25Qxx_BusTrans
 470              	.LVL30:
 471              		.loc 1 109 8 view .LVU77
 472 0030 28B9     		cbnz	r0, .L29
 110:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Ok;
 111:Device/Dev_W25Qxx.c **** 
 112:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Error;
 473              		.loc 1 112 12 view .LVU78
 474 0032 0120     		movs	r0, #1
 475              	.L28:
 113:Device/Dev_W25Qxx.c **** }
 476              		.loc 1 113 1 view .LVU79
 477 0034 07B0     		add	sp, sp, #28
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 12


 478              	.LCFI27:
 479              		.cfi_remember_state
 480              		.cfi_def_cfa_offset 20
 481              		@ sp needed
 482 0036 5DF804EB 		ldr	lr, [sp], #4
 483              	.LCFI28:
 484              		.cfi_restore 14
 485              		.cfi_def_cfa_offset 16
 486 003a 04B0     		add	sp, sp, #16
 487              	.LCFI29:
 488              		.cfi_def_cfa_offset 0
 489 003c 7047     		bx	lr
 490              	.L29:
 491              	.LCFI30:
 492              		.cfi_restore_state
 110:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Ok;
 493              		.loc 1 110 16 view .LVU80
 494 003e 0020     		movs	r0, #0
 495 0040 F8E7     		b	.L28
 496              		.cfi_endproc
 497              	.LFE149:
 499              		.section	.text.DevW25Qxx_GetStatue,"ax",%progbits
 500              		.align	1
 501              		.syntax unified
 502              		.thumb
 503              		.thumb_func
 504              		.fpu fpv5-d16
 506              	DevW25Qxx_GetStatue:
 507              	.LFB150:
 114:Device/Dev_W25Qxx.c **** 
 115:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_GetStatue(DevW25QxxObj_TypeDef dev)
 116:Device/Dev_W25Qxx.c **** {
 508              		.loc 1 116 1 is_stmt 1 view -0
 509              		.cfi_startproc
 510              		@ args = 24, pretend = 16, frame = 8
 511              		@ frame_needed = 0, uses_anonymous_args = 0
 512 0000 84B0     		sub	sp, sp, #16
 513              	.LCFI31:
 514              		.cfi_def_cfa_offset 16
 515 0002 00B5     		push	{lr}
 516              	.LCFI32:
 517              		.cfi_def_cfa_offset 20
 518              		.cfi_offset 14, -20
 519 0004 89B0     		sub	sp, sp, #36
 520              	.LCFI33:
 521              		.cfi_def_cfa_offset 56
 522 0006 0DF1280C 		add	ip, sp, #40
 523 000a 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 117:Device/Dev_W25Qxx.c ****     uint8_t cmd = READ_STATUS_REG1_CMD;
 524              		.loc 1 117 5 view .LVU82
 525              		.loc 1 117 13 is_stmt 0 view .LVU83
 526 000e 0523     		movs	r3, #5
 527 0010 8DF81F30 		strb	r3, [sp, #31]
 118:Device/Dev_W25Qxx.c ****     bool trans_state = false;
 528              		.loc 1 118 5 is_stmt 1 view .LVU84
 529              	.LVL31:
 119:Device/Dev_W25Qxx.c ****     uint8_t dev_status;
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 13


 530              		.loc 1 119 5 view .LVU85
 120:Device/Dev_W25Qxx.c **** 
 121:Device/Dev_W25Qxx.c ****     trans_state = DevW25Qxx_BusTrans_Receive(dev, &cmd, &dev_status, sizeof(dev_status));
 531              		.loc 1 121 5 view .LVU86
 532              		.loc 1 121 19 is_stmt 0 view .LVU87
 533 0014 0123     		movs	r3, #1
 534 0016 0493     		str	r3, [sp, #16]
 535 0018 0DF11E03 		add	r3, sp, #30
 536 001c 0393     		str	r3, [sp, #12]
 537 001e 0DF11F03 		add	r3, sp, #31
 538 0022 0293     		str	r3, [sp, #8]
 539 0024 0F99     		ldr	r1, [sp, #60]
 540 0026 0E98     		ldr	r0, [sp, #56]
 541 0028 0090     		str	r0, [sp]
 542 002a 8DF80410 		strb	r1, [sp, #4]
 543 002e 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 544 0032 FFF7FEFF 		bl	DevW25Qxx_BusTrans_Receive
 545              	.LVL32:
 122:Device/Dev_W25Qxx.c **** 
 123:Device/Dev_W25Qxx.c ****     if (!trans_state)
 546              		.loc 1 123 5 is_stmt 1 view .LVU88
 547              		.loc 1 123 8 is_stmt 0 view .LVU89
 548 0036 48B1     		cbz	r0, .L33
 124:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 125:Device/Dev_W25Qxx.c **** 
 126:Device/Dev_W25Qxx.c ****     /* Check the value of the register */
 127:Device/Dev_W25Qxx.c ****     if ((dev_status & W25Q128FV_FSR_BUSY) != 0)
 549              		.loc 1 127 5 is_stmt 1 view .LVU90
 550              		.loc 1 127 21 is_stmt 0 view .LVU91
 551 0038 9DF81E00 		ldrb	r0, [sp, #30]	@ zero_extendqisi2
 552              	.LVL33:
 553              		.loc 1 127 8 view .LVU92
 554 003c 10F00100 		ands	r0, r0, #1
 555 0040 06D1     		bne	.L36
 556              	.L32:
 128:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Busy;
 129:Device/Dev_W25Qxx.c **** 
 130:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 131:Device/Dev_W25Qxx.c **** }
 557              		.loc 1 131 1 view .LVU93
 558 0042 09B0     		add	sp, sp, #36
 559              	.LCFI34:
 560              		.cfi_remember_state
 561              		.cfi_def_cfa_offset 20
 562              		@ sp needed
 563 0044 5DF804EB 		ldr	lr, [sp], #4
 564              	.LCFI35:
 565              		.cfi_restore 14
 566              		.cfi_def_cfa_offset 16
 567 0048 04B0     		add	sp, sp, #16
 568              	.LCFI36:
 569              		.cfi_def_cfa_offset 0
 570 004a 7047     		bx	lr
 571              	.LVL34:
 572              	.L33:
 573              	.LCFI37:
 574              		.cfi_restore_state
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 14


 124:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 575              		.loc 1 124 16 view .LVU94
 576 004c 0120     		movs	r0, #1
 577              	.LVL35:
 124:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 578              		.loc 1 124 16 view .LVU95
 579 004e F8E7     		b	.L32
 580              	.L36:
 128:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Busy;
 581              		.loc 1 128 16 view .LVU96
 582 0050 0220     		movs	r0, #2
 583 0052 F6E7     		b	.L32
 584              		.cfi_endproc
 585              	.LFE150:
 587              		.section	.text.DevW25Qxx_WriteEnable,"ax",%progbits
 588              		.align	1
 589              		.syntax unified
 590              		.thumb
 591              		.thumb_func
 592              		.fpu fpv5-d16
 594              	DevW25Qxx_WriteEnable:
 595              	.LFB151:
 132:Device/Dev_W25Qxx.c **** 
 133:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_WriteEnable(DevW25QxxObj_TypeDef dev)
 134:Device/Dev_W25Qxx.c **** {
 596              		.loc 1 134 1 is_stmt 1 view -0
 597              		.cfi_startproc
 598              		@ args = 24, pretend = 16, frame = 8
 599              		@ frame_needed = 0, uses_anonymous_args = 0
 600 0000 84B0     		sub	sp, sp, #16
 601              	.LCFI38:
 602              		.cfi_def_cfa_offset 16
 603 0002 30B5     		push	{r4, r5, lr}
 604              	.LCFI39:
 605              		.cfi_def_cfa_offset 28
 606              		.cfi_offset 4, -28
 607              		.cfi_offset 5, -24
 608              		.cfi_offset 14, -20
 609 0004 87B0     		sub	sp, sp, #28
 610              	.LCFI40:
 611              		.cfi_def_cfa_offset 56
 612 0006 0AAC     		add	r4, sp, #40
 613 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
 135:Device/Dev_W25Qxx.c ****     uint8_t cmd = WRITE_ENABLE_CMD;
 614              		.loc 1 135 5 view .LVU98
 615              		.loc 1 135 13 is_stmt 0 view .LVU99
 616 000c 0623     		movs	r3, #6
 617 000e 8DF81730 		strb	r3, [sp, #23]
 136:Device/Dev_W25Qxx.c ****     uint32_t tickstart = dev.systick();
 618              		.loc 1 136 5 is_stmt 1 view .LVU100
 619              		.loc 1 136 29 is_stmt 0 view .LVU101
 620 0012 DDF83950 		ldr	r5, [sp, #57]	@ unaligned
 621              		.loc 1 136 26 view .LVU102
 622 0016 A847     		blx	r5
 623              	.LVL36:
 624 0018 0446     		mov	r4, r0
 625              	.LVL37:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 15


 137:Device/Dev_W25Qxx.c ****     bool trans_state = false;
 626              		.loc 1 137 5 is_stmt 1 view .LVU103
 138:Device/Dev_W25Qxx.c **** 
 139:Device/Dev_W25Qxx.c ****     /* Send the read ID command */
 140:Device/Dev_W25Qxx.c ****     trans_state = DevW25Qxx_BusTrans(dev, &cmd, sizeof(cmd));
 627              		.loc 1 140 5 view .LVU104
 628              		.loc 1 140 19 is_stmt 0 view .LVU105
 629 001a 0123     		movs	r3, #1
 630 001c 0393     		str	r3, [sp, #12]
 631 001e 0DF11703 		add	r3, sp, #23
 632 0022 0293     		str	r3, [sp, #8]
 633 0024 0F99     		ldr	r1, [sp, #60]
 634 0026 0E98     		ldr	r0, [sp, #56]
 635              	.LVL38:
 636              		.loc 1 140 19 view .LVU106
 637 0028 0090     		str	r0, [sp]
 638 002a 8DF80410 		strb	r1, [sp, #4]
 639 002e 0AAB     		add	r3, sp, #40
 640 0030 0FCB     		ldm	r3, {r0, r1, r2, r3}
 641 0032 FFF7FEFF 		bl	DevW25Qxx_BusTrans
 642              	.LVL39:
 141:Device/Dev_W25Qxx.c **** 
 142:Device/Dev_W25Qxx.c ****     if (!trans_state)
 643              		.loc 1 142 5 is_stmt 1 view .LVU107
 644              		.loc 1 142 8 is_stmt 0 view .LVU108
 645 0036 88B1     		cbz	r0, .L43
 646              	.LVL40:
 647              	.L38:
 143:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 144:Device/Dev_W25Qxx.c **** 
 145:Device/Dev_W25Qxx.c ****     /* Wait the end of Flash writing */
 146:Device/Dev_W25Qxx.c ****     while (DevW25Qxx_GetStatue(dev) == DevW25Qxx_Busy)
 648              		.loc 1 146 11 is_stmt 1 view .LVU109
 649              		.loc 1 146 12 is_stmt 0 view .LVU110
 650 0038 0F99     		ldr	r1, [sp, #60]
 651 003a 0E98     		ldr	r0, [sp, #56]
 652 003c 0090     		str	r0, [sp]
 653 003e 8DF80410 		strb	r1, [sp, #4]
 654 0042 0AAB     		add	r3, sp, #40
 655 0044 0FCB     		ldm	r3, {r0, r1, r2, r3}
 656 0046 FFF7FEFF 		bl	DevW25Qxx_GetStatue
 657              	.LVL41:
 658              		.loc 1 146 11 view .LVU111
 659 004a 0228     		cmp	r0, #2
 660 004c 0CD1     		bne	.L44
 147:Device/Dev_W25Qxx.c ****     {
 148:Device/Dev_W25Qxx.c ****         /* Check for the Timeout */
 149:Device/Dev_W25Qxx.c ****         if ((dev.systick() - tickstart) > W25Qx_TIMEOUT_VALUE)
 661              		.loc 1 149 9 is_stmt 1 view .LVU112
 662              		.loc 1 149 14 is_stmt 0 view .LVU113
 663 004e A847     		blx	r5
 664              	.LVL42:
 665              		.loc 1 149 28 view .LVU114
 666 0050 001B     		subs	r0, r0, r4
 667              		.loc 1 149 12 view .LVU115
 668 0052 B0F57A7F 		cmp	r0, #1000
 669 0056 EFD9     		bls	.L38
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 16


 150:Device/Dev_W25Qxx.c ****             return DevW25Qxx_TimeOut;
 670              		.loc 1 150 20 view .LVU116
 671 0058 0320     		movs	r0, #3
 672 005a 00E0     		b	.L39
 673              	.LVL43:
 674              	.L43:
 143:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 675              		.loc 1 143 16 view .LVU117
 676 005c 0120     		movs	r0, #1
 677              	.LVL44:
 678              	.L39:
 151:Device/Dev_W25Qxx.c ****     }
 152:Device/Dev_W25Qxx.c **** 
 153:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 154:Device/Dev_W25Qxx.c **** }
 679              		.loc 1 154 1 view .LVU118
 680 005e 07B0     		add	sp, sp, #28
 681              	.LCFI41:
 682              		.cfi_remember_state
 683              		.cfi_def_cfa_offset 28
 684              		@ sp needed
 685 0060 BDE83040 		pop	{r4, r5, lr}
 686              	.LCFI42:
 687              		.cfi_restore 14
 688              		.cfi_restore 5
 689              		.cfi_restore 4
 690              		.cfi_def_cfa_offset 16
 691              	.LVL45:
 692              		.loc 1 154 1 view .LVU119
 693 0064 04B0     		add	sp, sp, #16
 694              	.LCFI43:
 695              		.cfi_def_cfa_offset 0
 696 0066 7047     		bx	lr
 697              	.LVL46:
 698              	.L44:
 699              	.LCFI44:
 700              		.cfi_restore_state
 153:Device/Dev_W25Qxx.c **** }
 701              		.loc 1 153 12 view .LVU120
 702 0068 0020     		movs	r0, #0
 703 006a F8E7     		b	.L39
 704              		.cfi_endproc
 705              	.LFE151:
 707              		.section	.text.DevW25Qxx_Init,"ax",%progbits
 708              		.align	1
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 712              		.fpu fpv5-d16
 714              	DevW25Qxx_Init:
 715              	.LFB152:
 155:Device/Dev_W25Qxx.c **** 
 156:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Init(DevW25QxxObj_TypeDef dev, DevW25QxxPin_Config_TypeDef De
 157:Device/Dev_W25Qxx.c **** {
 716              		.loc 1 157 1 is_stmt 1 view -0
 717              		.cfi_startproc
 718              		@ args = 52, pretend = 16, frame = 48
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 17


 719              		@ frame_needed = 0, uses_anonymous_args = 0
 720 0000 84B0     		sub	sp, sp, #16
 721              	.LCFI45:
 722              		.cfi_def_cfa_offset 16
 723 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 724              	.LCFI46:
 725              		.cfi_def_cfa_offset 40
 726              		.cfi_offset 4, -40
 727              		.cfi_offset 5, -36
 728              		.cfi_offset 6, -32
 729              		.cfi_offset 7, -28
 730              		.cfi_offset 8, -24
 731              		.cfi_offset 14, -20
 732 0006 94B0     		sub	sp, sp, #80
 733              	.LCFI47:
 734              		.cfi_def_cfa_offset 120
 735 0008 1AAC     		add	r4, sp, #104
 736 000a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 158:Device/Dev_W25Qxx.c ****     if ((dev.CSPin.init == NULL) ||
 737              		.loc 1 158 5 view .LVU122
 738              		.loc 1 158 19 is_stmt 0 view .LVU123
 739 000e DDF87140 		ldr	r4, [sp, #113]	@ unaligned
 740              		.loc 1 158 8 view .LVU124
 741 0012 002C     		cmp	r4, #0
 742 0014 5BD0     		beq	.L51
 159:Device/Dev_W25Qxx.c ****         (dev.CSPin.ctl == NULL) ||
 743              		.loc 1 159 19 discriminator 1 view .LVU125
 744 0016 DDF87530 		ldr	r3, [sp, #117]	@ unaligned
 158:Device/Dev_W25Qxx.c ****     if ((dev.CSPin.init == NULL) ||
 745              		.loc 1 158 34 discriminator 1 view .LVU126
 746 001a 002B     		cmp	r3, #0
 747 001c 59D0     		beq	.L52
 160:Device/Dev_W25Qxx.c ****         (dev.BusPort == NULL))
 748              		.loc 1 160 13 view .LVU127
 749 001e DDF86D30 		ldr	r3, [sp, #109]	@ unaligned
 159:Device/Dev_W25Qxx.c ****         (dev.CSPin.ctl == NULL) ||
 750              		.loc 1 159 33 view .LVU128
 751 0022 002B     		cmp	r3, #0
 752 0024 57D0     		beq	.L53
 161:Device/Dev_W25Qxx.c ****         return false;
 162:Device/Dev_W25Qxx.c **** 
 163:Device/Dev_W25Qxx.c ****     if (dev.bus_instance == DevW25Qxx_Norm_SpiBus)
 753              		.loc 1 163 5 is_stmt 1 view .LVU129
 754              		.loc 1 163 12 is_stmt 0 view .LVU130
 755 0026 DDF86970 		ldr	r7, [sp, #105]	@ unaligned
 756              		.loc 1 163 8 view .LVU131
 757 002a 8FB1     		cbz	r7, .L55
 758              	.L47:
 164:Device/Dev_W25Qxx.c ****     {
 165:Device/Dev_W25Qxx.c ****         BspSPI_NorModeConfig_TypeDef BspSPI_NorCfg = DevW25QxxSPI_Cfg;
 166:Device/Dev_W25Qxx.c ****         BspSPI_NorCfg.Pin = DevPin;
 167:Device/Dev_W25Qxx.c **** 
 168:Device/Dev_W25Qxx.c ****         if ((DevW25Qxx_GetSspiInstance(dev)->trans == NULL) ||
 169:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 170:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->trans_receive == NULL))
 171:Device/Dev_W25Qxx.c ****             return DevW25Qxx_Error;
 172:Device/Dev_W25Qxx.c **** 
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 18


 173:Device/Dev_W25Qxx.c ****         DevW25Qxx_GetSspiInstance(dev)->init(BspSPI_NorCfg, dev.bus_instance);
 174:Device/Dev_W25Qxx.c ****     }
 175:Device/Dev_W25Qxx.c **** 
 176:Device/Dev_W25Qxx.c ****     dev.CSPin.init();
 759              		.loc 1 176 5 is_stmt 1 view .LVU132
 760 002c A047     		blx	r4
 761              	.LVL47:
 177:Device/Dev_W25Qxx.c **** 
 178:Device/Dev_W25Qxx.c ****     /* Reset W25Qxxx */
 179:Device/Dev_W25Qxx.c ****     if ((DevW25Qxx_Reset(dev) != DevW25Qxx_Ok) ||
 762              		.loc 1 179 5 view .LVU133
 763              		.loc 1 179 10 is_stmt 0 view .LVU134
 764 002e 1F99     		ldr	r1, [sp, #124]
 765 0030 1E98     		ldr	r0, [sp, #120]
 766 0032 0090     		str	r0, [sp]
 767 0034 8DF80410 		strb	r1, [sp, #4]
 768 0038 1AAB     		add	r3, sp, #104
 769 003a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 770 003c FFF7FEFF 		bl	DevW25Qxx_Reset
 771              	.LVL48:
 772              		.loc 1 179 8 view .LVU135
 773 0040 0028     		cmp	r0, #0
 774 0042 38D0     		beq	.L56
 775              	.L50:
 180:Device/Dev_W25Qxx.c ****         (DevW25Qxx_GetStatue(dev) != DevW25Qxx_Ok))
 181:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 776              		.loc 1 181 9 is_stmt 1 view .LVU136
 777              		.loc 1 181 16 is_stmt 0 view .LVU137
 778 0044 0120     		movs	r0, #1
 779              	.L46:
 182:Device/Dev_W25Qxx.c **** 
 183:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 184:Device/Dev_W25Qxx.c **** }
 780              		.loc 1 184 1 view .LVU138
 781 0046 14B0     		add	sp, sp, #80
 782              	.LCFI48:
 783              		.cfi_remember_state
 784              		.cfi_def_cfa_offset 40
 785              		@ sp needed
 786 0048 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 787              	.LCFI49:
 788              		.cfi_restore 14
 789              		.cfi_restore 8
 790              		.cfi_restore 7
 791              		.cfi_restore 6
 792              		.cfi_restore 5
 793              		.cfi_restore 4
 794              		.cfi_def_cfa_offset 16
 795 004c 04B0     		add	sp, sp, #16
 796              	.LCFI50:
 797              		.cfi_def_cfa_offset 0
 798 004e 7047     		bx	lr
 799              	.L55:
 800              	.LCFI51:
 801              		.cfi_restore_state
 802              	.LBB2:
 165:Device/Dev_W25Qxx.c ****         BspSPI_NorCfg.Pin = DevPin;
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 19


 803              		.loc 1 165 9 is_stmt 1 view .LVU139
 165:Device/Dev_W25Qxx.c ****         BspSPI_NorCfg.Pin = DevPin;
 804              		.loc 1 165 38 is_stmt 0 view .LVU140
 805 0050 0023     		movs	r3, #0
 806 0052 1093     		str	r3, [sp, #64]
 807 0054 4FF00073 		mov	r3, #33554432
 808 0058 1193     		str	r3, [sp, #68]
 809 005a 4FF08073 		mov	r3, #16777216
 810 005e 1293     		str	r3, [sp, #72]
 811 0060 4FF0C043 		mov	r3, #1610612736
 812 0064 1393     		str	r3, [sp, #76]
 166:Device/Dev_W25Qxx.c **** 
 813              		.loc 1 166 9 is_stmt 1 view .LVU141
 166:Device/Dev_W25Qxx.c **** 
 814              		.loc 1 166 27 is_stmt 0 view .LVU142
 815 0066 09AD     		add	r5, sp, #36
 816 0068 20AE     		add	r6, sp, #128
 817 006a 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 818 006c 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 819 006e 96E80700 		ldm	r6, {r0, r1, r2}
 820 0072 85E80700 		stm	r5, {r0, r1, r2}
 168:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 821              		.loc 1 168 9 is_stmt 1 view .LVU143
 168:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 822              		.loc 1 168 14 is_stmt 0 view .LVU144
 823 0076 1F99     		ldr	r1, [sp, #124]
 824 0078 1E98     		ldr	r0, [sp, #120]
 825 007a 0090     		str	r0, [sp]
 826 007c 8DF80410 		strb	r1, [sp, #4]
 827 0080 1AAB     		add	r3, sp, #104
 828 0082 0FCB     		ldm	r3, {r0, r1, r2, r3}
 829 0084 FFF7FEFF 		bl	DevW25Qxx_GetSspiInstance
 830              	.LVL49:
 168:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 831              		.loc 1 168 44 view .LVU145
 832 0088 8368     		ldr	r3, [r0, #8]
 168:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 833              		.loc 1 168 12 view .LVU146
 834 008a 93B1     		cbz	r3, .L48
 169:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->trans_receive == NULL))
 835              		.loc 1 169 44 discriminator 1 view .LVU147
 836 008c C368     		ldr	r3, [r0, #12]
 168:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->receive == NULL) ||
 837              		.loc 1 168 61 discriminator 1 view .LVU148
 838 008e 83B1     		cbz	r3, .L48
 170:Device/Dev_W25Qxx.c ****             return DevW25Qxx_Error;
 839              		.loc 1 170 44 view .LVU149
 840 0090 0369     		ldr	r3, [r0, #16]
 169:Device/Dev_W25Qxx.c ****             (DevW25Qxx_GetSspiInstance(dev)->trans_receive == NULL))
 841              		.loc 1 169 63 view .LVU150
 842 0092 73B1     		cbz	r3, .L48
 173:Device/Dev_W25Qxx.c ****     }
 843              		.loc 1 173 9 is_stmt 1 view .LVU151
 173:Device/Dev_W25Qxx.c ****     }
 844              		.loc 1 173 39 is_stmt 0 view .LVU152
 845 0094 D0F80080 		ldr	r8, [r0]
 173:Device/Dev_W25Qxx.c ****     }
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 20


 846              		.loc 1 173 9 view .LVU153
 847 0098 0797     		str	r7, [sp, #28]
 848 009a 6D46     		mov	r5, sp
 849 009c 0DAE     		add	r6, sp, #52
 850 009e 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 851 00a0 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 852 00a2 96E80700 		ldm	r6, {r0, r1, r2}
 853 00a6 85E80700 		stm	r5, {r0, r1, r2}
 854 00aa 09AB     		add	r3, sp, #36
 855 00ac 0FCB     		ldm	r3, {r0, r1, r2, r3}
 856 00ae C047     		blx	r8
 857              	.LVL50:
 858 00b0 BCE7     		b	.L47
 859              	.L48:
 171:Device/Dev_W25Qxx.c **** 
 860              		.loc 1 171 13 is_stmt 1 view .LVU154
 171:Device/Dev_W25Qxx.c **** 
 861              		.loc 1 171 20 is_stmt 0 view .LVU155
 862 00b2 0120     		movs	r0, #1
 863 00b4 C7E7     		b	.L46
 864              	.L56:
 865              	.LBE2:
 180:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 866              		.loc 1 180 10 discriminator 1 view .LVU156
 867 00b6 1F99     		ldr	r1, [sp, #124]
 868 00b8 1E98     		ldr	r0, [sp, #120]
 869 00ba 0090     		str	r0, [sp]
 870 00bc 8DF80410 		strb	r1, [sp, #4]
 871 00c0 1AAB     		add	r3, sp, #104
 872 00c2 0FCB     		ldm	r3, {r0, r1, r2, r3}
 873 00c4 FFF7FEFF 		bl	DevW25Qxx_GetStatue
 874              	.LVL51:
 179:Device/Dev_W25Qxx.c ****         (DevW25Qxx_GetStatue(dev) != DevW25Qxx_Ok))
 875              		.loc 1 179 48 discriminator 1 view .LVU157
 876 00c8 0028     		cmp	r0, #0
 877 00ca BCD0     		beq	.L46
 878 00cc BAE7     		b	.L50
 879              	.L51:
 161:Device/Dev_W25Qxx.c **** 
 880              		.loc 1 161 16 view .LVU158
 881 00ce 0020     		movs	r0, #0
 882 00d0 B9E7     		b	.L46
 883              	.L52:
 884 00d2 0020     		movs	r0, #0
 885 00d4 B7E7     		b	.L46
 886              	.L53:
 887 00d6 0020     		movs	r0, #0
 888 00d8 B5E7     		b	.L46
 889              		.cfi_endproc
 890              	.LFE152:
 892              		.section	.text.DevW25Qxx_Read,"ax",%progbits
 893              		.align	1
 894              		.syntax unified
 895              		.thumb
 896              		.thumb_func
 897              		.fpu fpv5-d16
 899              	DevW25Qxx_Read:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 21


 900              	.LVL52:
 901              	.LFB153:
 185:Device/Dev_W25Qxx.c **** 
 186:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Read(DevW25QxxObj_TypeDef dev, uint32_t ReadAddr, uint32_t *p
 187:Device/Dev_W25Qxx.c **** {
 902              		.loc 1 187 1 is_stmt 1 view -0
 903              		.cfi_startproc
 904              		@ args = 36, pretend = 16, frame = 8
 905              		@ frame_needed = 0, uses_anonymous_args = 0
 906              		.loc 1 187 1 is_stmt 0 view .LVU160
 907 0000 84B0     		sub	sp, sp, #16
 908              	.LCFI52:
 909              		.cfi_def_cfa_offset 16
 910 0002 00B5     		push	{lr}
 911              	.LCFI53:
 912              		.cfi_def_cfa_offset 20
 913              		.cfi_offset 14, -20
 914 0004 87B0     		sub	sp, sp, #28
 915              	.LCFI54:
 916              		.cfi_def_cfa_offset 48
 917 0006 0DF1200C 		add	ip, sp, #32
 918 000a 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 919 000e 0E9B     		ldr	r3, [sp, #56]
 188:Device/Dev_W25Qxx.c ****     uint8_t cmd[4];
 920              		.loc 1 188 5 is_stmt 1 view .LVU161
 189:Device/Dev_W25Qxx.c **** 
 190:Device/Dev_W25Qxx.c ****     /* Configure the command */
 191:Device/Dev_W25Qxx.c ****     cmd[0] = READ_CMD;
 921              		.loc 1 191 5 view .LVU162
 922              		.loc 1 191 12 is_stmt 0 view .LVU163
 923 0010 0322     		movs	r2, #3
 924 0012 8DF81420 		strb	r2, [sp, #20]
 192:Device/Dev_W25Qxx.c ****     cmd[1] = (uint8_t)(ReadAddr >> 16);
 925              		.loc 1 192 5 is_stmt 1 view .LVU164
 926              		.loc 1 192 14 is_stmt 0 view .LVU165
 927 0016 C3F30742 		ubfx	r2, r3, #16, #8
 928              		.loc 1 192 12 view .LVU166
 929 001a 8DF81520 		strb	r2, [sp, #21]
 193:Device/Dev_W25Qxx.c ****     cmd[2] = (uint8_t)(ReadAddr >> 8);
 930              		.loc 1 193 5 is_stmt 1 view .LVU167
 931              		.loc 1 193 14 is_stmt 0 view .LVU168
 932 001e C3F30722 		ubfx	r2, r3, #8, #8
 933              		.loc 1 193 12 view .LVU169
 934 0022 8DF81620 		strb	r2, [sp, #22]
 194:Device/Dev_W25Qxx.c ****     cmd[3] = (uint8_t)(ReadAddr);
 935              		.loc 1 194 5 is_stmt 1 view .LVU170
 936              		.loc 1 194 12 is_stmt 0 view .LVU171
 937 0026 8DF81730 		strb	r3, [sp, #23]
 195:Device/Dev_W25Qxx.c **** 
 196:Device/Dev_W25Qxx.c ****     if (!DevW25Qxx_BusTrans(dev, cmd, sizeof(cmd)) || !DevW25Qxx_BusReceive(dev, pData, Size))
 938              		.loc 1 196 5 is_stmt 1 view .LVU172
 939              		.loc 1 196 10 is_stmt 0 view .LVU173
 940 002a 0423     		movs	r3, #4
 941 002c 0393     		str	r3, [sp, #12]
 942 002e 05AB     		add	r3, sp, #20
 943 0030 0293     		str	r3, [sp, #8]
 944 0032 0D99     		ldr	r1, [sp, #52]
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 22


 945 0034 0C98     		ldr	r0, [sp, #48]
 946 0036 0090     		str	r0, [sp]
 947 0038 8DF80410 		strb	r1, [sp, #4]
 948 003c 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 949 0040 FFF7FEFF 		bl	DevW25Qxx_BusTrans
 950              	.LVL53:
 951              		.loc 1 196 8 view .LVU174
 952 0044 28B9     		cbnz	r0, .L62
 953              	.L58:
 197:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 954              		.loc 1 197 9 is_stmt 1 view .LVU175
 955              		.loc 1 197 16 is_stmt 0 view .LVU176
 956 0046 0120     		movs	r0, #1
 957              	.L59:
 198:Device/Dev_W25Qxx.c **** 
 199:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 200:Device/Dev_W25Qxx.c **** }
 958              		.loc 1 200 1 view .LVU177
 959 0048 07B0     		add	sp, sp, #28
 960              	.LCFI55:
 961              		.cfi_remember_state
 962              		.cfi_def_cfa_offset 20
 963              		@ sp needed
 964 004a 5DF804EB 		ldr	lr, [sp], #4
 965              	.LCFI56:
 966              		.cfi_restore 14
 967              		.cfi_def_cfa_offset 16
 968 004e 04B0     		add	sp, sp, #16
 969              	.LCFI57:
 970              		.cfi_def_cfa_offset 0
 971 0050 7047     		bx	lr
 972              	.L62:
 973              	.LCFI58:
 974              		.cfi_restore_state
 196:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 975              		.loc 1 196 56 discriminator 1 view .LVU178
 976 0052 BDF84030 		ldrh	r3, [sp, #64]
 977 0056 0393     		str	r3, [sp, #12]
 978 0058 0F9B     		ldr	r3, [sp, #60]
 979 005a 0293     		str	r3, [sp, #8]
 980 005c 0D99     		ldr	r1, [sp, #52]
 981 005e 0C98     		ldr	r0, [sp, #48]
 982 0060 0090     		str	r0, [sp]
 983 0062 8DF80410 		strb	r1, [sp, #4]
 984 0066 08AB     		add	r3, sp, #32
 985 0068 0FCB     		ldm	r3, {r0, r1, r2, r3}
 986 006a FFF7FEFF 		bl	DevW25Qxx_BusReceive
 987              	.LVL54:
 196:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 988              		.loc 1 196 52 discriminator 1 view .LVU179
 989 006e 0028     		cmp	r0, #0
 990 0070 E9D0     		beq	.L58
 199:Device/Dev_W25Qxx.c **** }
 991              		.loc 1 199 12 view .LVU180
 992 0072 0020     		movs	r0, #0
 993 0074 E8E7     		b	.L59
 994              		.cfi_endproc
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 23


 995              	.LFE153:
 997              		.section	.text.DevW25Qxx_Write,"ax",%progbits
 998              		.align	1
 999              		.syntax unified
 1000              		.thumb
 1001              		.thumb_func
 1002              		.fpu fpv5-d16
 1004              	DevW25Qxx_Write:
 1005              	.LVL55:
 1006              	.LFB154:
 201:Device/Dev_W25Qxx.c **** 
 202:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_Write(DevW25QxxObj_TypeDef dev, uint32_t WriteAddr, uint8_t *
 203:Device/Dev_W25Qxx.c **** {
 1007              		.loc 1 203 1 is_stmt 1 view -0
 1008              		.cfi_startproc
 1009              		@ args = 36, pretend = 16, frame = 8
 1010              		@ frame_needed = 0, uses_anonymous_args = 0
 1011              		.loc 1 203 1 is_stmt 0 view .LVU182
 1012 0000 84B0     		sub	sp, sp, #16
 1013              	.LCFI59:
 1014              		.cfi_def_cfa_offset 16
 1015 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1016              	.LCFI60:
 1017              		.cfi_def_cfa_offset 48
 1018              		.cfi_offset 4, -48
 1019              		.cfi_offset 5, -44
 1020              		.cfi_offset 6, -40
 1021              		.cfi_offset 7, -36
 1022              		.cfi_offset 8, -32
 1023              		.cfi_offset 9, -28
 1024              		.cfi_offset 10, -24
 1025              		.cfi_offset 14, -20
 1026 0006 86B0     		sub	sp, sp, #24
 1027              	.LCFI61:
 1028              		.cfi_def_cfa_offset 72
 1029 0008 0EAC     		add	r4, sp, #56
 1030 000a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 1031 000e 149D     		ldr	r5, [sp, #80]
 1032 0010 DDF85490 		ldr	r9, [sp, #84]
 1033 0014 DDF85880 		ldr	r8, [sp, #88]
 204:Device/Dev_W25Qxx.c ****     uint8_t cmd[4];
 1034              		.loc 1 204 5 is_stmt 1 view .LVU183
 205:Device/Dev_W25Qxx.c ****     uint32_t end_addr, current_size, current_addr;
 1035              		.loc 1 205 5 view .LVU184
 206:Device/Dev_W25Qxx.c ****     uint32_t tickstart = dev.systick();
 1036              		.loc 1 206 5 view .LVU185
 1037              		.loc 1 206 29 is_stmt 0 view .LVU186
 1038 0018 DDF84970 		ldr	r7, [sp, #73]	@ unaligned
 1039              		.loc 1 206 26 view .LVU187
 1040 001c B847     		blx	r7
 1041              	.LVL56:
 1042 001e 0646     		mov	r6, r0
 1043              	.LVL57:
 207:Device/Dev_W25Qxx.c **** 
 208:Device/Dev_W25Qxx.c ****     /* Calculation of the size between the write address and the end of the page */
 209:Device/Dev_W25Qxx.c ****     current_addr = 0;
 1044              		.loc 1 209 5 is_stmt 1 view .LVU188
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 24


 210:Device/Dev_W25Qxx.c **** 
 211:Device/Dev_W25Qxx.c ****     while (current_addr <= WriteAddr)
 1045              		.loc 1 211 5 view .LVU189
 209:Device/Dev_W25Qxx.c **** 
 1046              		.loc 1 209 18 is_stmt 0 view .LVU190
 1047 0020 0024     		movs	r4, #0
 1048              	.LVL58:
 1049              	.L64:
 1050              		.loc 1 211 11 is_stmt 1 view .LVU191
 1051 0022 AC42     		cmp	r4, r5
 1052 0024 02D8     		bhi	.L78
 212:Device/Dev_W25Qxx.c ****     {
 213:Device/Dev_W25Qxx.c ****         current_addr += W25Q128FV_PAGE_SIZE;
 1053              		.loc 1 213 9 view .LVU192
 1054              		.loc 1 213 22 is_stmt 0 view .LVU193
 1055 0026 04F58074 		add	r4, r4, #256
 1056              	.LVL59:
 1057              		.loc 1 213 22 view .LVU194
 1058 002a FAE7     		b	.L64
 1059              	.L78:
 214:Device/Dev_W25Qxx.c ****     }
 215:Device/Dev_W25Qxx.c ****     current_size = current_addr - WriteAddr;
 1060              		.loc 1 215 5 is_stmt 1 view .LVU195
 1061              		.loc 1 215 18 is_stmt 0 view .LVU196
 1062 002c 641B     		subs	r4, r4, r5
 1063              	.LVL60:
 216:Device/Dev_W25Qxx.c **** 
 217:Device/Dev_W25Qxx.c ****     /* Check if the size of the data is less than the remaining place in the page */
 218:Device/Dev_W25Qxx.c ****     if (current_size > Size)
 1064              		.loc 1 218 5 is_stmt 1 view .LVU197
 1065              		.loc 1 218 8 is_stmt 0 view .LVU198
 1066 002e 4445     		cmp	r4, r8
 1067 0030 00D9     		bls	.L66
 219:Device/Dev_W25Qxx.c ****     {
 220:Device/Dev_W25Qxx.c ****         current_size = Size;
 1068              		.loc 1 220 22 view .LVU199
 1069 0032 4446     		mov	r4, r8
 1070              	.LVL61:
 1071              	.L66:
 221:Device/Dev_W25Qxx.c ****     }
 222:Device/Dev_W25Qxx.c **** 
 223:Device/Dev_W25Qxx.c ****     /* Initialize the adress variables */
 224:Device/Dev_W25Qxx.c ****     current_addr = WriteAddr;
 1072              		.loc 1 224 5 is_stmt 1 view .LVU200
 225:Device/Dev_W25Qxx.c ****     end_addr = WriteAddr + Size;
 1073              		.loc 1 225 5 view .LVU201
 1074              		.loc 1 225 14 is_stmt 0 view .LVU202
 1075 0034 A844     		add	r8, r8, r5
 1076              	.LVL62:
 1077              	.L72:
 226:Device/Dev_W25Qxx.c **** 
 227:Device/Dev_W25Qxx.c ****     /* Perform the write page by page */
 228:Device/Dev_W25Qxx.c ****     do
 1078              		.loc 1 228 5 is_stmt 1 view .LVU203
 229:Device/Dev_W25Qxx.c ****     {
 230:Device/Dev_W25Qxx.c ****         /* Configure the command */
 231:Device/Dev_W25Qxx.c ****         cmd[0] = PAGE_PROG_CMD;
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 25


 1079              		.loc 1 231 9 view .LVU204
 1080              		.loc 1 231 16 is_stmt 0 view .LVU205
 1081 0036 0223     		movs	r3, #2
 1082 0038 8DF81430 		strb	r3, [sp, #20]
 232:Device/Dev_W25Qxx.c ****         cmd[1] = (uint8_t)(current_addr >> 16);
 1083              		.loc 1 232 9 is_stmt 1 view .LVU206
 1084              		.loc 1 232 18 is_stmt 0 view .LVU207
 1085 003c C5F30743 		ubfx	r3, r5, #16, #8
 1086              		.loc 1 232 16 view .LVU208
 1087 0040 8DF81530 		strb	r3, [sp, #21]
 233:Device/Dev_W25Qxx.c ****         cmd[2] = (uint8_t)(current_addr >> 8);
 1088              		.loc 1 233 9 is_stmt 1 view .LVU209
 1089              		.loc 1 233 18 is_stmt 0 view .LVU210
 1090 0044 C5F30723 		ubfx	r3, r5, #8, #8
 1091              		.loc 1 233 16 view .LVU211
 1092 0048 8DF81630 		strb	r3, [sp, #22]
 234:Device/Dev_W25Qxx.c ****         cmd[3] = (uint8_t)(current_addr);
 1093              		.loc 1 234 9 is_stmt 1 view .LVU212
 1094              		.loc 1 234 16 is_stmt 0 view .LVU213
 1095 004c 8DF81750 		strb	r5, [sp, #23]
 235:Device/Dev_W25Qxx.c **** 
 236:Device/Dev_W25Qxx.c ****         /* Enable write operations */
 237:Device/Dev_W25Qxx.c ****         if (DevW25Qxx_WriteEnable(dev) != DevW25Qxx_Ok)
 1096              		.loc 1 237 9 is_stmt 1 view .LVU214
 1097              		.loc 1 237 13 is_stmt 0 view .LVU215
 1098 0050 1399     		ldr	r1, [sp, #76]
 1099 0052 1298     		ldr	r0, [sp, #72]
 1100 0054 0090     		str	r0, [sp]
 1101 0056 8DF80410 		strb	r1, [sp, #4]
 1102 005a 0EAB     		add	r3, sp, #56
 1103 005c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1104 005e FFF7FEFF 		bl	DevW25Qxx_WriteEnable
 1105              	.LVL63:
 1106              		.loc 1 237 12 view .LVU216
 1107 0062 8246     		mov	r10, r0
 1108 0064 0028     		cmp	r0, #0
 1109 0066 44D1     		bne	.L74
 238:Device/Dev_W25Qxx.c ****             return DevW25Qxx_Error;
 239:Device/Dev_W25Qxx.c **** 
 240:Device/Dev_W25Qxx.c ****         /* Send the command Transmission of the data */
 241:Device/Dev_W25Qxx.c ****         if (DevW25Qxx_BusTrans(dev, cmd, sizeof(cmd)) || DevW25Qxx_BusTrans(dev, pData, current_siz
 1110              		.loc 1 241 9 is_stmt 1 view .LVU217
 1111              		.loc 1 241 13 is_stmt 0 view .LVU218
 1112 0068 0423     		movs	r3, #4
 1113 006a 0393     		str	r3, [sp, #12]
 1114 006c 05AB     		add	r3, sp, #20
 1115 006e 0293     		str	r3, [sp, #8]
 1116 0070 1399     		ldr	r1, [sp, #76]
 1117 0072 1298     		ldr	r0, [sp, #72]
 1118 0074 0090     		str	r0, [sp]
 1119 0076 8DF80410 		strb	r1, [sp, #4]
 1120 007a 0EAB     		add	r3, sp, #56
 1121 007c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1122 007e FFF7FEFF 		bl	DevW25Qxx_BusTrans
 1123              	.LVL64:
 1124              		.loc 1 241 12 view .LVU219
 1125 0082 28BB     		cbnz	r0, .L68
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 26


 1126              		.loc 1 241 58 discriminator 1 view .LVU220
 1127 0084 A3B2     		uxth	r3, r4
 1128 0086 0393     		str	r3, [sp, #12]
 1129 0088 CDF80890 		str	r9, [sp, #8]
 1130 008c 1399     		ldr	r1, [sp, #76]
 1131 008e 1298     		ldr	r0, [sp, #72]
 1132 0090 0090     		str	r0, [sp]
 1133 0092 8DF80410 		strb	r1, [sp, #4]
 1134 0096 0EAB     		add	r3, sp, #56
 1135 0098 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1136 009a FFF7FEFF 		bl	DevW25Qxx_BusTrans
 1137              	.LVL65:
 1138              		.loc 1 241 55 discriminator 1 view .LVU221
 1139 009e B8B9     		cbnz	r0, .L68
 1140              	.LVL66:
 1141              	.L69:
 242:Device/Dev_W25Qxx.c ****             return DevW25Qxx_Error;
 243:Device/Dev_W25Qxx.c **** 
 244:Device/Dev_W25Qxx.c ****         /* Wait the end of Flash writing */
 245:Device/Dev_W25Qxx.c ****         while (DevW25Qxx_GetStatue(dev) == DevW25Qxx_Busy)
 1142              		.loc 1 245 15 is_stmt 1 view .LVU222
 1143              		.loc 1 245 16 is_stmt 0 view .LVU223
 1144 00a0 1399     		ldr	r1, [sp, #76]
 1145 00a2 1298     		ldr	r0, [sp, #72]
 1146 00a4 0090     		str	r0, [sp]
 1147 00a6 8DF80410 		strb	r1, [sp, #4]
 1148 00aa 0EAB     		add	r3, sp, #56
 1149 00ac 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1150 00ae FFF7FEFF 		bl	DevW25Qxx_GetStatue
 1151              	.LVL67:
 1152              		.loc 1 245 15 view .LVU224
 1153 00b2 0228     		cmp	r0, #2
 1154 00b4 0FD1     		bne	.L79
 246:Device/Dev_W25Qxx.c ****         {
 247:Device/Dev_W25Qxx.c ****             /* Check for the Timeout */
 248:Device/Dev_W25Qxx.c ****             if ((dev.systick() - tickstart) > W25Qx_TIMEOUT_VALUE)
 1155              		.loc 1 248 13 is_stmt 1 view .LVU225
 1156              		.loc 1 248 18 is_stmt 0 view .LVU226
 1157 00b6 B847     		blx	r7
 1158              	.LVL68:
 1159              		.loc 1 248 32 view .LVU227
 1160 00b8 801B     		subs	r0, r0, r6
 1161              		.loc 1 248 16 view .LVU228
 1162 00ba B0F57A7F 		cmp	r0, #1000
 1163 00be EFD9     		bls	.L69
 249:Device/Dev_W25Qxx.c ****             {
 250:Device/Dev_W25Qxx.c ****                 return DevW25Qxx_TimeOut;
 1164              		.loc 1 250 24 view .LVU229
 1165 00c0 4FF0030A 		mov	r10, #3
 1166              	.L67:
 251:Device/Dev_W25Qxx.c ****             }
 252:Device/Dev_W25Qxx.c ****         }
 253:Device/Dev_W25Qxx.c **** 
 254:Device/Dev_W25Qxx.c ****         /* Update the address and size variables for next page programming */
 255:Device/Dev_W25Qxx.c ****         current_addr += current_size;
 256:Device/Dev_W25Qxx.c ****         pData += current_size;
 257:Device/Dev_W25Qxx.c ****         current_size = ((current_addr + W25Q128FV_PAGE_SIZE) > end_addr) ? (end_addr - current_addr
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 27


 258:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 259:Device/Dev_W25Qxx.c **** 
 260:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 261:Device/Dev_W25Qxx.c **** }
 1167              		.loc 1 261 1 view .LVU230
 1168 00c4 5046     		mov	r0, r10
 1169 00c6 06B0     		add	sp, sp, #24
 1170              	.LCFI62:
 1171              		.cfi_remember_state
 1172              		.cfi_def_cfa_offset 48
 1173              		@ sp needed
 1174 00c8 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 1175              	.LCFI63:
 1176              		.cfi_restore 14
 1177              		.cfi_restore 10
 1178              		.cfi_restore 9
 1179              		.cfi_restore 8
 1180              		.cfi_restore 7
 1181              		.cfi_restore 6
 1182              		.cfi_restore 5
 1183              		.cfi_restore 4
 1184              		.cfi_def_cfa_offset 16
 1185              	.LVL69:
 1186              		.loc 1 261 1 view .LVU231
 1187 00cc 04B0     		add	sp, sp, #16
 1188              	.LCFI64:
 1189              		.cfi_def_cfa_offset 0
 1190 00ce 7047     		bx	lr
 1191              	.LVL70:
 1192              	.L68:
 1193              	.LCFI65:
 1194              		.cfi_restore_state
 242:Device/Dev_W25Qxx.c **** 
 1195              		.loc 1 242 13 is_stmt 1 view .LVU232
 242:Device/Dev_W25Qxx.c **** 
 1196              		.loc 1 242 20 is_stmt 0 view .LVU233
 1197 00d0 4FF0010A 		mov	r10, #1
 1198 00d4 F6E7     		b	.L67
 1199              	.LVL71:
 1200              	.L79:
 255:Device/Dev_W25Qxx.c ****         pData += current_size;
 1201              		.loc 1 255 9 is_stmt 1 view .LVU234
 255:Device/Dev_W25Qxx.c ****         pData += current_size;
 1202              		.loc 1 255 22 is_stmt 0 view .LVU235
 1203 00d6 2544     		add	r5, r5, r4
 1204              	.LVL72:
 256:Device/Dev_W25Qxx.c ****         current_size = ((current_addr + W25Q128FV_PAGE_SIZE) > end_addr) ? (end_addr - current_addr
 1205              		.loc 1 256 9 is_stmt 1 view .LVU236
 256:Device/Dev_W25Qxx.c ****         current_size = ((current_addr + W25Q128FV_PAGE_SIZE) > end_addr) ? (end_addr - current_addr
 1206              		.loc 1 256 15 is_stmt 0 view .LVU237
 1207 00d8 A144     		add	r9, r9, r4
 1208              	.LVL73:
 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1209              		.loc 1 257 9 is_stmt 1 view .LVU238
 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1210              		.loc 1 257 39 is_stmt 0 view .LVU239
 1211 00da 05F58073 		add	r3, r5, #256
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 28


 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1212              		.loc 1 257 102 view .LVU240
 1213 00de 4345     		cmp	r3, r8
 1214 00e0 04D9     		bls	.L76
 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1215              		.loc 1 257 102 discriminator 1 view .LVU241
 1216 00e2 A8EB0504 		sub	r4, r8, r5
 1217              	.LVL74:
 1218              	.L71:
 258:Device/Dev_W25Qxx.c **** 
 1219              		.loc 1 258 13 is_stmt 1 discriminator 4 view .LVU242
 258:Device/Dev_W25Qxx.c **** 
 1220              		.loc 1 258 5 is_stmt 0 discriminator 4 view .LVU243
 1221 00e6 A845     		cmp	r8, r5
 1222 00e8 A5D8     		bhi	.L72
 1223 00ea EBE7     		b	.L67
 1224              	.L76:
 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1225              		.loc 1 257 102 view .LVU244
 1226 00ec 4FF48074 		mov	r4, #256
 1227              	.LVL75:
 257:Device/Dev_W25Qxx.c ****     } while (current_addr < end_addr);
 1228              		.loc 1 257 102 view .LVU245
 1229 00f0 F9E7     		b	.L71
 1230              	.LVL76:
 1231              	.L74:
 238:Device/Dev_W25Qxx.c **** 
 1232              		.loc 1 238 20 view .LVU246
 1233 00f2 4FF0010A 		mov	r10, #1
 1234 00f6 E5E7     		b	.L67
 1235              		.cfi_endproc
 1236              	.LFE154:
 1238              		.section	.text.DevW25Qxx_EraseChip,"ax",%progbits
 1239              		.align	1
 1240              		.syntax unified
 1241              		.thumb
 1242              		.thumb_func
 1243              		.fpu fpv5-d16
 1245              	DevW25Qxx_EraseChip:
 1246              	.LFB155:
 262:Device/Dev_W25Qxx.c **** 
 263:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_EraseChip(DevW25QxxObj_TypeDef dev)
 264:Device/Dev_W25Qxx.c **** {
 1247              		.loc 1 264 1 is_stmt 1 view -0
 1248              		.cfi_startproc
 1249              		@ args = 24, pretend = 16, frame = 8
 1250              		@ frame_needed = 0, uses_anonymous_args = 0
 1251 0000 84B0     		sub	sp, sp, #16
 1252              	.LCFI66:
 1253              		.cfi_def_cfa_offset 16
 1254 0002 70B5     		push	{r4, r5, r6, lr}
 1255              	.LCFI67:
 1256              		.cfi_def_cfa_offset 32
 1257              		.cfi_offset 4, -32
 1258              		.cfi_offset 5, -28
 1259              		.cfi_offset 6, -24
 1260              		.cfi_offset 14, -20
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 29


 1261 0004 86B0     		sub	sp, sp, #24
 1262              	.LCFI68:
 1263              		.cfi_def_cfa_offset 56
 1264 0006 0AAC     		add	r4, sp, #40
 1265 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
 265:Device/Dev_W25Qxx.c ****     uint8_t cmd = SECTOR_ERASE_CMD;
 1266              		.loc 1 265 5 view .LVU248
 1267              		.loc 1 265 13 is_stmt 0 view .LVU249
 1268 000c 2023     		movs	r3, #32
 1269 000e 8DF81730 		strb	r3, [sp, #23]
 266:Device/Dev_W25Qxx.c ****     uint32_t tickstart = dev.systick();
 1270              		.loc 1 266 5 is_stmt 1 view .LVU250
 1271              		.loc 1 266 29 is_stmt 0 view .LVU251
 1272 0012 DDF83950 		ldr	r5, [sp, #57]	@ unaligned
 1273              		.loc 1 266 26 view .LVU252
 1274 0016 A847     		blx	r5
 1275              	.LVL77:
 1276 0018 0446     		mov	r4, r0
 1277              	.LVL78:
 267:Device/Dev_W25Qxx.c **** 
 268:Device/Dev_W25Qxx.c ****     if ((DevW25Qxx_WriteEnable(dev) != DevW25Qxx_Ok) ||
 1278              		.loc 1 268 5 is_stmt 1 view .LVU253
 1279              		.loc 1 268 10 is_stmt 0 view .LVU254
 1280 001a 0F99     		ldr	r1, [sp, #60]
 1281 001c 0E98     		ldr	r0, [sp, #56]
 1282              	.LVL79:
 1283              		.loc 1 268 10 view .LVU255
 1284 001e 0090     		str	r0, [sp]
 1285 0020 8DF80410 		strb	r1, [sp, #4]
 1286 0024 0AAB     		add	r3, sp, #40
 1287 0026 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1288 0028 FFF7FEFF 		bl	DevW25Qxx_WriteEnable
 1289              	.LVL80:
 1290              		.loc 1 268 8 view .LVU256
 1291 002c 30B1     		cbz	r0, .L87
 1292              	.L81:
 269:Device/Dev_W25Qxx.c ****         (DevW25Qxx_BusTrans(dev, &cmd, sizeof(cmd)) != DevW25Qxx_Ok))
 270:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 1293              		.loc 1 270 9 is_stmt 1 view .LVU257
 1294              		.loc 1 270 16 is_stmt 0 view .LVU258
 1295 002e 0126     		movs	r6, #1
 1296              	.L83:
 271:Device/Dev_W25Qxx.c **** 
 272:Device/Dev_W25Qxx.c ****     /* Wait the end of Flash writing */
 273:Device/Dev_W25Qxx.c ****     while (DevW25Qxx_GetStatue(dev) != DevW25Qxx_Busy)
 274:Device/Dev_W25Qxx.c ****     {
 275:Device/Dev_W25Qxx.c ****         /* Check for the Timeout */
 276:Device/Dev_W25Qxx.c ****         if ((dev.systick() - tickstart) > W25Q128FV_BULK_ERASE_MAX_TIME)
 277:Device/Dev_W25Qxx.c ****         {
 278:Device/Dev_W25Qxx.c ****             return DevW25Qxx_TimeOut;
 279:Device/Dev_W25Qxx.c ****         }
 280:Device/Dev_W25Qxx.c ****     }
 281:Device/Dev_W25Qxx.c **** 
 282:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 283:Device/Dev_W25Qxx.c **** }
 1297              		.loc 1 283 1 view .LVU259
 1298 0030 3046     		mov	r0, r6
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 30


 1299 0032 06B0     		add	sp, sp, #24
 1300              	.LCFI69:
 1301              		.cfi_remember_state
 1302              		.cfi_def_cfa_offset 32
 1303              		@ sp needed
 1304 0034 BDE87040 		pop	{r4, r5, r6, lr}
 1305              	.LCFI70:
 1306              		.cfi_restore 14
 1307              		.cfi_restore 6
 1308              		.cfi_restore 5
 1309              		.cfi_restore 4
 1310              		.cfi_def_cfa_offset 16
 1311              	.LVL81:
 1312              		.loc 1 283 1 view .LVU260
 1313 0038 04B0     		add	sp, sp, #16
 1314              	.LCFI71:
 1315              		.cfi_def_cfa_offset 0
 1316 003a 7047     		bx	lr
 1317              	.LVL82:
 1318              	.L87:
 1319              	.LCFI72:
 1320              		.cfi_restore_state
 1321              		.loc 1 283 1 view .LVU261
 1322 003c 0646     		mov	r6, r0
 269:Device/Dev_W25Qxx.c ****         (DevW25Qxx_BusTrans(dev, &cmd, sizeof(cmd)) != DevW25Qxx_Ok))
 1323              		.loc 1 269 10 discriminator 1 view .LVU262
 1324 003e 0123     		movs	r3, #1
 1325 0040 0393     		str	r3, [sp, #12]
 1326 0042 0DF11703 		add	r3, sp, #23
 1327 0046 0293     		str	r3, [sp, #8]
 1328 0048 0F99     		ldr	r1, [sp, #60]
 1329 004a 0E98     		ldr	r0, [sp, #56]
 1330 004c 0090     		str	r0, [sp]
 1331 004e 8DF80410 		strb	r1, [sp, #4]
 1332 0052 0AAB     		add	r3, sp, #40
 1333 0054 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1334 0056 FFF7FEFF 		bl	DevW25Qxx_BusTrans
 1335              	.LVL83:
 268:Device/Dev_W25Qxx.c ****         (DevW25Qxx_BusTrans(dev, &cmd, sizeof(cmd)) != DevW25Qxx_Ok))
 1336              		.loc 1 268 54 discriminator 1 view .LVU263
 1337 005a 0028     		cmp	r0, #0
 1338 005c E7D1     		bne	.L81
 1339              	.L82:
 273:Device/Dev_W25Qxx.c ****     {
 1340              		.loc 1 273 11 is_stmt 1 view .LVU264
 273:Device/Dev_W25Qxx.c ****     {
 1341              		.loc 1 273 12 is_stmt 0 view .LVU265
 1342 005e 0F99     		ldr	r1, [sp, #60]
 1343 0060 0E98     		ldr	r0, [sp, #56]
 1344 0062 0090     		str	r0, [sp]
 1345 0064 8DF80410 		strb	r1, [sp, #4]
 1346 0068 0AAB     		add	r3, sp, #40
 1347 006a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1348 006c FFF7FEFF 		bl	DevW25Qxx_GetStatue
 1349              	.LVL84:
 273:Device/Dev_W25Qxx.c ****     {
 1350              		.loc 1 273 11 view .LVU266
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 31


 1351 0070 0228     		cmp	r0, #2
 1352 0072 DDD0     		beq	.L83
 276:Device/Dev_W25Qxx.c ****         {
 1353              		.loc 1 276 9 is_stmt 1 view .LVU267
 276:Device/Dev_W25Qxx.c ****         {
 1354              		.loc 1 276 14 is_stmt 0 view .LVU268
 1355 0074 A847     		blx	r5
 1356              	.LVL85:
 276:Device/Dev_W25Qxx.c ****         {
 1357              		.loc 1 276 28 view .LVU269
 1358 0076 031B     		subs	r3, r0, r4
 276:Device/Dev_W25Qxx.c ****         {
 1359              		.loc 1 276 12 view .LVU270
 1360 0078 024A     		ldr	r2, .L88
 1361 007a 9342     		cmp	r3, r2
 1362 007c EFD9     		bls	.L82
 278:Device/Dev_W25Qxx.c ****         }
 1363              		.loc 1 278 20 view .LVU271
 1364 007e 0326     		movs	r6, #3
 1365 0080 D6E7     		b	.L83
 1366              	.L89:
 1367 0082 00BF     		.align	2
 1368              	.L88:
 1369 0084 90D00300 		.word	250000
 1370              		.cfi_endproc
 1371              	.LFE155:
 1373              		.section	.text.DevW25Qxx_EraseBlock,"ax",%progbits
 1374              		.align	1
 1375              		.syntax unified
 1376              		.thumb
 1377              		.thumb_func
 1378              		.fpu fpv5-d16
 1380              	DevW25Qxx_EraseBlock:
 1381              	.LVL86:
 1382              	.LFB156:
 284:Device/Dev_W25Qxx.c **** 
 285:Device/Dev_W25Qxx.c **** static DevW25Qxx_Error_List DevW25Qxx_EraseBlock(DevW25QxxObj_TypeDef dev, uint32_t Address)
 286:Device/Dev_W25Qxx.c **** {
 1383              		.loc 1 286 1 is_stmt 1 view -0
 1384              		.cfi_startproc
 1385              		@ args = 28, pretend = 16, frame = 8
 1386              		@ frame_needed = 0, uses_anonymous_args = 0
 1387              		.loc 1 286 1 is_stmt 0 view .LVU273
 1388 0000 84B0     		sub	sp, sp, #16
 1389              	.LCFI73:
 1390              		.cfi_def_cfa_offset 16
 1391 0002 70B5     		push	{r4, r5, r6, lr}
 1392              	.LCFI74:
 1393              		.cfi_def_cfa_offset 32
 1394              		.cfi_offset 4, -32
 1395              		.cfi_offset 5, -28
 1396              		.cfi_offset 6, -24
 1397              		.cfi_offset 14, -20
 1398 0004 86B0     		sub	sp, sp, #24
 1399              	.LCFI75:
 1400              		.cfi_def_cfa_offset 56
 1401 0006 0AAC     		add	r4, sp, #40
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 32


 1402 0008 84E80F00 		stm	r4, {r0, r1, r2, r3}
 1403 000c 109E     		ldr	r6, [sp, #64]
 287:Device/Dev_W25Qxx.c ****     uint8_t cmd[4];
 1404              		.loc 1 287 5 is_stmt 1 view .LVU274
 288:Device/Dev_W25Qxx.c ****     uint32_t tickstart = dev.systick();
 1405              		.loc 1 288 5 view .LVU275
 1406              		.loc 1 288 29 is_stmt 0 view .LVU276
 1407 000e DDF83950 		ldr	r5, [sp, #57]	@ unaligned
 1408              		.loc 1 288 26 view .LVU277
 1409 0012 A847     		blx	r5
 1410              	.LVL87:
 1411 0014 0446     		mov	r4, r0
 1412              	.LVL88:
 289:Device/Dev_W25Qxx.c ****     cmd[0] = SECTOR_ERASE_CMD;
 1413              		.loc 1 289 5 is_stmt 1 view .LVU278
 1414              		.loc 1 289 12 is_stmt 0 view .LVU279
 1415 0016 2023     		movs	r3, #32
 1416 0018 8DF81430 		strb	r3, [sp, #20]
 290:Device/Dev_W25Qxx.c ****     cmd[1] = (uint8_t)(Address >> 16);
 1417              		.loc 1 290 5 is_stmt 1 view .LVU280
 1418              		.loc 1 290 14 is_stmt 0 view .LVU281
 1419 001c C6F30743 		ubfx	r3, r6, #16, #8
 1420              		.loc 1 290 12 view .LVU282
 1421 0020 8DF81530 		strb	r3, [sp, #21]
 291:Device/Dev_W25Qxx.c ****     cmd[2] = (uint8_t)(Address >> 8);
 1422              		.loc 1 291 5 is_stmt 1 view .LVU283
 1423              		.loc 1 291 14 is_stmt 0 view .LVU284
 1424 0024 C6F30723 		ubfx	r3, r6, #8, #8
 1425              		.loc 1 291 12 view .LVU285
 1426 0028 8DF81630 		strb	r3, [sp, #22]
 292:Device/Dev_W25Qxx.c ****     cmd[3] = (uint8_t)(Address);
 1427              		.loc 1 292 5 is_stmt 1 view .LVU286
 1428              		.loc 1 292 12 is_stmt 0 view .LVU287
 1429 002c 8DF81760 		strb	r6, [sp, #23]
 293:Device/Dev_W25Qxx.c **** 
 294:Device/Dev_W25Qxx.c ****     /* Enable write operations Send the read ID command */
 295:Device/Dev_W25Qxx.c ****     if ((DevW25Qxx_WriteEnable(dev) != DevW25Qxx_Ok) || (DevW25Qxx_BusTrans(dev, cmd, sizeof(cmd)) 
 1430              		.loc 1 295 5 is_stmt 1 view .LVU288
 1431              		.loc 1 295 10 is_stmt 0 view .LVU289
 1432 0030 0F99     		ldr	r1, [sp, #60]
 1433 0032 0E98     		ldr	r0, [sp, #56]
 1434              	.LVL89:
 1435              		.loc 1 295 10 view .LVU290
 1436 0034 0090     		str	r0, [sp]
 1437 0036 8DF80410 		strb	r1, [sp, #4]
 1438 003a 0AAB     		add	r3, sp, #40
 1439 003c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1440 003e FFF7FEFF 		bl	DevW25Qxx_WriteEnable
 1441              	.LVL90:
 1442              		.loc 1 295 8 view .LVU291
 1443 0042 30B1     		cbz	r0, .L97
 1444              	.L91:
 296:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 1445              		.loc 1 296 9 is_stmt 1 view .LVU292
 1446              		.loc 1 296 16 is_stmt 0 view .LVU293
 1447 0044 0126     		movs	r6, #1
 1448              	.L93:
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 33


 297:Device/Dev_W25Qxx.c **** 
 298:Device/Dev_W25Qxx.c ****     /* Wait the end of Flash writing */
 299:Device/Dev_W25Qxx.c ****     while (DevW25Qxx_GetStatue(dev) == DevW25Qxx_Busy)
 300:Device/Dev_W25Qxx.c ****     {
 301:Device/Dev_W25Qxx.c ****         /* Check for the Timeout */
 302:Device/Dev_W25Qxx.c ****         if ((dev.systick() - tickstart) > W25Q128FV_SECTOR_ERASE_MAX_TIME)
 303:Device/Dev_W25Qxx.c ****         {
 304:Device/Dev_W25Qxx.c ****             return DevW25Qxx_TimeOut;
 305:Device/Dev_W25Qxx.c ****         }
 306:Device/Dev_W25Qxx.c ****     }
 307:Device/Dev_W25Qxx.c **** 
 308:Device/Dev_W25Qxx.c ****     return DevW25Qxx_Ok;
 309:Device/Dev_W25Qxx.c **** }
 1449              		.loc 1 309 1 view .LVU294
 1450 0046 3046     		mov	r0, r6
 1451 0048 06B0     		add	sp, sp, #24
 1452              	.LCFI76:
 1453              		.cfi_remember_state
 1454              		.cfi_def_cfa_offset 32
 1455              		@ sp needed
 1456 004a BDE87040 		pop	{r4, r5, r6, lr}
 1457              	.LCFI77:
 1458              		.cfi_restore 14
 1459              		.cfi_restore 6
 1460              		.cfi_restore 5
 1461              		.cfi_restore 4
 1462              		.cfi_def_cfa_offset 16
 1463              	.LVL91:
 1464              		.loc 1 309 1 view .LVU295
 1465 004e 04B0     		add	sp, sp, #16
 1466              	.LCFI78:
 1467              		.cfi_def_cfa_offset 0
 1468 0050 7047     		bx	lr
 1469              	.LVL92:
 1470              	.L97:
 1471              	.LCFI79:
 1472              		.cfi_restore_state
 1473              		.loc 1 309 1 view .LVU296
 1474 0052 0646     		mov	r6, r0
 295:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 1475              		.loc 1 295 58 discriminator 1 view .LVU297
 1476 0054 0423     		movs	r3, #4
 1477 0056 0393     		str	r3, [sp, #12]
 1478 0058 05AB     		add	r3, sp, #20
 1479 005a 0293     		str	r3, [sp, #8]
 1480 005c 0F99     		ldr	r1, [sp, #60]
 1481 005e 0E98     		ldr	r0, [sp, #56]
 1482 0060 0090     		str	r0, [sp]
 1483 0062 8DF80410 		strb	r1, [sp, #4]
 1484 0066 0AAB     		add	r3, sp, #40
 1485 0068 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1486 006a FFF7FEFF 		bl	DevW25Qxx_BusTrans
 1487              	.LVL93:
 295:Device/Dev_W25Qxx.c ****         return DevW25Qxx_Error;
 1488              		.loc 1 295 54 discriminator 1 view .LVU298
 1489 006e 0028     		cmp	r0, #0
 1490 0070 E8D1     		bne	.L91
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 34


 1491              	.L92:
 299:Device/Dev_W25Qxx.c ****     {
 1492              		.loc 1 299 11 is_stmt 1 view .LVU299
 299:Device/Dev_W25Qxx.c ****     {
 1493              		.loc 1 299 12 is_stmt 0 view .LVU300
 1494 0072 0F99     		ldr	r1, [sp, #60]
 1495 0074 0E98     		ldr	r0, [sp, #56]
 1496 0076 0090     		str	r0, [sp]
 1497 0078 8DF80410 		strb	r1, [sp, #4]
 1498 007c 0AAB     		add	r3, sp, #40
 1499 007e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1500 0080 FFF7FEFF 		bl	DevW25Qxx_GetStatue
 1501              	.LVL94:
 299:Device/Dev_W25Qxx.c ****     {
 1502              		.loc 1 299 11 view .LVU301
 1503 0084 0228     		cmp	r0, #2
 1504 0086 DED1     		bne	.L93
 302:Device/Dev_W25Qxx.c ****         {
 1505              		.loc 1 302 9 is_stmt 1 view .LVU302
 302:Device/Dev_W25Qxx.c ****         {
 1506              		.loc 1 302 14 is_stmt 0 view .LVU303
 1507 0088 A847     		blx	r5
 1508              	.LVL95:
 302:Device/Dev_W25Qxx.c ****         {
 1509              		.loc 1 302 28 view .LVU304
 1510 008a 031B     		subs	r3, r0, r4
 302:Device/Dev_W25Qxx.c ****         {
 1511              		.loc 1 302 12 view .LVU305
 1512 008c 40F6B832 		movw	r2, #3000
 1513 0090 9342     		cmp	r3, r2
 1514 0092 EED9     		bls	.L92
 304:Device/Dev_W25Qxx.c ****         }
 1515              		.loc 1 304 20 view .LVU306
 1516 0094 0326     		movs	r6, #3
 1517 0096 D6E7     		b	.L93
 1518              		.cfi_endproc
 1519              	.LFE156:
 1521              		.global	DevW25Q64
 1522              		.section	.data.DevW25Q64,"aw"
 1523              		.align	2
 1526              	DevW25Q64:
 1527 0000 00000000 		.word	DevW25Qxx_Init
 1528 0004 00000000 		.word	DevW25Qxx_Reset
 1529 0008 00000000 		.word	DevW25Qxx_Write
 1530 000c 00000000 		.word	DevW25Qxx_Read
 1531 0010 00000000 		.word	DevW25Qxx_EraseBlock
 1532 0014 00000000 		.word	DevW25Qxx_EraseChip
 1533              		.text
 1534              	.Letext0:
 1535              		.file 2 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 1536              		.file 3 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 1537              		.file 4 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 1538              		.file 5 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 1539              		.file 6 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\lib\\gcc\\arm-none
 1540              		.file 7 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 1541              		.file 8 "HAL_Lib/CMSIS/Core/Include/core_cm7.h"
 1542              		.file 9 "HAL_Lib/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 35


 1543              		.file 10 "HAL_Lib/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 1544              		.file 11 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\in
 1545              		.file 12 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 1546              		.file 13 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 1547              		.file 14 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 1548              		.file 15 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_spi.h"
 1549              		.file 16 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 1550              		.file 17 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 1551              		.file 18 "Bsp/Bsp_SPI.h"
 1552              		.file 19 "Device/Dev_W25Qxx.h"
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 Dev_W25Qxx.c
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:17     .text.DevW25Qxx_GetSspiInstance:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:24     .text.DevW25Qxx_GetSspiInstance:00000000 DevW25Qxx_GetSspiInstance
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:58     .text.DevW25Qxx_GetSspiInstance:00000014 $d
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:63     .text.DevW25Qxx_BusTrans:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:69     .text.DevW25Qxx_BusTrans:00000000 DevW25Qxx_BusTrans
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:186    .text.DevW25Qxx_BusReceive:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:192    .text.DevW25Qxx_BusReceive:00000000 DevW25Qxx_BusReceive
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:309    .text.DevW25Qxx_BusTrans_Receive:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:315    .text.DevW25Qxx_BusTrans_Receive:00000000 DevW25Qxx_BusTrans_Receive
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:430    .text.DevW25Qxx_Reset:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:436    .text.DevW25Qxx_Reset:00000000 DevW25Qxx_Reset
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:500    .text.DevW25Qxx_GetStatue:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:506    .text.DevW25Qxx_GetStatue:00000000 DevW25Qxx_GetStatue
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:588    .text.DevW25Qxx_WriteEnable:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:594    .text.DevW25Qxx_WriteEnable:00000000 DevW25Qxx_WriteEnable
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:708    .text.DevW25Qxx_Init:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:714    .text.DevW25Qxx_Init:00000000 DevW25Qxx_Init
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:893    .text.DevW25Qxx_Read:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:899    .text.DevW25Qxx_Read:00000000 DevW25Qxx_Read
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:998    .text.DevW25Qxx_Write:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1004   .text.DevW25Qxx_Write:00000000 DevW25Qxx_Write
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1239   .text.DevW25Qxx_EraseChip:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1245   .text.DevW25Qxx_EraseChip:00000000 DevW25Qxx_EraseChip
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1369   .text.DevW25Qxx_EraseChip:00000084 $d
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1374   .text.DevW25Qxx_EraseBlock:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1380   .text.DevW25Qxx_EraseBlock:00000000 DevW25Qxx_EraseBlock
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1526   .data.DevW25Q64:00000000 DevW25Q64
C:\Users\HUAV\AppData\Local\Temp\ccklO0o2.s:1523   .data.DevW25Q64:00000000 $d

UNDEFINED SYMBOLS
BspSPI
