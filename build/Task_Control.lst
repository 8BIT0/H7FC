ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"Task_Control.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.TaskControl_Init,"ax",%progbits
  17              		.align	1
  18              		.global	TaskControl_Init
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-d16
  25              	TaskControl_Init:
  26              	.LFB150:
  27              		.file 1 "Task/Task_Control.c"
   1:Task/Task_Control.c **** /*
   2:Task/Task_Control.c ****  *  coder : 8_B!T0
   3:Task/Task_Control.c ****  *  this file use for moto & servo control
   4:Task/Task_Control.c ****  */
   5:Task/Task_Control.c **** #include "Task_Control.h"
   6:Task/Task_Control.c **** #include "Srv_IMUSample.h"
   7:Task/Task_Control.c **** #include "Task_Telemetry.h"
   8:Task/Task_Control.c **** #include "Srv_DataHub.h"
   9:Task/Task_Control.c **** #include "scheduler.h"
  10:Task/Task_Control.c **** #include "Srv_Actuator.h"
  11:Task/Task_Control.c **** #include "mmu.h"
  12:Task/Task_Control.c **** 
  13:Task/Task_Control.c **** #define DEFAULT_CONTROL_MODEL Model_Quad
  14:Task/Task_Control.c **** #define DEFAULT_ESC_TYPE DevDshot_600
  15:Task/Task_Control.c **** 
  16:Task/Task_Control.c **** SrvIMU_UnionData_TypeDef LstCyc_IMU_Data;
  17:Task/Task_Control.c **** SrvRecever_RCSig_TypeDef LstCyc_Rc_Data;
  18:Task/Task_Control.c **** 
  19:Task/Task_Control.c **** TaskControl_Monitor_TypeDef TaskControl_Monitor = {
  20:Task/Task_Control.c ****     .init_state = false,
  21:Task/Task_Control.c ****     .control_abort = false,
  22:Task/Task_Control.c ****     .auto_control = false,
  23:Task/Task_Control.c **** 
  24:Task/Task_Control.c ****     .ctl_model = Model_Quad,
  25:Task/Task_Control.c **** 
  26:Task/Task_Control.c ****     .IMU_Rt = 0,
  27:Task/Task_Control.c ****     .RC_Rt = 0,
  28:Task/Task_Control.c **** };
  29:Task/Task_Control.c **** 
  30:Task/Task_Control.c **** void TaskControl_Init(void)
  31:Task/Task_Control.c **** {
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 2


  28              		.loc 1 31 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 38B5     		push	{r3, r4, r5, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 16
  35              		.cfi_offset 3, -16
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  32:Task/Task_Control.c ****     // init monitor
  33:Task/Task_Control.c ****     memset(&TaskControl_Monitor, 0, sizeof(TaskControl_Monitor));
  39              		.loc 1 33 5 view .LVU1
  40 0002 084C     		ldr	r4, .L3
  41 0004 2022     		movs	r2, #32
  42 0006 0021     		movs	r1, #0
  43 0008 2046     		mov	r0, r4
  44 000a FFF7FEFF 		bl	memset
  45              	.LVL0:
  34:Task/Task_Control.c **** 
  35:Task/Task_Control.c ****     TaskControl_Monitor.ctl_model = SrvActuator.get_model();
  46              		.loc 1 35 5 view .LVU2
  47              		.loc 1 35 48 is_stmt 0 view .LVU3
  48 000e 064D     		ldr	r5, .L3+4
  49 0010 AB69     		ldr	r3, [r5, #24]	@ unaligned
  50              		.loc 1 35 37 view .LVU4
  51 0012 9847     		blx	r3
  52              	.LVL1:
  53              		.loc 1 35 35 view .LVU5
  54 0014 A070     		strb	r0, [r4, #2]
  36:Task/Task_Control.c ****     TaskControl_Monitor.init_state = SrvActuator.init(DEFAULT_CONTROL_MODEL, DEFAULT_ESC_TYPE);
  55              		.loc 1 36 5 is_stmt 1 view .LVU6
  56              		.loc 1 36 49 is_stmt 0 view .LVU7
  57 0016 2B68     		ldr	r3, [r5]	@ unaligned
  58              		.loc 1 36 38 view .LVU8
  59 0018 0321     		movs	r1, #3
  60 001a 0020     		movs	r0, #0
  61 001c 9847     		blx	r3
  62              	.LVL2:
  63              		.loc 1 36 36 view .LVU9
  64 001e 2070     		strb	r0, [r4]
  37:Task/Task_Control.c **** }
  65              		.loc 1 37 1 view .LVU10
  66 0020 38BD     		pop	{r3, r4, r5, pc}
  67              	.L4:
  68 0022 00BF     		.align	2
  69              	.L3:
  70 0024 00000000 		.word	.LANCHOR0
  71 0028 00000000 		.word	SrvActuator
  72              		.cfi_endproc
  73              	.LFE150:
  75              		.section	.text.TaskControl_Core,"ax",%progbits
  76              		.align	1
  77              		.global	TaskControl_Core
  78              		.syntax unified
  79              		.thumb
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 3


  80              		.thumb_func
  81              		.fpu fpv5-d16
  83              	TaskControl_Core:
  84              	.LVL3:
  85              	.LFB151:
  38:Task/Task_Control.c **** 
  39:Task/Task_Control.c **** void TaskControl_Core(Task_Handle hdl)
  40:Task/Task_Control.c **** {
  86              		.loc 1 40 1 is_stmt 1 view -0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 128
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		.loc 1 40 1 is_stmt 0 view .LVU12
  91 0000 30B5     		push	{r4, r5, lr}
  92              	.LCFI1:
  93              		.cfi_def_cfa_offset 12
  94              		.cfi_offset 4, -12
  95              		.cfi_offset 5, -8
  96              		.cfi_offset 14, -4
  97 0002 A7B0     		sub	sp, sp, #156
  98              	.LCFI2:
  99              		.cfi_def_cfa_offset 168
  41:Task/Task_Control.c ****     uint64_t imu_update_time = 0;
 100              		.loc 1 41 5 is_stmt 1 view .LVU13
 101              		.loc 1 41 14 is_stmt 0 view .LVU14
 102 0004 0022     		movs	r2, #0
 103 0006 0023     		movs	r3, #0
 104 0008 CDE92423 		strd	r2, [sp, #144]
  42:Task/Task_Control.c ****     uint64_t rc_update_time = 0;
 105              		.loc 1 42 5 is_stmt 1 view .LVU15
 106              		.loc 1 42 14 is_stmt 0 view .LVU16
 107 000c CDE92223 		strd	r2, [sp, #136]
  43:Task/Task_Control.c ****     uint16_t rc_ch[32];
 108              		.loc 1 43 5 is_stmt 1 view .LVU17
  44:Task/Task_Control.c ****     uint16_t gimbal[4];
 109              		.loc 1 44 5 view .LVU18
  45:Task/Task_Control.c ****     uint8_t rc_channel_sum;
 110              		.loc 1 45 5 view .LVU19
  46:Task/Task_Control.c ****     bool arm_state;
 111              		.loc 1 46 5 view .LVU20
  47:Task/Task_Control.c ****     bool failsafe;
 112              		.loc 1 47 5 view .LVU21
  48:Task/Task_Control.c **** 
  49:Task/Task_Control.c ****     float imu_tmpr = 0.0f;
 113              		.loc 1 49 5 view .LVU22
 114              		.loc 1 49 11 is_stmt 0 view .LVU23
 115 0010 0023     		movs	r3, #0
 116 0012 0E93     		str	r3, [sp, #56]	@ float
  50:Task/Task_Control.c ****     float acc_scale = 0.0f;
 117              		.loc 1 50 5 is_stmt 1 view .LVU24
 118              		.loc 1 50 11 is_stmt 0 view .LVU25
 119 0014 0D93     		str	r3, [sp, #52]	@ float
  51:Task/Task_Control.c ****     float gyr_scale = 0.0f;
 120              		.loc 1 51 5 is_stmt 1 view .LVU26
 121              		.loc 1 51 11 is_stmt 0 view .LVU27
 122 0016 0C93     		str	r3, [sp, #48]	@ float
  52:Task/Task_Control.c ****     float acc_x = 0.0f;
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 4


 123              		.loc 1 52 5 is_stmt 1 view .LVU28
 124              		.loc 1 52 11 is_stmt 0 view .LVU29
 125 0018 0B93     		str	r3, [sp, #44]	@ float
  53:Task/Task_Control.c ****     float acc_y = 0.0f;
 126              		.loc 1 53 5 is_stmt 1 view .LVU30
 127              		.loc 1 53 11 is_stmt 0 view .LVU31
 128 001a 0A93     		str	r3, [sp, #40]	@ float
  54:Task/Task_Control.c ****     float acc_z = 0.0f;
 129              		.loc 1 54 5 is_stmt 1 view .LVU32
 130              		.loc 1 54 11 is_stmt 0 view .LVU33
 131 001c 0993     		str	r3, [sp, #36]	@ float
  55:Task/Task_Control.c ****     float gyr_x = 0.0f;
 132              		.loc 1 55 5 is_stmt 1 view .LVU34
 133              		.loc 1 55 11 is_stmt 0 view .LVU35
 134 001e 0893     		str	r3, [sp, #32]	@ float
  56:Task/Task_Control.c ****     float gyr_y = 0.0f;
 135              		.loc 1 56 5 is_stmt 1 view .LVU36
 136              		.loc 1 56 11 is_stmt 0 view .LVU37
 137 0020 0793     		str	r3, [sp, #28]	@ float
  57:Task/Task_Control.c ****     float gyr_z = 0.0f;
 138              		.loc 1 57 5 is_stmt 1 view .LVU38
 139              		.loc 1 57 11 is_stmt 0 view .LVU39
 140 0022 0693     		str	r3, [sp, #24]	@ float
  58:Task/Task_Control.c **** 
  59:Task/Task_Control.c ****     if (TaskControl_Monitor.init_state || !TaskControl_Monitor.control_abort)
 141              		.loc 1 59 5 is_stmt 1 view .LVU40
 142              		.loc 1 59 28 is_stmt 0 view .LVU41
 143 0024 3B4B     		ldr	r3, .L17
 144 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 145              		.loc 1 59 8 view .LVU42
 146 0028 1BB9     		cbnz	r3, .L6
 147              		.loc 1 59 63 discriminator 1 view .LVU43
 148 002a 3A4B     		ldr	r3, .L17
 149 002c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 150              		.loc 1 59 40 discriminator 1 view .LVU44
 151 002e 002B     		cmp	r3, #0
 152 0030 6BD1     		bne	.L7
 153              	.L6:
  60:Task/Task_Control.c ****     {
  61:Task/Task_Control.c ****         // check imu filter gyro data update or not
  62:Task/Task_Control.c ****         SrvDataHub.get_scaled_imu(&imu_update_time,
 154              		.loc 1 62 9 is_stmt 1 view .LVU45
 155              		.loc 1 62 19 is_stmt 0 view .LVU46
 156 0032 394C     		ldr	r4, .L17+4
 157 0034 A568     		ldr	r5, [r4, #8]
 158              		.loc 1 62 9 view .LVU47
 159 0036 0EAB     		add	r3, sp, #56
 160 0038 0593     		str	r3, [sp, #20]
 161 003a 06AB     		add	r3, sp, #24
 162 003c 0493     		str	r3, [sp, #16]
 163 003e 07AB     		add	r3, sp, #28
 164 0040 0393     		str	r3, [sp, #12]
 165 0042 08AB     		add	r3, sp, #32
 166 0044 0293     		str	r3, [sp, #8]
 167 0046 09AB     		add	r3, sp, #36
 168 0048 0193     		str	r3, [sp, #4]
 169 004a 0AAB     		add	r3, sp, #40
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 5


 170 004c 0093     		str	r3, [sp]
 171 004e 0BAB     		add	r3, sp, #44
 172 0050 0CAA     		add	r2, sp, #48
 173 0052 0DA9     		add	r1, sp, #52
 174 0054 24A8     		add	r0, sp, #144
 175              	.LVL4:
 176              		.loc 1 62 9 view .LVU48
 177 0056 A847     		blx	r5
 178              	.LVL5:
  63:Task/Task_Control.c ****                                   &acc_scale, &gyr_scale,
  64:Task/Task_Control.c ****                                   &acc_x, &acc_y, &acc_z,
  65:Task/Task_Control.c ****                                   &gyr_x, &gyr_y, &gyr_z,
  66:Task/Task_Control.c ****                                   &imu_tmpr);
  67:Task/Task_Control.c **** 
  68:Task/Task_Control.c ****         // get rc channel and other toggle signal
  69:Task/Task_Control.c ****         SrvDataHub.get_rc(&rc_update_time, rc_ch, &rc_channel_sum);
 179              		.loc 1 69 9 is_stmt 1 view .LVU49
 180              		.loc 1 69 19 is_stmt 0 view .LVU50
 181 0058 6369     		ldr	r3, [r4, #20]
 182              		.loc 1 69 9 view .LVU51
 183 005a 0DF13F02 		add	r2, sp, #63
 184 005e 12A9     		add	r1, sp, #72
 185 0060 22A8     		add	r0, sp, #136
 186 0062 9847     		blx	r3
 187              	.LVL6:
  70:Task/Task_Control.c **** 
  71:Task/Task_Control.c ****         // get failsafe
  72:Task/Task_Control.c ****         SrvDataHub.get_arm_state(&arm_state);
 188              		.loc 1 72 9 is_stmt 1 view .LVU52
 189              		.loc 1 72 19 is_stmt 0 view .LVU53
 190 0064 E369     		ldr	r3, [r4, #28]
 191              		.loc 1 72 9 view .LVU54
 192 0066 0DF13E00 		add	r0, sp, #62
 193 006a 9847     		blx	r3
 194              	.LVL7:
  73:Task/Task_Control.c ****         SrvDataHub.get_failsafe(&failsafe);
 195              		.loc 1 73 9 is_stmt 1 view .LVU55
 196              		.loc 1 73 19 is_stmt 0 view .LVU56
 197 006c 236A     		ldr	r3, [r4, #32]
 198              		.loc 1 73 9 view .LVU57
 199 006e 0DF13D00 		add	r0, sp, #61
 200 0072 9847     		blx	r3
 201              	.LVL8:
  74:Task/Task_Control.c ****         SrvDataHub.get_gimbal_percent(gimbal);
 202              		.loc 1 74 9 is_stmt 1 view .LVU58
 203              		.loc 1 74 19 is_stmt 0 view .LVU59
 204 0074 A369     		ldr	r3, [r4, #24]
 205              		.loc 1 74 9 view .LVU60
 206 0076 10A8     		add	r0, sp, #64
 207 0078 9847     		blx	r3
 208              	.LVL9:
  75:Task/Task_Control.c **** 
  76:Task/Task_Control.c ****         if (imu_update_time)
 209              		.loc 1 76 9 is_stmt 1 view .LVU61
 210              		.loc 1 76 13 is_stmt 0 view .LVU62
 211 007a DDE92423 		ldrd	r2, [sp, #144]
 212              		.loc 1 76 12 view .LVU63
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 6


 213 007e 52EA0301 		orrs	r1, r2, r3
 214 0082 0BD0     		beq	.L8
  77:Task/Task_Control.c ****         {
  78:Task/Task_Control.c ****             if (imu_update_time > TaskControl_Monitor.IMU_Rt)
 215              		.loc 1 78 13 is_stmt 1 view .LVU64
 216              		.loc 1 78 54 is_stmt 0 view .LVU65
 217 0084 2349     		ldr	r1, .L17
 218 0086 D1E90201 		ldrd	r0, [r1, #8]
 219              		.loc 1 78 16 view .LVU66
 220 008a 9942     		cmp	r1, r3
 221 008c 08BF     		it	eq
 222 008e 9042     		cmpeq	r0, r2
 223 0090 25D2     		bcs	.L9
  79:Task/Task_Control.c ****             {
  80:Task/Task_Control.c ****                 TaskControl_Monitor.imu_update_error_cnt = 0;
 224              		.loc 1 80 17 is_stmt 1 view .LVU67
 225              		.loc 1 80 58 is_stmt 0 view .LVU68
 226 0092 2049     		ldr	r1, .L17
 227 0094 0020     		movs	r0, #0
 228 0096 C870     		strb	r0, [r1, #3]
  81:Task/Task_Control.c ****                 TaskControl_Monitor.IMU_Rt = imu_update_time;
 229              		.loc 1 81 17 is_stmt 1 view .LVU69
 230              		.loc 1 81 44 is_stmt 0 view .LVU70
 231 0098 C1E90223 		strd	r2, [r1, #8]
 232              	.L8:
  82:Task/Task_Control.c ****             }
  83:Task/Task_Control.c ****             else if (imu_update_time <= TaskControl_Monitor.IMU_Rt)
  84:Task/Task_Control.c ****             {
  85:Task/Task_Control.c ****                 TaskControl_Monitor.imu_update_error_cnt++;
  86:Task/Task_Control.c ****                 if (TaskControl_Monitor.imu_update_error_cnt >= IMU_ERROR_UPDATE_MAX_COUNT)
  87:Task/Task_Control.c ****                     TaskControl_Monitor.control_abort = true;
  88:Task/Task_Control.c ****             }
  89:Task/Task_Control.c ****         }
  90:Task/Task_Control.c **** 
  91:Task/Task_Control.c ****         /* only manipulate esc or servo when disarm */
  92:Task/Task_Control.c ****         if (rc_update_time)
 233              		.loc 1 92 9 is_stmt 1 view .LVU71
 234              		.loc 1 92 13 is_stmt 0 view .LVU72
 235 009c DDE92223 		ldrd	r2, [sp, #136]
 236              		.loc 1 92 12 view .LVU73
 237 00a0 52EA0301 		orrs	r1, r2, r3
 238 00a4 2ED0     		beq	.L10
  93:Task/Task_Control.c ****         {
  94:Task/Task_Control.c ****             if (!failsafe)
 239              		.loc 1 94 13 is_stmt 1 view .LVU74
 240              		.loc 1 94 17 is_stmt 0 view .LVU75
 241 00a6 9DF83D10 		ldrb	r1, [sp, #61]	@ zero_extendqisi2
 242              		.loc 1 94 16 view .LVU76
 243 00aa 39BB     		cbnz	r1, .L11
  95:Task/Task_Control.c ****             {
  96:Task/Task_Control.c ****                 if (rc_update_time < TaskControl_Monitor.RC_Rt)
 244              		.loc 1 96 17 is_stmt 1 view .LVU77
 245              		.loc 1 96 57 is_stmt 0 view .LVU78
 246 00ac 1949     		ldr	r1, .L17
 247 00ae D1E90401 		ldrd	r0, [r1, #16]
 248              		.loc 1 96 20 view .LVU79
 249 00b2 8B42     		cmp	r3, r1
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 7


 250 00b4 08BF     		it	eq
 251 00b6 8242     		cmpeq	r2, r0
 252 00b8 1CD3     		bcc	.L16
  97:Task/Task_Control.c ****                 {
  98:Task/Task_Control.c ****                     TaskControl_Monitor.auto_control = true;
  99:Task/Task_Control.c **** 
 100:Task/Task_Control.c ****                     goto lock_moto;
 101:Task/Task_Control.c ****                 }
 102:Task/Task_Control.c **** 
 103:Task/Task_Control.c ****                 TaskControl_Monitor.RC_Rt = rc_update_time;
 253              		.loc 1 103 17 is_stmt 1 view .LVU80
 254              		.loc 1 103 43 is_stmt 0 view .LVU81
 255 00ba 1649     		ldr	r1, .L17
 256 00bc C1E90423 		strd	r2, [r1, #16]
 104:Task/Task_Control.c **** 
 105:Task/Task_Control.c ****                 if (arm_state != TELEMETRY_SET_DISARM)
 257              		.loc 1 105 17 is_stmt 1 view .LVU82
 258              		.loc 1 105 31 is_stmt 0 view .LVU83
 259 00c0 9DF83E30 		ldrb	r3, [sp, #62]	@ zero_extendqisi2
 260              		.loc 1 105 20 view .LVU84
 261 00c4 0BBB     		cbnz	r3, .L7
 106:Task/Task_Control.c ****                     goto lock_moto;
 107:Task/Task_Control.c ****             }
 108:Task/Task_Control.c ****             else
 109:Task/Task_Control.c ****             {
 110:Task/Task_Control.c ****                 // do drone return to liftoff spot or do auto control
 111:Task/Task_Control.c ****                 TaskControl_Monitor.auto_control = true;
 112:Task/Task_Control.c **** 
 113:Task/Task_Control.c ****                 /* currently moto for safety */
 114:Task/Task_Control.c ****                 goto lock_moto;
 115:Task/Task_Control.c ****             }
 116:Task/Task_Control.c ****         }
 117:Task/Task_Control.c ****         else
 118:Task/Task_Control.c ****         {
 119:Task/Task_Control.c ****             // do drone return to liftoff spot or do auto control
 120:Task/Task_Control.c ****             TaskControl_Monitor.auto_control = true;
 121:Task/Task_Control.c **** 
 122:Task/Task_Control.c ****             /* currently moto for safety */
 123:Task/Task_Control.c ****             goto lock_moto;
 124:Task/Task_Control.c ****         }
 125:Task/Task_Control.c ****         // do drone control algorithm down below
 126:Task/Task_Control.c **** 
 127:Task/Task_Control.c ****         // currently use gimbal input percent val for moto testing
 128:Task/Task_Control.c ****         gimbal[1] = 0;
 262              		.loc 1 128 9 is_stmt 1 view .LVU85
 263              		.loc 1 128 19 is_stmt 0 view .LVU86
 264 00c6 0023     		movs	r3, #0
 265 00c8 ADF84230 		strh	r3, [sp, #66]	@ movhi
 129:Task/Task_Control.c ****         gimbal[2] = 0;
 266              		.loc 1 129 9 is_stmt 1 view .LVU87
 267              		.loc 1 129 19 is_stmt 0 view .LVU88
 268 00cc ADF84430 		strh	r3, [sp, #68]	@ movhi
 130:Task/Task_Control.c ****         gimbal[3] = 0;
 269              		.loc 1 130 9 is_stmt 1 view .LVU89
 270              		.loc 1 130 19 is_stmt 0 view .LVU90
 271 00d0 ADF84630 		strh	r3, [sp, #70]	@ movhi
 131:Task/Task_Control.c **** 
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 8


 132:Task/Task_Control.c ****         SrvActuator.moto_control(gimbal);
 272              		.loc 1 132 9 is_stmt 1 view .LVU91
 273              		.loc 1 132 20 is_stmt 0 view .LVU92
 274 00d4 114B     		ldr	r3, .L17+8
 275 00d6 9B68     		ldr	r3, [r3, #8]	@ unaligned
 276              		.loc 1 132 9 view .LVU93
 277 00d8 10A8     		add	r0, sp, #64
 278 00da 9847     		blx	r3
 279              	.LVL10:
 280 00dc 15E0     		b	.L7
 281              	.L9:
  83:Task/Task_Control.c ****             {
 282              		.loc 1 83 18 is_stmt 1 view .LVU94
  85:Task/Task_Control.c ****                 if (TaskControl_Monitor.imu_update_error_cnt >= IMU_ERROR_UPDATE_MAX_COUNT)
 283              		.loc 1 85 17 view .LVU95
  85:Task/Task_Control.c ****                 if (TaskControl_Monitor.imu_update_error_cnt >= IMU_ERROR_UPDATE_MAX_COUNT)
 284              		.loc 1 85 36 is_stmt 0 view .LVU96
 285 00de 0D4A     		ldr	r2, .L17
 286 00e0 D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
  85:Task/Task_Control.c ****                 if (TaskControl_Monitor.imu_update_error_cnt >= IMU_ERROR_UPDATE_MAX_COUNT)
 287              		.loc 1 85 57 view .LVU97
 288 00e2 0133     		adds	r3, r3, #1
 289 00e4 DBB2     		uxtb	r3, r3
 290 00e6 D370     		strb	r3, [r2, #3]
  86:Task/Task_Control.c ****                     TaskControl_Monitor.control_abort = true;
 291              		.loc 1 86 17 is_stmt 1 view .LVU98
  86:Task/Task_Control.c ****                     TaskControl_Monitor.control_abort = true;
 292              		.loc 1 86 20 is_stmt 0 view .LVU99
 293 00e8 092B     		cmp	r3, #9
 294 00ea D7D9     		bls	.L8
  87:Task/Task_Control.c ****             }
 295              		.loc 1 87 21 is_stmt 1 view .LVU100
  87:Task/Task_Control.c ****             }
 296              		.loc 1 87 55 is_stmt 0 view .LVU101
 297 00ec 1346     		mov	r3, r2
 298 00ee 0122     		movs	r2, #1
 299 00f0 5A70     		strb	r2, [r3, #1]
 300 00f2 D3E7     		b	.L8
 301              	.L16:
  98:Task/Task_Control.c **** 
 302              		.loc 1 98 21 is_stmt 1 view .LVU102
  98:Task/Task_Control.c **** 
 303              		.loc 1 98 54 is_stmt 0 view .LVU103
 304 00f4 074B     		ldr	r3, .L17
 305 00f6 0122     		movs	r2, #1
 306 00f8 1A76     		strb	r2, [r3, #24]
 100:Task/Task_Control.c ****                 }
 307              		.loc 1 100 21 is_stmt 1 view .LVU104
 308 00fa 06E0     		b	.L7
 309              	.L11:
 111:Task/Task_Control.c **** 
 310              		.loc 1 111 17 view .LVU105
 111:Task/Task_Control.c **** 
 311              		.loc 1 111 50 is_stmt 0 view .LVU106
 312 00fc 054B     		ldr	r3, .L17
 313 00fe 0122     		movs	r2, #1
 314 0100 1A76     		strb	r2, [r3, #24]
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 9


 114:Task/Task_Control.c ****             }
 315              		.loc 1 114 17 is_stmt 1 view .LVU107
 316 0102 02E0     		b	.L7
 317              	.L10:
 120:Task/Task_Control.c **** 
 318              		.loc 1 120 13 view .LVU108
 120:Task/Task_Control.c **** 
 319              		.loc 1 120 46 is_stmt 0 view .LVU109
 320 0104 034B     		ldr	r3, .L17
 321 0106 0122     		movs	r2, #1
 322 0108 1A76     		strb	r2, [r3, #24]
 123:Task/Task_Control.c ****         }
 323              		.loc 1 123 13 is_stmt 1 view .LVU110
 324              	.L7:
 133:Task/Task_Control.c ****     }
 134:Task/Task_Control.c **** 
 135:Task/Task_Control.c **** lock_moto:
 136:Task/Task_Control.c ****     SrvActuator.lock();
 325              		.loc 1 136 5 view .LVU111
 326              		.loc 1 136 16 is_stmt 0 view .LVU112
 327 010a 044B     		ldr	r3, .L17+8
 328 010c 5B68     		ldr	r3, [r3, #4]	@ unaligned
 329              		.loc 1 136 5 view .LVU113
 330 010e 9847     		blx	r3
 331              	.LVL11:
 137:Task/Task_Control.c **** }
 332              		.loc 1 137 1 view .LVU114
 333 0110 27B0     		add	sp, sp, #156
 334              	.LCFI3:
 335              		.cfi_def_cfa_offset 12
 336              		@ sp needed
 337 0112 30BD     		pop	{r4, r5, pc}
 338              	.L18:
 339              		.align	2
 340              	.L17:
 341 0114 00000000 		.word	.LANCHOR0
 342 0118 00000000 		.word	SrvDataHub
 343 011c 00000000 		.word	SrvActuator
 344              		.cfi_endproc
 345              	.LFE151:
 347              		.global	TaskControl_Monitor
 348              		.comm	LstCyc_Rc_Data,88,4
 349              		.comm	LstCyc_IMU_Data,79,4
 350              		.section	.bss.TaskControl_Monitor,"aw",%nobits
 351              		.align	3
 352              		.set	.LANCHOR0,. + 0
 355              	TaskControl_Monitor:
 356 0000 00000000 		.space	32
 356      00000000 
 356      00000000 
 356      00000000 
 356      00000000 
 357              		.text
 358              	.Letext0:
 359              		.file 2 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 360              		.file 3 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 361              		.file 4 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 10


 362              		.file 5 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 363              		.file 6 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\lib\\gcc\\arm-none
 364              		.file 7 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 365              		.file 8 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\inc
 366              		.file 9 "System/runtime/runtime.h"
 367              		.file 10 "HAL_Lib/CMSIS/Core/Include/core_cm7.h"
 368              		.file 11 "HAL_Lib/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 369              		.file 12 "HAL_Lib/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 370              		.file 13 "d:\\software\\zephyr_env_gcc\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\in
 371              		.file 14 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 372              		.file 15 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 373              		.file 16 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 374              		.file 17 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 375              		.file 18 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_spi.h"
 376              		.file 19 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_tim.h"
 377              		.file 20 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 378              		.file 21 "HAL_Lib/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 379              		.file 22 "System/scheduler/scheduler.h"
 380              		.file 23 "Task/Task_Control.h"
 381              		.file 24 "Service/imu_data.h"
 382              		.file 25 "Service/Srv_IMUSample.h"
 383              		.file 26 "Device/Dev_Sbus.h"
 384              		.file 27 "Device/Dev_CRSF.h"
 385              		.file 28 "Bsp/Bsp_GPIO.h"
 386              		.file 29 "Bsp/Bsp_DMA.h"
 387              		.file 30 "Bsp/Bsp_Uart.h"
 388              		.file 31 "Service/Srv_Receiver.h"
 389              		.file 32 "Task/Task_Telemetry.h"
 390              		.file 33 "System/DataPipe/DataPipe.h"
 391              		.file 34 "Bsp/Bsp_Timer.h"
 392              		.file 35 "Device/Dev_Dshot.h"
 393              		.file 36 "Bsp/Bsp_SPI.h"
 394              		.file 37 "Device/Dev_Led.h"
 395              		.file 38 "debug/debug_util.h"
 396              		.file 39 "IO_Def/IO_Definition.h"
 397              		.file 40 "Service/Srv_Actuator.h"
 398              		.file 41 "Service/Srv_DataHub.h"
 399              		.file 42 "<built-in>"
ARM GAS  C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 Task_Control.c
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:17     .text.TaskControl_Init:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:25     .text.TaskControl_Init:00000000 TaskControl_Init
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:70     .text.TaskControl_Init:00000024 $d
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:76     .text.TaskControl_Core:00000000 $t
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:83     .text.TaskControl_Core:00000000 TaskControl_Core
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:341    .text.TaskControl_Core:00000114 $d
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:355    .bss.TaskControl_Monitor:00000000 TaskControl_Monitor
                            *COM*:00000058 LstCyc_Rc_Data
                            *COM*:0000004f LstCyc_IMU_Data
C:\Users\HUAV\AppData\Local\Temp\ccxrM1b0.s:351    .bss.TaskControl_Monitor:00000000 $d

UNDEFINED SYMBOLS
memset
SrvActuator
SrvDataHub
