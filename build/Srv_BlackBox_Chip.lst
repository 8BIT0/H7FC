ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Srv_BlackBox_Chip.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SrvChip_BlackBox_Init,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	SrvChip_BlackBox_Init:
  26              	.LVL0:
  27              	.LFB139:
  28              		.file 1 "Service/Srv_BlackBox_Chip.c"
   1:Service/Srv_BlackBox_Chip.c **** #include "Srv_BlackBox_Def.h"
   2:Service/Srv_BlackBox_Chip.c **** 
   3:Service/Srv_BlackBox_Chip.c **** typedef struct
   4:Service/Srv_BlackBox_Chip.c **** {
   5:Service/Srv_BlackBox_Chip.c ****     bool init;
   6:Service/Srv_BlackBox_Chip.c ****     bool enable;
   7:Service/Srv_BlackBox_Chip.c ****     bool accessing;
   8:Service/Srv_BlackBox_Chip.c ****     uint8_t *p_buf;
   9:Service/Srv_BlackBox_Chip.c ****     uint32_t info_addr;
  10:Service/Srv_BlackBox_Chip.c ****     uint32_t info_size;
  11:Service/Srv_BlackBox_Chip.c ****     uint32_t log_cnt;
  12:Service/Srv_BlackBox_Chip.c ****     uint32_t log_size;
  13:Service/Srv_BlackBox_Chip.c ****     uint16_t log_unit;
  14:Service/Srv_BlackBox_Chip.c ****     uint32_t rom_addr;
  15:Service/Srv_BlackBox_Chip.c ****     uint32_t rom_size;
  16:Service/Srv_BlackBox_Chip.c **** } Chip_BlackBox_Monitor_TypeDef;
  17:Service/Srv_BlackBox_Chip.c **** 
  18:Service/Srv_BlackBox_Chip.c **** #pragma pack(1)
  19:Service/Srv_BlackBox_Chip.c **** typedef struct
  20:Service/Srv_BlackBox_Chip.c **** {
  21:Service/Srv_BlackBox_Chip.c ****     uint32_t cnt;
  22:Service/Srv_BlackBox_Chip.c ****     uint32_t size;
  23:Service/Srv_BlackBox_Chip.c **** } Chip_BlackBox_Info_TypeDef;
  24:Service/Srv_BlackBox_Chip.c **** #pragma pack()
  25:Service/Srv_BlackBox_Chip.c **** 
  26:Service/Srv_BlackBox_Chip.c **** /* internal function */
  27:Service/Srv_BlackBox_Chip.c **** static  Chip_BlackBox_Monitor_TypeDef ChipBlackBox_Monitor = {
  28:Service/Srv_BlackBox_Chip.c ****     .init = false,
  29:Service/Srv_BlackBox_Chip.c ****     .enable = false,
  30:Service/Srv_BlackBox_Chip.c ****     .accessing = false,
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 2


  31:Service/Srv_BlackBox_Chip.c ****     .info_addr = 0,
  32:Service/Srv_BlackBox_Chip.c ****     .info_size = 0,
  33:Service/Srv_BlackBox_Chip.c ****     .log_cnt = 0,
  34:Service/Srv_BlackBox_Chip.c ****     .log_size = 0,
  35:Service/Srv_BlackBox_Chip.c ****     .log_unit = 0,
  36:Service/Srv_BlackBox_Chip.c ****     .rom_addr = 0,
  37:Service/Srv_BlackBox_Chip.c ****     .rom_size = 0,
  38:Service/Srv_BlackBox_Chip.c **** };
  39:Service/Srv_BlackBox_Chip.c **** 
  40:Service/Srv_BlackBox_Chip.c **** /* external function */
  41:Service/Srv_BlackBox_Chip.c **** static uint32_t SrvChip_BlackBox_Init(SrvBlackBox_Log_Callback callback, SrvBlackBox_DevInfo_TypeDe
  42:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_PushData(SrvBlackBox_write_callback p_write, uint8_t *p_data, uint32_t
  43:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Read(SrvBlackBox_read_callback p_read, uint32_t addr_offset, uint8_t *
  44:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_GetInfo(SrvBlackBox_read_callback p_read, uint32_t *cnt, uint32_t *siz
  45:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Enable(void);
  46:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Disable(SrvBlackBox_write_callback p_write);
  47:Service/Srv_BlackBox_Chip.c **** 
  48:Service/Srv_BlackBox_Chip.c **** SrvBlackBox_TypeDef SrvChip_BlackBox = {
  49:Service/Srv_BlackBox_Chip.c ****     .init = SrvChip_BlackBox_Init,
  50:Service/Srv_BlackBox_Chip.c ****     .push = SrvChip_BlackBox_PushData,
  51:Service/Srv_BlackBox_Chip.c ****     .enable = SrvChip_BlackBox_Enable,
  52:Service/Srv_BlackBox_Chip.c ****     .disable = SrvChip_BlackBox_Disable,
  53:Service/Srv_BlackBox_Chip.c ****     .read = SrvChip_BlackBox_Read,
  54:Service/Srv_BlackBox_Chip.c ****     .get_info =SrvChip_BlackBox_GetInfo,
  55:Service/Srv_BlackBox_Chip.c **** };
  56:Service/Srv_BlackBox_Chip.c **** 
  57:Service/Srv_BlackBox_Chip.c **** /* return log unit size */
  58:Service/Srv_BlackBox_Chip.c **** static uint32_t SrvChip_BlackBox_Init(SrvBlackBox_Log_Callback callback, SrvBlackBox_DevInfo_TypeDe
  59:Service/Srv_BlackBox_Chip.c **** {
  29              		.loc 1 59 1 view -0
  30              		.cfi_startproc
  31              		@ args = 20, pretend = 16, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 59 1 is_stmt 0 view .LVU1
  34 0000 84B0     		sub	sp, sp, #16
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37 0002 08B5     		push	{r3, lr}
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 24
  40              		.cfi_offset 3, -24
  41              		.cfi_offset 14, -20
  42 0004 03A8     		add	r0, sp, #12
  43 0006 80E80E00 		stm	r0, {r1, r2, r3}
  60:Service/Srv_BlackBox_Chip.c ****     UNUSED(callback);
  44              		.loc 1 60 5 is_stmt 1 view .LVU2
  61:Service/Srv_BlackBox_Chip.c **** 
  62:Service/Srv_BlackBox_Chip.c ****     ChipBlackBox_Monitor.init = false;
  45              		.loc 1 62 5 view .LVU3
  46              		.loc 1 62 31 is_stmt 0 view .LVU4
  47 000a 154B     		ldr	r3, .L8
  48 000c 0022     		movs	r2, #0
  49 000e 1A70     		strb	r2, [r3]
  63:Service/Srv_BlackBox_Chip.c ****     /* get external storage flash info */
  64:Service/Srv_BlackBox_Chip.c ****     if ((devinfo.total_str_size + devinfo.str_start_addr) > devinfo.phy_start_addr)
  50              		.loc 1 64 5 is_stmt 1 view .LVU5
  51              		.loc 1 64 33 is_stmt 0 view .LVU6
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 3


  52 0010 059B     		ldr	r3, [sp, #20]
  53 0012 049A     		ldr	r2, [sp, #16]
  54 0014 1344     		add	r3, r3, r2
  55              		.loc 1 64 8 view .LVU7
  56 0016 8B42     		cmp	r3, r1
  57 0018 14D9     		bls	.L2
  58 001a 0A46     		mov	r2, r1
  65:Service/Srv_BlackBox_Chip.c ****     {
  66:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.info_addr = devinfo.phy_start_addr;
  59              		.loc 1 66 9 is_stmt 1 view .LVU8
  60              		.loc 1 66 40 is_stmt 0 view .LVU9
  61 001c 1049     		ldr	r1, .L8
  62 001e 8A60     		str	r2, [r1, #8]
  67:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.info_size = devinfo.sector_size;
  63              		.loc 1 67 9 is_stmt 1 view .LVU10
  64              		.loc 1 67 49 is_stmt 0 view .LVU11
  65 0020 0698     		ldr	r0, [sp, #24]
  66              	.LVL1:
  67              		.loc 1 67 40 view .LVU12
  68 0022 C860     		str	r0, [r1, #12]
  68:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.rom_addr = ChipBlackBox_Monitor.info_addr + ChipBlackBox_Monitor.info_
  69              		.loc 1 68 9 is_stmt 1 view .LVU13
  70              		.loc 1 68 72 is_stmt 0 view .LVU14
  71 0024 0244     		add	r2, r2, r0
  72              		.loc 1 68 39 view .LVU15
  73 0026 CA61     		str	r2, [r1, #28]
  69:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.rom_size = (devinfo.total_str_size + devinfo.str_start_addr) - (devinf
  74              		.loc 1 69 9 is_stmt 1 view .LVU16
  75              		.loc 1 69 91 is_stmt 0 view .LVU17
  76 0028 9B1A     		subs	r3, r3, r2
  77              		.loc 1 69 39 view .LVU18
  78 002a 0B62     		str	r3, [r1, #32]
  70:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_unit = devinfo.sector_size;
  79              		.loc 1 70 9 is_stmt 1 view .LVU19
  80              		.loc 1 70 39 is_stmt 0 view .LVU20
  81 002c 80B2     		uxth	r0, r0
  82 002e 0883     		strh	r0, [r1, #24]	@ movhi
  71:Service/Srv_BlackBox_Chip.c **** 
  72:Service/Srv_BlackBox_Chip.c ****         if (ChipBlackBox_Monitor.log_unit)
  83              		.loc 1 72 9 is_stmt 1 view .LVU21
  84              		.loc 1 72 12 is_stmt 0 view .LVU22
  85 0030 98B1     		cbz	r0, .L5
  73:Service/Srv_BlackBox_Chip.c ****         {
  74:Service/Srv_BlackBox_Chip.c ****             ChipBlackBox_Monitor.p_buf = SrvOsCommon.malloc(ChipBlackBox_Monitor.log_unit);
  86              		.loc 1 74 13 is_stmt 1 view .LVU23
  87              		.loc 1 74 53 is_stmt 0 view .LVU24
  88 0032 0C4B     		ldr	r3, .L8+4
  89 0034 DB6A     		ldr	r3, [r3, #44]
  90              		.loc 1 74 42 view .LVU25
  91 0036 9847     		blx	r3
  92              	.LVL2:
  93              		.loc 1 74 40 view .LVU26
  94 0038 094B     		ldr	r3, .L8
  95 003a 5860     		str	r0, [r3, #4]
  75:Service/Srv_BlackBox_Chip.c ****             if (ChipBlackBox_Monitor.p_buf == NULL)
  96              		.loc 1 75 13 is_stmt 1 view .LVU27
  97              		.loc 1 75 16 is_stmt 0 view .LVU28
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 4


  98 003c 40B1     		cbz	r0, .L7
  76:Service/Srv_BlackBox_Chip.c ****             {
  77:Service/Srv_BlackBox_Chip.c ****                 SrvOsCommon.free(ChipBlackBox_Monitor.p_buf);
  78:Service/Srv_BlackBox_Chip.c ****                 return 0;
  79:Service/Srv_BlackBox_Chip.c ****             }
  80:Service/Srv_BlackBox_Chip.c ****         }
  81:Service/Srv_BlackBox_Chip.c ****         else
  82:Service/Srv_BlackBox_Chip.c ****             return 0;
  83:Service/Srv_BlackBox_Chip.c **** 
  84:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.init = true;
  99              		.loc 1 84 9 is_stmt 1 view .LVU29
 100              		.loc 1 84 35 is_stmt 0 view .LVU30
 101 003e 084B     		ldr	r3, .L8
 102 0040 0122     		movs	r2, #1
 103 0042 1A70     		strb	r2, [r3]
 104              	.L2:
  85:Service/Srv_BlackBox_Chip.c ****     }
  86:Service/Srv_BlackBox_Chip.c **** 
  87:Service/Srv_BlackBox_Chip.c ****     return ChipBlackBox_Monitor.log_unit;
 105              		.loc 1 87 5 is_stmt 1 view .LVU31
 106              		.loc 1 87 32 is_stmt 0 view .LVU32
 107 0044 064B     		ldr	r3, .L8
 108 0046 188B     		ldrh	r0, [r3, #24]
 109              	.L1:
  88:Service/Srv_BlackBox_Chip.c **** }
 110              		.loc 1 88 1 view .LVU33
 111 0048 BDE80840 		pop	{r3, lr}
 112              	.LCFI2:
 113              		.cfi_remember_state
 114              		.cfi_restore 14
 115              		.cfi_restore 3
 116              		.cfi_def_cfa_offset 16
 117 004c 04B0     		add	sp, sp, #16
 118              	.LCFI3:
 119              		.cfi_def_cfa_offset 0
 120 004e 7047     		bx	lr
 121              	.L7:
 122              	.LCFI4:
 123              		.cfi_restore_state
  77:Service/Srv_BlackBox_Chip.c ****                 return 0;
 124              		.loc 1 77 17 is_stmt 1 view .LVU34
  77:Service/Srv_BlackBox_Chip.c ****                 return 0;
 125              		.loc 1 77 28 is_stmt 0 view .LVU35
 126 0050 044B     		ldr	r3, .L8+4
 127 0052 1B6B     		ldr	r3, [r3, #48]
  77:Service/Srv_BlackBox_Chip.c ****                 return 0;
 128              		.loc 1 77 17 view .LVU36
 129 0054 9847     		blx	r3
 130              	.LVL3:
  78:Service/Srv_BlackBox_Chip.c ****             }
 131              		.loc 1 78 17 is_stmt 1 view .LVU37
  78:Service/Srv_BlackBox_Chip.c ****             }
 132              		.loc 1 78 24 is_stmt 0 view .LVU38
 133 0056 0020     		movs	r0, #0
 134 0058 F6E7     		b	.L1
 135              	.L5:
  82:Service/Srv_BlackBox_Chip.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 5


 136              		.loc 1 82 20 view .LVU39
 137 005a 0020     		movs	r0, #0
 138 005c F4E7     		b	.L1
 139              	.L9:
 140 005e 00BF     		.align	2
 141              	.L8:
 142 0060 00000000 		.word	.LANCHOR0
 143 0064 00000000 		.word	SrvOsCommon
 144              		.cfi_endproc
 145              	.LFE139:
 147              		.section	.text.SrvChip_BlackBox_PushData,"ax",%progbits
 148              		.align	1
 149              		.syntax unified
 150              		.thumb
 151              		.thumb_func
 153              	SrvChip_BlackBox_PushData:
 154              	.LVL4:
 155              	.LFB140:
  89:Service/Srv_BlackBox_Chip.c **** 
  90:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_PushData(SrvBlackBox_write_callback p_write, uint8_t *p_data, uint32_t
  91:Service/Srv_BlackBox_Chip.c **** {
 156              		.loc 1 91 1 is_stmt 1 view -0
 157              		.cfi_startproc
 158              		@ args = 0, pretend = 0, frame = 0
 159              		@ frame_needed = 0, uses_anonymous_args = 0
 160              		.loc 1 91 1 is_stmt 0 view .LVU41
 161 0000 10B5     		push	{r4, lr}
 162              	.LCFI5:
 163              		.cfi_def_cfa_offset 8
 164              		.cfi_offset 4, -8
 165              		.cfi_offset 14, -4
 166 0002 0446     		mov	r4, r0
  92:Service/Srv_BlackBox_Chip.c ****     uint32_t update_addr = 0;
 167              		.loc 1 92 5 is_stmt 1 view .LVU42
 168              	.LVL5:
  93:Service/Srv_BlackBox_Chip.c **** 
  94:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && ChipBlackBox_Monitor.enable && p_write)
 169              		.loc 1 94 5 view .LVU43
 170              		.loc 1 94 29 is_stmt 0 view .LVU44
 171 0004 134B     		ldr	r3, .L16
 172 0006 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 173              	.LVL6:
 174              		.loc 1 94 8 view .LVU45
 175 0008 10B3     		cbz	r0, .L11
 176              		.loc 1 94 58 discriminator 1 view .LVU46
 177 000a 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 178              		.loc 1 94 35 discriminator 1 view .LVU47
 179 000c 00B3     		cbz	r0, .L11
 180              		.loc 1 94 66 discriminator 2 view .LVU48
 181 000e F4B1     		cbz	r4, .L13
  95:Service/Srv_BlackBox_Chip.c ****     {
  96:Service/Srv_BlackBox_Chip.c ****         if ((ChipBlackBox_Monitor.rom_size - ChipBlackBox_Monitor.log_size) < len)
 182              		.loc 1 96 9 is_stmt 1 view .LVU49
 183              		.loc 1 96 34 is_stmt 0 view .LVU50
 184 0010 1846     		mov	r0, r3
 185 0012 1B6A     		ldr	r3, [r3, #32]
 186              		.loc 1 96 66 view .LVU51
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 6


 187 0014 4069     		ldr	r0, [r0, #20]
 188              		.loc 1 96 44 view .LVU52
 189 0016 1B1A     		subs	r3, r3, r0
 190              		.loc 1 96 12 view .LVU53
 191 0018 9342     		cmp	r3, r2
 192 001a 14D3     		bcc	.L15
  97:Service/Srv_BlackBox_Chip.c ****         {
  98:Service/Srv_BlackBox_Chip.c ****             /* disable log */
  99:Service/Srv_BlackBox_Chip.c ****             ChipBlackBox_Monitor.enable = false;
 100:Service/Srv_BlackBox_Chip.c ****             return false;
 101:Service/Srv_BlackBox_Chip.c ****         }
 102:Service/Srv_BlackBox_Chip.c **** 
 103:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.accessing = true;
 193              		.loc 1 103 9 is_stmt 1 view .LVU54
 194              		.loc 1 103 40 is_stmt 0 view .LVU55
 195 001c 0D4B     		ldr	r3, .L16
 196 001e 4FF0010C 		mov	ip, #1
 197 0022 83F802C0 		strb	ip, [r3, #2]
 104:Service/Srv_BlackBox_Chip.c ****         update_addr = ChipBlackBox_Monitor.rom_addr + ChipBlackBox_Monitor.log_size;
 198              		.loc 1 104 9 is_stmt 1 view .LVU56
 199              		.loc 1 104 43 is_stmt 0 view .LVU57
 200 0026 DB69     		ldr	r3, [r3, #28]
 201              	.LVL7:
 105:Service/Srv_BlackBox_Chip.c **** 
 106:Service/Srv_BlackBox_Chip.c ****         /* write data to balckbox data section */
 107:Service/Srv_BlackBox_Chip.c ****         if (!p_write(update_addr, p_data, len))
 202              		.loc 1 107 9 is_stmt 1 view .LVU58
 203              		.loc 1 107 14 is_stmt 0 view .LVU59
 204 0028 92B2     		uxth	r2, r2
 205              	.LVL8:
 206              		.loc 1 107 14 view .LVU60
 207 002a 1844     		add	r0, r0, r3
 208              	.LVL9:
 209              		.loc 1 107 14 view .LVU61
 210 002c A047     		blx	r4
 211              	.LVL10:
 212              		.loc 1 107 12 view .LVU62
 213 002e 78B1     		cbz	r0, .L11
 108:Service/Srv_BlackBox_Chip.c ****             return false;
 109:Service/Srv_BlackBox_Chip.c **** 
 110:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt ++;
 214              		.loc 1 110 9 is_stmt 1 view .LVU63
 215              		.loc 1 110 29 is_stmt 0 view .LVU64
 216 0030 084B     		ldr	r3, .L16
 217 0032 1A69     		ldr	r2, [r3, #16]
 218              		.loc 1 110 38 view .LVU65
 219 0034 0132     		adds	r2, r2, #1
 220 0036 1A61     		str	r2, [r3, #16]
 111:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size += ChipBlackBox_Monitor.log_unit;
 221              		.loc 1 111 9 is_stmt 1 view .LVU66
 222              		.loc 1 111 62 is_stmt 0 view .LVU67
 223 0038 198B     		ldrh	r1, [r3, #24]
 224              		.loc 1 111 39 view .LVU68
 225 003a 5A69     		ldr	r2, [r3, #20]
 226 003c 0A44     		add	r2, r2, r1
 227 003e 5A61     		str	r2, [r3, #20]
 112:Service/Srv_BlackBox_Chip.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 7


 113:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.accessing = false;
 228              		.loc 1 113 9 is_stmt 1 view .LVU69
 229              		.loc 1 113 40 is_stmt 0 view .LVU70
 230 0040 0022     		movs	r2, #0
 231 0042 9A70     		strb	r2, [r3, #2]
 114:Service/Srv_BlackBox_Chip.c ****     
 115:Service/Srv_BlackBox_Chip.c ****         return true;
 232              		.loc 1 115 9 is_stmt 1 view .LVU71
 233              		.loc 1 115 16 is_stmt 0 view .LVU72
 234 0044 04E0     		b	.L11
 235              	.LVL11:
 236              	.L15:
  99:Service/Srv_BlackBox_Chip.c ****             return false;
 237              		.loc 1 99 13 is_stmt 1 view .LVU73
  99:Service/Srv_BlackBox_Chip.c ****             return false;
 238              		.loc 1 99 41 is_stmt 0 view .LVU74
 239 0046 0020     		movs	r0, #0
 240 0048 024B     		ldr	r3, .L16
 241 004a 5870     		strb	r0, [r3, #1]
 100:Service/Srv_BlackBox_Chip.c ****         }
 242              		.loc 1 100 13 is_stmt 1 view .LVU75
 100:Service/Srv_BlackBox_Chip.c ****         }
 243              		.loc 1 100 20 is_stmt 0 view .LVU76
 244 004c 00E0     		b	.L11
 245              	.L13:
 116:Service/Srv_BlackBox_Chip.c ****     }
 117:Service/Srv_BlackBox_Chip.c **** 
 118:Service/Srv_BlackBox_Chip.c ****     return false;
 246              		.loc 1 118 12 view .LVU77
 247 004e 0020     		movs	r0, #0
 248              	.LVL12:
 249              	.L11:
 119:Service/Srv_BlackBox_Chip.c **** }
 250              		.loc 1 119 1 view .LVU78
 251 0050 10BD     		pop	{r4, pc}
 252              	.LVL13:
 253              	.L17:
 254              		.loc 1 119 1 view .LVU79
 255 0052 00BF     		.align	2
 256              	.L16:
 257 0054 00000000 		.word	.LANCHOR0
 258              		.cfi_endproc
 259              	.LFE140:
 261              		.section	.text.SrvChip_BlackBox_Enable,"ax",%progbits
 262              		.align	1
 263              		.syntax unified
 264              		.thumb
 265              		.thumb_func
 267              	SrvChip_BlackBox_Enable:
 268              	.LFB142:
 120:Service/Srv_BlackBox_Chip.c **** 
 121:Service/Srv_BlackBox_Chip.c **** /* still in developping */
 122:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Read(SrvBlackBox_read_callback p_read, uint32_t addr_offset, uint8_t *
 123:Service/Srv_BlackBox_Chip.c **** {
 124:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef info;
 125:Service/Srv_BlackBox_Chip.c ****     uint32_t read_addr = 0;
 126:Service/Srv_BlackBox_Chip.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 8


 127:Service/Srv_BlackBox_Chip.c ****     memset(&info, 0, sizeof(Chip_BlackBox_Info_TypeDef));
 128:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && p_data && len && p_read && \
 129:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 130:Service/Srv_BlackBox_Chip.c ****         ((len % ChipBlackBox_Monitor.log_unit) == 0) && \
 131:Service/Srv_BlackBox_Chip.c ****         (addr_offset < ChipBlackBox_Monitor.rom_size))
 132:Service/Srv_BlackBox_Chip.c ****     {
 133:Service/Srv_BlackBox_Chip.c ****         read_addr = ChipBlackBox_Monitor.rom_addr + addr_offset;
 134:Service/Srv_BlackBox_Chip.c **** 
 135:Service/Srv_BlackBox_Chip.c ****         /* get info first */
 136:Service/Srv_BlackBox_Chip.c ****         if (!p_read(ChipBlackBox_Monitor.info_addr, ChipBlackBox_Monitor.p_buf, ChipBlackBox_Monito
 137:Service/Srv_BlackBox_Chip.c ****             return false;
 138:Service/Srv_BlackBox_Chip.c **** 
 139:Service/Srv_BlackBox_Chip.c ****         memcpy(&info, ChipBlackBox_Monitor.p_buf, sizeof(Chip_BlackBox_Info_TypeDef));
 140:Service/Srv_BlackBox_Chip.c ****         if ((info.cnt == 0) || (info.size == 0))
 141:Service/Srv_BlackBox_Chip.c ****             return false;
 142:Service/Srv_BlackBox_Chip.c **** 
 143:Service/Srv_BlackBox_Chip.c ****         /* get balckbox data */
 144:Service/Srv_BlackBox_Chip.c ****         if (!p_read(read_addr, p_data, len))
 145:Service/Srv_BlackBox_Chip.c ****             return false;
 146:Service/Srv_BlackBox_Chip.c **** 
 147:Service/Srv_BlackBox_Chip.c ****         return true;
 148:Service/Srv_BlackBox_Chip.c ****     }
 149:Service/Srv_BlackBox_Chip.c **** 
 150:Service/Srv_BlackBox_Chip.c ****     return false;
 151:Service/Srv_BlackBox_Chip.c **** }
 152:Service/Srv_BlackBox_Chip.c **** 
 153:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Enable(void)
 154:Service/Srv_BlackBox_Chip.c **** {
 269              		.loc 1 154 1 is_stmt 1 view -0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
 273              		@ link register save eliminated.
 155:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init)
 274              		.loc 1 155 5 view .LVU81
 275              		.loc 1 155 29 is_stmt 0 view .LVU82
 276 0000 044B     		ldr	r3, .L21
 277 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 278              		.loc 1 155 8 view .LVU83
 279 0004 00B9     		cbnz	r0, .L20
 280              	.L19:
 156:Service/Srv_BlackBox_Chip.c ****     {
 157:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 158:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 159:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.enable = true;
 160:Service/Srv_BlackBox_Chip.c ****         return true;
 161:Service/Srv_BlackBox_Chip.c ****     }
 162:Service/Srv_BlackBox_Chip.c **** 
 163:Service/Srv_BlackBox_Chip.c ****     return false;
 164:Service/Srv_BlackBox_Chip.c **** }
 281              		.loc 1 164 1 view .LVU84
 282 0006 7047     		bx	lr
 283              	.L20:
 157:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 284              		.loc 1 157 9 is_stmt 1 view .LVU85
 157:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 285              		.loc 1 157 38 is_stmt 0 view .LVU86
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 9


 286 0008 0022     		movs	r2, #0
 287 000a 1A61     		str	r2, [r3, #16]
 158:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.enable = true;
 288              		.loc 1 158 9 is_stmt 1 view .LVU87
 158:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.enable = true;
 289              		.loc 1 158 39 is_stmt 0 view .LVU88
 290 000c 5A61     		str	r2, [r3, #20]
 159:Service/Srv_BlackBox_Chip.c ****         return true;
 291              		.loc 1 159 9 is_stmt 1 view .LVU89
 159:Service/Srv_BlackBox_Chip.c ****         return true;
 292              		.loc 1 159 37 is_stmt 0 view .LVU90
 293 000e 0122     		movs	r2, #1
 294 0010 5A70     		strb	r2, [r3, #1]
 160:Service/Srv_BlackBox_Chip.c ****     }
 295              		.loc 1 160 9 is_stmt 1 view .LVU91
 160:Service/Srv_BlackBox_Chip.c ****     }
 296              		.loc 1 160 16 is_stmt 0 view .LVU92
 297 0012 F8E7     		b	.L19
 298              	.L22:
 299              		.align	2
 300              	.L21:
 301 0014 00000000 		.word	.LANCHOR0
 302              		.cfi_endproc
 303              	.LFE142:
 305              		.section	.text.SrvChip_BlackBox_GetInfo,"ax",%progbits
 306              		.align	1
 307              		.syntax unified
 308              		.thumb
 309              		.thumb_func
 311              	SrvChip_BlackBox_GetInfo:
 312              	.LVL14:
 313              	.LFB144:
 165:Service/Srv_BlackBox_Chip.c **** 
 166:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_Disable(SrvBlackBox_write_callback p_write)
 167:Service/Srv_BlackBox_Chip.c **** {
 168:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef BlackBoxDataInfo;
 169:Service/Srv_BlackBox_Chip.c ****     uint8_t retry = 10;
 170:Service/Srv_BlackBox_Chip.c **** 
 171:Service/Srv_BlackBox_Chip.c ****     memset(&BlackBoxDataInfo, 0, sizeof(Chip_BlackBox_Info_TypeDef));
 172:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && p_write)
 173:Service/Srv_BlackBox_Chip.c ****     {
 174:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.enable = false;
 175:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.cnt = ChipBlackBox_Monitor.log_cnt;
 176:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.size = ChipBlackBox_Monitor.log_size;
 177:Service/Srv_BlackBox_Chip.c ****         memcpy(ChipBlackBox_Monitor.p_buf, &BlackBoxDataInfo, sizeof(Chip_BlackBox_Info_TypeDef));
 178:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 179:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 180:Service/Srv_BlackBox_Chip.c **** 
 181:Service/Srv_BlackBox_Chip.c ****         while (retry)
 182:Service/Srv_BlackBox_Chip.c ****         {
 183:Service/Srv_BlackBox_Chip.c ****             /* update info section */
 184:Service/Srv_BlackBox_Chip.c ****             if (!p_write(ChipBlackBox_Monitor.info_addr, ChipBlackBox_Monitor.p_buf, ChipBlackBox_M
 185:Service/Srv_BlackBox_Chip.c ****             {
 186:Service/Srv_BlackBox_Chip.c ****                 retry --;
 187:Service/Srv_BlackBox_Chip.c ****                 if (retry == 0)
 188:Service/Srv_BlackBox_Chip.c ****                     return false;
 189:Service/Srv_BlackBox_Chip.c ****             }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 10


 190:Service/Srv_BlackBox_Chip.c ****             else
 191:Service/Srv_BlackBox_Chip.c ****                 return true;
 192:Service/Srv_BlackBox_Chip.c **** 
 193:Service/Srv_BlackBox_Chip.c ****             SrvOsCommon.delay_ms(10);
 194:Service/Srv_BlackBox_Chip.c ****         }
 195:Service/Srv_BlackBox_Chip.c ****     }
 196:Service/Srv_BlackBox_Chip.c **** 
 197:Service/Srv_BlackBox_Chip.c ****     return false;
 198:Service/Srv_BlackBox_Chip.c **** }
 199:Service/Srv_BlackBox_Chip.c **** 
 200:Service/Srv_BlackBox_Chip.c **** static bool SrvChip_BlackBox_GetInfo(SrvBlackBox_read_callback p_read, uint32_t *cnt, uint32_t *siz
 201:Service/Srv_BlackBox_Chip.c **** {
 314              		.loc 1 201 1 is_stmt 1 view -0
 315              		.cfi_startproc
 316              		@ args = 0, pretend = 0, frame = 8
 317              		@ frame_needed = 0, uses_anonymous_args = 0
 318              		.loc 1 201 1 is_stmt 0 view .LVU94
 319 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 320              	.LCFI6:
 321              		.cfi_def_cfa_offset 24
 322              		.cfi_offset 4, -24
 323              		.cfi_offset 5, -20
 324              		.cfi_offset 6, -16
 325              		.cfi_offset 7, -12
 326              		.cfi_offset 8, -8
 327              		.cfi_offset 14, -4
 328 0004 82B0     		sub	sp, sp, #8
 329              	.LCFI7:
 330              		.cfi_def_cfa_offset 32
 331 0006 0C46     		mov	r4, r1
 202:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef info;
 332              		.loc 1 202 5 is_stmt 1 view .LVU95
 203:Service/Srv_BlackBox_Chip.c **** 
 204:Service/Srv_BlackBox_Chip.c ****     memset(&info, 0, sizeof(Chip_BlackBox_Info_TypeDef));
 333              		.loc 1 204 5 view .LVU96
 334 0008 0021     		movs	r1, #0
 335              	.LVL15:
 336              		.loc 1 204 5 is_stmt 0 view .LVU97
 337 000a 0091     		str	r1, [sp]
 338 000c 0191     		str	r1, [sp, #4]
 205:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && cnt && size && enable_state && p_read)
 339              		.loc 1 205 5 is_stmt 1 view .LVU98
 340              		.loc 1 205 29 is_stmt 0 view .LVU99
 341 000e 1449     		ldr	r1, .L30
 342 0010 0D78     		ldrb	r5, [r1]	@ zero_extendqisi2
 343              		.loc 1 205 8 view .LVU100
 344 0012 D5B1     		cbz	r5, .L24
 345 0014 0746     		mov	r7, r0
 346 0016 9046     		mov	r8, r2
 347 0018 1E46     		mov	r6, r3
 348              		.loc 1 205 35 discriminator 1 view .LVU101
 349 001a ACB1     		cbz	r4, .L25
 350              		.loc 1 205 42 discriminator 2 view .LVU102
 351 001c CAB1     		cbz	r2, .L26
 352              		.loc 1 205 50 discriminator 3 view .LVU103
 353 001e D3B1     		cbz	r3, .L27
 354              		.loc 1 205 66 discriminator 4 view .LVU104
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 11


 355 0020 D8B1     		cbz	r0, .L28
 206:Service/Srv_BlackBox_Chip.c ****     {
 207:Service/Srv_BlackBox_Chip.c ****         if (!p_read(ChipBlackBox_Monitor.info_addr, ChipBlackBox_Monitor.p_buf, ChipBlackBox_Monito
 356              		.loc 1 207 9 is_stmt 1 view .LVU105
 357              		.loc 1 207 101 is_stmt 0 view .LVU106
 358 0022 0B46     		mov	r3, r1
 359              	.LVL16:
 360              		.loc 1 207 14 view .LVU107
 361 0024 8A89     		ldrh	r2, [r1, #12]
 362              	.LVL17:
 363              		.loc 1 207 14 view .LVU108
 364 0026 4968     		ldr	r1, [r1, #4]
 365 0028 9868     		ldr	r0, [r3, #8]
 366              	.LVL18:
 367              		.loc 1 207 14 view .LVU109
 368 002a B847     		blx	r7
 369              	.LVL19:
 370              		.loc 1 207 12 view .LVU110
 371 002c 0546     		mov	r5, r0
 372 002e 60B1     		cbz	r0, .L24
 208:Service/Srv_BlackBox_Chip.c ****             return false;
 209:Service/Srv_BlackBox_Chip.c **** 
 210:Service/Srv_BlackBox_Chip.c ****         memcpy(&info, ChipBlackBox_Monitor.p_buf, sizeof(Chip_BlackBox_Info_TypeDef));
 373              		.loc 1 210 9 is_stmt 1 view .LVU111
 374              		.loc 1 210 43 is_stmt 0 view .LVU112
 375 0030 0B4A     		ldr	r2, .L30
 376 0032 5168     		ldr	r1, [r2, #4]
 377              		.loc 1 210 9 view .LVU113
 378 0034 6B46     		mov	r3, sp
 379 0036 0868     		ldr	r0, [r1]	@ unaligned
 380 0038 4968     		ldr	r1, [r1, #4]	@ unaligned
 381 003a 03C3     		stmia	r3!, {r0, r1}
 211:Service/Srv_BlackBox_Chip.c ****         *cnt = info.cnt;
 382              		.loc 1 211 9 is_stmt 1 view .LVU114
 383              		.loc 1 211 14 is_stmt 0 view .LVU115
 384 003c 2060     		str	r0, [r4]
 212:Service/Srv_BlackBox_Chip.c ****         *size = info.size;
 385              		.loc 1 212 9 is_stmt 1 view .LVU116
 386              		.loc 1 212 15 is_stmt 0 view .LVU117
 387 003e C8F80010 		str	r1, [r8]
 213:Service/Srv_BlackBox_Chip.c ****         *enable_state = ChipBlackBox_Monitor.enable;
 388              		.loc 1 213 9 is_stmt 1 view .LVU118
 389              		.loc 1 213 45 is_stmt 0 view .LVU119
 390 0042 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 391              		.loc 1 213 23 view .LVU120
 392 0044 3370     		strb	r3, [r6]
 214:Service/Srv_BlackBox_Chip.c **** 
 215:Service/Srv_BlackBox_Chip.c ****         return true;
 393              		.loc 1 215 9 is_stmt 1 view .LVU121
 394              		.loc 1 215 16 is_stmt 0 view .LVU122
 395 0046 00E0     		b	.L24
 396              	.LVL20:
 397              	.L25:
 216:Service/Srv_BlackBox_Chip.c ****     }
 217:Service/Srv_BlackBox_Chip.c **** 
 218:Service/Srv_BlackBox_Chip.c ****     return false;
 398              		.loc 1 218 12 view .LVU123
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 12


 399 0048 0025     		movs	r5, #0
 400              	.LVL21:
 401              	.L24:
 219:Service/Srv_BlackBox_Chip.c **** }
 402              		.loc 1 219 1 view .LVU124
 403 004a 2846     		mov	r0, r5
 404 004c 02B0     		add	sp, sp, #8
 405              	.LCFI8:
 406              		.cfi_remember_state
 407              		.cfi_def_cfa_offset 24
 408              		@ sp needed
 409 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 410              	.LVL22:
 411              	.L26:
 412              	.LCFI9:
 413              		.cfi_restore_state
 218:Service/Srv_BlackBox_Chip.c **** }
 414              		.loc 1 218 12 view .LVU125
 415 0052 0025     		movs	r5, #0
 416 0054 F9E7     		b	.L24
 417              	.L27:
 418 0056 0025     		movs	r5, #0
 419 0058 F7E7     		b	.L24
 420              	.L28:
 421 005a 0025     		movs	r5, #0
 422 005c F5E7     		b	.L24
 423              	.L31:
 424 005e 00BF     		.align	2
 425              	.L30:
 426 0060 00000000 		.word	.LANCHOR0
 427              		.cfi_endproc
 428              	.LFE144:
 430              		.section	.text.SrvChip_BlackBox_Read,"ax",%progbits
 431              		.align	1
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 436              	SrvChip_BlackBox_Read:
 437              	.LVL23:
 438              	.LFB141:
 123:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef info;
 439              		.loc 1 123 1 is_stmt 1 view -0
 440              		.cfi_startproc
 441              		@ args = 0, pretend = 0, frame = 8
 442              		@ frame_needed = 0, uses_anonymous_args = 0
 123:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef info;
 443              		.loc 1 123 1 is_stmt 0 view .LVU127
 444 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 445              	.LCFI10:
 446              		.cfi_def_cfa_offset 20
 447              		.cfi_offset 4, -20
 448              		.cfi_offset 5, -16
 449              		.cfi_offset 6, -12
 450              		.cfi_offset 7, -8
 451              		.cfi_offset 14, -4
 452 0002 83B0     		sub	sp, sp, #12
 453              	.LCFI11:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 13


 454              		.cfi_def_cfa_offset 32
 455 0004 0746     		mov	r7, r0
 124:Service/Srv_BlackBox_Chip.c ****     uint32_t read_addr = 0;
 456              		.loc 1 124 5 is_stmt 1 view .LVU128
 125:Service/Srv_BlackBox_Chip.c **** 
 457              		.loc 1 125 5 view .LVU129
 458              	.LVL24:
 127:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && p_data && len && p_read && \
 459              		.loc 1 127 5 view .LVU130
 460 0006 0024     		movs	r4, #0
 461 0008 0094     		str	r4, [sp]
 462 000a 0194     		str	r4, [sp, #4]
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 463              		.loc 1 128 5 view .LVU131
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 464              		.loc 1 128 29 is_stmt 0 view .LVU132
 465 000c 1D4C     		ldr	r4, .L43
 466 000e 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 467              	.LVL25:
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 468              		.loc 1 128 8 view .LVU133
 469 0010 50B3     		cbz	r0, .L33
 470 0012 1646     		mov	r6, r2
 471 0014 1D46     		mov	r5, r3
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 472              		.loc 1 128 35 discriminator 1 view .LVU134
 473 0016 22B3     		cbz	r2, .L34
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 474              		.loc 1 128 45 discriminator 2 view .LVU135
 475 0018 2BB3     		cbz	r3, .L35
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 476              		.loc 1 128 52 discriminator 3 view .LVU136
 477 001a 3FB3     		cbz	r7, .L36
 129:Service/Srv_BlackBox_Chip.c ****         ((len % ChipBlackBox_Monitor.log_unit) == 0) && \
 478              		.loc 1 129 45 discriminator 4 view .LVU137
 479 001c 238B     		ldrh	r3, [r4, #24]
 480              	.LVL26:
 129:Service/Srv_BlackBox_Chip.c ****         ((len % ChipBlackBox_Monitor.log_unit) == 0) && \
 481              		.loc 1 129 23 discriminator 4 view .LVU138
 482 001e B1FBF3F2 		udiv	r2, r1, r3
 483              	.LVL27:
 129:Service/Srv_BlackBox_Chip.c ****         ((len % ChipBlackBox_Monitor.log_unit) == 0) && \
 484              		.loc 1 129 23 discriminator 4 view .LVU139
 485 0022 03FB1212 		mls	r2, r3, r2, r1
 128:Service/Srv_BlackBox_Chip.c ****         ((addr_offset % ChipBlackBox_Monitor.log_unit) == 0) && \
 486              		.loc 1 128 62 discriminator 4 view .LVU140
 487 0026 1ABB     		cbnz	r2, .L37
 130:Service/Srv_BlackBox_Chip.c ****         (addr_offset < ChipBlackBox_Monitor.rom_size))
 488              		.loc 1 130 15 view .LVU141
 489 0028 B5FBF3F2 		udiv	r2, r5, r3
 490 002c 03FB1253 		mls	r3, r3, r2, r5
 129:Service/Srv_BlackBox_Chip.c ****         ((len % ChipBlackBox_Monitor.log_unit) == 0) && \
 491              		.loc 1 129 62 view .LVU142
 492 0030 03BB     		cbnz	r3, .L38
 131:Service/Srv_BlackBox_Chip.c ****     {
 493              		.loc 1 131 44 view .LVU143
 494 0032 236A     		ldr	r3, [r4, #32]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 14


 130:Service/Srv_BlackBox_Chip.c ****         (addr_offset < ChipBlackBox_Monitor.rom_size))
 495              		.loc 1 130 54 view .LVU144
 496 0034 8B42     		cmp	r3, r1
 497 0036 1FD9     		bls	.L39
 133:Service/Srv_BlackBox_Chip.c **** 
 498              		.loc 1 133 9 is_stmt 1 view .LVU145
 133:Service/Srv_BlackBox_Chip.c **** 
 499              		.loc 1 133 41 is_stmt 0 view .LVU146
 500 0038 2346     		mov	r3, r4
 501 003a E469     		ldr	r4, [r4, #28]
 133:Service/Srv_BlackBox_Chip.c **** 
 502              		.loc 1 133 19 view .LVU147
 503 003c 0C44     		add	r4, r4, r1
 504              	.LVL28:
 136:Service/Srv_BlackBox_Chip.c ****             return false;
 505              		.loc 1 136 9 is_stmt 1 view .LVU148
 136:Service/Srv_BlackBox_Chip.c ****             return false;
 506              		.loc 1 136 14 is_stmt 0 view .LVU149
 507 003e 9A89     		ldrh	r2, [r3, #12]
 508 0040 5968     		ldr	r1, [r3, #4]
 509              	.LVL29:
 136:Service/Srv_BlackBox_Chip.c ****             return false;
 510              		.loc 1 136 14 view .LVU150
 511 0042 9868     		ldr	r0, [r3, #8]
 512 0044 B847     		blx	r7
 513              	.LVL30:
 136:Service/Srv_BlackBox_Chip.c ****             return false;
 514              		.loc 1 136 12 view .LVU151
 515 0046 78B1     		cbz	r0, .L33
 139:Service/Srv_BlackBox_Chip.c ****         if ((info.cnt == 0) || (info.size == 0))
 516              		.loc 1 139 9 is_stmt 1 view .LVU152
 139:Service/Srv_BlackBox_Chip.c ****         if ((info.cnt == 0) || (info.size == 0))
 517              		.loc 1 139 43 is_stmt 0 view .LVU153
 518 0048 0E4B     		ldr	r3, .L43
 519 004a 5A68     		ldr	r2, [r3, #4]
 139:Service/Srv_BlackBox_Chip.c ****         if ((info.cnt == 0) || (info.size == 0))
 520              		.loc 1 139 9 view .LVU154
 521 004c 6B46     		mov	r3, sp
 522 004e 1068     		ldr	r0, [r2]	@ unaligned
 523 0050 5168     		ldr	r1, [r2, #4]	@ unaligned
 524 0052 03C3     		stmia	r3!, {r0, r1}
 140:Service/Srv_BlackBox_Chip.c ****             return false;
 525              		.loc 1 140 9 is_stmt 1 view .LVU155
 140:Service/Srv_BlackBox_Chip.c ****             return false;
 526              		.loc 1 140 12 is_stmt 0 view .LVU156
 527 0054 90B1     		cbz	r0, .L40
 140:Service/Srv_BlackBox_Chip.c ****             return false;
 528              		.loc 1 140 29 discriminator 1 view .LVU157
 529 0056 99B1     		cbz	r1, .L41
 144:Service/Srv_BlackBox_Chip.c ****             return false;
 530              		.loc 1 144 9 is_stmt 1 view .LVU158
 144:Service/Srv_BlackBox_Chip.c ****             return false;
 531              		.loc 1 144 14 is_stmt 0 view .LVU159
 532 0058 AAB2     		uxth	r2, r5
 533 005a 3146     		mov	r1, r6
 534 005c 2046     		mov	r0, r4
 535 005e B847     		blx	r7
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 15


 536              	.LVL31:
 537 0060 02E0     		b	.L33
 538              	.LVL32:
 539              	.L34:
 150:Service/Srv_BlackBox_Chip.c **** }
 540              		.loc 1 150 12 view .LVU160
 541 0062 0020     		movs	r0, #0
 542 0064 00E0     		b	.L33
 543              	.L35:
 544 0066 0020     		movs	r0, #0
 545              	.LVL33:
 546              	.L33:
 151:Service/Srv_BlackBox_Chip.c **** 
 547              		.loc 1 151 1 view .LVU161
 548 0068 03B0     		add	sp, sp, #12
 549              	.LCFI12:
 550              		.cfi_remember_state
 551              		.cfi_def_cfa_offset 20
 552              		@ sp needed
 553 006a F0BD     		pop	{r4, r5, r6, r7, pc}
 554              	.LVL34:
 555              	.L36:
 556              	.LCFI13:
 557              		.cfi_restore_state
 150:Service/Srv_BlackBox_Chip.c **** }
 558              		.loc 1 150 12 view .LVU162
 559 006c 0020     		movs	r0, #0
 560 006e FBE7     		b	.L33
 561              	.LVL35:
 562              	.L37:
 150:Service/Srv_BlackBox_Chip.c **** }
 563              		.loc 1 150 12 view .LVU163
 564 0070 0020     		movs	r0, #0
 565 0072 F9E7     		b	.L33
 566              	.L38:
 567 0074 0020     		movs	r0, #0
 568 0076 F7E7     		b	.L33
 569              	.L39:
 570 0078 0020     		movs	r0, #0
 571 007a F5E7     		b	.L33
 572              	.LVL36:
 573              	.L40:
 141:Service/Srv_BlackBox_Chip.c **** 
 574              		.loc 1 141 20 view .LVU164
 575 007c 0020     		movs	r0, #0
 576 007e F3E7     		b	.L33
 577              	.L41:
 578 0080 0020     		movs	r0, #0
 579 0082 F1E7     		b	.L33
 580              	.L44:
 581              		.align	2
 582              	.L43:
 583 0084 00000000 		.word	.LANCHOR0
 584              		.cfi_endproc
 585              	.LFE141:
 587              		.section	.text.SrvChip_BlackBox_Disable,"ax",%progbits
 588              		.align	1
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 16


 589              		.syntax unified
 590              		.thumb
 591              		.thumb_func
 593              	SrvChip_BlackBox_Disable:
 594              	.LVL37:
 595              	.LFB143:
 167:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef BlackBoxDataInfo;
 596              		.loc 1 167 1 is_stmt 1 view -0
 597              		.cfi_startproc
 598              		@ args = 0, pretend = 0, frame = 8
 599              		@ frame_needed = 0, uses_anonymous_args = 0
 167:Service/Srv_BlackBox_Chip.c ****     Chip_BlackBox_Info_TypeDef BlackBoxDataInfo;
 600              		.loc 1 167 1 is_stmt 0 view .LVU166
 601 0000 70B5     		push	{r4, r5, r6, lr}
 602              	.LCFI14:
 603              		.cfi_def_cfa_offset 16
 604              		.cfi_offset 4, -16
 605              		.cfi_offset 5, -12
 606              		.cfi_offset 6, -8
 607              		.cfi_offset 14, -4
 608 0002 82B0     		sub	sp, sp, #8
 609              	.LCFI15:
 610              		.cfi_def_cfa_offset 24
 168:Service/Srv_BlackBox_Chip.c ****     uint8_t retry = 10;
 611              		.loc 1 168 5 is_stmt 1 view .LVU167
 169:Service/Srv_BlackBox_Chip.c **** 
 612              		.loc 1 169 5 view .LVU168
 613              	.LVL38:
 171:Service/Srv_BlackBox_Chip.c ****     if (ChipBlackBox_Monitor.init && p_write)
 614              		.loc 1 171 5 view .LVU169
 615 0004 0023     		movs	r3, #0
 616 0006 0093     		str	r3, [sp]
 617 0008 0193     		str	r3, [sp, #4]
 172:Service/Srv_BlackBox_Chip.c ****     {
 618              		.loc 1 172 5 view .LVU170
 172:Service/Srv_BlackBox_Chip.c ****     {
 619              		.loc 1 172 29 is_stmt 0 view .LVU171
 620 000a 154B     		ldr	r3, .L52
 621 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 172:Service/Srv_BlackBox_Chip.c ****     {
 622              		.loc 1 172 8 view .LVU172
 623 000e 13B3     		cbz	r3, .L46
 624 0010 0546     		mov	r5, r0
 172:Service/Srv_BlackBox_Chip.c ****     {
 625              		.loc 1 172 35 discriminator 1 view .LVU173
 626 0012 18B3     		cbz	r0, .L49
 174:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.cnt = ChipBlackBox_Monitor.log_cnt;
 627              		.loc 1 174 9 is_stmt 1 view .LVU174
 174:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.cnt = ChipBlackBox_Monitor.log_cnt;
 628              		.loc 1 174 37 is_stmt 0 view .LVU175
 629 0014 124B     		ldr	r3, .L52
 630 0016 0024     		movs	r4, #0
 631 0018 5C70     		strb	r4, [r3, #1]
 175:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.size = ChipBlackBox_Monitor.log_size;
 632              		.loc 1 175 9 is_stmt 1 view .LVU176
 175:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.size = ChipBlackBox_Monitor.log_size;
 633              		.loc 1 175 52 is_stmt 0 view .LVU177
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 17


 634 001a 1A69     		ldr	r2, [r3, #16]
 175:Service/Srv_BlackBox_Chip.c ****         BlackBoxDataInfo.size = ChipBlackBox_Monitor.log_size;
 635              		.loc 1 175 30 view .LVU178
 636 001c 0092     		str	r2, [sp]
 176:Service/Srv_BlackBox_Chip.c ****         memcpy(ChipBlackBox_Monitor.p_buf, &BlackBoxDataInfo, sizeof(Chip_BlackBox_Info_TypeDef));
 637              		.loc 1 176 9 is_stmt 1 view .LVU179
 176:Service/Srv_BlackBox_Chip.c ****         memcpy(ChipBlackBox_Monitor.p_buf, &BlackBoxDataInfo, sizeof(Chip_BlackBox_Info_TypeDef));
 638              		.loc 1 176 53 is_stmt 0 view .LVU180
 639 001e 5A69     		ldr	r2, [r3, #20]
 176:Service/Srv_BlackBox_Chip.c ****         memcpy(ChipBlackBox_Monitor.p_buf, &BlackBoxDataInfo, sizeof(Chip_BlackBox_Info_TypeDef));
 640              		.loc 1 176 31 view .LVU181
 641 0020 0192     		str	r2, [sp, #4]
 177:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 642              		.loc 1 177 9 is_stmt 1 view .LVU182
 177:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 643              		.loc 1 177 36 is_stmt 0 view .LVU183
 644 0022 5E68     		ldr	r6, [r3, #4]
 177:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 645              		.loc 1 177 9 view .LVU184
 646 0024 6A46     		mov	r2, sp
 647 0026 03CA     		ldmia	r2!, {r0, r1}
 648              	.LVL39:
 177:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_cnt = 0;
 649              		.loc 1 177 9 view .LVU185
 650 0028 3060     		str	r0, [r6]	@ unaligned
 651 002a 7160     		str	r1, [r6, #4]	@ unaligned
 178:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 652              		.loc 1 178 9 is_stmt 1 view .LVU186
 178:Service/Srv_BlackBox_Chip.c ****         ChipBlackBox_Monitor.log_size = 0;
 653              		.loc 1 178 38 is_stmt 0 view .LVU187
 654 002c 1C61     		str	r4, [r3, #16]
 179:Service/Srv_BlackBox_Chip.c **** 
 655              		.loc 1 179 9 is_stmt 1 view .LVU188
 179:Service/Srv_BlackBox_Chip.c **** 
 656              		.loc 1 179 39 is_stmt 0 view .LVU189
 657 002e 5C61     		str	r4, [r3, #20]
 181:Service/Srv_BlackBox_Chip.c ****         {
 658              		.loc 1 181 9 is_stmt 1 view .LVU190
 169:Service/Srv_BlackBox_Chip.c **** 
 659              		.loc 1 169 13 is_stmt 0 view .LVU191
 660 0030 0A24     		movs	r4, #10
 661              	.LVL40:
 662              	.L47:
 181:Service/Srv_BlackBox_Chip.c ****         {
 663              		.loc 1 181 15 is_stmt 1 view .LVU192
 664 0032 7CB1     		cbz	r4, .L51
 184:Service/Srv_BlackBox_Chip.c ****             {
 665              		.loc 1 184 13 view .LVU193
 184:Service/Srv_BlackBox_Chip.c ****             {
 666              		.loc 1 184 106 is_stmt 0 view .LVU194
 667 0034 0A4B     		ldr	r3, .L52
 184:Service/Srv_BlackBox_Chip.c ****             {
 668              		.loc 1 184 18 view .LVU195
 669 0036 9A89     		ldrh	r2, [r3, #12]
 670 0038 5968     		ldr	r1, [r3, #4]
 671 003a 9868     		ldr	r0, [r3, #8]
 672 003c A847     		blx	r5
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 18


 673              	.LVL41:
 184:Service/Srv_BlackBox_Chip.c ****             {
 674              		.loc 1 184 16 view .LVU196
 675 003e 0346     		mov	r3, r0
 676 0040 48B9     		cbnz	r0, .L46
 186:Service/Srv_BlackBox_Chip.c ****                 if (retry == 0)
 677              		.loc 1 186 17 is_stmt 1 view .LVU197
 186:Service/Srv_BlackBox_Chip.c ****                 if (retry == 0)
 678              		.loc 1 186 23 is_stmt 0 view .LVU198
 679 0042 013C     		subs	r4, r4, #1
 680              	.LVL42:
 187:Service/Srv_BlackBox_Chip.c ****                     return false;
 681              		.loc 1 187 17 is_stmt 1 view .LVU199
 187:Service/Srv_BlackBox_Chip.c ****                     return false;
 682              		.loc 1 187 20 is_stmt 0 view .LVU200
 683 0044 14F0FF04 		ands	r4, r4, #255
 684              	.LVL43:
 187:Service/Srv_BlackBox_Chip.c ****                     return false;
 685              		.loc 1 187 20 view .LVU201
 686 0048 05D0     		beq	.L46
 193:Service/Srv_BlackBox_Chip.c ****         }
 687              		.loc 1 193 13 is_stmt 1 view .LVU202
 193:Service/Srv_BlackBox_Chip.c ****         }
 688              		.loc 1 193 24 is_stmt 0 view .LVU203
 689 004a 064B     		ldr	r3, .L52+4
 690 004c 9B68     		ldr	r3, [r3, #8]
 193:Service/Srv_BlackBox_Chip.c ****         }
 691              		.loc 1 193 13 view .LVU204
 692 004e 0A20     		movs	r0, #10
 693 0050 9847     		blx	r3
 694              	.LVL44:
 695 0052 EEE7     		b	.L47
 696              	.LVL45:
 697              	.L51:
 197:Service/Srv_BlackBox_Chip.c **** }
 698              		.loc 1 197 12 view .LVU205
 699 0054 0023     		movs	r3, #0
 700              	.LVL46:
 701              	.L46:
 198:Service/Srv_BlackBox_Chip.c **** 
 702              		.loc 1 198 1 view .LVU206
 703 0056 1846     		mov	r0, r3
 704 0058 02B0     		add	sp, sp, #8
 705              	.LCFI16:
 706              		.cfi_remember_state
 707              		.cfi_def_cfa_offset 16
 708              		@ sp needed
 709 005a 70BD     		pop	{r4, r5, r6, pc}
 710              	.LVL47:
 711              	.L49:
 712              	.LCFI17:
 713              		.cfi_restore_state
 197:Service/Srv_BlackBox_Chip.c **** }
 714              		.loc 1 197 12 view .LVU207
 715 005c 0023     		movs	r3, #0
 716 005e FAE7     		b	.L46
 717              	.L53:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 19


 718              		.align	2
 719              	.L52:
 720 0060 00000000 		.word	.LANCHOR0
 721 0064 00000000 		.word	SrvOsCommon
 722              		.cfi_endproc
 723              	.LFE143:
 725              		.global	SrvChip_BlackBox
 726              		.section	.bss.ChipBlackBox_Monitor,"aw",%nobits
 727              		.align	2
 728              		.set	.LANCHOR0,. + 0
 731              	ChipBlackBox_Monitor:
 732 0000 00000000 		.space	36
 732      00000000 
 732      00000000 
 732      00000000 
 732      00000000 
 733              		.section	.data.SrvChip_BlackBox,"aw"
 734              		.align	2
 737              	SrvChip_BlackBox:
 738 0000 00000000 		.word	SrvChip_BlackBox_Init
 739 0004 00000000 		.word	SrvChip_BlackBox_Enable
 740 0008 00000000 		.word	SrvChip_BlackBox_Disable
 741 000c 00000000 		.word	SrvChip_BlackBox_PushData
 742 0010 00000000 		.word	SrvChip_BlackBox_Read
 743 0014 00000000 		.word	SrvChip_BlackBox_GetInfo
 744              		.text
 745              	.Letext0:
 746              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 747              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 748              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\lib\\gcc\\arm-none-eabi\
 749              		.file 5 "System/FreeRTOS/include/portable.h"
 750              		.file 6 "Service/Srv_OsCommon.h"
 751              		.file 7 "HW_Lib/AT32F435/drivers/inc/at32f435_437_tmr.h"
 752              		.file 8 "common/Error_Log/../../common/gen_physic_def/imu_data.h"
 753              		.file 9 "Service/Srv_BlackBox_Def.h"
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 Srv_BlackBox_Chip.c
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:20     .text.SrvChip_BlackBox_Init:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:25     .text.SrvChip_BlackBox_Init:00000000 SrvChip_BlackBox_Init
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:142    .text.SrvChip_BlackBox_Init:00000060 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:148    .text.SrvChip_BlackBox_PushData:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:153    .text.SrvChip_BlackBox_PushData:00000000 SrvChip_BlackBox_PushData
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:257    .text.SrvChip_BlackBox_PushData:00000054 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:262    .text.SrvChip_BlackBox_Enable:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:267    .text.SrvChip_BlackBox_Enable:00000000 SrvChip_BlackBox_Enable
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:301    .text.SrvChip_BlackBox_Enable:00000014 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:306    .text.SrvChip_BlackBox_GetInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:311    .text.SrvChip_BlackBox_GetInfo:00000000 SrvChip_BlackBox_GetInfo
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:426    .text.SrvChip_BlackBox_GetInfo:00000060 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:431    .text.SrvChip_BlackBox_Read:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:436    .text.SrvChip_BlackBox_Read:00000000 SrvChip_BlackBox_Read
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:583    .text.SrvChip_BlackBox_Read:00000084 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:588    .text.SrvChip_BlackBox_Disable:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:593    .text.SrvChip_BlackBox_Disable:00000000 SrvChip_BlackBox_Disable
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:720    .text.SrvChip_BlackBox_Disable:00000060 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:737    .data.SrvChip_BlackBox:00000000 SrvChip_BlackBox
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:727    .bss.ChipBlackBox_Monitor:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:731    .bss.ChipBlackBox_Monitor:00000000 ChipBlackBox_Monitor
C:\Users\8bit\AppData\Local\Temp\cckMf0ll.s:734    .data.SrvChip_BlackBox:00000000 $d

UNDEFINED SYMBOLS
SrvOsCommon
