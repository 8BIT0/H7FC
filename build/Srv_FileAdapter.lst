ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Srv_FileAdapter.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SrvFileAdapter_Create_AdapterObj,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	SrvFileAdapter_Create_AdapterObj:
  26              	.LVL0:
  27              	.LFB148:
  28              		.file 1 "Service/Srv_FileAdapter.c"
   1:Service/Srv_FileAdapter.c **** /* 
   2:Service/Srv_FileAdapter.c ****  * Auther: 8_B!T0
   3:Service/Srv_FileAdapter.c ****  * bref: Use YMODEM receive firmware
   4:Service/Srv_FileAdapter.c ****  * 
   5:Service/Srv_FileAdapter.c ****  */
   6:Service/Srv_FileAdapter.c **** #include "Srv_FileAdapter.h"
   7:Service/Srv_FileAdapter.c **** #include "Srv_OsCommon.h"
   8:Service/Srv_FileAdapter.c **** #include "../System/storage/Storage.h"
   9:Service/Srv_FileAdapter.c **** #include "YModem.h"
  10:Service/Srv_FileAdapter.c **** #include "HW_Def.h"
  11:Service/Srv_FileAdapter.c **** #include "debug_util.h"
  12:Service/Srv_FileAdapter.c **** 
  13:Service/Srv_FileAdapter.c **** #define ADAPTER_INPUT_BUFF_SIZE 2048
  14:Service/Srv_FileAdapter.c **** 
  15:Service/Srv_FileAdapter.c **** #define ADAPTER_INFO(fmt,...) Debug_Print(&DebugPort, "[ ADAPTER INFO ] ", fmt, ##__VA_ARGS__)
  16:Service/Srv_FileAdapter.c **** 
  17:Service/Srv_FileAdapter.c **** typedef struct
  18:Service/Srv_FileAdapter.c **** {
  19:Service/Srv_FileAdapter.c ****     uint8_t buf[ADAPTER_INPUT_BUFF_SIZE];
  20:Service/Srv_FileAdapter.c ****     uint16_t size;
  21:Service/Srv_FileAdapter.c ****     uint16_t total_size;
  22:Service/Srv_FileAdapter.c **** } Adapter_InputStream_TypeDef;
  23:Service/Srv_FileAdapter.c **** 
  24:Service/Srv_FileAdapter.c **** /* internal vriable */
  25:Service/Srv_FileAdapter.c **** static Adapter_InputStream_TypeDef AdapterInStream = {
  26:Service/Srv_FileAdapter.c ****     .size = 0,
  27:Service/Srv_FileAdapter.c ****     .total_size = ADAPTER_INPUT_BUFF_SIZE,
  28:Service/Srv_FileAdapter.c **** };
  29:Service/Srv_FileAdapter.c **** 
  30:Service/Srv_FileAdapter.c **** /* internal function */
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 2


  31:Service/Srv_FileAdapter.c **** static Adapter_Polling_State SrvAdapter_YModem_Polling(SrvFileAdapterObj_TypeDef *p_Adapter, bool *
  32:Service/Srv_FileAdapter.c **** 
  33:Service/Srv_FileAdapter.c **** /* external function */
  34:Service/Srv_FileAdapter.c **** static SrvFileAdapterObj_TypeDef* SrvFileAdapter_Create_AdapterObj(Adapter_ProtoType_List proto_typ
  35:Service/Srv_FileAdapter.c **** static bool SrvFileAdapter_Destory_AdapterObj(SrvFileAdapterObj_TypeDef *p_Adapter);
  36:Service/Srv_FileAdapter.c **** static void SrvFileAdapter_Set_SendCallback(SrvFileAdapterObj_TypeDef *p_Adapter, SrvFileAdapter_Se
  37:Service/Srv_FileAdapter.c **** static Adapter_Polling_State SrvFileAdapter_Polling(uint32_t sys_time, SrvFileAdapterObj_TypeDef *p
  38:Service/Srv_FileAdapter.c **** static bool SrvFileAdapter_PushToStream(uint8_t *p_buf, uint16_t size);
  39:Service/Srv_FileAdapter.c **** static FileInfo_TypeDef SrvFileAdapter_GetFileInfo(SrvFileAdapterObj_TypeDef *p_Adapter);
  40:Service/Srv_FileAdapter.c **** 
  41:Service/Srv_FileAdapter.c **** /* external virable */
  42:Service/Srv_FileAdapter.c **** SrvFileAdapter_TypeDef SrvFileAdapter = {
  43:Service/Srv_FileAdapter.c ****     .create = SrvFileAdapter_Create_AdapterObj,
  44:Service/Srv_FileAdapter.c ****     .destory = SrvFileAdapter_Destory_AdapterObj,
  45:Service/Srv_FileAdapter.c ****     .push_to_stream = SrvFileAdapter_PushToStream,
  46:Service/Srv_FileAdapter.c ****     .polling = SrvFileAdapter_Polling,
  47:Service/Srv_FileAdapter.c ****     .set_send = SrvFileAdapter_Set_SendCallback,
  48:Service/Srv_FileAdapter.c ****     .get_file_info = SrvFileAdapter_GetFileInfo,
  49:Service/Srv_FileAdapter.c **** };
  50:Service/Srv_FileAdapter.c **** 
  51:Service/Srv_FileAdapter.c **** static SrvFileAdapterObj_TypeDef* SrvFileAdapter_Create_AdapterObj(Adapter_ProtoType_List proto_typ
  52:Service/Srv_FileAdapter.c **** {
  29              		.loc 1 52 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 52 1 is_stmt 0 view .LVU1
  34 0000 30B5     		push	{r4, r5, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 12
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 14, -4
  40 0002 85B0     		sub	sp, sp, #20
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 32
  43 0004 0546     		mov	r5, r0
  44 0006 04A8     		add	r0, sp, #16
  45              	.LVL1:
  46              		.loc 1 52 1 view .LVU2
  47 0008 00E90E00 		stmdb	r0, {r1, r2, r3}
  53:Service/Srv_FileAdapter.c ****     SrvFileAdapterObj_TypeDef *p_AdapterObj = NULL;
  48              		.loc 1 53 5 is_stmt 1 view .LVU3
  49              	.LVL2:
  54:Service/Srv_FileAdapter.c ****     
  55:Service/Srv_FileAdapter.c ****     p_AdapterObj = SrvOsCommon.malloc(sizeof(SrvFileAdapterObj_TypeDef));
  50              		.loc 1 55 5 view .LVU4
  51              		.loc 1 55 31 is_stmt 0 view .LVU5
  52 000c 154B     		ldr	r3, .L9
  53 000e DB6A     		ldr	r3, [r3, #44]
  54              		.loc 1 55 20 view .LVU6
  55 0010 2820     		movs	r0, #40
  56 0012 9847     		blx	r3
  57              	.LVL3:
  56:Service/Srv_FileAdapter.c ****     if (p_AdapterObj == NULL)
  58              		.loc 1 56 5 is_stmt 1 view .LVU7
  59              		.loc 1 56 8 is_stmt 0 view .LVU8
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 3


  60 0014 0446     		mov	r4, r0
  61 0016 A8B1     		cbz	r0, .L7
  62              	.LVL4:
  63              	.L2:
  57:Service/Srv_FileAdapter.c ****         SrvOsCommon.free(p_AdapterObj);
  58:Service/Srv_FileAdapter.c ****     
  59:Service/Srv_FileAdapter.c ****     p_AdapterObj->frame_type = proto_type;
  64              		.loc 1 59 5 is_stmt 1 view .LVU9
  65              		.loc 1 59 30 is_stmt 0 view .LVU10
  66 0018 2571     		strb	r5, [r4, #4]
  60:Service/Srv_FileAdapter.c ****     p_AdapterObj->file_info = file_info;
  67              		.loc 1 60 5 is_stmt 1 view .LVU11
  68              		.loc 1 60 29 is_stmt 0 view .LVU12
  69 001a 04F11803 		add	r3, r4, #24
  70 001e 04AA     		add	r2, sp, #16
  71 0020 12E90700 		ldmdb	r2, {r0, r1, r2}
  72 0024 83E80700 		stm	r3, {r0, r1, r2}
  61:Service/Srv_FileAdapter.c **** 
  62:Service/Srv_FileAdapter.c ****     switch (proto_type)
  73              		.loc 1 62 5 is_stmt 1 view .LVU13
  74 0028 012D     		cmp	r5, #1
  75 002a 15D1     		bne	.L3
  63:Service/Srv_FileAdapter.c ****     {
  64:Service/Srv_FileAdapter.c ****         case SrvFileAdapter_Frame_YModem:
  65:Service/Srv_FileAdapter.c ****             /* create YModem Object */
  66:Service/Srv_FileAdapter.c ****             p_AdapterObj->FrameObj = SrvOsCommon.malloc(YModemObj_size);
  76              		.loc 1 66 13 view .LVU14
  77              		.loc 1 66 49 is_stmt 0 view .LVU15
  78 002c 0D4B     		ldr	r3, .L9
  79 002e DB6A     		ldr	r3, [r3, #44]
  80              		.loc 1 66 38 view .LVU16
  81 0030 2420     		movs	r0, #36
  82 0032 9847     		blx	r3
  83              	.LVL5:
  84 0034 0546     		mov	r5, r0
  85              		.loc 1 66 36 view .LVU17
  86 0036 A060     		str	r0, [r4, #8]
  67:Service/Srv_FileAdapter.c ****             if (p_AdapterObj->FrameObj == NULL)
  87              		.loc 1 67 13 is_stmt 1 view .LVU18
  88              		.loc 1 67 16 is_stmt 0 view .LVU19
  89 0038 40B1     		cbz	r0, .L8
  90              	.LVL6:
  91              	.L4:
  68:Service/Srv_FileAdapter.c ****             {
  69:Service/Srv_FileAdapter.c ****                 SrvOsCommon.free(p_AdapterObj);
  70:Service/Srv_FileAdapter.c ****                 p_AdapterObj = NULL;
  71:Service/Srv_FileAdapter.c ****             }
  72:Service/Srv_FileAdapter.c ****             
  73:Service/Srv_FileAdapter.c ****             p_AdapterObj->FrameApi = (void *)&YModem;
  92              		.loc 1 73 13 is_stmt 1 view .LVU20
  93              		.loc 1 73 36 is_stmt 0 view .LVU21
  94 003a 0B4B     		ldr	r3, .L9+4
  95 003c E360     		str	r3, [r4, #12]
  74:Service/Srv_FileAdapter.c ****             break;
  96              		.loc 1 74 13 is_stmt 1 view .LVU22
  97              	.LVL7:
  98              	.L1:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 4


  75:Service/Srv_FileAdapter.c **** 
  76:Service/Srv_FileAdapter.c ****         default:
  77:Service/Srv_FileAdapter.c ****             SrvOsCommon.free(p_AdapterObj);
  78:Service/Srv_FileAdapter.c ****             p_AdapterObj = NULL;
  79:Service/Srv_FileAdapter.c ****             break;
  80:Service/Srv_FileAdapter.c ****     }
  81:Service/Srv_FileAdapter.c **** 
  82:Service/Srv_FileAdapter.c ****     return p_AdapterObj;
  83:Service/Srv_FileAdapter.c **** }
  99              		.loc 1 83 1 is_stmt 0 view .LVU23
 100 003e 2046     		mov	r0, r4
 101 0040 05B0     		add	sp, sp, #20
 102              	.LCFI2:
 103              		.cfi_remember_state
 104              		.cfi_def_cfa_offset 12
 105              		@ sp needed
 106 0042 30BD     		pop	{r4, r5, pc}
 107              	.LVL8:
 108              	.L7:
 109              	.LCFI3:
 110              		.cfi_restore_state
  57:Service/Srv_FileAdapter.c ****     
 111              		.loc 1 57 9 is_stmt 1 view .LVU24
  57:Service/Srv_FileAdapter.c ****     
 112              		.loc 1 57 20 is_stmt 0 view .LVU25
 113 0044 074B     		ldr	r3, .L9
 114 0046 1B6B     		ldr	r3, [r3, #48]
  57:Service/Srv_FileAdapter.c ****     
 115              		.loc 1 57 9 view .LVU26
 116 0048 9847     		blx	r3
 117              	.LVL9:
  57:Service/Srv_FileAdapter.c ****     
 118              		.loc 1 57 9 view .LVU27
 119 004a E5E7     		b	.L2
 120              	.L8:
  69:Service/Srv_FileAdapter.c ****                 p_AdapterObj = NULL;
 121              		.loc 1 69 17 is_stmt 1 view .LVU28
  69:Service/Srv_FileAdapter.c ****                 p_AdapterObj = NULL;
 122              		.loc 1 69 28 is_stmt 0 view .LVU29
 123 004c 054B     		ldr	r3, .L9
 124 004e 1B6B     		ldr	r3, [r3, #48]
  69:Service/Srv_FileAdapter.c ****                 p_AdapterObj = NULL;
 125              		.loc 1 69 17 view .LVU30
 126 0050 2046     		mov	r0, r4
 127 0052 9847     		blx	r3
 128              	.LVL10:
  70:Service/Srv_FileAdapter.c ****             }
 129              		.loc 1 70 17 is_stmt 1 view .LVU31
  70:Service/Srv_FileAdapter.c ****             }
 130              		.loc 1 70 30 is_stmt 0 view .LVU32
 131 0054 2C46     		mov	r4, r5
 132 0056 F0E7     		b	.L4
 133              	.LVL11:
 134              	.L3:
  77:Service/Srv_FileAdapter.c ****             p_AdapterObj = NULL;
 135              		.loc 1 77 13 is_stmt 1 view .LVU33
  77:Service/Srv_FileAdapter.c ****             p_AdapterObj = NULL;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 5


 136              		.loc 1 77 24 is_stmt 0 view .LVU34
 137 0058 024B     		ldr	r3, .L9
 138 005a 1B6B     		ldr	r3, [r3, #48]
  77:Service/Srv_FileAdapter.c ****             p_AdapterObj = NULL;
 139              		.loc 1 77 13 view .LVU35
 140 005c 2046     		mov	r0, r4
 141 005e 9847     		blx	r3
 142              	.LVL12:
  78:Service/Srv_FileAdapter.c ****             break;
 143              		.loc 1 78 13 is_stmt 1 view .LVU36
  79:Service/Srv_FileAdapter.c ****     }
 144              		.loc 1 79 13 view .LVU37
  78:Service/Srv_FileAdapter.c ****             break;
 145              		.loc 1 78 26 is_stmt 0 view .LVU38
 146 0060 0024     		movs	r4, #0
  82:Service/Srv_FileAdapter.c **** }
 147              		.loc 1 82 5 is_stmt 1 view .LVU39
  82:Service/Srv_FileAdapter.c **** }
 148              		.loc 1 82 12 is_stmt 0 view .LVU40
 149 0062 ECE7     		b	.L1
 150              	.L10:
 151              		.align	2
 152              	.L9:
 153 0064 00000000 		.word	SrvOsCommon
 154 0068 00000000 		.word	YModem
 155              		.cfi_endproc
 156              	.LFE148:
 158              		.section	.text.SrvFileAdapter_Set_SendCallback,"ax",%progbits
 159              		.align	1
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 164              	SrvFileAdapter_Set_SendCallback:
 165              	.LVL13:
 166              	.LFB150:
  84:Service/Srv_FileAdapter.c **** 
  85:Service/Srv_FileAdapter.c **** static bool SrvFileAdapter_Destory_AdapterObj(SrvFileAdapterObj_TypeDef *p_Adapter)
  86:Service/Srv_FileAdapter.c **** {
  87:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_Adapter->FrameObj)
  88:Service/Srv_FileAdapter.c ****     {
  89:Service/Srv_FileAdapter.c ****         if (p_Adapter->frame_type == SrvFileAdapter_Frame_YModem)
  90:Service/Srv_FileAdapter.c ****             memset(p_Adapter->FrameObj, 0, sizeof(YModemObj_TypeDef));
  91:Service/Srv_FileAdapter.c **** 
  92:Service/Srv_FileAdapter.c ****         SrvOsCommon.free(p_Adapter->FrameObj);
  93:Service/Srv_FileAdapter.c ****         memset(p_Adapter, 0, sizeof(SrvFileAdapterObj_TypeDef));
  94:Service/Srv_FileAdapter.c ****         p_Adapter->FrameApi = NULL;
  95:Service/Srv_FileAdapter.c ****         p_Adapter->FrameObj = NULL;
  96:Service/Srv_FileAdapter.c ****         SrvOsCommon.free(p_Adapter);
  97:Service/Srv_FileAdapter.c ****         return true;
  98:Service/Srv_FileAdapter.c ****     }
  99:Service/Srv_FileAdapter.c **** 
 100:Service/Srv_FileAdapter.c ****     return false;
 101:Service/Srv_FileAdapter.c **** }
 102:Service/Srv_FileAdapter.c **** 
 103:Service/Srv_FileAdapter.c **** static void SrvFileAdapter_Set_SendCallback(SrvFileAdapterObj_TypeDef *p_Adapter,  SrvFileAdapter_S
 104:Service/Srv_FileAdapter.c **** {
 167              		.loc 1 104 1 is_stmt 1 view -0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 6


 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		@ link register save eliminated.
 105:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_Adapter->FrameObj)
 172              		.loc 1 105 5 view .LVU42
 173              		.loc 1 105 8 is_stmt 0 view .LVU43
 174 0000 20B1     		cbz	r0, .L11
 175              		.loc 1 105 31 discriminator 1 view .LVU44
 176 0002 8268     		ldr	r2, [r0, #8]
 177              		.loc 1 105 19 discriminator 1 view .LVU45
 178 0004 12B1     		cbz	r2, .L11
 106:Service/Srv_FileAdapter.c ****     {
 107:Service/Srv_FileAdapter.c ****         switch ((uint8_t) p_Adapter->frame_type)
 179              		.loc 1 107 9 is_stmt 1 view .LVU46
 180              		.loc 1 107 36 is_stmt 0 view .LVU47
 181 0006 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 182              		.loc 1 107 9 view .LVU48
 183 0008 012B     		cmp	r3, #1
 184 000a 00D0     		beq	.L13
 185              	.L11:
 108:Service/Srv_FileAdapter.c ****         {
 109:Service/Srv_FileAdapter.c ****             case SrvFileAdapter_Frame_YModem: To_YModem_Obj(p_Adapter->FrameObj)->send_callback = s
 110:Service/Srv_FileAdapter.c ****             default: break;
 111:Service/Srv_FileAdapter.c ****         }
 112:Service/Srv_FileAdapter.c ****     }
 113:Service/Srv_FileAdapter.c **** }
 186              		.loc 1 113 1 view .LVU49
 187 000c 7047     		bx	lr
 188              	.L13:
 109:Service/Srv_FileAdapter.c ****             default: break;
 189              		.loc 1 109 47 is_stmt 1 view .LVU50
 109:Service/Srv_FileAdapter.c ****             default: break;
 190              		.loc 1 109 97 is_stmt 0 view .LVU51
 191 000e 1161     		str	r1, [r2, #16]
 109:Service/Srv_FileAdapter.c ****             default: break;
 192              		.loc 1 109 105 is_stmt 1 view .LVU52
 193              		.loc 1 113 1 is_stmt 0 view .LVU53
 194 0010 FCE7     		b	.L11
 195              		.cfi_endproc
 196              	.LFE150:
 198              		.section	.text.SrvFileAdapter_Store_Firmware,"ax",%progbits
 199              		.align	1
 200              		.syntax unified
 201              		.thumb
 202              		.thumb_func
 204              	SrvFileAdapter_Store_Firmware:
 205              	.LVL14:
 206              	.LFB152:
 114:Service/Srv_FileAdapter.c **** 
 115:Service/Srv_FileAdapter.c **** static bool SrvFileAdapter_PushToStream(uint8_t *p_buf, uint16_t size)
 116:Service/Srv_FileAdapter.c **** {
 117:Service/Srv_FileAdapter.c ****     if (p_buf && size && (AdapterInStream.size + size <= AdapterInStream.total_size))
 118:Service/Srv_FileAdapter.c ****     {
 119:Service/Srv_FileAdapter.c ****         /* push data into adapter input stream */
 120:Service/Srv_FileAdapter.c ****         memcpy(&AdapterInStream.buf[AdapterInStream.size], p_buf, size);
 121:Service/Srv_FileAdapter.c ****         AdapterInStream.size += size;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 7


 122:Service/Srv_FileAdapter.c **** 
 123:Service/Srv_FileAdapter.c ****         return true;
 124:Service/Srv_FileAdapter.c ****     }
 125:Service/Srv_FileAdapter.c **** 
 126:Service/Srv_FileAdapter.c ****     return false;
 127:Service/Srv_FileAdapter.c **** }
 128:Service/Srv_FileAdapter.c **** 
 129:Service/Srv_FileAdapter.c **** static Adapter_Polling_State SrvFileAdapter_Store_Firmware(SrvFileAdapterObj_TypeDef *p_Adapter, ui
 130:Service/Srv_FileAdapter.c **** {
 207              		.loc 1 130 1 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 211              		.loc 1 130 1 is_stmt 0 view .LVU55
 212 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 213              	.LCFI4:
 214              		.cfi_def_cfa_offset 24
 215              		.cfi_offset 3, -24
 216              		.cfi_offset 4, -20
 217              		.cfi_offset 5, -16
 218              		.cfi_offset 6, -12
 219              		.cfi_offset 7, -8
 220              		.cfi_offset 14, -4
 131:Service/Srv_FileAdapter.c ****     uint32_t max_file_size = 0;
 221              		.loc 1 131 5 is_stmt 1 view .LVU56
 222              	.LVL15:
 132:Service/Srv_FileAdapter.c **** 
 133:Service/Srv_FileAdapter.c ****     if ((p_Adapter == NULL) || \
 223              		.loc 1 133 5 view .LVU57
 224              		.loc 1 133 8 is_stmt 0 view .LVU58
 225 0002 F8B1     		cbz	r0, .L16
 226 0004 1546     		mov	r5, r2
 227 0006 0646     		mov	r6, r0
 134:Service/Srv_FileAdapter.c ****         (p_Adapter->file_info.File_Type == FileType_None) || \
 228              		.loc 1 134 30 discriminator 1 view .LVU59
 229 0008 047E     		ldrb	r4, [r0, #24]	@ zero_extendqisi2
 133:Service/Srv_FileAdapter.c ****         (p_Adapter->file_info.File_Type == FileType_None) || \
 230              		.loc 1 133 29 discriminator 1 view .LVU60
 231 000a ECB1     		cbz	r4, .L17
 232              		.loc 1 134 59 view .LVU61
 233 000c F1B1     		cbz	r1, .L18
 135:Service/Srv_FileAdapter.c ****         (p_data == NULL) || \
 234              		.loc 1 135 26 view .LVU62
 235 000e FAB1     		cbz	r2, .L19
 136:Service/Srv_FileAdapter.c ****         (size == 0))
 137:Service/Srv_FileAdapter.c ****         return Adapter_Proc_Failed;
 138:Service/Srv_FileAdapter.c **** 
 139:Service/Srv_FileAdapter.c ****     if (p_Adapter->file_info.File_Type == FileType_APP)
 236              		.loc 1 139 5 is_stmt 1 view .LVU63
 237              		.loc 1 139 8 is_stmt 0 view .LVU64
 238 0010 012C     		cmp	r4, #1
 239 0012 02D0     		beq	.L24
 140:Service/Srv_FileAdapter.c ****     {
 141:Service/Srv_FileAdapter.c ****         max_file_size = App_Section_Size;
 142:Service/Srv_FileAdapter.c **** 
 143:Service/Srv_FileAdapter.c ****         /* check received file size */
 144:Service/Srv_FileAdapter.c ****         if (p_Adapter->file_info.File_Size >= max_file_size)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 8


 145:Service/Srv_FileAdapter.c ****             /* abort file receive */
 146:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 147:Service/Srv_FileAdapter.c ****         
 148:Service/Srv_FileAdapter.c ****         /* write stream data to storage section */
 149:Service/Srv_FileAdapter.c ****         if (!Storage.write_firmware(External_Flash, p_Adapter->store_addr_offset, p_data, size))
 150:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 151:Service/Srv_FileAdapter.c **** 
 152:Service/Srv_FileAdapter.c ****         p_Adapter->file_info.File_Size += size;
 153:Service/Srv_FileAdapter.c ****         p_Adapter->store_addr_offset += size;
 154:Service/Srv_FileAdapter.c ****     }
 155:Service/Srv_FileAdapter.c **** 
 156:Service/Srv_FileAdapter.c ****     return Adapter_Processing;
 240              		.loc 1 156 12 view .LVU65
 241 0014 0124     		movs	r4, #1
 242              	.LVL16:
 243              	.L15:
 157:Service/Srv_FileAdapter.c **** }
 244              		.loc 1 157 1 view .LVU66
 245 0016 2046     		mov	r0, r4
 246 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 247              	.LVL17:
 248              	.L24:
 141:Service/Srv_FileAdapter.c **** 
 249              		.loc 1 141 9 is_stmt 1 view .LVU67
 141:Service/Srv_FileAdapter.c **** 
 250              		.loc 1 141 23 is_stmt 0 view .LVU68
 251 001a 104B     		ldr	r3, .L25
 252 001c 1048     		ldr	r0, .L25+4
 253              	.LVL18:
 144:Service/Srv_FileAdapter.c ****             /* abort file receive */
 254              		.loc 1 144 9 is_stmt 1 view .LVU69
 144:Service/Srv_FileAdapter.c ****             /* abort file receive */
 255              		.loc 1 144 33 is_stmt 0 view .LVU70
 256 001e 326A     		ldr	r2, [r6, #32]
 257              	.LVL19:
 144:Service/Srv_FileAdapter.c ****             /* abort file receive */
 258              		.loc 1 144 12 view .LVU71
 259 0020 1B1A     		subs	r3, r3, r0
 260              	.LVL20:
 144:Service/Srv_FileAdapter.c ****             /* abort file receive */
 261              		.loc 1 144 12 view .LVU72
 262 0022 9A42     		cmp	r2, r3
 263 0024 16D2     		bcs	.L21
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 264              		.loc 1 149 9 is_stmt 1 view .LVU73
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 265              		.loc 1 149 21 is_stmt 0 view .LVU74
 266 0026 0F4B     		ldr	r3, .L25+8
 267              	.LVL21:
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 268              		.loc 1 149 21 view .LVU75
 269 0028 DF6A     		ldr	r7, [r3, #44]
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 270              		.loc 1 149 14 view .LVU76
 271 002a 2B46     		mov	r3, r5
 272 002c 0A46     		mov	r2, r1
 273 002e 716A     		ldr	r1, [r6, #36]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 9


 274              	.LVL22:
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 275              		.loc 1 149 14 view .LVU77
 276 0030 0120     		movs	r0, #1
 277 0032 B847     		blx	r7
 278              	.LVL23:
 149:Service/Srv_FileAdapter.c ****             return Adapter_Proc_Failed;
 279              		.loc 1 149 12 view .LVU78
 280 0034 80B1     		cbz	r0, .L22
 152:Service/Srv_FileAdapter.c ****         p_Adapter->store_addr_offset += size;
 281              		.loc 1 152 9 is_stmt 1 view .LVU79
 152:Service/Srv_FileAdapter.c ****         p_Adapter->store_addr_offset += size;
 282              		.loc 1 152 40 is_stmt 0 view .LVU80
 283 0036 336A     		ldr	r3, [r6, #32]
 284 0038 2B44     		add	r3, r3, r5
 285 003a 3362     		str	r3, [r6, #32]
 153:Service/Srv_FileAdapter.c ****     }
 286              		.loc 1 153 9 is_stmt 1 view .LVU81
 153:Service/Srv_FileAdapter.c ****     }
 287              		.loc 1 153 38 is_stmt 0 view .LVU82
 288 003c 726A     		ldr	r2, [r6, #36]
 289 003e 2A44     		add	r2, r2, r5
 290 0040 7262     		str	r2, [r6, #36]
 291 0042 E8E7     		b	.L15
 292              	.LVL24:
 293              	.L16:
 137:Service/Srv_FileAdapter.c **** 
 294              		.loc 1 137 16 view .LVU83
 295 0044 0324     		movs	r4, #3
 296 0046 E6E7     		b	.L15
 297              	.L17:
 137:Service/Srv_FileAdapter.c **** 
 298              		.loc 1 137 16 view .LVU84
 299 0048 0324     		movs	r4, #3
 300 004a E4E7     		b	.L15
 301              	.L18:
 302 004c 0324     		movs	r4, #3
 303 004e E2E7     		b	.L15
 304              	.L19:
 305 0050 0324     		movs	r4, #3
 306 0052 E0E7     		b	.L15
 307              	.LVL25:
 308              	.L21:
 146:Service/Srv_FileAdapter.c ****         
 309              		.loc 1 146 20 view .LVU85
 310 0054 0324     		movs	r4, #3
 311 0056 DEE7     		b	.L15
 312              	.LVL26:
 313              	.L22:
 150:Service/Srv_FileAdapter.c **** 
 314              		.loc 1 150 20 view .LVU86
 315 0058 0324     		movs	r4, #3
 316 005a DCE7     		b	.L15
 317              	.L26:
 318              		.align	2
 319              	.L25:
 320 005c 00000000 		.word	__rom_e
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 10


 321 0060 00000000 		.word	__boot_e
 322 0064 00000000 		.word	Storage
 323              		.cfi_endproc
 324              	.LFE152:
 326              		.section	.text.SrvAdapter_YModem_Polling,"ax",%progbits
 327              		.align	1
 328              		.syntax unified
 329              		.thumb
 330              		.thumb_func
 332              	SrvAdapter_YModem_Polling:
 333              	.LVL27:
 334              	.LFB155:
 158:Service/Srv_FileAdapter.c **** 
 159:Service/Srv_FileAdapter.c **** static Adapter_Polling_State SrvFileAdapter_Polling(uint32_t sys_time, SrvFileAdapterObj_TypeDef *p
 160:Service/Srv_FileAdapter.c **** {
 161:Service/Srv_FileAdapter.c ****     bool clear_stream = false;
 162:Service/Srv_FileAdapter.c ****     Adapter_Polling_State state = Adapter_Idle;
 163:Service/Srv_FileAdapter.c **** 
 164:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_Adapter->FrameObj && p_Adapter->FrameApi)
 165:Service/Srv_FileAdapter.c ****     {
 166:Service/Srv_FileAdapter.c ****         p_Adapter->sys_time = sys_time;
 167:Service/Srv_FileAdapter.c ****         switch ((uint8_t)p_Adapter->frame_type)
 168:Service/Srv_FileAdapter.c ****         {
 169:Service/Srv_FileAdapter.c ****             case SrvFileAdapter_Frame_YModem:
 170:Service/Srv_FileAdapter.c ****                 state = SrvAdapter_YModem_Polling(p_Adapter, &clear_stream);
 171:Service/Srv_FileAdapter.c ****                 break;
 172:Service/Srv_FileAdapter.c **** 
 173:Service/Srv_FileAdapter.c ****             default: break;
 174:Service/Srv_FileAdapter.c ****         }
 175:Service/Srv_FileAdapter.c ****         
 176:Service/Srv_FileAdapter.c ****         if (clear_stream)
 177:Service/Srv_FileAdapter.c ****         {
 178:Service/Srv_FileAdapter.c ****             memset(AdapterInStream.buf, 0, AdapterInStream.size);
 179:Service/Srv_FileAdapter.c ****             AdapterInStream.size = 0;
 180:Service/Srv_FileAdapter.c ****         }
 181:Service/Srv_FileAdapter.c ****     }
 182:Service/Srv_FileAdapter.c **** 
 183:Service/Srv_FileAdapter.c ****     return state;
 184:Service/Srv_FileAdapter.c **** }
 185:Service/Srv_FileAdapter.c **** 
 186:Service/Srv_FileAdapter.c **** static FileInfo_TypeDef SrvFileAdapter_GetFileInfo(SrvFileAdapterObj_TypeDef *p_Adapter)
 187:Service/Srv_FileAdapter.c **** {
 188:Service/Srv_FileAdapter.c ****     FileInfo_TypeDef FileInfo;
 189:Service/Srv_FileAdapter.c **** 
 190:Service/Srv_FileAdapter.c ****     memset(&FileInfo, 0, sizeof(FileInfo_TypeDef));
 191:Service/Srv_FileAdapter.c **** 
 192:Service/Srv_FileAdapter.c ****     if (p_Adapter)
 193:Service/Srv_FileAdapter.c ****         FileInfo = p_Adapter->file_info;
 194:Service/Srv_FileAdapter.c **** 
 195:Service/Srv_FileAdapter.c ****     return FileInfo;
 196:Service/Srv_FileAdapter.c **** }
 197:Service/Srv_FileAdapter.c **** 
 198:Service/Srv_FileAdapter.c **** /******************************************************************* YModem API *******************
 199:Service/Srv_FileAdapter.c **** static Adapter_Polling_State SrvAdapter_YModem_Polling(SrvFileAdapterObj_TypeDef *p_Adapter, bool *
 200:Service/Srv_FileAdapter.c **** {
 335              		.loc 1 200 1 is_stmt 1 view -0
 336              		.cfi_startproc
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 11


 337              		@ args = 0, pretend = 0, frame = 0
 338              		@ frame_needed = 0, uses_anonymous_args = 0
 339              		.loc 1 200 1 is_stmt 0 view .LVU88
 340 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 341              	.LCFI5:
 342              		.cfi_def_cfa_offset 28
 343              		.cfi_offset 4, -28
 344              		.cfi_offset 5, -24
 345              		.cfi_offset 6, -20
 346              		.cfi_offset 7, -16
 347              		.cfi_offset 8, -12
 348              		.cfi_offset 9, -8
 349              		.cfi_offset 14, -4
 350 0004 83B0     		sub	sp, sp, #12
 351              	.LCFI6:
 352              		.cfi_def_cfa_offset 40
 201:Service/Srv_FileAdapter.c ****     YModem_TypeDef *p_api = NULL;
 353              		.loc 1 201 5 is_stmt 1 view .LVU89
 354              	.LVL28:
 202:Service/Srv_FileAdapter.c ****     YModemObj_TypeDef *p_obj = NULL;
 355              		.loc 1 202 5 view .LVU90
 203:Service/Srv_FileAdapter.c ****     YModem_Stream_TypeDef *p_stream = NULL;
 356              		.loc 1 203 5 view .LVU91
 204:Service/Srv_FileAdapter.c **** 
 205:Service/Srv_FileAdapter.c ****     p_api = To_YModem_Api(p_Adapter->FrameApi);
 357              		.loc 1 205 5 view .LVU92
 358              		.loc 1 205 11 is_stmt 0 view .LVU93
 359 0006 C768     		ldr	r7, [r0, #12]
 360              	.LVL29:
 206:Service/Srv_FileAdapter.c ****     p_obj =  To_YModem_Obj(p_Adapter->FrameObj);
 361              		.loc 1 206 5 is_stmt 1 view .LVU94
 362              		.loc 1 206 11 is_stmt 0 view .LVU95
 363 0008 D0F80880 		ldr	r8, [r0, #8]
 364              	.LVL30:
 207:Service/Srv_FileAdapter.c ****     p_stream = To_YModem_Stream(p_Adapter->stream_out);
 365              		.loc 1 207 5 is_stmt 1 view .LVU96
 366              		.loc 1 207 14 is_stmt 0 view .LVU97
 367 000c D0F81490 		ldr	r9, [r0, #20]
 368              	.LVL31:
 208:Service/Srv_FileAdapter.c **** 
 209:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_api && p_obj && clear_stream && p_api->polling)
 369              		.loc 1 209 5 is_stmt 1 view .LVU98
 370              		.loc 1 209 8 is_stmt 0 view .LVU99
 371 0010 0028     		cmp	r0, #0
 372 0012 67D0     		beq	.L34
 373 0014 0446     		mov	r4, r0
 374 0016 0E46     		mov	r6, r1
 375              		.loc 1 209 19 discriminator 1 view .LVU100
 376 0018 002F     		cmp	r7, #0
 377 001a 65D0     		beq	.L35
 378              		.loc 1 209 28 discriminator 2 view .LVU101
 379 001c B8F1000F 		cmp	r8, #0
 380 0020 64D0     		beq	.L36
 381              		.loc 1 209 37 discriminator 3 view .LVU102
 382 0022 0029     		cmp	r1, #0
 383 0024 64D0     		beq	.L37
 384              		.loc 1 209 61 discriminator 4 view .LVU103
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 12


 385 0026 3B68     		ldr	r3, [r7]
 386              		.loc 1 209 53 discriminator 4 view .LVU104
 387 0028 002B     		cmp	r3, #0
 388 002a 63D0     		beq	.L38
 210:Service/Srv_FileAdapter.c ****     {
 211:Service/Srv_FileAdapter.c ****         *clear_stream = false;
 389              		.loc 1 211 9 is_stmt 1 view .LVU105
 390              		.loc 1 211 23 is_stmt 0 view .LVU106
 391 002c 0023     		movs	r3, #0
 392 002e 0B70     		strb	r3, [r1]
 212:Service/Srv_FileAdapter.c ****         if (p_Adapter->stream_out == NULL)
 393              		.loc 1 212 9 is_stmt 1 view .LVU107
 394              		.loc 1 212 22 is_stmt 0 view .LVU108
 395 0030 4369     		ldr	r3, [r0, #20]
 396              		.loc 1 212 12 view .LVU109
 397 0032 A3B1     		cbz	r3, .L41
 398              	.LVL32:
 399              	.L29:
 213:Service/Srv_FileAdapter.c ****         {
 214:Service/Srv_FileAdapter.c ****             p_Adapter->stream_out = SrvOsCommon.malloc(YModem_Stream_Size);
 215:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 216:Service/Srv_FileAdapter.c ****             {
 217:Service/Srv_FileAdapter.c ****                 SrvOsCommon.free(p_Adapter->stream_out);
 218:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Failed;
 219:Service/Srv_FileAdapter.c ****             }
 220:Service/Srv_FileAdapter.c ****         }
 221:Service/Srv_FileAdapter.c **** 
 222:Service/Srv_FileAdapter.c ****         switch (p_api->polling(p_Adapter->sys_time, p_obj, AdapterInStream.buf, AdapterInStream.siz
 400              		.loc 1 222 9 is_stmt 1 view .LVU110
 401              		.loc 1 222 22 is_stmt 0 view .LVU111
 402 0034 3D68     		ldr	r5, [r7]
 403              		.loc 1 222 17 view .LVU112
 404 0036 304A     		ldr	r2, .L43
 405 0038 CDF80090 		str	r9, [sp]
 406 003c B2F80038 		ldrh	r3, [r2, #2048]
 407 0040 4146     		mov	r1, r8
 408 0042 2068     		ldr	r0, [r4]
 409 0044 A847     		blx	r5
 410              	.LVL33:
 411 0046 0546     		mov	r5, r0
 412              		.loc 1 222 9 view .LVU113
 413 0048 0228     		cmp	r0, #2
 414 004a 14D0     		beq	.L30
 415 004c 0328     		cmp	r0, #3
 416 004e 3FD0     		beq	.L31
 417 0050 0128     		cmp	r0, #1
 418 0052 00D0     		beq	.L28
 419 0054 0325     		movs	r5, #3
 420              	.LVL34:
 421              	.L28:
 223:Service/Srv_FileAdapter.c ****         {
 224:Service/Srv_FileAdapter.c ****             case YModem_State_Tx: return Adapter_Processing;
 225:Service/Srv_FileAdapter.c **** 
 226:Service/Srv_FileAdapter.c ****             case YModem_State_Rx:
 227:Service/Srv_FileAdapter.c ****                 if (p_stream->valid == YModem_Pack_InCompelete)
 228:Service/Srv_FileAdapter.c ****                     return Adapter_Processing;
 229:Service/Srv_FileAdapter.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 13


 230:Service/Srv_FileAdapter.c ****                 if ((p_stream->valid == YModem_Pack_Compelete) && \
 231:Service/Srv_FileAdapter.c ****                     p_stream->p_buf && \
 232:Service/Srv_FileAdapter.c ****                     (p_stream->size > 1) && \
 233:Service/Srv_FileAdapter.c ****                     p_stream->file_data)
 234:Service/Srv_FileAdapter.c ****                 {
 235:Service/Srv_FileAdapter.c ****                     if (SrvFileAdapter_Store_Firmware(p_Adapter, p_stream->p_buf, p_stream->size) =
 236:Service/Srv_FileAdapter.c ****                     {
 237:Service/Srv_FileAdapter.c ****                         /* abort YModem */
 238:Service/Srv_FileAdapter.c ****                         /* clear app storage section */
 239:Service/Srv_FileAdapter.c ****                         p_api->abort(p_obj);
 240:Service/Srv_FileAdapter.c ****                         switch (p_Adapter->file_info.File_Type)
 241:Service/Srv_FileAdapter.c ****                         {
 242:Service/Srv_FileAdapter.c ****                             case FileType_APP: Storage.format_firmware(); break;
 243:Service/Srv_FileAdapter.c ****                             default: return Adapter_Proc_Failed;
 244:Service/Srv_FileAdapter.c ****                         }
 245:Service/Srv_FileAdapter.c **** 
 246:Service/Srv_FileAdapter.c ****                         *clear_stream = true;
 247:Service/Srv_FileAdapter.c ****                         return Adapter_Proc_Failed;
 248:Service/Srv_FileAdapter.c ****                     }
 249:Service/Srv_FileAdapter.c ****                             
 250:Service/Srv_FileAdapter.c ****                     p_stream->size = 0;
 251:Service/Srv_FileAdapter.c ****                     p_stream->valid = YModem_Pack_Default;
 252:Service/Srv_FileAdapter.c ****                 }
 253:Service/Srv_FileAdapter.c **** 
 254:Service/Srv_FileAdapter.c ****                 *clear_stream = true;
 255:Service/Srv_FileAdapter.c ****                 return Adapter_Processing;
 256:Service/Srv_FileAdapter.c **** 
 257:Service/Srv_FileAdapter.c ****             case YModem_State_Finish:
 258:Service/Srv_FileAdapter.c ****                 SrvOsCommon.free(p_Adapter->stream_out);
 259:Service/Srv_FileAdapter.c ****                 p_Adapter->stream_out = NULL;
 260:Service/Srv_FileAdapter.c ****                 *clear_stream = true;
 261:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Done;
 262:Service/Srv_FileAdapter.c **** 
 263:Service/Srv_FileAdapter.c ****             case YModem_State_Error:
 264:Service/Srv_FileAdapter.c ****             default: break;
 265:Service/Srv_FileAdapter.c ****         }
 266:Service/Srv_FileAdapter.c ****     }
 267:Service/Srv_FileAdapter.c **** 
 268:Service/Srv_FileAdapter.c ****     return Adapter_Proc_Failed;
 269:Service/Srv_FileAdapter.c **** }
 422              		.loc 1 269 1 view .LVU114
 423 0056 2846     		mov	r0, r5
 424 0058 03B0     		add	sp, sp, #12
 425              	.LCFI7:
 426              		.cfi_remember_state
 427              		.cfi_def_cfa_offset 28
 428              		@ sp needed
 429 005a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 430              	.LVL35:
 431              	.L41:
 432              	.LCFI8:
 433              		.cfi_restore_state
 214:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 434              		.loc 1 214 13 is_stmt 1 view .LVU115
 214:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 435              		.loc 1 214 48 is_stmt 0 view .LVU116
 436 005e 274B     		ldr	r3, .L43+4
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 14


 437 0060 DB6A     		ldr	r3, [r3, #44]
 214:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 438              		.loc 1 214 37 view .LVU117
 439 0062 0C20     		movs	r0, #12
 440              	.LVL36:
 214:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 441              		.loc 1 214 37 view .LVU118
 442 0064 9847     		blx	r3
 443              	.LVL37:
 214:Service/Srv_FileAdapter.c ****             if (p_Adapter->stream_out == NULL)
 444              		.loc 1 214 35 view .LVU119
 445 0066 6061     		str	r0, [r4, #20]
 215:Service/Srv_FileAdapter.c ****             {
 446              		.loc 1 215 13 is_stmt 1 view .LVU120
 215:Service/Srv_FileAdapter.c ****             {
 447              		.loc 1 215 16 is_stmt 0 view .LVU121
 448 0068 0028     		cmp	r0, #0
 449 006a E3D1     		bne	.L29
 217:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Failed;
 450              		.loc 1 217 17 is_stmt 1 view .LVU122
 217:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Failed;
 451              		.loc 1 217 28 is_stmt 0 view .LVU123
 452 006c 234B     		ldr	r3, .L43+4
 453 006e 1B6B     		ldr	r3, [r3, #48]
 217:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Failed;
 454              		.loc 1 217 17 view .LVU124
 455 0070 9847     		blx	r3
 456              	.LVL38:
 218:Service/Srv_FileAdapter.c ****             }
 457              		.loc 1 218 17 is_stmt 1 view .LVU125
 218:Service/Srv_FileAdapter.c ****             }
 458              		.loc 1 218 24 is_stmt 0 view .LVU126
 459 0072 0325     		movs	r5, #3
 460 0074 EFE7     		b	.L28
 461              	.L30:
 227:Service/Srv_FileAdapter.c ****                     return Adapter_Processing;
 462              		.loc 1 227 17 is_stmt 1 view .LVU127
 227:Service/Srv_FileAdapter.c ****                     return Adapter_Processing;
 463              		.loc 1 227 29 is_stmt 0 view .LVU128
 464 0076 99F80850 		ldrb	r5, [r9, #8]	@ zero_extendqisi2
 227:Service/Srv_FileAdapter.c ****                     return Adapter_Processing;
 465              		.loc 1 227 20 view .LVU129
 466 007a 012D     		cmp	r5, #1
 467 007c EBD0     		beq	.L28
 230:Service/Srv_FileAdapter.c ****                     p_stream->p_buf && \
 468              		.loc 1 230 17 is_stmt 1 view .LVU130
 230:Service/Srv_FileAdapter.c ****                     p_stream->p_buf && \
 469              		.loc 1 230 20 is_stmt 0 view .LVU131
 470 007e 022D     		cmp	r5, #2
 471 0080 09D1     		bne	.L32
 231:Service/Srv_FileAdapter.c ****                     (p_stream->size > 1) && \
 472              		.loc 1 231 29 discriminator 1 view .LVU132
 473 0082 D9F80410 		ldr	r1, [r9, #4]
 230:Service/Srv_FileAdapter.c ****                     p_stream->p_buf && \
 474              		.loc 1 230 64 discriminator 1 view .LVU133
 475 0086 31B1     		cbz	r1, .L32
 232:Service/Srv_FileAdapter.c ****                     p_stream->file_data)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 15


 476              		.loc 1 232 30 view .LVU134
 477 0088 D9F80020 		ldr	r2, [r9]
 231:Service/Srv_FileAdapter.c ****                     (p_stream->size > 1) && \
 478              		.loc 1 231 37 view .LVU135
 479 008c 012A     		cmp	r2, #1
 480 008e 02D9     		bls	.L32
 233:Service/Srv_FileAdapter.c ****                 {
 481              		.loc 1 233 29 view .LVU136
 482 0090 99F80930 		ldrb	r3, [r9, #9]	@ zero_extendqisi2
 232:Service/Srv_FileAdapter.c ****                     p_stream->file_data)
 483              		.loc 1 232 42 view .LVU137
 484 0094 13B9     		cbnz	r3, .L42
 485              	.L32:
 254:Service/Srv_FileAdapter.c ****                 return Adapter_Processing;
 486              		.loc 1 254 17 is_stmt 1 view .LVU138
 254:Service/Srv_FileAdapter.c ****                 return Adapter_Processing;
 487              		.loc 1 254 31 is_stmt 0 view .LVU139
 488 0096 0125     		movs	r5, #1
 489 0098 3570     		strb	r5, [r6]
 255:Service/Srv_FileAdapter.c **** 
 490              		.loc 1 255 17 is_stmt 1 view .LVU140
 255:Service/Srv_FileAdapter.c **** 
 491              		.loc 1 255 24 is_stmt 0 view .LVU141
 492 009a DCE7     		b	.L28
 493              	.L42:
 235:Service/Srv_FileAdapter.c ****                     {
 494              		.loc 1 235 21 is_stmt 1 view .LVU142
 235:Service/Srv_FileAdapter.c ****                     {
 495              		.loc 1 235 25 is_stmt 0 view .LVU143
 496 009c 92B2     		uxth	r2, r2
 497 009e 2046     		mov	r0, r4
 498 00a0 FFF7FEFF 		bl	SrvFileAdapter_Store_Firmware
 499              	.LVL39:
 500 00a4 0546     		mov	r5, r0
 235:Service/Srv_FileAdapter.c ****                     {
 501              		.loc 1 235 24 view .LVU144
 502 00a6 0328     		cmp	r0, #3
 503 00a8 0BD1     		bne	.L33
 239:Service/Srv_FileAdapter.c ****                         switch (p_Adapter->file_info.File_Type)
 504              		.loc 1 239 25 is_stmt 1 view .LVU145
 239:Service/Srv_FileAdapter.c ****                         switch (p_Adapter->file_info.File_Type)
 505              		.loc 1 239 30 is_stmt 0 view .LVU146
 506 00aa 7B68     		ldr	r3, [r7, #4]
 239:Service/Srv_FileAdapter.c ****                         switch (p_Adapter->file_info.File_Type)
 507              		.loc 1 239 25 view .LVU147
 508 00ac 4046     		mov	r0, r8
 509 00ae 9847     		blx	r3
 510              	.LVL40:
 240:Service/Srv_FileAdapter.c ****                         {
 511              		.loc 1 240 25 is_stmt 1 view .LVU148
 240:Service/Srv_FileAdapter.c ****                         {
 512              		.loc 1 240 53 is_stmt 0 view .LVU149
 513 00b0 237E     		ldrb	r3, [r4, #24]	@ zero_extendqisi2
 514 00b2 012B     		cmp	r3, #1
 515 00b4 CFD1     		bne	.L28
 242:Service/Srv_FileAdapter.c ****                             default: return Adapter_Proc_Failed;
 516              		.loc 1 242 48 is_stmt 1 view .LVU150
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 16


 242:Service/Srv_FileAdapter.c ****                             default: return Adapter_Proc_Failed;
 517              		.loc 1 242 55 is_stmt 0 view .LVU151
 518 00b6 124B     		ldr	r3, .L43+8
 519 00b8 5B6A     		ldr	r3, [r3, #36]
 242:Service/Srv_FileAdapter.c ****                             default: return Adapter_Proc_Failed;
 520              		.loc 1 242 48 view .LVU152
 521 00ba 9847     		blx	r3
 522              	.LVL41:
 242:Service/Srv_FileAdapter.c ****                             default: return Adapter_Proc_Failed;
 523              		.loc 1 242 75 is_stmt 1 view .LVU153
 246:Service/Srv_FileAdapter.c ****                         return Adapter_Proc_Failed;
 524              		.loc 1 246 25 view .LVU154
 246:Service/Srv_FileAdapter.c ****                         return Adapter_Proc_Failed;
 525              		.loc 1 246 39 is_stmt 0 view .LVU155
 526 00bc 0123     		movs	r3, #1
 527 00be 3370     		strb	r3, [r6]
 247:Service/Srv_FileAdapter.c ****                     }
 528              		.loc 1 247 25 is_stmt 1 view .LVU156
 247:Service/Srv_FileAdapter.c ****                     }
 529              		.loc 1 247 32 is_stmt 0 view .LVU157
 530 00c0 C9E7     		b	.L28
 531              	.L33:
 250:Service/Srv_FileAdapter.c ****                     p_stream->valid = YModem_Pack_Default;
 532              		.loc 1 250 21 is_stmt 1 view .LVU158
 250:Service/Srv_FileAdapter.c ****                     p_stream->valid = YModem_Pack_Default;
 533              		.loc 1 250 36 is_stmt 0 view .LVU159
 534 00c2 0023     		movs	r3, #0
 535 00c4 C9F80030 		str	r3, [r9]
 251:Service/Srv_FileAdapter.c ****                 }
 536              		.loc 1 251 21 is_stmt 1 view .LVU160
 251:Service/Srv_FileAdapter.c ****                 }
 537              		.loc 1 251 37 is_stmt 0 view .LVU161
 538 00c8 0323     		movs	r3, #3
 539 00ca 89F80830 		strb	r3, [r9, #8]
 540 00ce E2E7     		b	.L32
 541              	.L31:
 258:Service/Srv_FileAdapter.c ****                 p_Adapter->stream_out = NULL;
 542              		.loc 1 258 17 is_stmt 1 view .LVU162
 258:Service/Srv_FileAdapter.c ****                 p_Adapter->stream_out = NULL;
 543              		.loc 1 258 28 is_stmt 0 view .LVU163
 544 00d0 0A4B     		ldr	r3, .L43+4
 545 00d2 1B6B     		ldr	r3, [r3, #48]
 258:Service/Srv_FileAdapter.c ****                 p_Adapter->stream_out = NULL;
 546              		.loc 1 258 17 view .LVU164
 547 00d4 6069     		ldr	r0, [r4, #20]
 548 00d6 9847     		blx	r3
 549              	.LVL42:
 259:Service/Srv_FileAdapter.c ****                 *clear_stream = true;
 550              		.loc 1 259 17 is_stmt 1 view .LVU165
 259:Service/Srv_FileAdapter.c ****                 *clear_stream = true;
 551              		.loc 1 259 39 is_stmt 0 view .LVU166
 552 00d8 0023     		movs	r3, #0
 553 00da 6361     		str	r3, [r4, #20]
 260:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Done;
 554              		.loc 1 260 17 is_stmt 1 view .LVU167
 260:Service/Srv_FileAdapter.c ****                 return Adapter_Proc_Done;
 555              		.loc 1 260 31 is_stmt 0 view .LVU168
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 17


 556 00dc 0123     		movs	r3, #1
 557 00de 3370     		strb	r3, [r6]
 261:Service/Srv_FileAdapter.c **** 
 558              		.loc 1 261 17 is_stmt 1 view .LVU169
 261:Service/Srv_FileAdapter.c **** 
 559              		.loc 1 261 24 is_stmt 0 view .LVU170
 560 00e0 0225     		movs	r5, #2
 561 00e2 B8E7     		b	.L28
 562              	.LVL43:
 563              	.L34:
 268:Service/Srv_FileAdapter.c **** }
 564              		.loc 1 268 12 view .LVU171
 565 00e4 0325     		movs	r5, #3
 566 00e6 B6E7     		b	.L28
 567              	.L35:
 268:Service/Srv_FileAdapter.c **** }
 568              		.loc 1 268 12 view .LVU172
 569 00e8 0325     		movs	r5, #3
 570 00ea B4E7     		b	.L28
 571              	.L36:
 572 00ec 0325     		movs	r5, #3
 573 00ee B2E7     		b	.L28
 574              	.L37:
 575 00f0 0325     		movs	r5, #3
 576 00f2 B0E7     		b	.L28
 577              	.L38:
 578 00f4 0325     		movs	r5, #3
 579 00f6 AEE7     		b	.L28
 580              	.L44:
 581              		.align	2
 582              	.L43:
 583 00f8 00000000 		.word	.LANCHOR0
 584 00fc 00000000 		.word	SrvOsCommon
 585 0100 00000000 		.word	Storage
 586              		.cfi_endproc
 587              	.LFE155:
 589              		.section	.text.SrvFileAdapter_GetFileInfo,"ax",%progbits
 590              		.align	1
 591              		.syntax unified
 592              		.thumb
 593              		.thumb_func
 595              	SrvFileAdapter_GetFileInfo:
 596              	.LVL44:
 597              	.LFB154:
 187:Service/Srv_FileAdapter.c ****     FileInfo_TypeDef FileInfo;
 598              		.loc 1 187 1 is_stmt 1 view -0
 599              		.cfi_startproc
 600              		@ args = 0, pretend = 0, frame = 16
 601              		@ frame_needed = 0, uses_anonymous_args = 0
 602              		@ link register save eliminated.
 187:Service/Srv_FileAdapter.c ****     FileInfo_TypeDef FileInfo;
 603              		.loc 1 187 1 is_stmt 0 view .LVU174
 604 0000 84B0     		sub	sp, sp, #16
 605              	.LCFI9:
 606              		.cfi_def_cfa_offset 16
 607 0002 0346     		mov	r3, r0
 188:Service/Srv_FileAdapter.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 18


 608              		.loc 1 188 5 is_stmt 1 view .LVU175
 190:Service/Srv_FileAdapter.c **** 
 609              		.loc 1 190 5 view .LVU176
 610 0004 0022     		movs	r2, #0
 611 0006 0192     		str	r2, [sp, #4]
 612 0008 0292     		str	r2, [sp, #8]
 613 000a 0392     		str	r2, [sp, #12]
 192:Service/Srv_FileAdapter.c ****         FileInfo = p_Adapter->file_info;
 614              		.loc 1 192 5 view .LVU177
 192:Service/Srv_FileAdapter.c ****         FileInfo = p_Adapter->file_info;
 615              		.loc 1 192 8 is_stmt 0 view .LVU178
 616 000c 31B1     		cbz	r1, .L46
 617 000e 0A46     		mov	r2, r1
 193:Service/Srv_FileAdapter.c **** 
 618              		.loc 1 193 9 is_stmt 1 view .LVU179
 193:Service/Srv_FileAdapter.c **** 
 619              		.loc 1 193 18 is_stmt 0 view .LVU180
 620 0010 1832     		adds	r2, r2, #24
 621 0012 07CA     		ldm	r2, {r0, r1, r2}
 622              	.LVL45:
 193:Service/Srv_FileAdapter.c **** 
 623              		.loc 1 193 18 view .LVU181
 624 0014 0DF1100C 		add	ip, sp, #16
 625 0018 0CE90700 		stmdb	ip, {r0, r1, r2}
 626              	.L46:
 195:Service/Srv_FileAdapter.c **** }
 627              		.loc 1 195 5 is_stmt 1 view .LVU182
 195:Service/Srv_FileAdapter.c **** }
 628              		.loc 1 195 12 is_stmt 0 view .LVU183
 629 001c 04AA     		add	r2, sp, #16
 630 001e 12E90700 		ldmdb	r2, {r0, r1, r2}
 631 0022 83E80700 		stm	r3, {r0, r1, r2}
 196:Service/Srv_FileAdapter.c **** 
 632              		.loc 1 196 1 view .LVU184
 633 0026 1846     		mov	r0, r3
 634 0028 04B0     		add	sp, sp, #16
 635              	.LCFI10:
 636              		.cfi_def_cfa_offset 0
 637              		@ sp needed
 638 002a 7047     		bx	lr
 639              		.cfi_endproc
 640              	.LFE154:
 642              		.section	.text.SrvFileAdapter_Polling,"ax",%progbits
 643              		.align	1
 644              		.syntax unified
 645              		.thumb
 646              		.thumb_func
 648              	SrvFileAdapter_Polling:
 649              	.LVL46:
 650              	.LFB153:
 160:Service/Srv_FileAdapter.c ****     bool clear_stream = false;
 651              		.loc 1 160 1 is_stmt 1 view -0
 652              		.cfi_startproc
 653              		@ args = 0, pretend = 0, frame = 8
 654              		@ frame_needed = 0, uses_anonymous_args = 0
 160:Service/Srv_FileAdapter.c ****     bool clear_stream = false;
 655              		.loc 1 160 1 is_stmt 0 view .LVU186
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 19


 656 0000 30B5     		push	{r4, r5, lr}
 657              	.LCFI11:
 658              		.cfi_def_cfa_offset 12
 659              		.cfi_offset 4, -12
 660              		.cfi_offset 5, -8
 661              		.cfi_offset 14, -4
 662 0002 83B0     		sub	sp, sp, #12
 663              	.LCFI12:
 664              		.cfi_def_cfa_offset 24
 161:Service/Srv_FileAdapter.c ****     Adapter_Polling_State state = Adapter_Idle;
 665              		.loc 1 161 5 is_stmt 1 view .LVU187
 161:Service/Srv_FileAdapter.c ****     Adapter_Polling_State state = Adapter_Idle;
 666              		.loc 1 161 10 is_stmt 0 view .LVU188
 667 0004 0023     		movs	r3, #0
 668 0006 8DF80730 		strb	r3, [sp, #7]
 162:Service/Srv_FileAdapter.c **** 
 669              		.loc 1 162 5 is_stmt 1 view .LVU189
 670              	.LVL47:
 164:Service/Srv_FileAdapter.c ****     {
 671              		.loc 1 164 5 view .LVU190
 164:Service/Srv_FileAdapter.c ****     {
 672              		.loc 1 164 8 is_stmt 0 view .LVU191
 673 000a F1B1     		cbz	r1, .L51
 674 000c 0B46     		mov	r3, r1
 164:Service/Srv_FileAdapter.c ****     {
 675              		.loc 1 164 31 discriminator 1 view .LVU192
 676 000e 8A68     		ldr	r2, [r1, #8]
 164:Service/Srv_FileAdapter.c ****     {
 677              		.loc 1 164 19 discriminator 1 view .LVU193
 678 0010 FAB1     		cbz	r2, .L52
 164:Service/Srv_FileAdapter.c ****     {
 679              		.loc 1 164 54 discriminator 2 view .LVU194
 680 0012 CA68     		ldr	r2, [r1, #12]
 164:Service/Srv_FileAdapter.c ****     {
 681              		.loc 1 164 42 discriminator 2 view .LVU195
 682 0014 FAB1     		cbz	r2, .L53
 166:Service/Srv_FileAdapter.c ****         switch ((uint8_t)p_Adapter->frame_type)
 683              		.loc 1 166 9 is_stmt 1 view .LVU196
 166:Service/Srv_FileAdapter.c ****         switch ((uint8_t)p_Adapter->frame_type)
 684              		.loc 1 166 29 is_stmt 0 view .LVU197
 685 0016 0860     		str	r0, [r1]
 167:Service/Srv_FileAdapter.c ****         {
 686              		.loc 1 167 9 is_stmt 1 view .LVU198
 167:Service/Srv_FileAdapter.c ****         {
 687              		.loc 1 167 35 is_stmt 0 view .LVU199
 688 0018 0A79     		ldrb	r2, [r1, #4]	@ zero_extendqisi2
 167:Service/Srv_FileAdapter.c ****         {
 689              		.loc 1 167 9 view .LVU200
 690 001a 012A     		cmp	r2, #1
 691 001c 0ED0     		beq	.L56
 162:Service/Srv_FileAdapter.c **** 
 692              		.loc 1 162 27 view .LVU201
 693 001e 0024     		movs	r4, #0
 694              	.LVL48:
 695              	.L50:
 176:Service/Srv_FileAdapter.c ****         {
 696              		.loc 1 176 9 is_stmt 1 view .LVU202
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 20


 176:Service/Srv_FileAdapter.c ****         {
 697              		.loc 1 176 13 is_stmt 0 view .LVU203
 698 0020 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 176:Service/Srv_FileAdapter.c ****         {
 699              		.loc 1 176 12 view .LVU204
 700 0024 93B1     		cbz	r3, .L49
 178:Service/Srv_FileAdapter.c ****             AdapterInStream.size = 0;
 701              		.loc 1 178 13 is_stmt 1 view .LVU205
 178:Service/Srv_FileAdapter.c ****             AdapterInStream.size = 0;
 702              		.loc 1 178 59 is_stmt 0 view .LVU206
 703 0026 0D4D     		ldr	r5, .L57
 178:Service/Srv_FileAdapter.c ****             AdapterInStream.size = 0;
 704              		.loc 1 178 13 view .LVU207
 705 0028 B5F80028 		ldrh	r2, [r5, #2048]
 706 002c 0021     		movs	r1, #0
 707 002e 2846     		mov	r0, r5
 708 0030 FFF7FEFF 		bl	memset
 709              	.LVL49:
 179:Service/Srv_FileAdapter.c ****         }
 710              		.loc 1 179 13 is_stmt 1 view .LVU208
 179:Service/Srv_FileAdapter.c ****         }
 711              		.loc 1 179 34 is_stmt 0 view .LVU209
 712 0034 0023     		movs	r3, #0
 713 0036 A5F80038 		strh	r3, [r5, #2048]	@ movhi
 714 003a 07E0     		b	.L49
 715              	.LVL50:
 716              	.L56:
 170:Service/Srv_FileAdapter.c ****                 break;
 717              		.loc 1 170 17 is_stmt 1 view .LVU210
 170:Service/Srv_FileAdapter.c ****                 break;
 718              		.loc 1 170 25 is_stmt 0 view .LVU211
 719 003c 0DF10701 		add	r1, sp, #7
 720              	.LVL51:
 170:Service/Srv_FileAdapter.c ****                 break;
 721              		.loc 1 170 25 view .LVU212
 722 0040 1846     		mov	r0, r3
 723              	.LVL52:
 170:Service/Srv_FileAdapter.c ****                 break;
 724              		.loc 1 170 25 view .LVU213
 725 0042 FFF7FEFF 		bl	SrvAdapter_YModem_Polling
 726              	.LVL53:
 170:Service/Srv_FileAdapter.c ****                 break;
 727              		.loc 1 170 25 view .LVU214
 728 0046 0446     		mov	r4, r0
 729              	.LVL54:
 171:Service/Srv_FileAdapter.c **** 
 730              		.loc 1 171 17 is_stmt 1 view .LVU215
 731 0048 EAE7     		b	.L50
 732              	.LVL55:
 733              	.L51:
 162:Service/Srv_FileAdapter.c **** 
 734              		.loc 1 162 27 is_stmt 0 view .LVU216
 735 004a 0024     		movs	r4, #0
 736              	.LVL56:
 737              	.L49:
 183:Service/Srv_FileAdapter.c **** }
 738              		.loc 1 183 5 is_stmt 1 view .LVU217
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 21


 184:Service/Srv_FileAdapter.c **** 
 739              		.loc 1 184 1 is_stmt 0 view .LVU218
 740 004c 2046     		mov	r0, r4
 741 004e 03B0     		add	sp, sp, #12
 742              	.LCFI13:
 743              		.cfi_remember_state
 744              		.cfi_def_cfa_offset 12
 745              		@ sp needed
 746 0050 30BD     		pop	{r4, r5, pc}
 747              	.LVL57:
 748              	.L52:
 749              	.LCFI14:
 750              		.cfi_restore_state
 162:Service/Srv_FileAdapter.c **** 
 751              		.loc 1 162 27 view .LVU219
 752 0052 0024     		movs	r4, #0
 753 0054 FAE7     		b	.L49
 754              	.L53:
 755 0056 0024     		movs	r4, #0
 756 0058 F8E7     		b	.L49
 757              	.L58:
 758 005a 00BF     		.align	2
 759              	.L57:
 760 005c 00000000 		.word	.LANCHOR0
 761              		.cfi_endproc
 762              	.LFE153:
 764              		.section	.text.SrvFileAdapter_Destory_AdapterObj,"ax",%progbits
 765              		.align	1
 766              		.syntax unified
 767              		.thumb
 768              		.thumb_func
 770              	SrvFileAdapter_Destory_AdapterObj:
 771              	.LVL58:
 772              	.LFB149:
  86:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_Adapter->FrameObj)
 773              		.loc 1 86 1 is_stmt 1 view -0
 774              		.cfi_startproc
 775              		@ args = 0, pretend = 0, frame = 0
 776              		@ frame_needed = 0, uses_anonymous_args = 0
  87:Service/Srv_FileAdapter.c ****     {
 777              		.loc 1 87 5 view .LVU221
  87:Service/Srv_FileAdapter.c ****     {
 778              		.loc 1 87 8 is_stmt 0 view .LVU222
 779 0000 C8B1     		cbz	r0, .L62
  86:Service/Srv_FileAdapter.c ****     if (p_Adapter && p_Adapter->FrameObj)
 780              		.loc 1 86 1 discriminator 1 view .LVU223
 781 0002 38B5     		push	{r3, r4, r5, lr}
 782              	.LCFI15:
 783              		.cfi_def_cfa_offset 16
 784              		.cfi_offset 3, -16
 785              		.cfi_offset 4, -12
 786              		.cfi_offset 5, -8
 787              		.cfi_offset 14, -4
 788 0004 0446     		mov	r4, r0
  87:Service/Srv_FileAdapter.c ****     {
 789              		.loc 1 87 31 discriminator 1 view .LVU224
 790 0006 8068     		ldr	r0, [r0, #8]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 22


 791              	.LVL59:
  87:Service/Srv_FileAdapter.c ****     {
 792              		.loc 1 87 19 discriminator 1 view .LVU225
 793 0008 B8B1     		cbz	r0, .L63
  89:Service/Srv_FileAdapter.c ****             memset(p_Adapter->FrameObj, 0, sizeof(YModemObj_TypeDef));
 794              		.loc 1 89 9 is_stmt 1 view .LVU226
  89:Service/Srv_FileAdapter.c ****             memset(p_Adapter->FrameObj, 0, sizeof(YModemObj_TypeDef));
 795              		.loc 1 89 22 is_stmt 0 view .LVU227
 796 000a 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
  89:Service/Srv_FileAdapter.c ****             memset(p_Adapter->FrameObj, 0, sizeof(YModemObj_TypeDef));
 797              		.loc 1 89 12 view .LVU228
 798 000c 012B     		cmp	r3, #1
 799 000e 0DD0     		beq	.L68
 800              	.L61:
  92:Service/Srv_FileAdapter.c ****         memset(p_Adapter, 0, sizeof(SrvFileAdapterObj_TypeDef));
 801              		.loc 1 92 9 is_stmt 1 view .LVU229
  92:Service/Srv_FileAdapter.c ****         memset(p_Adapter, 0, sizeof(SrvFileAdapterObj_TypeDef));
 802              		.loc 1 92 20 is_stmt 0 view .LVU230
 803 0010 0B4D     		ldr	r5, .L69
 804 0012 2B6B     		ldr	r3, [r5, #48]
  92:Service/Srv_FileAdapter.c ****         memset(p_Adapter, 0, sizeof(SrvFileAdapterObj_TypeDef));
 805              		.loc 1 92 9 view .LVU231
 806 0014 A068     		ldr	r0, [r4, #8]
 807 0016 9847     		blx	r3
 808              	.LVL60:
  93:Service/Srv_FileAdapter.c ****         p_Adapter->FrameApi = NULL;
 809              		.loc 1 93 9 is_stmt 1 view .LVU232
 810 0018 2822     		movs	r2, #40
 811 001a 0021     		movs	r1, #0
 812 001c 2046     		mov	r0, r4
 813 001e FFF7FEFF 		bl	memset
 814              	.LVL61:
  94:Service/Srv_FileAdapter.c ****         p_Adapter->FrameObj = NULL;
 815              		.loc 1 94 9 view .LVU233
  95:Service/Srv_FileAdapter.c ****         SrvOsCommon.free(p_Adapter);
 816              		.loc 1 95 9 view .LVU234
  96:Service/Srv_FileAdapter.c ****         return true;
 817              		.loc 1 96 9 view .LVU235
  96:Service/Srv_FileAdapter.c ****         return true;
 818              		.loc 1 96 20 is_stmt 0 view .LVU236
 819 0022 2B6B     		ldr	r3, [r5, #48]
  96:Service/Srv_FileAdapter.c ****         return true;
 820              		.loc 1 96 9 view .LVU237
 821 0024 2046     		mov	r0, r4
 822 0026 9847     		blx	r3
 823              	.LVL62:
  97:Service/Srv_FileAdapter.c ****     }
 824              		.loc 1 97 9 is_stmt 1 view .LVU238
  97:Service/Srv_FileAdapter.c ****     }
 825              		.loc 1 97 16 is_stmt 0 view .LVU239
 826 0028 0120     		movs	r0, #1
 827              	.L60:
 101:Service/Srv_FileAdapter.c **** 
 828              		.loc 1 101 1 view .LVU240
 829 002a 38BD     		pop	{r3, r4, r5, pc}
 830              	.LVL63:
 831              	.L68:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 23


  90:Service/Srv_FileAdapter.c **** 
 832              		.loc 1 90 13 is_stmt 1 view .LVU241
 833 002c 2422     		movs	r2, #36
 834 002e 0021     		movs	r1, #0
 835 0030 FFF7FEFF 		bl	memset
 836              	.LVL64:
 837 0034 ECE7     		b	.L61
 838              	.LVL65:
 839              	.L62:
 840              	.LCFI16:
 841              		.cfi_def_cfa_offset 0
 842              		.cfi_restore 3
 843              		.cfi_restore 4
 844              		.cfi_restore 5
 845              		.cfi_restore 14
 100:Service/Srv_FileAdapter.c **** }
 846              		.loc 1 100 12 is_stmt 0 view .LVU242
 847 0036 0020     		movs	r0, #0
 848              	.LVL66:
 101:Service/Srv_FileAdapter.c **** 
 849              		.loc 1 101 1 view .LVU243
 850 0038 7047     		bx	lr
 851              	.LVL67:
 852              	.L63:
 853              	.LCFI17:
 854              		.cfi_def_cfa_offset 16
 855              		.cfi_offset 3, -16
 856              		.cfi_offset 4, -12
 857              		.cfi_offset 5, -8
 858              		.cfi_offset 14, -4
 100:Service/Srv_FileAdapter.c **** }
 859              		.loc 1 100 12 view .LVU244
 860 003a 0020     		movs	r0, #0
 861 003c F5E7     		b	.L60
 862              	.L70:
 863 003e 00BF     		.align	2
 864              	.L69:
 865 0040 00000000 		.word	SrvOsCommon
 866              		.cfi_endproc
 867              	.LFE149:
 869              		.section	.text.SrvFileAdapter_PushToStream,"ax",%progbits
 870              		.align	1
 871              		.syntax unified
 872              		.thumb
 873              		.thumb_func
 875              	SrvFileAdapter_PushToStream:
 876              	.LVL68:
 877              	.LFB151:
 116:Service/Srv_FileAdapter.c ****     if (p_buf && size && (AdapterInStream.size + size <= AdapterInStream.total_size))
 878              		.loc 1 116 1 is_stmt 1 view -0
 879              		.cfi_startproc
 880              		@ args = 0, pretend = 0, frame = 0
 881              		@ frame_needed = 0, uses_anonymous_args = 0
 117:Service/Srv_FileAdapter.c ****     {
 882              		.loc 1 117 5 view .LVU246
 117:Service/Srv_FileAdapter.c ****     {
 883              		.loc 1 117 8 is_stmt 0 view .LVU247
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 24


 884 0000 C8B1     		cbz	r0, .L73
 116:Service/Srv_FileAdapter.c ****     if (p_buf && size && (AdapterInStream.size + size <= AdapterInStream.total_size))
 885              		.loc 1 116 1 discriminator 1 view .LVU248
 886 0002 38B5     		push	{r3, r4, r5, lr}
 887              	.LCFI18:
 888              		.cfi_def_cfa_offset 16
 889              		.cfi_offset 3, -16
 890              		.cfi_offset 4, -12
 891              		.cfi_offset 5, -8
 892              		.cfi_offset 14, -4
 893 0004 0C46     		mov	r4, r1
 894 0006 0146     		mov	r1, r0
 895              	.LVL69:
 117:Service/Srv_FileAdapter.c ****     {
 896              		.loc 1 117 15 discriminator 1 view .LVU249
 897 0008 BCB1     		cbz	r4, .L74
 117:Service/Srv_FileAdapter.c ****     {
 898              		.loc 1 117 42 discriminator 2 view .LVU250
 899 000a 0D4B     		ldr	r3, .L81
 900 000c B3F80008 		ldrh	r0, [r3, #2048]
 901              	.LVL70:
 117:Service/Srv_FileAdapter.c ****     {
 902              		.loc 1 117 48 discriminator 2 view .LVU251
 903 0010 2218     		adds	r2, r4, r0
 117:Service/Srv_FileAdapter.c ****     {
 904              		.loc 1 117 73 discriminator 2 view .LVU252
 905 0012 B3F80238 		ldrh	r3, [r3, #2050]
 117:Service/Srv_FileAdapter.c ****     {
 906              		.loc 1 117 23 discriminator 2 view .LVU253
 907 0016 9A42     		cmp	r2, r3
 908 0018 01DD     		ble	.L80
 126:Service/Srv_FileAdapter.c **** }
 909              		.loc 1 126 12 view .LVU254
 910 001a 0020     		movs	r0, #0
 911 001c 0EE0     		b	.L72
 912              	.L80:
 120:Service/Srv_FileAdapter.c ****         AdapterInStream.size += size;
 913              		.loc 1 120 9 is_stmt 1 view .LVU255
 120:Service/Srv_FileAdapter.c ****         AdapterInStream.size += size;
 914              		.loc 1 120 16 is_stmt 0 view .LVU256
 915 001e 084D     		ldr	r5, .L81
 120:Service/Srv_FileAdapter.c ****         AdapterInStream.size += size;
 916              		.loc 1 120 9 view .LVU257
 917 0020 2246     		mov	r2, r4
 918 0022 2844     		add	r0, r0, r5
 919 0024 FFF7FEFF 		bl	memcpy
 920              	.LVL71:
 121:Service/Srv_FileAdapter.c **** 
 921              		.loc 1 121 9 is_stmt 1 view .LVU258
 121:Service/Srv_FileAdapter.c **** 
 922              		.loc 1 121 30 is_stmt 0 view .LVU259
 923 0028 B5F80018 		ldrh	r1, [r5, #2048]
 924 002c 0C44     		add	r4, r4, r1
 925 002e A5F80048 		strh	r4, [r5, #2048]	@ movhi
 123:Service/Srv_FileAdapter.c ****     }
 926              		.loc 1 123 9 is_stmt 1 view .LVU260
 123:Service/Srv_FileAdapter.c ****     }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 25


 927              		.loc 1 123 16 is_stmt 0 view .LVU261
 928 0032 0120     		movs	r0, #1
 929 0034 02E0     		b	.L72
 930              	.LVL72:
 931              	.L73:
 932              	.LCFI19:
 933              		.cfi_def_cfa_offset 0
 934              		.cfi_restore 3
 935              		.cfi_restore 4
 936              		.cfi_restore 5
 937              		.cfi_restore 14
 126:Service/Srv_FileAdapter.c **** }
 938              		.loc 1 126 12 view .LVU262
 939 0036 0020     		movs	r0, #0
 940              	.LVL73:
 127:Service/Srv_FileAdapter.c **** 
 941              		.loc 1 127 1 view .LVU263
 942 0038 7047     		bx	lr
 943              	.LVL74:
 944              	.L74:
 945              	.LCFI20:
 946              		.cfi_def_cfa_offset 16
 947              		.cfi_offset 3, -16
 948              		.cfi_offset 4, -12
 949              		.cfi_offset 5, -8
 950              		.cfi_offset 14, -4
 126:Service/Srv_FileAdapter.c **** }
 951              		.loc 1 126 12 view .LVU264
 952 003a 0020     		movs	r0, #0
 953              	.LVL75:
 954              	.L72:
 127:Service/Srv_FileAdapter.c **** 
 955              		.loc 1 127 1 view .LVU265
 956 003c 38BD     		pop	{r3, r4, r5, pc}
 957              	.L82:
 958 003e 00BF     		.align	2
 959              	.L81:
 960 0040 00000000 		.word	.LANCHOR0
 961              		.cfi_endproc
 962              	.LFE151:
 964              		.global	SrvFileAdapter
 965              		.section	.data.AdapterInStream,"aw"
 966              		.align	2
 967              		.set	.LANCHOR0,. + 0
 970              	AdapterInStream:
 971 0000 00000000 		.space	2048
 971      00000000 
 971      00000000 
 971      00000000 
 971      00000000 
 972 0800 0000     		.short	0
 973 0802 0008     		.short	2048
 974              		.section	.data.SrvFileAdapter,"aw"
 975              		.align	2
 978              	SrvFileAdapter:
 979 0000 00000000 		.word	SrvFileAdapter_Create_AdapterObj
 980 0004 00000000 		.word	SrvFileAdapter_PushToStream
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 26


 981 0008 00000000 		.word	SrvFileAdapter_Destory_AdapterObj
 982 000c 00000000 		.word	SrvFileAdapter_Set_SendCallback
 983 0010 00000000 		.word	SrvFileAdapter_Polling
 984 0014 00000000 		.word	SrvFileAdapter_GetFileInfo
 985              		.text
 986              	.Letext0:
 987              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 988              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 989              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\lib\\gcc\\arm-none-eabi\
 990              		.file 5 "common/YModem/YModem.h"
 991              		.file 6 "Service/Srv_FileAdapter.h"
 992              		.file 7 "System/FreeRTOS/include/portable.h"
 993              		.file 8 "Service/Srv_OsCommon.h"
 994              		.file 9 "System/DataPipe/../../FCHW_Config.h"
 995              		.file 10 "HW_Lib/AT32F435/drivers/inc/at32f435_437_tmr.h"
 996              		.file 11 "Device/Dev_Dshot.h"
 997              		.file 12 "common/Error_Log/../../common/gen_physic_def/imu_data.h"
 998              		.file 13 "Service/control_data.h"
 999              		.file 14 "Service/../System/storage/Storage_Dev_Port.h"
 1000              		.file 15 "Service/../System/storage/Storage.h"
 1001              		.file 16 "<built-in>"
ARM GAS  C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s 			page 27


DEFINED SYMBOLS
                            *ABS*:00000000 Srv_FileAdapter.c
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:20     .text.SrvFileAdapter_Create_AdapterObj:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:25     .text.SrvFileAdapter_Create_AdapterObj:00000000 SrvFileAdapter_Create_AdapterObj
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:153    .text.SrvFileAdapter_Create_AdapterObj:00000064 $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:159    .text.SrvFileAdapter_Set_SendCallback:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:164    .text.SrvFileAdapter_Set_SendCallback:00000000 SrvFileAdapter_Set_SendCallback
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:199    .text.SrvFileAdapter_Store_Firmware:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:204    .text.SrvFileAdapter_Store_Firmware:00000000 SrvFileAdapter_Store_Firmware
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:320    .text.SrvFileAdapter_Store_Firmware:0000005c $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:327    .text.SrvAdapter_YModem_Polling:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:332    .text.SrvAdapter_YModem_Polling:00000000 SrvAdapter_YModem_Polling
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:583    .text.SrvAdapter_YModem_Polling:000000f8 $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:590    .text.SrvFileAdapter_GetFileInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:595    .text.SrvFileAdapter_GetFileInfo:00000000 SrvFileAdapter_GetFileInfo
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:643    .text.SrvFileAdapter_Polling:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:648    .text.SrvFileAdapter_Polling:00000000 SrvFileAdapter_Polling
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:760    .text.SrvFileAdapter_Polling:0000005c $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:765    .text.SrvFileAdapter_Destory_AdapterObj:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:770    .text.SrvFileAdapter_Destory_AdapterObj:00000000 SrvFileAdapter_Destory_AdapterObj
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:865    .text.SrvFileAdapter_Destory_AdapterObj:00000040 $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:870    .text.SrvFileAdapter_PushToStream:00000000 $t
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:875    .text.SrvFileAdapter_PushToStream:00000000 SrvFileAdapter_PushToStream
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:960    .text.SrvFileAdapter_PushToStream:00000040 $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:978    .data.SrvFileAdapter:00000000 SrvFileAdapter
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:966    .data.AdapterInStream:00000000 $d
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:970    .data.AdapterInStream:00000000 AdapterInStream
C:\Users\8bit\AppData\Local\Temp\ccRjZaes.s:975    .data.SrvFileAdapter:00000000 $d

UNDEFINED SYMBOLS
SrvOsCommon
YModem
__rom_e
__boot_e
Storage
memset
memcpy
