ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Storage.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.Storage_Get_SecInfo,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	Storage_Get_SecInfo:
  26              	.LVL0:
  27              	.LFB165:
  28              		.file 1 "System/storage/Storage.c"
   1:System/storage/Storage.c ****  /* 
   2:System/storage/Storage.c ****  * Auther: 8_B!T0
   3:System/storage/Storage.c ****  * WARNING: NOT ALL CIRCUMSTANCES BEEN TESTED
   4:System/storage/Storage.c ****  * 
   5:System/storage/Storage.c ****  * Bref: Use for storage parameter for drone
   6:System/storage/Storage.c ****  *       can create search delete parameter section as user want
   7:System/storage/Storage.c ****  */
   8:System/storage/Storage.c **** #include "Storage.h"
   9:System/storage/Storage.c **** #include "shell_port.h"
  10:System/storage/Storage.c **** #include "util.h"
  11:System/storage/Storage.c **** #include "HW_Def.h"
  12:System/storage/Storage.c **** #include "Srv_OsCommon.h"
  13:System/storage/Storage.c **** #include "debug_util.h"
  14:System/storage/Storage.c **** 
  15:System/storage/Storage.c **** #define STORAGE_DEBUG 0
  16:System/storage/Storage.c **** 
  17:System/storage/Storage.c **** #define InternalFlash_BootDataSec_Size (4 Kb)
  18:System/storage/Storage.c **** #define InternalFlash_SysDataSec_Size (16 Kb)
  19:System/storage/Storage.c **** #define InternalFlash_UserDataSec_Size (32 Kb)
  20:System/storage/Storage.c **** 
  21:System/storage/Storage.c **** #define Storage_TabSize Flash_Storage_TabSize
  22:System/storage/Storage.c **** #define Storage_InfoPageSize Flash_Storage_InfoPageSize
  23:System/storage/Storage.c **** 
  24:System/storage/Storage.c **** #define Item_Capacity_Per_Tab (Storage_TabSize / sizeof(Storage_Item_TypeDef))
  25:System/storage/Storage.c **** #if defined STM32H743xx
  26:System/storage/Storage.c **** static SPI_HandleTypeDef ExtFlash_Bus_InstObj;
  27:System/storage/Storage.c **** #elif defined AT32F435RGT7
  28:System/storage/Storage.c **** void *ExtFlash_Bus_InstObj = NULL;
  29:System/storage/Storage.c **** #endif
  30:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 2


  31:System/storage/Storage.c **** #define STORAGE_TAG "[ STORAGE INFO ] "
  32:System/storage/Storage.c **** #define STORAGE_INFO(fmt, ...) Debug_Print(&DebugPort, STORAGE_TAG , fmt, ##__VA_ARGS__)
  33:System/storage/Storage.c **** 
  34:System/storage/Storage.c **** /* internal vriable */
  35:System/storage/Storage.c **** Storage_Monitor_TypeDef Storage_Monitor;
  36:System/storage/Storage.c **** static uint8_t page_data_tmp[Storage_TabSize * 2] __attribute__((aligned(4))) = {0};
  37:System/storage/Storage.c **** static uint8_t flash_write_tmp[Storage_TabSize * 2] __attribute__((aligned(4))) __attribute__((sect
  38:System/storage/Storage.c **** static uint8_t flash_read_tmp[Storage_TabSize * 2] __attribute__((aligned(4))) __attribute__((secti
  39:System/storage/Storage.c **** 
  40:System/storage/Storage.c **** static bool Storage_Clear_Tab(uint32_t addr, uint32_t tab_num);
  41:System/storage/Storage.c **** static bool Storage_Establish_Tab(Storage_ParaClassType_List class);
  42:System/storage/Storage.c **** 
  43:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Read(uint32_t addr_offset, uint8_t *p_data, uint32_t len);
  44:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Write(uint32_t addr_offset, uint8_t *p_data, uint32_t len);
  45:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Erase(uint32_t addr_offset, uint32_t len);
  46:System/storage/Storage.c **** static bool Storage_ExtFlash_EraseAll(void);
  47:System/storage/Storage.c **** 
  48:System/storage/Storage.c **** /* internal function */
  49:System/storage/Storage.c **** static bool Storage_External_Chip_W25Qxx_SelectPin_Ctl(bool state);
  50:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusTx(uint8_t *p_data, uint16_t len, uint32_t time_out
  51:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusRx(uint8_t *p_data, uint16_t len, uint32_t time_out
  52:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusTrans(uint8_t *tx, uint8_t *rx, uint16_t len, uint3
  53:System/storage/Storage.c **** static bool Storage_Build_StorageInfo(void);
  54:System/storage/Storage.c **** static bool Storage_Get_StorageInfo(void);
  55:System/storage/Storage.c **** static bool Storage_Format(void);
  56:System/storage/Storage.c **** static bool Storage_Compare_ItemSlot_CRC(const Storage_Item_TypeDef item);
  57:System/storage/Storage.c **** static bool Storage_Comput_ItemSlot_CRC(Storage_Item_TypeDef *p_item);
  58:System/storage/Storage.c **** static Storage_BaseSecInfo_TypeDef* Storage_Get_SecInfo(Storage_FlashInfo_TypeDef *info, Storage_Pa
  59:System/storage/Storage.c **** static bool Storage_DeleteSingleDataSlot(uint32_t slot_addr, uint8_t *p_data, Storage_BaseSecInfo_T
  60:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_FreeSlot_CheckMerge(uint32_t slot_addr, Storage_FreeSlot_Type
  61:System/storage/Storage.c **** static bool Storage_Link_FreeSlot(uint32_t front_free_addr, uint32_t behind_free_addr, uint32_t new
  62:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_ItemSlot_Update(uint32_t tab_addr, uint8_t item_index, Storag
  63:System/storage/Storage.c **** 
  64:System/storage/Storage.c **** /* external function */
  65:System/storage/Storage.c **** static bool Storage_Init(Storage_ExtFLashDevObj_TypeDef *ExtDev);
  66:System/storage/Storage.c **** static Storage_ItemSearchOut_TypeDef Storage_Search(Storage_ParaClassType_List _class, const char *
  67:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_DeleteItem(Storage_ParaClassType_List _class, const char *nam
  68:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_CreateItem(Storage_ParaClassType_List _class, const char *nam
  69:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_SlotData_Update(Storage_ParaClassType_List _class, storage_ha
  70:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_Get_Data(Storage_ParaClassType_List _class, Storage_Item_Type
  71:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_Get_DevInfo(Storage_ExtFLashDevObj_TypeDef *info);
  72:System/storage/Storage.c **** static bool Storage_Write_Section(uint32_t addr, uint8_t *p_data, uint16_t len);
  73:System/storage/Storage.c **** static bool Storage_Read_Section(uint32_t addr, uint8_t *p_data, uint16_t len);
  74:System/storage/Storage.c **** static bool Storage_Erase_Section(uint32_t addr, uint16_t len);
  75:System/storage/Storage.c **** 
  76:System/storage/Storage.c **** static bool Storage_Firmware_Format(Storage_FirmwareType_List type);
  77:System/storage/Storage.c **** static bool Storage_Frimware_Read(Storage_FirmwareType_List type, uint32_t addr_offset, uint8_t *p_
  78:System/storage/Storage.c **** static bool Storage_Firmware_Write(Storage_MediumType_List medium, Storage_FirmwareType_List type, 
  79:System/storage/Storage.c **** 
  80:System/storage/Storage.c **** Storage_TypeDef Storage = {
  81:System/storage/Storage.c ****     .init = Storage_Init,
  82:System/storage/Storage.c ****     .search = Storage_Search,
  83:System/storage/Storage.c ****     .create = Storage_CreateItem,
  84:System/storage/Storage.c ****     .get = Storage_Get_Data,
  85:System/storage/Storage.c ****     .update = Storage_SlotData_Update,
  86:System/storage/Storage.c ****     .get_dev_info = Storage_Get_DevInfo,
  87:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 3


  88:System/storage/Storage.c ****     .write_section = Storage_Write_Section,
  89:System/storage/Storage.c ****     .read_section = Storage_Read_Section,
  90:System/storage/Storage.c ****     .erase_section = Storage_Erase_Section,
  91:System/storage/Storage.c **** 
  92:System/storage/Storage.c ****     .format_firmware = Storage_Firmware_Format,
  93:System/storage/Storage.c ****     .read_firmware = Storage_Frimware_Read,
  94:System/storage/Storage.c ****     .write_firmware = Storage_Firmware_Write,
  95:System/storage/Storage.c **** };
  96:System/storage/Storage.c **** 
  97:System/storage/Storage.c **** static bool Storage_Init(Storage_ExtFLashDevObj_TypeDef *ExtDev)
  98:System/storage/Storage.c **** {
  99:System/storage/Storage.c ****     void *ext_flash_bus_cfg = NULL;
 100:System/storage/Storage.c ****     uint8_t extmodule_init_state;
 101:System/storage/Storage.c ****     memset(&Storage_Monitor, 0, sizeof(Storage_Monitor));
 102:System/storage/Storage.c **** 
 103:System/storage/Storage.c ****     Storage_Monitor.init_state = false;
 104:System/storage/Storage.c ****     if (!BspFlash.init())
 105:System/storage/Storage.c ****         return false;
 106:System/storage/Storage.c **** 
 107:System/storage/Storage.c ****     /* external flash init */
 108:System/storage/Storage.c **** #if (FLASH_CHIP_STATE == ON)
 109:System/storage/Storage.c ****     if (ExtDev && (ExtDev->chip_type != Storage_Chip_None))
 110:System/storage/Storage.c ****     {
 111:System/storage/Storage.c ****         if (ExtDev->bus_type == Storage_ChipBus_Spi)
 112:System/storage/Storage.c ****         {
 113:System/storage/Storage.c ****             Storage_Monitor.ExtDev_ptr = NULL;
 114:System/storage/Storage.c ****             ext_flash_bus_cfg = SrvOsCommon.malloc(sizeof(BspSPI_NorModeConfig_TypeDef));
 115:System/storage/Storage.c **** 
 116:System/storage/Storage.c ****             if (ext_flash_bus_cfg)
 117:System/storage/Storage.c ****             {
 118:System/storage/Storage.c ****                 memset(ext_flash_bus_cfg, 0, sizeof(BspSPI_NorModeConfig_TypeDef));
 119:System/storage/Storage.c **** 
 120:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->BaudRatePrescaler = ExtFlash_Bus_Clock_Div;
 121:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPhase = ExtFlash_Bus_CLKPhase;
 122:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPolarity = ExtFlash_Bus_CLKPolarity;
 123:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Instance = ExtFLash_Bus_Instance;
 124:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Pin = ExtFlash_Bus_Pin;
 125:System/storage/Storage.c **** 
 126:System/storage/Storage.c ****                 /* bus init & cs pin init */
 127:System/storage/Storage.c ****                 if (ExtFlash_Bus_Api.init(To_NormalSPI_Obj(ext_flash_bus_cfg), &ExtFlash_Bus_InstOb
 128:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
 129:System/storage/Storage.c ****                 {
 130:System/storage/Storage.c ****                     Storage_Monitor.ExtBusCfg_Ptr = ext_flash_bus_cfg;
 131:System/storage/Storage.c **** 
 132:System/storage/Storage.c ****                     if (ExtDev->chip_type == Storage_ChipType_W25Qxx)
 133:System/storage/Storage.c ****                     {
 134:System/storage/Storage.c ****                         ExtDev->dev_obj = SrvOsCommon.malloc(sizeof(DevW25QxxObj_TypeDef));
 135:System/storage/Storage.c ****                         if (ExtDev->dev_obj)
 136:System/storage/Storage.c ****                         {
 137:System/storage/Storage.c ****                             /* set get time callback */
 138:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->systick = SrvOsCommon.get_os_ms;
 139:System/storage/Storage.c **** 
 140:System/storage/Storage.c ****                             /* set bus control callback */
 141:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->cs_ctl = Storage_External_Chip_W25Qx
 142:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_tx = Storage_External_Chip_W25Qx
 143:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_rx = Storage_External_Chip_W25Qx
 144:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_trans = Storage_External_Chip_W2
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 4


 145:System/storage/Storage.c ****                             Storage_Monitor.ExtDev_ptr = ExtDev;
 146:System/storage/Storage.c ****                             Storage_Monitor.ExternalFlash_ReInit_cnt = ExternalModule_ReInit_Cnt;
 147:System/storage/Storage.c **** 
 148:System/storage/Storage.c **** reinit_external_flash_module:
 149:System/storage/Storage.c ****                             extmodule_init_state = To_DevW25Qxx_API(ExtDev->dev_api)->init(To_DevW2
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_type = To_DevW25Qxx_API(ExtDev->dev_api)->i
 151:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 152:System/storage/Storage.c **** 
 153:System/storage/Storage.c ****                             if (extmodule_init_state == DevW25Qxx_Ok)
 154:System/storage/Storage.c ****                             {
 155:System/storage/Storage.c ****                                 ExtDev->start_addr  = W25QXX_BASE_ADDRESS;
 156:System/storage/Storage.c ****                                 ExtDev->sector_num  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 157:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 158:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 159:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 160:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 161:System/storage/Storage.c **** 
 162:System/storage/Storage.c ****                                 /* set external flash device read write base address */
 163:System/storage/Storage.c ****                                 Storage_Monitor.external_info.base_addr = ExtFlash_Start_Addr;
 164:System/storage/Storage.c ****                                 Storage_Monitor.ExternalFlash_Format_cnt = Format_Retry_Cnt;
 165:System/storage/Storage.c ****                             
 166:System/storage/Storage.c **** reupdate_external_flash_info:
 167:System/storage/Storage.c ****                                 /* get storage info */
 168:System/storage/Storage.c ****                                 if (!Storage_Get_StorageInfo())
 169:System/storage/Storage.c ****                                 {
 170:System/storage/Storage.c **** reformat_external_flash_info:
 171:System/storage/Storage.c ****                                     if (Storage_Monitor.ExternalFlash_Format_cnt)
 172:System/storage/Storage.c ****                                     {
 173:System/storage/Storage.c ****                                         /* format storage device */
 174:System/storage/Storage.c ****                                         if (!Storage_Format())
 175:System/storage/Storage.c ****                                         {
 176:System/storage/Storage.c ****                                             Storage_Monitor.ExternalFlash_Format_cnt --;
 177:System/storage/Storage.c ****                                             Storage_Monitor.external_info.base_addr = ExtFlash_Star
 178:System/storage/Storage.c ****                                             if (Storage_Monitor.ExternalFlash_Format_cnt)
 179:System/storage/Storage.c ****                                                 goto reformat_external_flash_info;
 180:System/storage/Storage.c ****                                         }
 181:System/storage/Storage.c ****                                         else
 182:System/storage/Storage.c ****                                         {
 183:System/storage/Storage.c ****                                             /* external flash module format successed */
 184:System/storage/Storage.c ****                                             /* build storage tab */
 185:System/storage/Storage.c ****                                             if (Storage_Build_StorageInfo())
 186:System/storage/Storage.c ****                                             {
 187:System/storage/Storage.c ****                                                 Storage_Monitor.ExternalFlash_BuildTab_cnt ++;
 188:System/storage/Storage.c ****                                                 Storage_Monitor.init_state = true;
 189:System/storage/Storage.c **** 
 190:System/storage/Storage.c ****                                                 /* after tab builded read storage info again */
 191:System/storage/Storage.c ****                                                 goto reupdate_external_flash_info;
 192:System/storage/Storage.c ****                                             }
 193:System/storage/Storage.c ****                                         }
 194:System/storage/Storage.c ****                                     }
 195:System/storage/Storage.c ****                                 }
 196:System/storage/Storage.c ****                                 else
 197:System/storage/Storage.c ****                                     Storage_Monitor.init_state = true;
 198:System/storage/Storage.c ****                             }
 199:System/storage/Storage.c ****                             else
 200:System/storage/Storage.c ****                             {
 201:System/storage/Storage.c ****                                 if (Storage_Monitor.ExternalFlash_ReInit_cnt)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 5


 202:System/storage/Storage.c ****                                 {
 203:System/storage/Storage.c ****                                     Storage_Monitor.ExternalFlash_ReInit_cnt --;
 204:System/storage/Storage.c ****                                     goto reinit_external_flash_module;
 205:System/storage/Storage.c ****                                 }
 206:System/storage/Storage.c **** 
 207:System/storage/Storage.c ****                                 Storage_Monitor.ExternalFlash_Error_Code = Storage_ModuleInit_Error
 208:System/storage/Storage.c ****                             }
 209:System/storage/Storage.c ****                         }
 210:System/storage/Storage.c ****                         else
 211:System/storage/Storage.c ****                             Storage_Monitor.ExternalFlash_Error_Code = Storage_ExtDevObj_Error;
 212:System/storage/Storage.c ****                     }
 213:System/storage/Storage.c ****                     else
 214:System/storage/Storage.c ****                         Storage_Monitor.ExternalFlash_Error_Code = Storage_ModuleType_Error;
 215:System/storage/Storage.c ****                 }
 216:System/storage/Storage.c ****                 else
 217:System/storage/Storage.c ****                     Storage_Monitor.ExternalFlash_Error_Code = Storage_BusInit_Error;
 218:System/storage/Storage.c ****             }
 219:System/storage/Storage.c ****             else
 220:System/storage/Storage.c ****                 Storage_Monitor.ExternalFlash_Error_Code = Storage_BusCfg_Malloc_Failed;
 221:System/storage/Storage.c ****         }
 222:System/storage/Storage.c ****     }
 223:System/storage/Storage.c **** #endif
 224:System/storage/Storage.c **** 
 225:System/storage/Storage.c ****     return Storage_Monitor.init_state;
 226:System/storage/Storage.c **** }
 227:System/storage/Storage.c **** 
 228:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_Get_DevInfo(Storage_ExtFLashDevObj_TypeDef *info)
 229:System/storage/Storage.c **** {
 230:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
 231:System/storage/Storage.c **** 
 232:System/storage/Storage.c ****     if (info)
 233:System/storage/Storage.c ****     {
 234:System/storage/Storage.c ****         memset(info, 0, sizeof(Storage_ExtFLashDevObj_TypeDef));
 235:System/storage/Storage.c ****         if (Storage_Monitor.init_state && Storage_Monitor.ExtDev_ptr)
 236:System/storage/Storage.c ****         {
 237:System/storage/Storage.c ****             p_dev = (Storage_ExtFLashDevObj_TypeDef *)Storage_Monitor.ExtDev_ptr;
 238:System/storage/Storage.c ****             memcpy(info, p_dev, sizeof(Storage_ExtFLashDevObj_TypeDef));
 239:System/storage/Storage.c ****             return Storage_Error_None;
 240:System/storage/Storage.c ****         }
 241:System/storage/Storage.c **** 
 242:System/storage/Storage.c ****         return Storage_ModuleInit_Error;
 243:System/storage/Storage.c ****     }
 244:System/storage/Storage.c **** 
 245:System/storage/Storage.c ****     return Storage_ExtDevObj_Error;
 246:System/storage/Storage.c **** }
 247:System/storage/Storage.c **** 
 248:System/storage/Storage.c **** static bool Storage_Format(void)
 249:System/storage/Storage.c **** {
 250:System/storage/Storage.c ****     uint32_t size = 0;
 251:System/storage/Storage.c ****     uint8_t default_data = 0;
 252:System/storage/Storage.c ****     uint32_t read_time = 0;
 253:System/storage/Storage.c ****     uint32_t remain_size = 0;
 254:System/storage/Storage.c ****     uint32_t addr_offset = From_Start_Address;
 255:System/storage/Storage.c ****         
 256:System/storage/Storage.c ****     size = Storage_TabSize;
 257:System/storage/Storage.c ****     default_data = ExtFlash_Storage_DefaultData;
 258:System/storage/Storage.c ****     remain_size = ExtFlash_Storage_TotalSize;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 6


 259:System/storage/Storage.c ****     read_time = ExtFlash_Storage_TotalSize / Storage_TabSize;
 260:System/storage/Storage.c ****     if (ExtFlash_Storage_TotalSize % Storage_TabSize)
 261:System/storage/Storage.c ****         read_time ++;
 262:System/storage/Storage.c **** 
 263:System/storage/Storage.c ****     for(uint32_t i = 0; i < read_time; i++)
 264:System/storage/Storage.c ****     {
 265:System/storage/Storage.c ****         if ((remain_size != 0) && (remain_size < size))
 266:System/storage/Storage.c ****             size = remain_size;
 267:System/storage/Storage.c **** 
 268:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Erase(addr_offset, size))
 269:System/storage/Storage.c ****             return false;
 270:System/storage/Storage.c **** 
 271:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(addr_offset, page_data_tmp, size))
 272:System/storage/Storage.c ****             return false;
 273:System/storage/Storage.c **** 
 274:System/storage/Storage.c ****         for(uint32_t j = 0; j < size; j++)
 275:System/storage/Storage.c ****         {
 276:System/storage/Storage.c ****             if (page_data_tmp[i] != default_data)
 277:System/storage/Storage.c ****                 return false;
 278:System/storage/Storage.c ****         }
 279:System/storage/Storage.c **** 
 280:System/storage/Storage.c ****         addr_offset += size;
 281:System/storage/Storage.c ****         remain_size -= size;
 282:System/storage/Storage.c **** 
 283:System/storage/Storage.c ****         if (remain_size == 0)
 284:System/storage/Storage.c ****             return true;
 285:System/storage/Storage.c ****     }
 286:System/storage/Storage.c **** 
 287:System/storage/Storage.c ****     return false;
 288:System/storage/Storage.c **** }
 289:System/storage/Storage.c **** 
 290:System/storage/Storage.c **** static bool Storage_Check_Tab(Storage_BaseSecInfo_TypeDef *sec_info)
 291:System/storage/Storage.c **** {
 292:System/storage/Storage.c ****     uint32_t free_i = 0;
 293:System/storage/Storage.c ****     uint32_t tab_addr = 0;
 294:System/storage/Storage.c ****     uint32_t store_param_found = 0;
 295:System/storage/Storage.c ****     uint32_t store_param_size = 0;
 296:System/storage/Storage.c ****     uint32_t free_slot_addr = 0;
 297:System/storage/Storage.c ****     uint32_t sec_start_addr = 0;
 298:System/storage/Storage.c ****     uint32_t sec_end_addr = 0;
 299:System/storage/Storage.c ****     uint16_t crc16 = 0;
 300:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 301:System/storage/Storage.c ****     uint16_t crc_len = 0;
 302:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef *FreeSlot_Info = NULL;
 303:System/storage/Storage.c ****     Storage_Item_TypeDef *p_ItemList = NULL;
 304:System/storage/Storage.c **** 
 305:System/storage/Storage.c ****     if (sec_info)
 306:System/storage/Storage.c ****     {
 307:System/storage/Storage.c ****         /* free address & slot check */
 308:System/storage/Storage.c ****         free_slot_addr = sec_info->free_slot_addr;
 309:System/storage/Storage.c ****         sec_start_addr = sec_info->data_sec_addr;
 310:System/storage/Storage.c ****         sec_end_addr = sec_start_addr + sec_info->data_sec_size;
 311:System/storage/Storage.c **** 
 312:System/storage/Storage.c ****         for(free_i = 0; ;)
 313:System/storage/Storage.c ****         {
 314:System/storage/Storage.c ****             /* check boot section free slot */
 315:System/storage/Storage.c ****             if ((free_slot_addr == 0) || \
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 7


 316:System/storage/Storage.c ****                 (free_slot_addr < sec_start_addr) || \
 317:System/storage/Storage.c ****                 (free_slot_addr > sec_end_addr) || \
 318:System/storage/Storage.c ****                 !Storage_ExtFlash_ParaSec_Read(free_slot_addr, page_data_tmp, Storage_TabSize))
 319:System/storage/Storage.c ****                 return false;
 320:System/storage/Storage.c **** 
 321:System/storage/Storage.c ****             FreeSlot_Info = (Storage_FreeSlot_TypeDef *)page_data_tmp;
 322:System/storage/Storage.c **** 
 323:System/storage/Storage.c ****             if ((FreeSlot_Info->head_tag != STORAGE_SLOT_HEAD_TAG) || \
 324:System/storage/Storage.c ****                 (FreeSlot_Info->end_tag != STORAGE_SLOT_END_TAG))
 325:System/storage/Storage.c ****                 return false;
 326:System/storage/Storage.c **** 
 327:System/storage/Storage.c ****             free_i ++;
 328:System/storage/Storage.c ****             if (FreeSlot_Info->nxt_addr == 0)
 329:System/storage/Storage.c ****                 break;
 330:System/storage/Storage.c **** 
 331:System/storage/Storage.c ****             free_slot_addr = FreeSlot_Info->nxt_addr;
 332:System/storage/Storage.c ****         }
 333:System/storage/Storage.c ****         
 334:System/storage/Storage.c ****         if (sec_info->para_num)
 335:System/storage/Storage.c ****         {
 336:System/storage/Storage.c ****             tab_addr = sec_info->tab_addr;
 337:System/storage/Storage.c **** 
 338:System/storage/Storage.c ****             for (uint16_t tab_i = 0; tab_i < sec_info->page_num; tab_i ++)
 339:System/storage/Storage.c ****             {
 340:System/storage/Storage.c ****                 if (!Storage_ExtFlash_ParaSec_Read(tab_addr, page_data_tmp, sec_info->tab_size / se
 341:System/storage/Storage.c ****                     return false;
 342:System/storage/Storage.c ****             
 343:System/storage/Storage.c ****                 p_ItemList = (Storage_Item_TypeDef *)page_data_tmp;
 344:System/storage/Storage.c ****                 for(uint16_t item_i = 0; item_i < Item_Capacity_Per_Tab; item_i ++)
 345:System/storage/Storage.c ****                 {
 346:System/storage/Storage.c ****                     if ((p_ItemList[item_i].head_tag == STORAGE_ITEM_HEAD_TAG) && \
 347:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 348:System/storage/Storage.c ****                     {
 349:System/storage/Storage.c ****                         /* check item slot crc */
 350:System/storage/Storage.c ****                         /*
 351:System/storage/Storage.c ****                          *  typedef struct
 352:System/storage/Storage.c ****                          *  {
 353:System/storage/Storage.c ****                          *      uint8_t head_tag;
 354:System/storage/Storage.c ****                          *      uint8_t class;
 355:System/storage/Storage.c ****                          *      uint8_t name[STORAGE_NAME_LEN];
 356:System/storage/Storage.c ****                          *      uint32_t data_addr;
 357:System/storage/Storage.c ****                          *      uint16_t len;
 358:System/storage/Storage.c ****                          *      uint16_t crc16;
 359:System/storage/Storage.c ****                          *      uint8_t end_tag;
 360:System/storage/Storage.c ****                          *  } Storage_Item_TypeDef;
 361:System/storage/Storage.c ****                          *  
 362:System/storage/Storage.c ****                          * comput crc from class to len
 363:System/storage/Storage.c ****                          */
 364:System/storage/Storage.c ****                         crc_buf = (uint8_t *)&p_ItemList[item_i] + sizeof(p_ItemList[item_i].head_t
 365:System/storage/Storage.c ****                         crc_len = sizeof(Storage_Item_TypeDef);
 366:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].head_tag);
 367:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].end_tag);
 368:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].crc16);
 369:System/storage/Storage.c ****                         store_param_size += p_ItemList[item_i].len;
 370:System/storage/Storage.c ****                         
 371:System/storage/Storage.c ****                         crc16 = Common_CRC16(crc_buf, crc_len);
 372:System/storage/Storage.c ****                         if (crc16 != p_ItemList[item_i].crc16)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 8


 373:System/storage/Storage.c ****                             return false;
 374:System/storage/Storage.c **** 
 375:System/storage/Storage.c ****                         store_param_found ++;
 376:System/storage/Storage.c ****                     }
 377:System/storage/Storage.c ****                 }
 378:System/storage/Storage.c **** 
 379:System/storage/Storage.c ****                 tab_addr += (sec_info->tab_size / sec_info->page_num);
 380:System/storage/Storage.c ****             }
 381:System/storage/Storage.c **** 
 382:System/storage/Storage.c ****             if ((store_param_found != sec_info->para_num) || \
 383:System/storage/Storage.c ****                 (store_param_size != sec_info->para_size))
 384:System/storage/Storage.c ****                 return false;
 385:System/storage/Storage.c ****         }
 386:System/storage/Storage.c **** 
 387:System/storage/Storage.c ****         return true;
 388:System/storage/Storage.c ****     }
 389:System/storage/Storage.c **** 
 390:System/storage/Storage.c ****     return false;
 391:System/storage/Storage.c **** }
 392:System/storage/Storage.c **** 
 393:System/storage/Storage.c **** static bool Storage_Get_StorageInfo(void)
 394:System/storage/Storage.c **** {
 395:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Info = NULL;
 396:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info_r;
 397:System/storage/Storage.c ****     uint16_t crc = 0;
 398:System/storage/Storage.c ****     uint16_t crc_read = 0;
 399:System/storage/Storage.c ****     char flash_tag[INTERNAL_PAGE_TAG_SIZE + EXTERNAL_PAGE_TAG_SIZE];
 400:System/storage/Storage.c **** 
 401:System/storage/Storage.c ****     memset(flash_tag, '\0', sizeof(flash_tag));
 402:System/storage/Storage.c ****     memset(&Info_r, 0, sizeof(Storage_FlashInfo_TypeDef));
 403:System/storage/Storage.c **** 
 404:System/storage/Storage.c ****     memcpy(flash_tag, EXTERNAL_STORAGE_PAGE_TAG, EXTERNAL_PAGE_TAG_SIZE);
 405:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 406:System/storage/Storage.c ****     
 407:System/storage/Storage.c ****     if (Storage_ExtFlash_ParaSec_Read(From_Start_Address, page_data_tmp, Storage_TabSize))
 408:System/storage/Storage.c ****     {
 409:System/storage/Storage.c ****         /* check internal storage tag */
 410:System/storage/Storage.c ****         Info_r = *(Storage_FlashInfo_TypeDef *)page_data_tmp;
 411:System/storage/Storage.c ****         
 412:System/storage/Storage.c ****         /* check storage tag */
 413:System/storage/Storage.c ****         /* check boot / sys / user  start addr */
 414:System/storage/Storage.c ****         if ((strcmp((const char *)Info_r.tag, flash_tag) != 0) || \
 415:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 416:System/storage/Storage.c ****             (Info_r.sys_sec.tab_addr == 0) || \
 417:System/storage/Storage.c ****             (Info_r.user_sec.tab_addr == 0) || \
 418:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == Info_r.sys_sec.tab_addr) || \
 419:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == Info_r.user_sec.tab_addr) || \
 420:System/storage/Storage.c ****             (Info_r.sys_sec.tab_addr == Info_r.user_sec.tab_addr))
 421:System/storage/Storage.c ****             return false;
 422:System/storage/Storage.c **** 
 423:System/storage/Storage.c ****         /* get crc from storage baseinfo section check crc value */
 424:System/storage/Storage.c ****         memcpy(&crc_read, &page_data_tmp[OnChipFlash_Storage_InfoPageSize - sizeof(uint16_t)], size
 425:System/storage/Storage.c ****         crc = Common_CRC16(page_data_tmp, OnChipFlash_Storage_InfoPageSize - sizeof(crc));
 426:System/storage/Storage.c ****         if (crc != crc_read)
 427:System/storage/Storage.c ****             return false;
 428:System/storage/Storage.c **** 
 429:System/storage/Storage.c ****         memset(page_data_tmp, 0, Storage_TabSize);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 9


 430:System/storage/Storage.c ****         /* check  boot  section tab & free slot info & stored item */
 431:System/storage/Storage.c ****         /* check system section tab & free slot info & stored item */
 432:System/storage/Storage.c ****         /* check  user  section tab & free slot info & stored item */
 433:System/storage/Storage.c ****         if (Storage_Check_Tab(&Info_r.boot_sec) && \
 434:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 435:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.user_sec))
 436:System/storage/Storage.c ****         {
 437:System/storage/Storage.c ****             memcpy(p_Info, &Info_r, sizeof(Storage_FlashInfo_TypeDef));
 438:System/storage/Storage.c ****             return true;
 439:System/storage/Storage.c ****         }
 440:System/storage/Storage.c ****     }
 441:System/storage/Storage.c **** 
 442:System/storage/Storage.c ****     return false;
 443:System/storage/Storage.c **** }
 444:System/storage/Storage.c **** 
 445:System/storage/Storage.c **** static bool Storage_Clear_Tab(uint32_t addr, uint32_t tab_num)
 446:System/storage/Storage.c **** {
 447:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 448:System/storage/Storage.c **** 
 449:System/storage/Storage.c ****     if ((addr == 0) || \
 450:System/storage/Storage.c ****         (tab_num == 0))
 451:System/storage/Storage.c ****         return false;
 452:System/storage/Storage.c **** 
 453:System/storage/Storage.c ****     memset(page_data_tmp, 0, Storage_TabSize);
 454:System/storage/Storage.c ****     addr_tmp = addr;
 455:System/storage/Storage.c ****     
 456:System/storage/Storage.c ****     for(uint32_t i = 0; i < tab_num; i++)
 457:System/storage/Storage.c ****     {
 458:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(addr_tmp, page_data_tmp, Storage_TabSize))
 459:System/storage/Storage.c ****             return false;
 460:System/storage/Storage.c **** 
 461:System/storage/Storage.c ****         addr_tmp += Storage_TabSize;
 462:System/storage/Storage.c ****     }
 463:System/storage/Storage.c **** 
 464:System/storage/Storage.c ****     return true;
 465:System/storage/Storage.c **** }
 466:System/storage/Storage.c **** 
 467:System/storage/Storage.c **** /* 
 468:System/storage/Storage.c ****  * if matched return data slot address 
 469:System/storage/Storage.c ****  * else return 0
 470:System/storage/Storage.c ****  */
 471:System/storage/Storage.c **** static Storage_ItemSearchOut_TypeDef Storage_Search(Storage_ParaClassType_List _class, const char *
 472:System/storage/Storage.c **** {
 473:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 474:System/storage/Storage.c ****     Storage_Item_TypeDef *item_list = NULL;
 475:System/storage/Storage.c ****     Storage_Item_TypeDef *p_item = NULL;
 476:System/storage/Storage.c ****     uint32_t tab_addr = 0;
 477:System/storage/Storage.c ****     Storage_ItemSearchOut_TypeDef ItemSearch;
 478:System/storage/Storage.c **** 
 479:System/storage/Storage.c ****     memset(&ItemSearch, 0, sizeof(ItemSearch));
 480:System/storage/Storage.c **** 
 481:System/storage/Storage.c ****     if (!Storage_Monitor.init_state || \
 482:System/storage/Storage.c ****         (name == NULL) || \
 483:System/storage/Storage.c ****         (strlen(name) == 0) || \
 484:System/storage/Storage.c ****         (_class > Para_User))
 485:System/storage/Storage.c ****         return ItemSearch;
 486:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 10


 487:System/storage/Storage.c ****     p_Sec = Storage_Get_SecInfo(&Storage_Monitor.external_info, _class);
 488:System/storage/Storage.c **** 
 489:System/storage/Storage.c ****     if ((p_Sec == NULL) || \
 490:System/storage/Storage.c ****         (p_Sec->para_num == 0) || \
 491:System/storage/Storage.c ****         (p_Sec->para_size == 0))
 492:System/storage/Storage.c ****         return ItemSearch;
 493:System/storage/Storage.c **** 
 494:System/storage/Storage.c ****     tab_addr = p_Sec->tab_addr;
 495:System/storage/Storage.c ****     /* tab traverse */
 496:System/storage/Storage.c ****     for (uint8_t tab_i = 0; tab_i < p_Sec->page_num; tab_i ++)
 497:System/storage/Storage.c ****     {
 498:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(tab_addr, page_data_tmp, (p_Sec->tab_size / p_Sec->page_
 499:System/storage/Storage.c ****             return ItemSearch;
 500:System/storage/Storage.c ****     
 501:System/storage/Storage.c ****         /* tab item traverse */
 502:System/storage/Storage.c ****         item_list = (Storage_Item_TypeDef *)page_data_tmp;
 503:System/storage/Storage.c ****         for (uint16_t item_i = 0; item_i < ((p_Sec->tab_size / p_Sec->page_num) / sizeof(Storage_It
 504:System/storage/Storage.c ****         {
 505:System/storage/Storage.c ****             p_item = &item_list[item_i];
 506:System/storage/Storage.c **** 
 507:System/storage/Storage.c ****             if ((p_item->head_tag == STORAGE_ITEM_HEAD_TAG) && \
 508:System/storage/Storage.c ****                 (p_item->end_tag == STORAGE_ITEM_END_TAG) && \
 509:System/storage/Storage.c ****                 (memcmp(p_item->name, name, strlen(name)) == 0))
 510:System/storage/Storage.c ****             {
 511:System/storage/Storage.c ****                 if (Storage_Compare_ItemSlot_CRC(*p_item))
 512:System/storage/Storage.c ****                 {
 513:System/storage/Storage.c ****                     ItemSearch.item_addr = tab_addr;
 514:System/storage/Storage.c ****                     ItemSearch.item_index = item_i;
 515:System/storage/Storage.c ****                     ItemSearch.item = *p_item;
 516:System/storage/Storage.c ****                     return ItemSearch;
 517:System/storage/Storage.c ****                 }
 518:System/storage/Storage.c ****             }
 519:System/storage/Storage.c ****         }
 520:System/storage/Storage.c ****     
 521:System/storage/Storage.c ****         /* update tab address */
 522:System/storage/Storage.c ****         tab_addr += (p_Sec->tab_size / p_Sec->page_num);
 523:System/storage/Storage.c ****     }
 524:System/storage/Storage.c **** 
 525:System/storage/Storage.c ****     return ItemSearch;
 526:System/storage/Storage.c **** }
 527:System/storage/Storage.c **** 
 528:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_ItemSlot_Update(uint32_t tab_addr, uint8_t item_index, Storag
 529:System/storage/Storage.c **** {
 530:System/storage/Storage.c ****     Storage_Item_TypeDef *ItemList = NULL;
 531:System/storage/Storage.c **** 
 532:System/storage/Storage.c ****     if ((tab_addr == 0) || \
 533:System/storage/Storage.c ****         (p_Sec == NULL) || \
 534:System/storage/Storage.c ****         (item.head_tag != STORAGE_ITEM_HEAD_TAG) || \
 535:System/storage/Storage.c ****         (item.end_tag != STORAGE_ITEM_END_TAG) || \
 536:System/storage/Storage.c ****         (item.data_addr == 0) || \
 537:System/storage/Storage.c ****         (item.data_addr > (p_Sec->data_sec_addr + p_Sec->data_sec_size)) || \
 538:System/storage/Storage.c ****         (item.data_addr < p_Sec->data_sec_addr))
 539:System/storage/Storage.c ****         return Storage_Param_Error;
 540:System/storage/Storage.c **** 
 541:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(tab_addr, &page_data_tmp[Storage_TabSize], Storage_TabSize))
 542:System/storage/Storage.c ****         return Storage_Read_Error;
 543:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 11


 544:System/storage/Storage.c ****     ItemList = (Storage_Item_TypeDef *)&page_data_tmp[Storage_TabSize];
 545:System/storage/Storage.c ****     ItemList[item_index] = item;
 546:System/storage/Storage.c **** 
 547:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Write(tab_addr, (uint8_t *)ItemList, Storage_TabSize))
 548:System/storage/Storage.c ****         return Storage_Write_Error;
 549:System/storage/Storage.c **** 
 550:System/storage/Storage.c ****     return Storage_Error_None;
 551:System/storage/Storage.c **** }
 552:System/storage/Storage.c **** 
 553:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_Get_Data(Storage_ParaClassType_List class, Storage_Item_TypeD
 554:System/storage/Storage.c **** {
 555:System/storage/Storage.c ****     uint32_t data_len = 0;
 556:System/storage/Storage.c ****     uint32_t data_addr = 0;
 557:System/storage/Storage.c ****     uint8_t *p_read_out = NULL;
 558:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 559:System/storage/Storage.c ****     uint16_t crc_len = 0;
 560:System/storage/Storage.c ****     uint16_t crc = 0;
 561:System/storage/Storage.c ****     Storage_DataSlot_TypeDef DataSlot;
 562:System/storage/Storage.c ****     uint8_t *p_data_start = NULL;
 563:System/storage/Storage.c **** 
 564:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
 565:System/storage/Storage.c ****     if (item.data_addr && p_data && size)
 566:System/storage/Storage.c ****     {
 567:System/storage/Storage.c ****         data_len = item.len;
 568:System/storage/Storage.c ****         data_addr = item.data_addr;
 569:System/storage/Storage.c **** 
 570:System/storage/Storage.c ****         while(data_len)
 571:System/storage/Storage.c ****         {
 572:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Read(data_addr, page_data_tmp, data_len + sizeof(Storage_
 573:System/storage/Storage.c ****                 return Storage_GetData_Error;
 574:System/storage/Storage.c **** 
 575:System/storage/Storage.c ****             p_read_out = page_data_tmp;
 576:System/storage/Storage.c ****             memcpy(&DataSlot.head_tag, p_read_out, sizeof(DataSlot.head_tag));
 577:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.head_tag);
 578:System/storage/Storage.c ****             if (DataSlot.head_tag != STORAGE_SLOT_HEAD_TAG)
 579:System/storage/Storage.c ****                 return Storage_GetData_Error;
 580:System/storage/Storage.c **** 
 581:System/storage/Storage.c ****             memcpy(DataSlot.name, p_read_out, STORAGE_NAME_LEN);
 582:System/storage/Storage.c ****             p_read_out += STORAGE_NAME_LEN;
 583:System/storage/Storage.c **** 
 584:System/storage/Storage.c ****             memcpy(&DataSlot.total_data_size, p_read_out, sizeof(DataSlot.total_data_size));
 585:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.total_data_size);
 586:System/storage/Storage.c ****             if (DataSlot.total_data_size == 0)
 587:System/storage/Storage.c ****                 return Storage_GetData_Error;
 588:System/storage/Storage.c **** 
 589:System/storage/Storage.c ****             memcpy(&DataSlot.cur_slot_size, p_read_out, sizeof(DataSlot.cur_slot_size));
 590:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.cur_slot_size);
 591:System/storage/Storage.c ****             if (DataSlot.cur_slot_size == 0)
 592:System/storage/Storage.c ****                 return Storage_GetData_Error;
 593:System/storage/Storage.c **** 
 594:System/storage/Storage.c ****             memcpy(&DataSlot.nxt_addr, p_read_out, sizeof(DataSlot.nxt_addr));
 595:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.nxt_addr);
 596:System/storage/Storage.c **** 
 597:System/storage/Storage.c ****             memcpy(&DataSlot.align_size, p_read_out, sizeof(DataSlot.align_size));
 598:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.align_size);
 599:System/storage/Storage.c ****             p_data_start = p_read_out;
 600:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 12


 601:System/storage/Storage.c ****             crc_buf = p_read_out;
 602:System/storage/Storage.c ****             crc_len = DataSlot.cur_slot_size;
 603:System/storage/Storage.c ****             crc = Common_CRC16(crc_buf, crc_len);
 604:System/storage/Storage.c **** 
 605:System/storage/Storage.c ****             p_read_out += DataSlot.cur_slot_size;
 606:System/storage/Storage.c ****             memcpy(&DataSlot.slot_crc, p_read_out, sizeof(DataSlot.slot_crc));
 607:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.slot_crc);
 608:System/storage/Storage.c ****             if (crc != DataSlot.slot_crc)
 609:System/storage/Storage.c ****                 return Storage_GetData_Error;
 610:System/storage/Storage.c **** 
 611:System/storage/Storage.c ****             memcpy(&DataSlot.end_tag, p_read_out, sizeof(DataSlot.end_tag));
 612:System/storage/Storage.c ****             if (DataSlot.end_tag != STORAGE_SLOT_END_TAG)
 613:System/storage/Storage.c ****                 return Storage_GetData_Error;
 614:System/storage/Storage.c **** 
 615:System/storage/Storage.c ****             memcpy(p_data, p_data_start, DataSlot.cur_slot_size - DataSlot.align_size);
 616:System/storage/Storage.c ****             data_len -= DataSlot.cur_slot_size;
 617:System/storage/Storage.c **** 
 618:System/storage/Storage.c ****             if (DataSlot.nxt_addr)
 619:System/storage/Storage.c ****             {
 620:System/storage/Storage.c ****                 p_data += DataSlot.cur_slot_size - DataSlot.align_size;
 621:System/storage/Storage.c ****                 data_addr = DataSlot.nxt_addr;
 622:System/storage/Storage.c ****             }
 623:System/storage/Storage.c ****             else
 624:System/storage/Storage.c ****             {
 625:System/storage/Storage.c ****                 if (data_len == 0)
 626:System/storage/Storage.c ****                     break;
 627:System/storage/Storage.c **** 
 628:System/storage/Storage.c ****                 return Storage_GetData_Error;
 629:System/storage/Storage.c ****             }
 630:System/storage/Storage.c ****         }
 631:System/storage/Storage.c **** 
 632:System/storage/Storage.c ****         return Storage_Error_None;
 633:System/storage/Storage.c ****     }
 634:System/storage/Storage.c **** 
 635:System/storage/Storage.c ****     return Storage_GetData_Error;
 636:System/storage/Storage.c **** }
 637:System/storage/Storage.c **** 
 638:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_SlotData_Update(Storage_ParaClassType_List _class, storage_ha
 639:System/storage/Storage.c **** {
 640:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 641:System/storage/Storage.c ****     Storage_DataSlot_TypeDef *p_slotdata = NULL;
 642:System/storage/Storage.c ****     uint8_t *p_read_tmp = page_data_tmp;
 643:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 644:System/storage/Storage.c ****     uint16_t crc = 0;
 645:System/storage/Storage.c ****     uint32_t read_addr = 0;
 646:System/storage/Storage.c ****     uint32_t read_size = 0;
 647:System/storage/Storage.c ****     uint32_t valid_data_size = 0;
 648:System/storage/Storage.c ****     uint8_t align_byte = 0;
 649:System/storage/Storage.c **** 
 650:System/storage/Storage.c ****     if (!Storage_Monitor.init_state || \
 651:System/storage/Storage.c ****         (_class > Para_User) || \
 652:System/storage/Storage.c ****         (data_slot_hdl == 0) || \
 653:System/storage/Storage.c ****         (p_data == NULL) || \
 654:System/storage/Storage.c ****         (size == 0))
 655:System/storage/Storage.c ****         return Storage_Param_Error;
 656:System/storage/Storage.c **** 
 657:System/storage/Storage.c ****     p_Sec = Storage_Get_SecInfo(&Storage_Monitor.external_info, _class);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 13


 658:System/storage/Storage.c ****     
 659:System/storage/Storage.c ****     if ((p_Sec == NULL) || \
 660:System/storage/Storage.c ****         (p_Sec->data_sec_addr > data_slot_hdl) || \
 661:System/storage/Storage.c ****         (data_slot_hdl > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
 662:System/storage/Storage.c ****         return Storage_Param_Error;
 663:System/storage/Storage.c **** 
 664:System/storage/Storage.c ****     read_addr = data_slot_hdl;
 665:System/storage/Storage.c ****     memset(page_data_tmp, 0, sizeof(Storage_DataSlot_TypeDef));
 666:System/storage/Storage.c ****     if (size % STORAGE_DATA_ALIGN)
 667:System/storage/Storage.c ****     {
 668:System/storage/Storage.c ****         align_byte = STORAGE_DATA_ALIGN - size % STORAGE_DATA_ALIGN;
 669:System/storage/Storage.c ****     }
 670:System/storage/Storage.c ****     else
 671:System/storage/Storage.c ****         align_byte = 0;
 672:System/storage/Storage.c **** 
 673:System/storage/Storage.c ****     /* get data slot first */
 674:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(read_addr, p_read_tmp, sizeof(Storage_DataSlot_TypeDef)))
 675:System/storage/Storage.c ****         return Storage_Read_Error;
 676:System/storage/Storage.c ****     
 677:System/storage/Storage.c ****     /* get data size */
 678:System/storage/Storage.c ****     p_slotdata = (Storage_DataSlot_TypeDef *)p_read_tmp;
 679:System/storage/Storage.c ****     if ((p_slotdata->head_tag != STORAGE_SLOT_HEAD_TAG) || \
 680:System/storage/Storage.c ****         (p_slotdata->total_data_size == 0) || \
 681:System/storage/Storage.c ****         (p_slotdata->total_data_size > p_Sec->data_sec_size))
 682:System/storage/Storage.c ****         return Storage_DataInfo_Error;
 683:System/storage/Storage.c **** 
 684:System/storage/Storage.c ****     if (p_slotdata->total_data_size != (size + align_byte))
 685:System/storage/Storage.c ****         return Storage_Update_DataSize_Error;
 686:System/storage/Storage.c **** 
 687:System/storage/Storage.c ****     read_size = p_slotdata->total_data_size + sizeof(Storage_DataSlot_TypeDef);
 688:System/storage/Storage.c ****     p_read_tmp = page_data_tmp;
 689:System/storage/Storage.c ****     memset(p_read_tmp, 0, sizeof(Storage_DataSlot_TypeDef));
 690:System/storage/Storage.c ****     p_slotdata = NULL;
 691:System/storage/Storage.c ****     while(true)
 692:System/storage/Storage.c ****     {
 693:System/storage/Storage.c ****         p_read_tmp = page_data_tmp;
 694:System/storage/Storage.c ****         p_slotdata = (Storage_DataSlot_TypeDef *)p_read_tmp;
 695:System/storage/Storage.c **** 
 696:System/storage/Storage.c ****         /* get data from handle */
 697:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(read_addr, p_read_tmp, read_size))
 698:System/storage/Storage.c ****             return Storage_Read_Error;
 699:System/storage/Storage.c **** 
 700:System/storage/Storage.c ****         p_slotdata->head_tag = *((uint32_t *)p_read_tmp);
 701:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->head_tag);
 702:System/storage/Storage.c ****         if (p_slotdata->head_tag != STORAGE_SLOT_HEAD_TAG)
 703:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 704:System/storage/Storage.c **** 
 705:System/storage/Storage.c ****         memcpy(p_slotdata->name, p_read_tmp, STORAGE_NAME_LEN);
 706:System/storage/Storage.c ****         p_read_tmp += STORAGE_NAME_LEN;
 707:System/storage/Storage.c **** 
 708:System/storage/Storage.c ****         p_slotdata->total_data_size = *((uint32_t *)p_read_tmp);
 709:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->total_data_size);
 710:System/storage/Storage.c ****         if ((p_slotdata->total_data_size == 0) || \
 711:System/storage/Storage.c ****             (p_slotdata->total_data_size > p_Sec->data_sec_size))
 712:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 713:System/storage/Storage.c **** 
 714:System/storage/Storage.c ****         p_slotdata->cur_slot_size = *((uint32_t *)p_read_tmp);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 14


 715:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->cur_slot_size);
 716:System/storage/Storage.c ****         if (p_slotdata->cur_slot_size > p_slotdata->total_data_size)
 717:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 718:System/storage/Storage.c **** 
 719:System/storage/Storage.c ****         p_slotdata->nxt_addr = *((uint32_t *)p_read_tmp);
 720:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->nxt_addr);
 721:System/storage/Storage.c ****         if (p_slotdata->nxt_addr)
 722:System/storage/Storage.c ****         {
 723:System/storage/Storage.c ****             if ((p_slotdata->nxt_addr < p_Sec->data_sec_addr) || \
 724:System/storage/Storage.c ****                 (p_slotdata->nxt_addr > p_Sec->data_sec_addr + p_Sec->data_sec_size))
 725:System/storage/Storage.c ****                 return Storage_DataInfo_Error;
 726:System/storage/Storage.c ****         }
 727:System/storage/Storage.c **** 
 728:System/storage/Storage.c ****         p_slotdata->align_size = *((uint8_t *)p_read_tmp);
 729:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->align_size);
 730:System/storage/Storage.c ****         if (p_slotdata->align_size >= STORAGE_DATA_ALIGN)
 731:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 732:System/storage/Storage.c **** 
 733:System/storage/Storage.c ****         crc_buf = p_read_tmp;
 734:System/storage/Storage.c ****         memcpy(p_read_tmp, p_data, (p_slotdata->cur_slot_size - p_slotdata->align_size));
 735:System/storage/Storage.c ****         p_read_tmp += p_slotdata->cur_slot_size - p_slotdata->align_size;
 736:System/storage/Storage.c **** 
 737:System/storage/Storage.c ****         if (p_slotdata->align_size)
 738:System/storage/Storage.c ****             /* set align byte */
 739:System/storage/Storage.c ****             memset(p_read_tmp, 0, p_slotdata->align_size);
 740:System/storage/Storage.c ****         
 741:System/storage/Storage.c ****         p_read_tmp += p_slotdata->align_size;
 742:System/storage/Storage.c ****         /* update crc */
 743:System/storage/Storage.c ****         crc = Common_CRC16(crc_buf, p_slotdata->cur_slot_size) ;
 744:System/storage/Storage.c ****         
 745:System/storage/Storage.c ****         valid_data_size += p_slotdata->cur_slot_size - p_slotdata->align_size;
 746:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 747:System/storage/Storage.c ****         {
 748:System/storage/Storage.c ****             /* all data has been read out from the data slot in destination section */
 749:System/storage/Storage.c ****             /* compare update data size and valid_data_size */
 750:System/storage/Storage.c ****             if (size != valid_data_size)
 751:System/storage/Storage.c ****                 return Storage_Update_DataSize_Error;
 752:System/storage/Storage.c ****         }
 753:System/storage/Storage.c **** 
 754:System/storage/Storage.c ****         memcpy(p_read_tmp, &crc, sizeof(crc));
 755:System/storage/Storage.c ****         
 756:System/storage/Storage.c ****         p_data += p_slotdata->cur_slot_size - p_slotdata->align_size;
 757:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
 758:System/storage/Storage.c **** 
 759:System/storage/Storage.c ****         if (*(uint32_t *)p_read_tmp != STORAGE_SLOT_END_TAG)
 760:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 761:System/storage/Storage.c **** 
 762:System/storage/Storage.c ****         if ((p_slotdata->nxt_addr == 0) && \
 763:System/storage/Storage.c ****             (size == valid_data_size))
 764:System/storage/Storage.c ****         {
 765:System/storage/Storage.c ****             /* update data to flash */
 766:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(read_addr, page_data_tmp, p_slotdata->cur_slot_size
 767:System/storage/Storage.c ****                 return Storage_Write_Error;
 768:System/storage/Storage.c **** 
 769:System/storage/Storage.c ****             /* update accomplish */
 770:System/storage/Storage.c ****             return Storage_Error_None;
 771:System/storage/Storage.c ****         }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 15


 772:System/storage/Storage.c **** 
 773:System/storage/Storage.c ****         read_addr = p_slotdata->nxt_addr;
 774:System/storage/Storage.c ****     }
 775:System/storage/Storage.c **** 
 776:System/storage/Storage.c ****     return Storage_Error_None;
 777:System/storage/Storage.c **** }
 778:System/storage/Storage.c **** 
 779:System/storage/Storage.c **** static bool Storage_Link_FreeSlot(uint32_t front_free_addr, uint32_t behind_free_addr, uint32_t new
 780:System/storage/Storage.c **** {
 781:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef front_slot;
 782:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef behind_slot;
 783:System/storage/Storage.c **** 
 784:System/storage/Storage.c ****     if ((new_free_addr == 0) || \
 785:System/storage/Storage.c ****         (front_free_addr == 0) || \
 786:System/storage/Storage.c ****         (behind_free_addr == 0) || \
 787:System/storage/Storage.c ****         (front_free_addr >= new_free_addr) || \
 788:System/storage/Storage.c ****         (behind_free_addr <= new_free_addr) || \
 789:System/storage/Storage.c ****         (new_free_slot == NULL))
 790:System/storage/Storage.c ****         return false;
 791:System/storage/Storage.c **** 
 792:System/storage/Storage.c ****     memset(&front_slot, 0, sizeof(Storage_FreeSlot_TypeDef));
 793:System/storage/Storage.c ****     memset(&behind_slot, 0, sizeof(Storage_FreeSlot_TypeDef));
 794:System/storage/Storage.c **** 
 795:System/storage/Storage.c **** /* 
 796:System/storage/Storage.c ****  *
 797:System/storage/Storage.c ****  *       address N                    address X                   address Y
 798:System/storage/Storage.c ****  * _____________________        _____________________        ______________________
 799:System/storage/Storage.c ****  * |  front free slot  |   ———→ |   new free slot   |   ———→ |  behind free slot  |
 800:System/storage/Storage.c ****  * |                   |   |    |                   |   |    |                    |   |
 801:System/storage/Storage.c ****  * |____next_addr_X____|   |    |____next_addr_Y____|   |    |_____next_addr_Z____|   |
 802:System/storage/Storage.c ****  *          |______________|             |______________|              |______________|
 803:System/storage/Storage.c ****  * 
 804:System/storage/Storage.c ****  */
 805:System/storage/Storage.c **** 
 806:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(front_free_addr, (uint8_t *)&front_slot, sizeof(Storage_Free
 807:System/storage/Storage.c ****         return false;
 808:System/storage/Storage.c **** 
 809:System/storage/Storage.c ****     /* link free slot address */
 810:System/storage/Storage.c ****     front_slot.nxt_addr = new_free_addr;
 811:System/storage/Storage.c ****     new_free_slot->nxt_addr = behind_free_addr;
 812:System/storage/Storage.c **** 
 813:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Write(front_free_addr, (uint8_t *)&front_slot, sizeof(Storage_Fre
 814:System/storage/Storage.c ****         return false;
 815:System/storage/Storage.c **** 
 816:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Write(new_free_addr, (uint8_t *)new_free_slot, sizeof(Storage_Fre
 817:System/storage/Storage.c ****         return false;
 818:System/storage/Storage.c **** 
 819:System/storage/Storage.c ****     return true;
 820:System/storage/Storage.c **** }
 821:System/storage/Storage.c **** 
 822:System/storage/Storage.c **** /* developping & untested */
 823:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_FreeSlot_CheckMerge(uint32_t slot_addr, Storage_FreeSlot_Type
 824:System/storage/Storage.c **** {
 825:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef FreeSlot_Info;
 826:System/storage/Storage.c ****     uint32_t front_freeslot_addr = 0;
 827:System/storage/Storage.c ****     uint32_t behind_freeslot_addr = 0;
 828:System/storage/Storage.c ****     uint32_t ori_freespace_size = 0;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 16


 829:System/storage/Storage.c **** 
 830:System/storage/Storage.c ****     if ((p_Sec == NULL) || \
 831:System/storage/Storage.c ****         (slot_info == NULL) || \
 832:System/storage/Storage.c ****         (slot_addr < p_Sec->data_sec_addr) || \
 833:System/storage/Storage.c ****         (slot_addr > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
 834:System/storage/Storage.c ****         return Storage_Param_Error;
 835:System/storage/Storage.c **** 
 836:System/storage/Storage.c ****     memset(&FreeSlot_Info, 0, sizeof(FreeSlot_Info));
 837:System/storage/Storage.c **** 
 838:System/storage/Storage.c ****     if ((slot_info->head_tag != STORAGE_SLOT_HEAD_TAG) || \
 839:System/storage/Storage.c ****         (slot_info->end_tag != STORAGE_SLOT_END_TAG) || \
 840:System/storage/Storage.c ****         (slot_info->cur_slot_size > p_Sec->free_space_size))
 841:System/storage/Storage.c ****         return Storage_FreeSlot_Info_Error;
 842:System/storage/Storage.c **** 
 843:System/storage/Storage.c ****     ori_freespace_size = p_Sec->free_space_size;
 844:System/storage/Storage.c ****     front_freeslot_addr = p_Sec->free_slot_addr;
 845:System/storage/Storage.c ****     while (true)
 846:System/storage/Storage.c ****     {
 847:System/storage/Storage.c ****         /* traverse all free slot */
 848:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(front_freeslot_addr, (uint8_t *)&FreeSlot_Info, sizeof(F
 849:System/storage/Storage.c ****             return Storage_Read_Error;
 850:System/storage/Storage.c **** 
 851:System/storage/Storage.c ****         if ((FreeSlot_Info.head_tag != STORAGE_SLOT_HEAD_TAG) || \
 852:System/storage/Storage.c ****             (FreeSlot_Info.end_tag != STORAGE_SLOT_END_TAG))
 853:System/storage/Storage.c ****             return Storage_FreeSlot_Info_Error;
 854:System/storage/Storage.c **** 
 855:System/storage/Storage.c ****         behind_freeslot_addr = FreeSlot_Info.nxt_addr;
 856:System/storage/Storage.c ****         p_Sec->free_space_size += slot_info->cur_slot_size;
 857:System/storage/Storage.c **** 
 858:System/storage/Storage.c ****         /* circumstance 1: new free slot in front of the old free slot */
 859:System/storage/Storage.c ****         if (slot_addr + slot_info->cur_slot_size == front_freeslot_addr)
 860:System/storage/Storage.c ****         {
 861:System/storage/Storage.c ****             slot_info->nxt_addr = FreeSlot_Info.nxt_addr;
 862:System/storage/Storage.c ****             slot_info->cur_slot_size += FreeSlot_Info.cur_slot_size + sizeof(Storage_FreeSlot_TypeD
 863:System/storage/Storage.c **** 
 864:System/storage/Storage.c ****             memset(&FreeSlot_Info, 0, sizeof(FreeSlot_Info));
 865:System/storage/Storage.c **** 
 866:System/storage/Storage.c ****             /* write to front freeslot address */
 867:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(front_freeslot_addr, (uint8_t *)&FreeSlot_Info, siz
 868:System/storage/Storage.c ****             {
 869:System/storage/Storage.c ****                 p_Sec->free_space_size = ori_freespace_size;
 870:System/storage/Storage.c ****                 return Storage_Write_Error;
 871:System/storage/Storage.c ****             }
 872:System/storage/Storage.c **** 
 873:System/storage/Storage.c ****             /* write to current freeslot section */
 874:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(slot_addr, (uint8_t *)slot_info, sizeof(Storage_Fre
 875:System/storage/Storage.c ****             {
 876:System/storage/Storage.c ****                 p_Sec->free_space_size = ori_freespace_size;
 877:System/storage/Storage.c ****                 return Storage_Write_Error;
 878:System/storage/Storage.c ****             }
 879:System/storage/Storage.c **** 
 880:System/storage/Storage.c ****             p_Sec->free_slot_addr = slot_addr;
 881:System/storage/Storage.c ****             p_Sec->free_space_size += sizeof(Storage_FreeSlot_TypeDef);
 882:System/storage/Storage.c ****         }
 883:System/storage/Storage.c ****         /* circumstance 2: new free slot is behind of the old free slot */
 884:System/storage/Storage.c ****         else if (front_freeslot_addr + FreeSlot_Info.cur_slot_size == slot_addr)
 885:System/storage/Storage.c ****         {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 17


 886:System/storage/Storage.c ****             /* merge behind free slot */
 887:System/storage/Storage.c ****             FreeSlot_Info.cur_slot_size += slot_info->cur_slot_size + sizeof(Storage_FreeSlot_TypeD
 888:System/storage/Storage.c ****             Storage_Assert(slot_info->nxt_addr < FreeSlot_Info.nxt_addr);
 889:System/storage/Storage.c ****             FreeSlot_Info.nxt_addr = slot_info->nxt_addr;
 890:System/storage/Storage.c **** 
 891:System/storage/Storage.c ****             memset(slot_info, 0, sizeof(Storage_FreeSlot_TypeDef));
 892:System/storage/Storage.c **** 
 893:System/storage/Storage.c ****             /* write to new free slot */
 894:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(slot_addr, (uint8_t *)slot_info, sizeof(Storage_Fre
 895:System/storage/Storage.c ****                 return Storage_Write_Error;
 896:System/storage/Storage.c **** 
 897:System/storage/Storage.c ****             /* write to behind free slot */
 898:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(front_freeslot_addr, (uint8_t *)&FreeSlot_Info, siz
 899:System/storage/Storage.c ****                 return Storage_Write_Error;
 900:System/storage/Storage.c ****         }
 901:System/storage/Storage.c ****         /* circumstance 3: none free slot near by */
 902:System/storage/Storage.c ****         else if (((front_freeslot_addr + FreeSlot_Info.cur_slot_size + sizeof(Storage_FreeSlot_Type
 903:System/storage/Storage.c ****                  (behind_freeslot_addr > (slot_addr + slot_info->cur_slot_size + sizeof(Storage_Fre
 904:System/storage/Storage.c ****         {
 905:System/storage/Storage.c ****             /* link free slot */
 906:System/storage/Storage.c ****             if (Storage_Link_FreeSlot(front_freeslot_addr, behind_freeslot_addr, slot_addr, slot_in
 907:System/storage/Storage.c ****                 return Storage_Error_None;
 908:System/storage/Storage.c **** 
 909:System/storage/Storage.c ****             return Storage_FreeSlot_Link_Error;
 910:System/storage/Storage.c ****         }
 911:System/storage/Storage.c **** 
 912:System/storage/Storage.c ****         if (FreeSlot_Info.nxt_addr == 0)
 913:System/storage/Storage.c ****             return Storage_Error_None;
 914:System/storage/Storage.c **** 
 915:System/storage/Storage.c ****         /* update front free slot address */
 916:System/storage/Storage.c ****         front_freeslot_addr = behind_freeslot_addr;
 917:System/storage/Storage.c ****     }
 918:System/storage/Storage.c **** 
 919:System/storage/Storage.c ****     return Storage_Delete_Error;
 920:System/storage/Storage.c **** }
 921:System/storage/Storage.c **** 
 922:System/storage/Storage.c **** /* untested */
 923:System/storage/Storage.c **** static bool Storage_DeleteSingleDataSlot(uint32_t slot_addr, uint8_t *p_data, Storage_BaseSecInfo_T
 924:System/storage/Storage.c **** {
 925:System/storage/Storage.c ****     uint32_t cur_slot_size = 0;
 926:System/storage/Storage.c ****     uint32_t inc_free_space = sizeof(Storage_DataSlot_TypeDef);
 927:System/storage/Storage.c ****     uint8_t *p_freeslot_start = NULL;
 928:System/storage/Storage.c ****     uint8_t *data_w = NULL;
 929:System/storage/Storage.c **** 
 930:System/storage/Storage.c ****     if ((slot_addr == 0) || \
 931:System/storage/Storage.c ****         (p_Sec == NULL) || \
 932:System/storage/Storage.c ****         (p_data == NULL) || \
 933:System/storage/Storage.c ****         (slot_addr < p_Sec->data_sec_addr) || \
 934:System/storage/Storage.c ****         (slot_addr > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
 935:System/storage/Storage.c ****         return false;
 936:System/storage/Storage.c ****     
 937:System/storage/Storage.c ****     /* check header */
 938:System/storage/Storage.c ****     if (*((uint32_t *)p_data) != STORAGE_SLOT_HEAD_TAG)
 939:System/storage/Storage.c ****         return false;
 940:System/storage/Storage.c **** 
 941:System/storage/Storage.c ****     p_freeslot_start = p_data;
 942:System/storage/Storage.c ****     data_w = p_freeslot_start;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 18


 943:System/storage/Storage.c ****     p_data += sizeof(uint32_t);
 944:System/storage/Storage.c **** 
 945:System/storage/Storage.c ****     /* clear current slot name */
 946:System/storage/Storage.c ****     memset(p_data, 0, STORAGE_NAME_LEN);
 947:System/storage/Storage.c ****     p_data += STORAGE_NAME_LEN;
 948:System/storage/Storage.c **** 
 949:System/storage/Storage.c ****     /* clear total data size */
 950:System/storage/Storage.c ****     *((uint32_t *)p_data) = 0;
 951:System/storage/Storage.c ****     p_data += sizeof(uint32_t);
 952:System/storage/Storage.c **** 
 953:System/storage/Storage.c ****     /* get current slot data size */
 954:System/storage/Storage.c ****     cur_slot_size = *((uint32_t *)p_data);
 955:System/storage/Storage.c ****     inc_free_space += cur_slot_size;
 956:System/storage/Storage.c ****     
 957:System/storage/Storage.c ****     /* clear current slot data size */
 958:System/storage/Storage.c ****     *((uint32_t *)p_data) = 0;
 959:System/storage/Storage.c ****     p_data += sizeof(uint32_t);
 960:System/storage/Storage.c **** 
 961:System/storage/Storage.c ****     /* clear next data slot address */
 962:System/storage/Storage.c ****     *((uint32_t *)p_data) = 0;
 963:System/storage/Storage.c ****     p_data += sizeof(uint32_t);
 964:System/storage/Storage.c **** 
 965:System/storage/Storage.c ****     /* clear align size */
 966:System/storage/Storage.c ****     *((uint8_t *)p_data) = 0;
 967:System/storage/Storage.c ****     p_data += sizeof(uint8_t);
 968:System/storage/Storage.c **** 
 969:System/storage/Storage.c ****     /* clear data */
 970:System/storage/Storage.c ****     memset(p_data, 0, cur_slot_size);
 971:System/storage/Storage.c ****     p_data += cur_slot_size;
 972:System/storage/Storage.c **** 
 973:System/storage/Storage.c ****     /* clear crc */
 974:System/storage/Storage.c ****     *((uint16_t *)p_data) = 0;
 975:System/storage/Storage.c ****     p_data += sizeof(uint16_t);
 976:System/storage/Storage.c **** 
 977:System/storage/Storage.c ****     /* clear end tag */
 978:System/storage/Storage.c ****     *((uint32_t *)p_data) = 0;
 979:System/storage/Storage.c **** 
 980:System/storage/Storage.c ****     /* update freeslot data info */
 981:System/storage/Storage.c ****     if (*(uint32_t *)p_freeslot_start == STORAGE_SLOT_HEAD_TAG)
 982:System/storage/Storage.c ****     {
 983:System/storage/Storage.c ****         p_freeslot_start += sizeof(uint32_t);
 984:System/storage/Storage.c **** 
 985:System/storage/Storage.c ****         /* update current free slot size */
 986:System/storage/Storage.c ****         *(uint32_t *)p_freeslot_start = cur_slot_size;
 987:System/storage/Storage.c ****         p_freeslot_start += sizeof(uint32_t);
 988:System/storage/Storage.c **** 
 989:System/storage/Storage.c ****         /* reset next freeslot addr
 990:System/storage/Storage.c ****          * link free slot address
 991:System/storage/Storage.c ****          *
 992:System/storage/Storage.c ****          * should link free slot
 993:System/storage/Storage.c ****          */
 994:System/storage/Storage.c ****         *(uint32_t *)p_freeslot_start = 0;
 995:System/storage/Storage.c ****         p_freeslot_start += sizeof(uint32_t);
 996:System/storage/Storage.c **** 
 997:System/storage/Storage.c ****         /* set end tag */
 998:System/storage/Storage.c ****         *(uint32_t *)p_freeslot_start = STORAGE_SLOT_END_TAG;
 999:System/storage/Storage.c ****     }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 19


1000:System/storage/Storage.c ****     else
1001:System/storage/Storage.c ****         return false;
1002:System/storage/Storage.c **** 
1003:System/storage/Storage.c ****     /* update to data section */
1004:System/storage/Storage.c ****     if (Storage_ExtFlash_ParaSec_Write(slot_addr, data_w, inc_free_space))
1005:System/storage/Storage.c ****     {
1006:System/storage/Storage.c ****         /* check free slot and merge */
1007:System/storage/Storage.c ****         if (Storage_FreeSlot_CheckMerge(slot_addr, (Storage_FreeSlot_TypeDef *)p_freeslot_start, p_
1008:System/storage/Storage.c ****             return true;
1009:System/storage/Storage.c ****     }
1010:System/storage/Storage.c **** 
1011:System/storage/Storage.c ****     return false;
1012:System/storage/Storage.c **** }
1013:System/storage/Storage.c **** 
1014:System/storage/Storage.c **** /* developping & untested */
1015:System/storage/Storage.c **** static bool Storage_DeleteAllDataSlot(uint32_t addr, char *name, uint32_t total_size, Storage_BaseS
1016:System/storage/Storage.c **** {
1017:System/storage/Storage.c ****     Storage_DataSlot_TypeDef data_slot;
1018:System/storage/Storage.c ****     uint8_t *p_read = page_data_tmp;
1019:System/storage/Storage.c ****     uint8_t name_len = 0;
1020:System/storage/Storage.c **** 
1021:System/storage/Storage.c ****     if ((addr == 0) || \
1022:System/storage/Storage.c ****         (name == NULL) || \
1023:System/storage/Storage.c ****         (strlen(name) == 0) || \
1024:System/storage/Storage.c ****         (total_size == 0) || \
1025:System/storage/Storage.c ****         (p_Sec == NULL))
1026:System/storage/Storage.c ****         return false;
1027:System/storage/Storage.c **** 
1028:System/storage/Storage.c ****     memset(&data_slot, 0, sizeof(data_slot));
1029:System/storage/Storage.c ****     name_len = strlen(name);
1030:System/storage/Storage.c **** 
1031:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(addr, page_data_tmp, total_size))
1032:System/storage/Storage.c ****         return false;
1033:System/storage/Storage.c **** 
1034:System/storage/Storage.c ****     data_slot.head_tag = *((uint32_t *)p_read);
1035:System/storage/Storage.c ****     if (data_slot.head_tag != STORAGE_SLOT_HEAD_TAG)
1036:System/storage/Storage.c ****         return false;
1037:System/storage/Storage.c **** 
1038:System/storage/Storage.c ****     p_read += sizeof(data_slot.head_tag);
1039:System/storage/Storage.c ****     memcpy(data_slot.name, p_read, STORAGE_NAME_LEN);
1040:System/storage/Storage.c ****     if (memcmp(data_slot.name, name, name_len) != 0)
1041:System/storage/Storage.c ****         return false;
1042:System/storage/Storage.c **** 
1043:System/storage/Storage.c ****     p_read += STORAGE_NAME_LEN;
1044:System/storage/Storage.c ****     data_slot.total_data_size = *((uint32_t *)p_read);
1045:System/storage/Storage.c ****     if (data_slot.total_data_size != total_size)
1046:System/storage/Storage.c ****         return false;
1047:System/storage/Storage.c **** 
1048:System/storage/Storage.c ****     p_read += sizeof(data_slot.total_data_size);
1049:System/storage/Storage.c ****     data_slot.cur_slot_size = *((uint32_t *)p_read);
1050:System/storage/Storage.c ****     if (data_slot.cur_slot_size > data_slot.total_data_size)
1051:System/storage/Storage.c ****         return false;
1052:System/storage/Storage.c **** 
1053:System/storage/Storage.c ****     p_read += sizeof(data_slot.cur_slot_size);
1054:System/storage/Storage.c ****     data_slot.nxt_addr = *((uint32_t *)p_read);
1055:System/storage/Storage.c ****     if ((data_slot.nxt_addr < p_Sec->data_sec_addr) || \
1056:System/storage/Storage.c ****         (data_slot.nxt_addr > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 20


1057:System/storage/Storage.c ****         return false;
1058:System/storage/Storage.c ****     
1059:System/storage/Storage.c ****     p_read += sizeof(data_slot.nxt_addr);
1060:System/storage/Storage.c ****     data_slot.align_size = *((uint8_t *)p_read);    
1061:System/storage/Storage.c ****     if (data_slot.align_size >= STORAGE_DATA_ALIGN)
1062:System/storage/Storage.c ****         return false;
1063:System/storage/Storage.c **** 
1064:System/storage/Storage.c ****     /* set current slot data as 0 */
1065:System/storage/Storage.c ****     p_read += sizeof(data_slot.align_size);
1066:System/storage/Storage.c ****     memset(p_read, 0, data_slot.cur_slot_size);
1067:System/storage/Storage.c ****     p_read += data_slot.cur_slot_size;
1068:System/storage/Storage.c **** 
1069:System/storage/Storage.c ****     /* clear crc */
1070:System/storage/Storage.c ****     *((uint16_t *)p_read) = 0;
1071:System/storage/Storage.c ****     p_read += sizeof(data_slot.slot_crc);
1072:System/storage/Storage.c **** 
1073:System/storage/Storage.c ****     /* ender error */
1074:System/storage/Storage.c ****     if (*((uint32_t *)p_read) != STORAGE_SLOT_END_TAG)
1075:System/storage/Storage.c ****         return false;
1076:System/storage/Storage.c **** 
1077:System/storage/Storage.c ****     /* delete next slot data */
1078:System/storage/Storage.c ****     if (data_slot.nxt_addr)
1079:System/storage/Storage.c ****     {
1080:System/storage/Storage.c ****         /* traverse slot address */
1081:System/storage/Storage.c ****         if (!Storage_DeleteAllDataSlot(data_slot.nxt_addr, name, total_size, p_Sec))
1082:System/storage/Storage.c ****             return false;
1083:System/storage/Storage.c ****     }
1084:System/storage/Storage.c **** 
1085:System/storage/Storage.c ****     /* reset data slot as free slot */
1086:System/storage/Storage.c ****     if (!Storage_DeleteSingleDataSlot(addr, page_data_tmp, p_Sec))
1087:System/storage/Storage.c ****         return false;
1088:System/storage/Storage.c **** 
1089:System/storage/Storage.c ****     return true;
1090:System/storage/Storage.c **** }
1091:System/storage/Storage.c **** 
1092:System/storage/Storage.c **** /* developping */
1093:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_DeleteItem(Storage_ParaClassType_List _class, const char *nam
1094:System/storage/Storage.c **** {
1095:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
1096:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
1097:System/storage/Storage.c ****     Storage_ItemSearchOut_TypeDef ItemSearch;
1098:System/storage/Storage.c ****     
1099:System/storage/Storage.c ****     memset(&ItemSearch, 0, sizeof(ItemSearch));
1100:System/storage/Storage.c **** 
1101:System/storage/Storage.c ****     if ( !Storage_Monitor.init_state || \
1102:System/storage/Storage.c ****         (name == NULL) || \
1103:System/storage/Storage.c ****         (strlen(name) == 0) || \
1104:System/storage/Storage.c ****         (strlen(name) >= STORAGE_NAME_LEN) || \
1105:System/storage/Storage.c ****         (size == 0))
1106:System/storage/Storage.c ****         return Storage_Param_Error;
1107:System/storage/Storage.c **** 
1108:System/storage/Storage.c ****     p_Flash = &Storage_Monitor.external_info;
1109:System/storage/Storage.c ****     p_Sec = Storage_Get_SecInfo(p_Flash, _class);
1110:System/storage/Storage.c ****     if ((p_Sec == NULL) || \
1111:System/storage/Storage.c ****         (p_Sec->para_num == 0) || \
1112:System/storage/Storage.c ****         (p_Sec->para_size == 0))
1113:System/storage/Storage.c ****         return Storage_Class_Error;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 21


1114:System/storage/Storage.c **** 
1115:System/storage/Storage.c ****     /* search tab for item slot first */
1116:System/storage/Storage.c ****     ItemSearch = Storage_Search(_class, name);
1117:System/storage/Storage.c ****     if ((ItemSearch.item_addr == 0) || \
1118:System/storage/Storage.c ****         (ItemSearch.item.data_addr == 0) || \
1119:System/storage/Storage.c ****         (ItemSearch.item.head_tag != STORAGE_ITEM_HEAD_TAG) || \
1120:System/storage/Storage.c ****         (ItemSearch.item.end_tag != STORAGE_ITEM_END_TAG) || \
1121:System/storage/Storage.c ****         !Storage_DeleteAllDataSlot(ItemSearch.item.data_addr, (char *)name, ItemSearch.item.len, p_
1122:System/storage/Storage.c ****         return Storage_Delete_Error;
1123:System/storage/Storage.c **** 
1124:System/storage/Storage.c ****     /* update item slot tab */
1125:System/storage/Storage.c ****     memset(ItemSearch.item.name, '\0', STORAGE_NAME_LEN);
1126:System/storage/Storage.c ****     memcpy(ItemSearch.item.name, STORAGE_FREEITEM_NAME, strlen(STORAGE_FREEITEM_NAME));
1127:System/storage/Storage.c **** 
1128:System/storage/Storage.c ****     if (!Storage_Comput_ItemSlot_CRC(&ItemSearch.item))
1129:System/storage/Storage.c ****         return Storage_ItemUpdate_Error;
1130:System/storage/Storage.c **** 
1131:System/storage/Storage.c ****     if (!Storage_ItemSlot_Update(ItemSearch.item_addr, ItemSearch.item_index, p_Sec, ItemSearch.ite
1132:System/storage/Storage.c ****         return Storage_ItemUpdate_Error;
1133:System/storage/Storage.c **** 
1134:System/storage/Storage.c ****     /* update base info */
1135:System/storage/Storage.c **** 
1136:System/storage/Storage.c ****     return Storage_Delete_Error;
1137:System/storage/Storage.c **** }
1138:System/storage/Storage.c **** 
1139:System/storage/Storage.c **** static Storage_ErrorCode_List Storage_CreateItem(Storage_ParaClassType_List _class, const char *nam
1140:System/storage/Storage.c **** {
1141:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
1142:System/storage/Storage.c ****     uint8_t *slot_update_ptr = NULL;
1143:System/storage/Storage.c ****     uint16_t base_info_crc = 0;
1144:System/storage/Storage.c ****     uint32_t storage_data_size = 0;
1145:System/storage/Storage.c ****     uint32_t stored_size = 0;
1146:System/storage/Storage.c ****     uint32_t store_addr = 0;
1147:System/storage/Storage.c ****     uint32_t unstored_size = 0;
1148:System/storage/Storage.c ****     uint32_t storage_tab_addr = 0;
1149:System/storage/Storage.c ****     uint32_t cur_freeslot_addr = 0;
1150:System/storage/Storage.c ****     uint32_t slot_useful_size = 0;
1151:System/storage/Storage.c ****     uint8_t item_index = 0;
1152:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
1153:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
1154:System/storage/Storage.c ****     Storage_Item_TypeDef *tab_item = NULL;
1155:System/storage/Storage.c ****     Storage_Item_TypeDef crt_item_slot;
1156:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef FreeSlot;
1157:System/storage/Storage.c ****     Storage_DataSlot_TypeDef DataSlot;
1158:System/storage/Storage.c ****     uint8_t align_byte = 0;
1159:System/storage/Storage.c **** 
1160:System/storage/Storage.c ****     memset(&crt_item_slot, 0, sizeof(crt_item_slot));
1161:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
1162:System/storage/Storage.c ****     memset(&FreeSlot, 0, sizeof(Storage_FreeSlot_TypeDef));
1163:System/storage/Storage.c **** 
1164:System/storage/Storage.c ****     if ((name == NULL) || (p_data == NULL) || (size == 0))
1165:System/storage/Storage.c ****         return Storage_Param_Error;
1166:System/storage/Storage.c **** 
1167:System/storage/Storage.c ****     p_Flash = &Storage_Monitor.external_info;
1168:System/storage/Storage.c ****     p_Sec = Storage_Get_SecInfo(p_Flash, _class);
1169:System/storage/Storage.c ****     if (p_Sec == NULL)
1170:System/storage/Storage.c ****         return Storage_Class_Error;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 22


1171:System/storage/Storage.c **** 
1172:System/storage/Storage.c ****     if (p_Sec->free_slot_addr == 0)
1173:System/storage/Storage.c ****         return Storage_FreeSlot_Addr_Error;
1174:System/storage/Storage.c **** 
1175:System/storage/Storage.c ****     if (Storage_ExtFlash_ParaSec_Read(p_Sec->free_slot_addr, (uint8_t *)&FreeSlot, sizeof(Storage_F
1176:System/storage/Storage.c ****         (FreeSlot.head_tag == STORAGE_SLOT_HEAD_TAG) && \
1177:System/storage/Storage.c ****         (FreeSlot.end_tag == STORAGE_SLOT_END_TAG) && \
1178:System/storage/Storage.c ****         (strlen(name) <= STORAGE_NAME_LEN))
1179:System/storage/Storage.c ****     {
1180:System/storage/Storage.c ****         cur_freeslot_addr = p_Sec->free_slot_addr;
1181:System/storage/Storage.c **** 
1182:System/storage/Storage.c ****         if (size % STORAGE_DATA_ALIGN)
1183:System/storage/Storage.c ****         {
1184:System/storage/Storage.c ****             align_byte = STORAGE_DATA_ALIGN - size % STORAGE_DATA_ALIGN;
1185:System/storage/Storage.c ****         }
1186:System/storage/Storage.c ****         else
1187:System/storage/Storage.c ****             align_byte = 0;
1188:System/storage/Storage.c **** 
1189:System/storage/Storage.c ****         p_Sec->para_num ++;
1190:System/storage/Storage.c ****         p_Sec->para_size += (size + align_byte);
1191:System/storage/Storage.c ****         
1192:System/storage/Storage.c ****         storage_tab_addr = p_Sec->tab_addr;
1193:System/storage/Storage.c ****         for(uint16_t tab_i = 0; tab_i < p_Sec->page_num; tab_i ++)
1194:System/storage/Storage.c ****         {
1195:System/storage/Storage.c ****             store_addr = 0;
1196:System/storage/Storage.c ****             item_index = 0;
1197:System/storage/Storage.c **** 
1198:System/storage/Storage.c ****             /* step 1: search tab */
1199:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Read(storage_tab_addr, page_data_tmp, (p_Sec->tab_size / 
1200:System/storage/Storage.c ****                 return Storage_Read_Error;
1201:System/storage/Storage.c **** 
1202:System/storage/Storage.c ****             tab_item = (Storage_Item_TypeDef *)page_data_tmp;
1203:System/storage/Storage.c ****             for (uint16_t item_i = 0; item_i < Item_Capacity_Per_Tab; item_i ++)
1204:System/storage/Storage.c ****             {
1205:System/storage/Storage.c ****                 if (((tab_item[item_i].head_tag == STORAGE_ITEM_HEAD_TAG) && \
1206:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
1207:System/storage/Storage.c ****                      (memcmp(tab_item[item_i].name, STORAGE_FREEITEM_NAME, strlen(STORAGE_FREEITEM_
1208:System/storage/Storage.c ****                     ((tab_item[item_i].head_tag != STORAGE_ITEM_HEAD_TAG) && \
1209:System/storage/Storage.c ****                      (tab_item[item_i].end_tag != STORAGE_ITEM_END_TAG)))
1210:System/storage/Storage.c ****                 {
1211:System/storage/Storage.c ****                     item_index = item_i;
1212:System/storage/Storage.c **** 
1213:System/storage/Storage.c ****                     /* found empty item slot */
1214:System/storage/Storage.c ****                     crt_item_slot = tab_item[item_i];
1215:System/storage/Storage.c **** 
1216:System/storage/Storage.c ****                     /* set item slot info */
1217:System/storage/Storage.c ****                     crt_item_slot._class = _class;
1218:System/storage/Storage.c ****                     memset(crt_item_slot.name, '\0', STORAGE_NAME_LEN);
1219:System/storage/Storage.c ****                     memcpy(crt_item_slot.name, name, strlen(name));
1220:System/storage/Storage.c ****                     crt_item_slot.len = size + align_byte;
1221:System/storage/Storage.c **** 
1222:System/storage/Storage.c ****                     /* set free slot address as current data address */
1223:System/storage/Storage.c ****                     crt_item_slot.data_addr = p_Sec->free_slot_addr;
1224:System/storage/Storage.c ****                     crt_item_slot.head_tag = STORAGE_ITEM_HEAD_TAG;
1225:System/storage/Storage.c ****                     crt_item_slot.end_tag = STORAGE_ITEM_END_TAG;
1226:System/storage/Storage.c **** 
1227:System/storage/Storage.c ****                     /* comput crc */
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 23


1228:System/storage/Storage.c ****                     Storage_Comput_ItemSlot_CRC(&crt_item_slot);
1229:System/storage/Storage.c ****                     store_addr = crt_item_slot.data_addr;
1230:System/storage/Storage.c ****                     break; 
1231:System/storage/Storage.c ****                 }
1232:System/storage/Storage.c ****             }
1233:System/storage/Storage.c **** 
1234:System/storage/Storage.c ****             if (store_addr)
1235:System/storage/Storage.c ****                 break;
1236:System/storage/Storage.c **** 
1237:System/storage/Storage.c ****             storage_tab_addr += (p_Sec->tab_size / p_Sec->page_num);
1238:System/storage/Storage.c ****         }
1239:System/storage/Storage.c **** 
1240:System/storage/Storage.c ****         if (store_addr == 0)
1241:System/storage/Storage.c ****             return Storage_DataAddr_Update_Error;
1242:System/storage/Storage.c **** 
1243:System/storage/Storage.c ****         storage_data_size = size;
1244:System/storage/Storage.c ****         /* get align byte size */
1245:System/storage/Storage.c ****         /* noticed: write 0 on align space */
1246:System/storage/Storage.c ****         storage_data_size += align_byte;
1247:System/storage/Storage.c **** 
1248:System/storage/Storage.c ****         /* noticed: DataSlot.cur_data_size - DataSlot.align_size is current slot storaged data size
1249:System/storage/Storage.c ****         DataSlot.total_data_size = storage_data_size;
1250:System/storage/Storage.c ****         unstored_size = DataSlot.total_data_size;
1251:System/storage/Storage.c **** 
1252:System/storage/Storage.c ****         if (p_Sec->free_space_size >= storage_data_size)
1253:System/storage/Storage.c ****         {
1254:System/storage/Storage.c ****             while(true)
1255:System/storage/Storage.c ****             {
1256:System/storage/Storage.c ****                 /* step 2: comput storage data size and set data slot */
1257:System/storage/Storage.c ****                 DataSlot.head_tag = STORAGE_SLOT_HEAD_TAG;
1258:System/storage/Storage.c ****                 DataSlot.end_tag = STORAGE_SLOT_END_TAG;
1259:System/storage/Storage.c ****                 memset(DataSlot.name, '\0', STORAGE_NAME_LEN);
1260:System/storage/Storage.c ****                 memcpy(DataSlot.name, name, strlen(name));
1261:System/storage/Storage.c ****                 
1262:System/storage/Storage.c ****                 if (FreeSlot.cur_slot_size <= sizeof(Storage_DataSlot_TypeDef))
1263:System/storage/Storage.c ****                     return Storage_No_Enough_Space;
1264:System/storage/Storage.c **** 
1265:System/storage/Storage.c ****                 p_data += stored_size;
1266:System/storage/Storage.c ****                 slot_useful_size = FreeSlot.cur_slot_size - sizeof(Storage_DataSlot_TypeDef);
1267:System/storage/Storage.c ****                 /* current have space for new data need to be storage */
1268:System/storage/Storage.c ****                 if (slot_useful_size < storage_data_size)
1269:System/storage/Storage.c ****                 {
1270:System/storage/Storage.c ****                     /*
1271:System/storage/Storage.c ****                      * UNTESTED IN THIS BRANCH
1272:System/storage/Storage.c ****                      */
1273:System/storage/Storage.c ****                     
1274:System/storage/Storage.c ****                     DataSlot.cur_slot_size = slot_useful_size;
1275:System/storage/Storage.c ****                     stored_size += DataSlot.cur_slot_size;
1276:System/storage/Storage.c ****                     unstored_size -= stored_size;
1277:System/storage/Storage.c ****                     DataSlot.align_size = 0;
1278:System/storage/Storage.c ****                     
1279:System/storage/Storage.c ****                     /* current free slot full fill can not split any space for next free slot`s sta
1280:System/storage/Storage.c ****                     DataSlot.nxt_addr = FreeSlot.nxt_addr;
1281:System/storage/Storage.c **** 
1282:System/storage/Storage.c ****                     /* in light of current free slot not enough for storage data, 
1283:System/storage/Storage.c ****                         * then find next free slot used for storage data remaining */
1284:System/storage/Storage.c ****                     cur_freeslot_addr = FreeSlot.nxt_addr;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 24


1285:System/storage/Storage.c ****                     if (!Storage_ExtFlash_ParaSec_Read(cur_freeslot_addr, (uint8_t *)&FreeSlot, siz
1286:System/storage/Storage.c ****                         return Storage_FreeSlot_Get_Error;   
1287:System/storage/Storage.c ****                 }
1288:System/storage/Storage.c ****                 else
1289:System/storage/Storage.c ****                 {
1290:System/storage/Storage.c ****                     /* seperate data slot and new free slot from current free slot */
1291:System/storage/Storage.c ****                     stored_size += unstored_size;
1292:System/storage/Storage.c ****                     DataSlot.cur_slot_size = unstored_size;
1293:System/storage/Storage.c ****                     DataSlot.align_size = align_byte;
1294:System/storage/Storage.c ****                     DataSlot.nxt_addr = 0;
1295:System/storage/Storage.c **** 
1296:System/storage/Storage.c ****                     /* update current free slot adderess */
1297:System/storage/Storage.c ****                     cur_freeslot_addr += DataSlot.cur_slot_size + sizeof(Storage_DataSlot_TypeDef);
1298:System/storage/Storage.c ****                     FreeSlot.cur_slot_size -= DataSlot.cur_slot_size + sizeof(Storage_DataSlot_Type
1299:System/storage/Storage.c ****                 }
1300:System/storage/Storage.c **** 
1301:System/storage/Storage.c ****                 p_Sec->free_space_size -= DataSlot.cur_slot_size;
1302:System/storage/Storage.c **** 
1303:System/storage/Storage.c ****                 /* write to the data section */
1304:System/storage/Storage.c ****                 /* storage target data */
1305:System/storage/Storage.c ****                 slot_update_ptr = page_data_tmp;
1306:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.head_tag, sizeof(DataSlot.head_tag));
1307:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.head_tag);
1308:System/storage/Storage.c ****                 memcpy(slot_update_ptr, DataSlot.name, STORAGE_NAME_LEN);
1309:System/storage/Storage.c ****                 slot_update_ptr += STORAGE_NAME_LEN;
1310:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.total_data_size, sizeof(DataSlot.total_data_size)
1311:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.total_data_size);
1312:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.cur_slot_size, sizeof(DataSlot.cur_slot_size));
1313:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.cur_slot_size);
1314:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.nxt_addr, sizeof(DataSlot.nxt_addr));
1315:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.nxt_addr);
1316:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.align_size, sizeof(DataSlot.align_size));
1317:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.align_size);
1318:System/storage/Storage.c ****                 crc_buf = slot_update_ptr;
1319:System/storage/Storage.c ****                 memcpy(slot_update_ptr, p_data, (DataSlot.cur_slot_size - DataSlot.align_size));
1320:System/storage/Storage.c ****                 slot_update_ptr += (DataSlot.cur_slot_size - DataSlot.align_size);
1321:System/storage/Storage.c ****                 
1322:System/storage/Storage.c ****                 if (DataSlot.align_size)
1323:System/storage/Storage.c ****                     memset(slot_update_ptr, 0, DataSlot.align_size);
1324:System/storage/Storage.c ****                 
1325:System/storage/Storage.c ****                 slot_update_ptr += DataSlot.align_size;
1326:System/storage/Storage.c **** 
1327:System/storage/Storage.c ****                 /* comput current slot crc */
1328:System/storage/Storage.c ****                 DataSlot.slot_crc = Common_CRC16(crc_buf, DataSlot.cur_slot_size);
1329:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
1330:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.slot_crc);
1331:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.end_tag, sizeof(DataSlot.end_tag));
1332:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.end_tag);
1333:System/storage/Storage.c **** 
1334:System/storage/Storage.c ****                 /* step 3: store data to data section */
1335:System/storage/Storage.c ****                 if (!Storage_ExtFlash_ParaSec_Write(store_addr, page_data_tmp, (DataSlot.cur_slot_s
1336:System/storage/Storage.c ****                     return Storage_Write_Error;
1337:System/storage/Storage.c **** 
1338:System/storage/Storage.c ****                 if (DataSlot.nxt_addr == 0)
1339:System/storage/Storage.c ****                 {
1340:System/storage/Storage.c ****                     if (DataSlot.total_data_size == stored_size)
1341:System/storage/Storage.c ****                     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 25


1342:System/storage/Storage.c ****                         /* step 4: update free slot */
1343:System/storage/Storage.c ****                         if (!Storage_ExtFlash_ParaSec_Write(cur_freeslot_addr, (uint8_t *)&FreeSlot
1344:System/storage/Storage.c ****                             return Storage_Write_Error;
1345:System/storage/Storage.c **** 
1346:System/storage/Storage.c ****                         break;
1347:System/storage/Storage.c ****                     }
1348:System/storage/Storage.c **** 
1349:System/storage/Storage.c ****                     return Storage_No_Enough_Space;
1350:System/storage/Storage.c ****                 }
1351:System/storage/Storage.c ****                 else
1352:System/storage/Storage.c ****                 {
1353:System/storage/Storage.c ****                     /* after target data segment stored, shift target data pointer to unstored pos
1354:System/storage/Storage.c ****                         * and update next segment data store address */
1355:System/storage/Storage.c ****                     stored_size += slot_useful_size;
1356:System/storage/Storage.c ****                     store_addr = DataSlot.nxt_addr;
1357:System/storage/Storage.c ****                 }
1358:System/storage/Storage.c ****             }
1359:System/storage/Storage.c ****         }
1360:System/storage/Storage.c **** 
1361:System/storage/Storage.c ****         /* get tab */
1362:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(storage_tab_addr, page_data_tmp, (p_Sec->tab_size / p_Se
1363:System/storage/Storage.c ****             return Storage_Read_Error;
1364:System/storage/Storage.c **** 
1365:System/storage/Storage.c ****         tab_item = (Storage_Item_TypeDef *)page_data_tmp;
1366:System/storage/Storage.c ****         tab_item[item_index] = crt_item_slot;
1367:System/storage/Storage.c **** 
1368:System/storage/Storage.c ****         /* write back item slot list to tab */
1369:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(storage_tab_addr, page_data_tmp, (p_Sec->tab_size / p_S
1370:System/storage/Storage.c ****             return Storage_Write_Error;
1371:System/storage/Storage.c **** 
1372:System/storage/Storage.c ****         /* update free slot address in base info */
1373:System/storage/Storage.c ****         p_Sec->free_slot_addr = cur_freeslot_addr;
1374:System/storage/Storage.c **** 
1375:System/storage/Storage.c ****         /* update base info crc */
1376:System/storage/Storage.c ****         memcpy(page_data_tmp, p_Flash, sizeof(Storage_FlashInfo_TypeDef));
1377:System/storage/Storage.c ****         base_info_crc = Common_CRC16(page_data_tmp, Storage_InfoPageSize - sizeof(base_info_crc));
1378:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(base_info_crc)], &base_info_crc, sizeof
1379:System/storage/Storage.c ****         
1380:System/storage/Storage.c ****         /* update base info from section start*/
1381:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(From_Start_Address, page_data_tmp, Storage_InfoPageSize
1382:System/storage/Storage.c ****             return Storage_Write_Error;
1383:System/storage/Storage.c ****     }
1384:System/storage/Storage.c **** 
1385:System/storage/Storage.c ****     return Storage_Error_None;
1386:System/storage/Storage.c **** }
1387:System/storage/Storage.c **** 
1388:System/storage/Storage.c **** static bool Storage_Establish_Tab(Storage_ParaClassType_List class)
1389:System/storage/Storage.c **** {
1390:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
1391:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_SecInfo = NULL;
1392:System/storage/Storage.c ****     uint16_t clear_cnt = 0;
1393:System/storage/Storage.c ****     uint32_t clear_byte = 0;
1394:System/storage/Storage.c ****     uint32_t clear_remain = 0;
1395:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
1396:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef free_slot;
1397:System/storage/Storage.c ****     uint16_t crc = 0;
1398:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 26


1399:System/storage/Storage.c ****     p_Flash = &Storage_Monitor.external_info;
1400:System/storage/Storage.c ****     p_SecInfo = Storage_Get_SecInfo(p_Flash, class);
1401:System/storage/Storage.c ****     if (p_SecInfo == NULL)
1402:System/storage/Storage.c ****         return false;
1403:System/storage/Storage.c **** 
1404:System/storage/Storage.c ****     if (p_SecInfo->tab_addr && Storage_Clear_Tab(p_SecInfo->tab_addr, p_SecInfo->page_num))
1405:System/storage/Storage.c ****     {
1406:System/storage/Storage.c ****         /* clear boot data section */
1407:System/storage/Storage.c ****         if (p_SecInfo->data_sec_addr == 0)
1408:System/storage/Storage.c ****             return false;
1409:System/storage/Storage.c **** 
1410:System/storage/Storage.c ****         /* write 0 to data section */
1411:System/storage/Storage.c ****         memset(page_data_tmp, 0, Storage_TabSize);
1412:System/storage/Storage.c ****         clear_cnt = p_SecInfo->data_sec_size / Storage_TabSize;
1413:System/storage/Storage.c ****         clear_remain = p_SecInfo->data_sec_size;
1414:System/storage/Storage.c ****         addr_tmp = p_SecInfo->data_sec_addr;
1415:System/storage/Storage.c ****         clear_byte = Storage_TabSize;
1416:System/storage/Storage.c ****         if (p_SecInfo->data_sec_size % Storage_TabSize)
1417:System/storage/Storage.c ****             clear_cnt ++;
1418:System/storage/Storage.c ****  
1419:System/storage/Storage.c ****         for(uint16_t i = 0; i < clear_cnt; i++)
1420:System/storage/Storage.c ****         {
1421:System/storage/Storage.c ****             if (!Storage_ExtFlash_ParaSec_Write(addr_tmp, page_data_tmp, clear_byte))
1422:System/storage/Storage.c ****                 return false;
1423:System/storage/Storage.c **** 
1424:System/storage/Storage.c ****             addr_tmp += Storage_TabSize;
1425:System/storage/Storage.c ****             clear_remain -= clear_byte;
1426:System/storage/Storage.c ****             if (clear_remain && clear_remain <= clear_byte)
1427:System/storage/Storage.c ****                 clear_byte = clear_remain;
1428:System/storage/Storage.c ****         }
1429:System/storage/Storage.c **** 
1430:System/storage/Storage.c ****         /* write free slot info */
1431:System/storage/Storage.c ****         memset(&free_slot, 0, sizeof(free_slot));
1432:System/storage/Storage.c ****         free_slot.head_tag = STORAGE_SLOT_HEAD_TAG;
1433:System/storage/Storage.c ****         free_slot.cur_slot_size = p_SecInfo->data_sec_size - sizeof(free_slot);
1434:System/storage/Storage.c ****         free_slot.nxt_addr = 0;
1435:System/storage/Storage.c ****         /* if current free slot get enought space for data then set next address (nxt_addr) as 0 */
1436:System/storage/Storage.c ****         /* or else setnext address (nxt_addr) as next slot address such as 0x80exxxx. */
1437:System/storage/Storage.c ****         /* until all data was saved into multiple flash segment completely */
1438:System/storage/Storage.c ****         /* set ender tag as 0xFE1001FE */
1439:System/storage/Storage.c ****         free_slot.end_tag = STORAGE_SLOT_END_TAG;
1440:System/storage/Storage.c ****         
1441:System/storage/Storage.c ****         memcpy(page_data_tmp, &free_slot, sizeof(free_slot));
1442:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(p_SecInfo->data_sec_addr, page_data_tmp, Storage_TabSiz
1443:System/storage/Storage.c ****             return false;
1444:System/storage/Storage.c **** 
1445:System/storage/Storage.c ****         /* update info section */
1446:System/storage/Storage.c ****         p_SecInfo->free_slot_addr = p_SecInfo->data_sec_addr;
1447:System/storage/Storage.c ****         p_SecInfo->free_space_size = p_SecInfo->data_sec_size;
1448:System/storage/Storage.c ****         p_SecInfo->para_num = 0;
1449:System/storage/Storage.c ****         p_SecInfo->para_size = 0;
1450:System/storage/Storage.c **** 
1451:System/storage/Storage.c ****         /* read out whole section info data from storage info section */
1452:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Read(From_Start_Address, page_data_tmp, Storage_TabSize))
1453:System/storage/Storage.c ****             return false;
1454:System/storage/Storage.c **** 
1455:System/storage/Storage.c ****         memset(page_data_tmp, 0, Storage_InfoPageSize);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 27


1456:System/storage/Storage.c ****         memcpy(page_data_tmp, p_Flash, sizeof(Storage_FlashInfo_TypeDef));
1457:System/storage/Storage.c **** 
1458:System/storage/Storage.c ****         /* comput crc */
1459:System/storage/Storage.c ****         crc = Common_CRC16(page_data_tmp, Storage_InfoPageSize - sizeof(crc));
1460:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
1461:System/storage/Storage.c **** 
1462:System/storage/Storage.c ****         /* erase sector first then write into the target sector */
1463:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(From_Start_Address, page_data_tmp, Storage_TabSize))
1464:System/storage/Storage.c ****             return false;
1465:System/storage/Storage.c **** 
1466:System/storage/Storage.c ****         return true;
1467:System/storage/Storage.c ****     }
1468:System/storage/Storage.c **** 
1469:System/storage/Storage.c ****     return false;
1470:System/storage/Storage.c **** }
1471:System/storage/Storage.c **** 
1472:System/storage/Storage.c **** static bool Storage_Build_StorageInfo(void)
1473:System/storage/Storage.c **** {
1474:System/storage/Storage.c ****     uint32_t page_num = 0;
1475:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info;
1476:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info_Rx;
1477:System/storage/Storage.c ****     uint32_t addr_offset = 0;
1478:System/storage/Storage.c ****     uint32_t BaseInfo_start_addr = 0;
1479:System/storage/Storage.c ****     uint32_t tab_addr_offset = 0;
1480:System/storage/Storage.c ****     uint16_t crc = 0;
1481:System/storage/Storage.c ****     uint32_t remain_data_sec_size = 0;
1482:System/storage/Storage.c ****     uint32_t data_sec_size = 0;
1483:System/storage/Storage.c **** 
1484:System/storage/Storage.c ****     memset(&Info, 0, sizeof(Storage_FlashInfo_TypeDef));
1485:System/storage/Storage.c ****     memset(&Info_Rx, 0, sizeof(Storage_FlashInfo_TypeDef));
1486:System/storage/Storage.c ****     memcpy(Info.tag, EXTERNAL_STORAGE_PAGE_TAG, EXTERNAL_PAGE_TAG_SIZE);
1487:System/storage/Storage.c **** 
1488:System/storage/Storage.c ****     Info.total_size = ExtFlash_Storage_TotalSize;
1489:System/storage/Storage.c ****     Info.base_addr = Storage_Monitor.external_info.base_addr;
1490:System/storage/Storage.c ****     
1491:System/storage/Storage.c ****     BaseInfo_start_addr = Info.base_addr;
1492:System/storage/Storage.c ****     page_num = Storage_ExtFlash_Max_Capacity / (ExtFlash_Storage_TabSize / StorageItem_Size);
1493:System/storage/Storage.c ****     if (page_num == 0)
1494:System/storage/Storage.c ****         return false;
1495:System/storage/Storage.c ****     
1496:System/storage/Storage.c ****     Info.boot_sec.tab_addr = Storage_InfoPageSize;
1497:System/storage/Storage.c ****     Info.boot_sec.tab_size = BootSection_Block_Size * BootTab_Num;
1498:System/storage/Storage.c ****     Info.boot_sec.page_num = BootTab_Num;
1499:System/storage/Storage.c ****     Info.boot_sec.data_sec_size = ExternalFlash_BootDataSec_Size;
1500:System/storage/Storage.c ****     Info.boot_sec.para_size = 0;
1501:System/storage/Storage.c ****     Info.boot_sec.para_num = 0;
1502:System/storage/Storage.c ****     tab_addr_offset = (Info.boot_sec.tab_addr + Info.boot_sec.tab_size) + Storage_ReserveBlock_Size
1503:System/storage/Storage.c **** 
1504:System/storage/Storage.c ****     Info.sys_sec.tab_addr = tab_addr_offset;
1505:System/storage/Storage.c ****     Info.sys_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
1506:System/storage/Storage.c ****     Info.sys_sec.data_sec_size = ExternalFlash_SysDataSec_Size;
1507:System/storage/Storage.c ****     Info.sys_sec.page_num = page_num;
1508:System/storage/Storage.c ****     Info.sys_sec.para_size = 0;
1509:System/storage/Storage.c ****     Info.sys_sec.para_num = 0;
1510:System/storage/Storage.c ****     tab_addr_offset += Info.sys_sec.tab_size + Storage_ReserveBlock_Size;
1511:System/storage/Storage.c ****         
1512:System/storage/Storage.c ****     Info.user_sec.tab_addr = tab_addr_offset;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 28


1513:System/storage/Storage.c ****     Info.user_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
1514:System/storage/Storage.c ****     Info.user_sec.data_sec_size = ExternalFlash_UserDataSec_Size;
1515:System/storage/Storage.c ****     Info.user_sec.page_num = page_num;
1516:System/storage/Storage.c ****     Info.user_sec.para_size = 0;
1517:System/storage/Storage.c ****     Info.user_sec.para_num = 0;
1518:System/storage/Storage.c ****     tab_addr_offset += Info.user_sec.tab_size + Storage_ReserveBlock_Size;
1519:System/storage/Storage.c ****     
1520:System/storage/Storage.c ****     /* get the remaining size of rom space has left */
1521:System/storage/Storage.c ****     if (Info.total_size < tab_addr_offset)
1522:System/storage/Storage.c ****         return false;
1523:System/storage/Storage.c ****     
1524:System/storage/Storage.c ****     remain_data_sec_size = Info.total_size - tab_addr_offset;
1525:System/storage/Storage.c ****     data_sec_size += Info.boot_sec.data_sec_size + Storage_ReserveBlock_Size;
1526:System/storage/Storage.c ****     data_sec_size += Info.sys_sec.data_sec_size + Storage_ReserveBlock_Size;
1527:System/storage/Storage.c ****     data_sec_size += Info.user_sec.data_sec_size + Storage_ReserveBlock_Size;
1528:System/storage/Storage.c **** 
1529:System/storage/Storage.c ****     if (remain_data_sec_size < data_sec_size)
1530:System/storage/Storage.c ****         return false;
1531:System/storage/Storage.c ****         
1532:System/storage/Storage.c ****     Info.remain_size = remain_data_sec_size - data_sec_size;
1533:System/storage/Storage.c ****     Info.data_sec_size = Info.boot_sec.data_sec_size + Info.sys_sec.data_sec_size + Info.user_sec.d
1534:System/storage/Storage.c **** 
1535:System/storage/Storage.c ****     /* get data sec addr */
1536:System/storage/Storage.c ****     Info.boot_sec.data_sec_addr = tab_addr_offset;
1537:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_BootDataSec_Size;
1538:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
1539:System/storage/Storage.c **** 
1540:System/storage/Storage.c ****     Info.sys_sec.data_sec_addr = tab_addr_offset;
1541:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_SysDataSec_Size;
1542:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
1543:System/storage/Storage.c **** 
1544:System/storage/Storage.c ****     Info.user_sec.data_sec_addr = tab_addr_offset;
1545:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_UserDataSec_Size;
1546:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
1547:System/storage/Storage.c **** 
1548:System/storage/Storage.c ****     Storage_Monitor.external_info = Info;
1549:System/storage/Storage.c ****     addr_offset = BaseInfo_start_addr - Storage_Monitor.external_info.base_addr;
1550:System/storage/Storage.c **** 
1551:System/storage/Storage.c ****     /* write 0 to info section */
1552:System/storage/Storage.c ****     memset(page_data_tmp, 0, Storage_InfoPageSize);
1553:System/storage/Storage.c **** 
1554:System/storage/Storage.c ****     /* read out and erase sector */
1555:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(addr_offset, page_data_tmp, sizeof(Info)))
1556:System/storage/Storage.c ****         return false;
1557:System/storage/Storage.c **** 
1558:System/storage/Storage.c ****     /* write base info to info section */
1559:System/storage/Storage.c ****     memcpy(page_data_tmp, &Info, sizeof(Info));
1560:System/storage/Storage.c ****     crc = Common_CRC16(page_data_tmp, Storage_InfoPageSize - sizeof(crc));
1561:System/storage/Storage.c ****     memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
1562:System/storage/Storage.c **** 
1563:System/storage/Storage.c ****     /* write into flash chip */
1564:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Write(addr_offset, page_data_tmp, Storage_InfoPageSize))
1565:System/storage/Storage.c ****         return false;
1566:System/storage/Storage.c **** 
1567:System/storage/Storage.c ****     /* read out again */
1568:System/storage/Storage.c ****     if (!Storage_ExtFlash_ParaSec_Read(addr_offset, page_data_tmp, sizeof(Info)))
1569:System/storage/Storage.c ****         return false;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 29


1570:System/storage/Storage.c **** 
1571:System/storage/Storage.c ****     /* compare with target */
1572:System/storage/Storage.c ****     memcpy(&Info_Rx, page_data_tmp, sizeof(Info_Rx));
1573:System/storage/Storage.c ****     if (memcmp(&Info_Rx, &Info, sizeof(Storage_FlashInfo_TypeDef)) != 0)
1574:System/storage/Storage.c ****         return false;
1575:System/storage/Storage.c **** 
1576:System/storage/Storage.c ****     if (!Storage_Establish_Tab(Para_Boot) || \
1577:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_Sys)  || \
1578:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_User))
1579:System/storage/Storage.c ****         return false;
1580:System/storage/Storage.c **** 
1581:System/storage/Storage.c ****     return true;
1582:System/storage/Storage.c **** }
1583:System/storage/Storage.c **** 
1584:System/storage/Storage.c **** static bool Storage_Compare_ItemSlot_CRC(const Storage_Item_TypeDef item)
1585:System/storage/Storage.c **** {
1586:System/storage/Storage.c ****     uint8_t *crc_buf = (uint8_t *)&item;
1587:System/storage/Storage.c ****     uint16_t crc_len = sizeof(Storage_Item_TypeDef);
1588:System/storage/Storage.c ****     uint16_t crc = 0;
1589:System/storage/Storage.c ****     
1590:System/storage/Storage.c ****     crc_buf += sizeof(item.head_tag);
1591:System/storage/Storage.c ****     crc_len -= sizeof(item.head_tag);
1592:System/storage/Storage.c ****     crc_len -= sizeof(item.end_tag);
1593:System/storage/Storage.c ****     crc_len -= sizeof(item.crc16);
1594:System/storage/Storage.c ****     crc = Common_CRC16(crc_buf, crc_len);
1595:System/storage/Storage.c **** 
1596:System/storage/Storage.c ****     if (crc == item.crc16)
1597:System/storage/Storage.c ****         return true;
1598:System/storage/Storage.c **** 
1599:System/storage/Storage.c ****     return false;
1600:System/storage/Storage.c **** }
1601:System/storage/Storage.c **** 
1602:System/storage/Storage.c **** static bool Storage_Comput_ItemSlot_CRC(Storage_Item_TypeDef *p_item)
1603:System/storage/Storage.c **** {
1604:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
1605:System/storage/Storage.c ****     uint16_t crc_len = sizeof(Storage_Item_TypeDef);
1606:System/storage/Storage.c ****     
1607:System/storage/Storage.c ****     if (p_item)
1608:System/storage/Storage.c ****     {
1609:System/storage/Storage.c ****         crc_buf = ((uint8_t *)p_item) + sizeof(p_item->head_tag);
1610:System/storage/Storage.c ****         crc_len -= sizeof(p_item->head_tag);
1611:System/storage/Storage.c ****         crc_len -= sizeof(p_item->end_tag);
1612:System/storage/Storage.c ****         crc_len -= sizeof(p_item->crc16);
1613:System/storage/Storage.c ****         p_item->crc16 = Common_CRC16(crc_buf, crc_len);
1614:System/storage/Storage.c **** 
1615:System/storage/Storage.c ****         return true;
1616:System/storage/Storage.c ****     }
1617:System/storage/Storage.c **** 
1618:System/storage/Storage.c ****     return false;
1619:System/storage/Storage.c **** }
1620:System/storage/Storage.c **** 
1621:System/storage/Storage.c **** static Storage_BaseSecInfo_TypeDef* Storage_Get_SecInfo(Storage_FlashInfo_TypeDef *info, Storage_Pa
1622:System/storage/Storage.c **** {
  29              		.loc 1 1622 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 30


  33              		@ link register save eliminated.
1623:System/storage/Storage.c ****     if (info)
  34              		.loc 1 1623 5 view .LVU1
  35              		.loc 1 1623 8 is_stmt 0 view .LVU2
  36 0000 60B1     		cbz	r0, .L5
1624:System/storage/Storage.c ****     {
1625:System/storage/Storage.c ****         switch(class)
  37              		.loc 1 1625 9 is_stmt 1 view .LVU3
  38 0002 0129     		cmp	r1, #1
  39 0004 06D0     		beq	.L3
  40 0006 0229     		cmp	r1, #2
  41 0008 06D0     		beq	.L4
  42 000a 09B1     		cbz	r1, .L7
  43 000c 0020     		movs	r0, #0
  44              	.LVL1:
1626:System/storage/Storage.c ****         {
1627:System/storage/Storage.c ****             case Para_Boot: return &(info->boot_sec);
1628:System/storage/Storage.c ****             case Para_Sys:  return &(info->sys_sec);
1629:System/storage/Storage.c ****             case Para_User: return &(info->user_sec);
1630:System/storage/Storage.c ****             default:        return NULL;
1631:System/storage/Storage.c ****         }
1632:System/storage/Storage.c ****     }
1633:System/storage/Storage.c **** 
1634:System/storage/Storage.c ****     return NULL;
1635:System/storage/Storage.c **** }
  45              		.loc 1 1635 1 is_stmt 0 view .LVU4
  46 000e 7047     		bx	lr
  47              	.LVL2:
  48              	.L7:
1627:System/storage/Storage.c ****             case Para_Sys:  return &(info->sys_sec);
  49              		.loc 1 1627 29 is_stmt 1 view .LVU5
1627:System/storage/Storage.c ****             case Para_Sys:  return &(info->sys_sec);
  50              		.loc 1 1627 36 is_stmt 0 view .LVU6
  51 0010 3030     		adds	r0, r0, #48
  52              	.LVL3:
1627:System/storage/Storage.c ****             case Para_Sys:  return &(info->sys_sec);
  53              		.loc 1 1627 36 view .LVU7
  54 0012 7047     		bx	lr
  55              	.LVL4:
  56              	.L3:
1628:System/storage/Storage.c ****             case Para_User: return &(info->user_sec);
  57              		.loc 1 1628 29 is_stmt 1 view .LVU8
1628:System/storage/Storage.c ****             case Para_User: return &(info->user_sec);
  58              		.loc 1 1628 36 is_stmt 0 view .LVU9
  59 0014 5430     		adds	r0, r0, #84
  60              	.LVL5:
1628:System/storage/Storage.c ****             case Para_User: return &(info->user_sec);
  61              		.loc 1 1628 36 view .LVU10
  62 0016 7047     		bx	lr
  63              	.LVL6:
  64              	.L4:
1629:System/storage/Storage.c ****             default:        return NULL;
  65              		.loc 1 1629 29 is_stmt 1 view .LVU11
1629:System/storage/Storage.c ****             default:        return NULL;
  66              		.loc 1 1629 36 is_stmt 0 view .LVU12
  67 0018 7830     		adds	r0, r0, #120
  68              	.LVL7:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 31


1629:System/storage/Storage.c ****             default:        return NULL;
  69              		.loc 1 1629 36 view .LVU13
  70 001a 7047     		bx	lr
  71              	.LVL8:
  72              	.L5:
1629:System/storage/Storage.c ****             default:        return NULL;
  73              		.loc 1 1629 36 view .LVU14
  74 001c 7047     		bx	lr
  75              		.cfi_endproc
  76              	.LFE165:
  78              		.section	.text.Storage_Erase_Section,"ax",%progbits
  79              		.align	1
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  84              	Storage_Erase_Section:
  85              	.LVL9:
  86              	.LFB168:
1636:System/storage/Storage.c **** 
1637:System/storage/Storage.c **** /********************************************** BlackBox Storage API Section **********************
1638:System/storage/Storage.c **** static bool Storage_Write_Section(uint32_t addr, uint8_t *p_data, uint16_t len)
1639:System/storage/Storage.c **** {
1640:System/storage/Storage.c ****     uint32_t write_cnt = 0;
1641:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
1642:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
1643:System/storage/Storage.c **** 
1644:System/storage/Storage.c ****     p_dev = (Storage_ExtFLashDevObj_TypeDef *)Storage_Monitor.ExtDev_ptr;
1645:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
1646:System/storage/Storage.c ****     {
1647:System/storage/Storage.c ****         if ((addr % p_dev->sector_size) || \
1648:System/storage/Storage.c ****             (len % p_dev->sector_size))
1649:System/storage/Storage.c ****             return false;
1650:System/storage/Storage.c **** 
1651:System/storage/Storage.c ****         write_cnt = len / p_dev->sector_size;
1652:System/storage/Storage.c ****         addr_tmp = addr;
1653:System/storage/Storage.c **** 
1654:System/storage/Storage.c ****         for (uint8_t i = 0; i < write_cnt; i ++)
1655:System/storage/Storage.c ****         {
1656:System/storage/Storage.c ****             switch((uint8_t)p_dev->chip_type)
1657:System/storage/Storage.c ****             {
1658:System/storage/Storage.c ****                 case Storage_ChipType_W25Qxx:
1659:System/storage/Storage.c ****                     /* erase sector */
1660:System/storage/Storage.c ****                     if (To_DevW25Qxx_API(p_dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(p_dev->dev_
1661:System/storage/Storage.c ****                     {
1662:System/storage/Storage.c ****                         STORAGE_INFO("section erase failed\r\n");
1663:System/storage/Storage.c ****                         return false;
1664:System/storage/Storage.c ****                     }
1665:System/storage/Storage.c **** 
1666:System/storage/Storage.c ****                     /* update sector */
1667:System/storage/Storage.c ****                     if (To_DevW25Qxx_API(p_dev->dev_api)->write(To_DevW25Qxx_OBJ(p_dev->dev_obj), a
1668:System/storage/Storage.c ****                     {
1669:System/storage/Storage.c ****                         STORAGE_INFO("section write failed\r\n");
1670:System/storage/Storage.c ****                         return false;
1671:System/storage/Storage.c ****                     }
1672:System/storage/Storage.c ****                     break;
1673:System/storage/Storage.c **** 
1674:System/storage/Storage.c ****                 default: return false;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 32


1675:System/storage/Storage.c ****             }
1676:System/storage/Storage.c **** 
1677:System/storage/Storage.c ****             addr_tmp += p_dev->sector_size;
1678:System/storage/Storage.c ****         }
1679:System/storage/Storage.c **** 
1680:System/storage/Storage.c ****         return true;
1681:System/storage/Storage.c ****     }
1682:System/storage/Storage.c **** 
1683:System/storage/Storage.c ****     return false;
1684:System/storage/Storage.c **** }
1685:System/storage/Storage.c **** 
1686:System/storage/Storage.c **** static bool Storage_Read_Section(uint32_t addr, uint8_t *p_data, uint16_t len)
1687:System/storage/Storage.c **** {
1688:System/storage/Storage.c ****     uint32_t read_cnt = 0;
1689:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
1690:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
1691:System/storage/Storage.c **** 
1692:System/storage/Storage.c ****     p_dev = (Storage_ExtFLashDevObj_TypeDef *)Storage_Monitor.ExtDev_ptr;
1693:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
1694:System/storage/Storage.c ****     {
1695:System/storage/Storage.c ****         if ((addr % p_dev->sector_size) || \
1696:System/storage/Storage.c ****             (len % p_dev->sector_size))
1697:System/storage/Storage.c ****             return false;
1698:System/storage/Storage.c ****     
1699:System/storage/Storage.c ****         read_cnt = len / p_dev->sector_size;
1700:System/storage/Storage.c ****         addr_tmp = addr;
1701:System/storage/Storage.c **** 
1702:System/storage/Storage.c ****         for (uint8_t i = 0; i < read_cnt; i++)
1703:System/storage/Storage.c ****         {
1704:System/storage/Storage.c ****             switch((uint8_t)p_dev->chip_type)
1705:System/storage/Storage.c ****             {
1706:System/storage/Storage.c ****                 case Storage_ChipType_W25Qxx:
1707:System/storage/Storage.c ****                     /* read sector */
1708:System/storage/Storage.c ****                     if (To_DevW25Qxx_API(p_dev->dev_api)->read(To_DevW25Qxx_OBJ(p_dev->dev_obj), ad
1709:System/storage/Storage.c ****                     {
1710:System/storage/Storage.c ****                         STORAGE_INFO("section read failed\r\n");
1711:System/storage/Storage.c ****                         memset(p_data, 0, len);
1712:System/storage/Storage.c ****                         return false;
1713:System/storage/Storage.c ****                     }
1714:System/storage/Storage.c ****                     break;
1715:System/storage/Storage.c **** 
1716:System/storage/Storage.c ****                 default: return false;
1717:System/storage/Storage.c ****             }
1718:System/storage/Storage.c **** 
1719:System/storage/Storage.c ****             addr_tmp += p_dev->sector_size;
1720:System/storage/Storage.c ****         }
1721:System/storage/Storage.c **** 
1722:System/storage/Storage.c ****         return true;
1723:System/storage/Storage.c ****     }
1724:System/storage/Storage.c **** 
1725:System/storage/Storage.c ****     return false;
1726:System/storage/Storage.c **** }
1727:System/storage/Storage.c **** 
1728:System/storage/Storage.c **** static bool Storage_Erase_Section(uint32_t addr, uint16_t len)
1729:System/storage/Storage.c **** {
  87              		.loc 1 1729 1 is_stmt 1 view -0
  88              		.cfi_startproc
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 33


  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		.loc 1 1729 1 is_stmt 0 view .LVU16
  92 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  93              	.LCFI0:
  94              		.cfi_def_cfa_offset 24
  95              		.cfi_offset 3, -24
  96              		.cfi_offset 4, -20
  97              		.cfi_offset 5, -16
  98              		.cfi_offset 6, -12
  99              		.cfi_offset 7, -8
 100              		.cfi_offset 14, -4
1730:System/storage/Storage.c ****     uint32_t erase_cnt = 0;
 101              		.loc 1 1730 5 is_stmt 1 view .LVU17
 102              	.LVL10:
1731:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 103              		.loc 1 1731 5 view .LVU18
1732:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
 104              		.loc 1 1732 5 view .LVU19
1733:System/storage/Storage.c **** 
1734:System/storage/Storage.c ****     p_dev = (Storage_ExtFLashDevObj_TypeDef *)Storage_Monitor.ExtDev_ptr;
 105              		.loc 1 1734 5 view .LVU20
 106              		.loc 1 1734 11 is_stmt 0 view .LVU21
 107 0002 1E4B     		ldr	r3, .L23
 108 0004 9D68     		ldr	r5, [r3, #8]
 109              	.LVL11:
1735:System/storage/Storage.c ****     if (addr && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
 110              		.loc 1 1735 5 is_stmt 1 view .LVU22
 111              		.loc 1 1735 8 is_stmt 0 view .LVU23
 112 0006 30B3     		cbz	r0, .L12
 113 0008 0646     		mov	r6, r0
 114              		.loc 1 1735 14 discriminator 1 view .LVU24
 115 000a 31B3     		cbz	r1, .L13
 116              		.loc 1 1735 21 discriminator 2 view .LVU25
 117 000c 3DB3     		cbz	r5, .L14
 118              		.loc 1 1735 38 discriminator 3 view .LVU26
 119 000e 2B6B     		ldr	r3, [r5, #48]
 120              		.loc 1 1735 30 discriminator 3 view .LVU27
 121 0010 3BB3     		cbz	r3, .L15
 122              		.loc 1 1735 56 discriminator 4 view .LVU28
 123 0012 EB6A     		ldr	r3, [r5, #44]
 124              		.loc 1 1735 48 discriminator 4 view .LVU29
 125 0014 3BB3     		cbz	r3, .L16
1736:System/storage/Storage.c ****     {
1737:System/storage/Storage.c ****         if ((addr % p_dev->sector_size) || \
 126              		.loc 1 1737 9 is_stmt 1 view .LVU30
 127              		.loc 1 1737 26 is_stmt 0 view .LVU31
 128 0016 AC6A     		ldr	r4, [r5, #40]
 129              		.loc 1 1737 19 view .LVU32
 130 0018 B0FBF4F3 		udiv	r3, r0, r4
 131 001c 04FB1303 		mls	r3, r4, r3, r0
 132              		.loc 1 1737 12 view .LVU33
 133 0020 1BBB     		cbnz	r3, .L17
1738:System/storage/Storage.c ****             (len % p_dev->sector_size))
 134              		.loc 1 1738 18 discriminator 1 view .LVU34
 135 0022 B1FBF4F3 		udiv	r3, r1, r4
 136 0026 04FB1313 		mls	r3, r4, r3, r1
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 34


1737:System/storage/Storage.c ****             (len % p_dev->sector_size))
 137              		.loc 1 1737 41 discriminator 1 view .LVU35
 138 002a 03BB     		cbnz	r3, .L18
1739:System/storage/Storage.c ****             return false;
1740:System/storage/Storage.c ****     
1741:System/storage/Storage.c ****         erase_cnt = len / p_dev->sector_size;
 139              		.loc 1 1741 9 is_stmt 1 view .LVU36
 140              		.loc 1 1741 19 is_stmt 0 view .LVU37
 141 002c B1FBF4F4 		udiv	r4, r1, r4
 142              	.LVL12:
1742:System/storage/Storage.c ****         addr_tmp = addr;
 143              		.loc 1 1742 9 is_stmt 1 view .LVU38
1743:System/storage/Storage.c **** 
1744:System/storage/Storage.c ****         for (uint8_t i = 0; i < erase_cnt; i ++)
 144              		.loc 1 1744 9 view .LVU39
 145              	.LBB2:
 146              		.loc 1 1744 14 view .LVU40
 147              		.loc 1 1744 22 is_stmt 0 view .LVU41
 148 0030 0027     		movs	r7, #0
 149              	.LVL13:
 150              	.L10:
 151              		.loc 1 1744 29 is_stmt 1 discriminator 1 view .LVU42
 152              		.loc 1 1744 9 is_stmt 0 discriminator 1 view .LVU43
 153 0032 A742     		cmp	r7, r4
 154 0034 0DD2     		bcs	.L22
1745:System/storage/Storage.c ****         {
1746:System/storage/Storage.c ****             switch((uint8_t)p_dev->chip_type)
 155              		.loc 1 1746 13 is_stmt 1 view .LVU44
 156              		.loc 1 1746 34 is_stmt 0 view .LVU45
 157 0036 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 158              		.loc 1 1746 13 view .LVU46
 159 0038 012B     		cmp	r3, #1
 160 003a 1AD1     		bne	.L19
1747:System/storage/Storage.c ****             {
1748:System/storage/Storage.c ****                 case Storage_ChipType_W25Qxx:
1749:System/storage/Storage.c ****                     /* erase sector */
1750:System/storage/Storage.c ****                     if (To_DevW25Qxx_API(p_dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(p_dev->dev_
 161              		.loc 1 1750 21 is_stmt 1 view .LVU47
 162              		.loc 1 1750 25 is_stmt 0 view .LVU48
 163 003c 2B6B     		ldr	r3, [r5, #48]
 164              		.loc 1 1750 57 view .LVU49
 165 003e 5B69     		ldr	r3, [r3, #20]
 166              		.loc 1 1750 25 view .LVU50
 167 0040 3146     		mov	r1, r6
 168 0042 E86A     		ldr	r0, [r5, #44]
 169 0044 9847     		blx	r3
 170              	.LVL14:
 171              		.loc 1 1750 24 view .LVU51
 172 0046 B0B9     		cbnz	r0, .L20
1751:System/storage/Storage.c ****                         return false;
1752:System/storage/Storage.c ****                     break;
 173              		.loc 1 1752 21 is_stmt 1 discriminator 2 view .LVU52
1753:System/storage/Storage.c **** 
1754:System/storage/Storage.c ****                 default: return false;
1755:System/storage/Storage.c ****             }
1756:System/storage/Storage.c **** 
1757:System/storage/Storage.c ****             addr_tmp += p_dev->sector_size;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 35


 174              		.loc 1 1757 13 discriminator 2 view .LVU53
 175              		.loc 1 1757 30 is_stmt 0 discriminator 2 view .LVU54
 176 0048 AB6A     		ldr	r3, [r5, #40]
 177              		.loc 1 1757 22 discriminator 2 view .LVU55
 178 004a 1E44     		add	r6, r6, r3
 179              	.LVL15:
1744:System/storage/Storage.c ****         {
 180              		.loc 1 1744 44 is_stmt 1 discriminator 2 view .LVU56
1744:System/storage/Storage.c ****         {
 181              		.loc 1 1744 46 is_stmt 0 discriminator 2 view .LVU57
 182 004c 0137     		adds	r7, r7, #1
 183              	.LVL16:
1744:System/storage/Storage.c ****         {
 184              		.loc 1 1744 46 discriminator 2 view .LVU58
 185 004e FFB2     		uxtb	r7, r7
 186              	.LVL17:
1744:System/storage/Storage.c ****         {
 187              		.loc 1 1744 46 discriminator 2 view .LVU59
 188 0050 EFE7     		b	.L10
 189              	.L22:
1744:System/storage/Storage.c ****         {
 190              		.loc 1 1744 46 discriminator 2 view .LVU60
 191              	.LBE2:
1758:System/storage/Storage.c ****         }
1759:System/storage/Storage.c **** 
1760:System/storage/Storage.c ****         return true;
 192              		.loc 1 1760 16 view .LVU61
 193 0052 0120     		movs	r0, #1
 194              	.LBB3:
 195 0054 00E0     		b	.L9
 196              	.LVL18:
 197              	.L12:
 198              		.loc 1 1760 16 view .LVU62
 199              	.LBE3:
1761:System/storage/Storage.c ****     }
1762:System/storage/Storage.c **** 
1763:System/storage/Storage.c ****     return false;
 200              		.loc 1 1763 12 view .LVU63
 201 0056 0020     		movs	r0, #0
 202              	.LVL19:
 203              	.L9:
1764:System/storage/Storage.c **** }
 204              		.loc 1 1764 1 view .LVU64
 205 0058 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 206              	.LVL20:
 207              	.L13:
1763:System/storage/Storage.c **** }
 208              		.loc 1 1763 12 view .LVU65
 209 005a 0020     		movs	r0, #0
 210              	.LVL21:
1763:System/storage/Storage.c **** }
 211              		.loc 1 1763 12 view .LVU66
 212 005c FCE7     		b	.L9
 213              	.LVL22:
 214              	.L14:
1763:System/storage/Storage.c **** }
 215              		.loc 1 1763 12 view .LVU67
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 36


 216 005e 0020     		movs	r0, #0
 217              	.LVL23:
1763:System/storage/Storage.c **** }
 218              		.loc 1 1763 12 view .LVU68
 219 0060 FAE7     		b	.L9
 220              	.LVL24:
 221              	.L15:
1763:System/storage/Storage.c **** }
 222              		.loc 1 1763 12 view .LVU69
 223 0062 0020     		movs	r0, #0
 224              	.LVL25:
1763:System/storage/Storage.c **** }
 225              		.loc 1 1763 12 view .LVU70
 226 0064 F8E7     		b	.L9
 227              	.LVL26:
 228              	.L16:
1763:System/storage/Storage.c **** }
 229              		.loc 1 1763 12 view .LVU71
 230 0066 0020     		movs	r0, #0
 231              	.LVL27:
1763:System/storage/Storage.c **** }
 232              		.loc 1 1763 12 view .LVU72
 233 0068 F6E7     		b	.L9
 234              	.LVL28:
 235              	.L17:
1739:System/storage/Storage.c ****     
 236              		.loc 1 1739 20 view .LVU73
 237 006a 0020     		movs	r0, #0
 238              	.LVL29:
1739:System/storage/Storage.c ****     
 239              		.loc 1 1739 20 view .LVU74
 240 006c F4E7     		b	.L9
 241              	.LVL30:
 242              	.L18:
1739:System/storage/Storage.c ****     
 243              		.loc 1 1739 20 view .LVU75
 244 006e 0020     		movs	r0, #0
 245              	.LVL31:
1739:System/storage/Storage.c ****     
 246              		.loc 1 1739 20 view .LVU76
 247 0070 F2E7     		b	.L9
 248              	.LVL32:
 249              	.L19:
 250              	.LBB4:
1754:System/storage/Storage.c ****             }
 251              		.loc 1 1754 33 view .LVU77
 252 0072 0020     		movs	r0, #0
 253 0074 F0E7     		b	.L9
 254              	.L20:
1751:System/storage/Storage.c ****                     break;
 255              		.loc 1 1751 32 view .LVU78
 256 0076 0020     		movs	r0, #0
 257 0078 EEE7     		b	.L9
 258              	.L24:
 259 007a 00BF     		.align	2
 260              	.L23:
 261 007c 00000000 		.word	.LANCHOR0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 37


 262              	.LBE4:
 263              		.cfi_endproc
 264              	.LFE168:
 266              		.section	.text.Storage_Firmware_Format,"ax",%progbits
 267              		.align	1
 268              		.syntax unified
 269              		.thumb
 270              		.thumb_func
 272              	Storage_Firmware_Format:
 273              	.LVL33:
 274              	.LFB169:
1765:System/storage/Storage.c **** 
1766:System/storage/Storage.c **** /********************************************** External Firmware Storage API Section *************
1767:System/storage/Storage.c **** static bool Storage_Firmware_Format(Storage_FirmwareType_List type)
1768:System/storage/Storage.c **** {
 275              		.loc 1 1768 1 is_stmt 1 view -0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 0
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 279              		.loc 1 1768 1 is_stmt 0 view .LVU80
 280 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 281              	.LCFI1:
 282              		.cfi_def_cfa_offset 24
 283              		.cfi_offset 4, -24
 284              		.cfi_offset 5, -20
 285              		.cfi_offset 6, -16
 286              		.cfi_offset 7, -12
 287              		.cfi_offset 8, -8
 288              		.cfi_offset 14, -4
1769:System/storage/Storage.c ****     uint32_t format_size = 0;
 289              		.loc 1 1769 5 is_stmt 1 view .LVU81
 290              	.LVL34:
1770:System/storage/Storage.c ****     uint32_t erase_addr = 0;
 291              		.loc 1 1770 5 view .LVU82
1771:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
 292              		.loc 1 1771 5 view .LVU83
1772:System/storage/Storage.c **** 
1773:System/storage/Storage.c ****     if (Storage_Monitor.init_state && (type != Firmware_None) && (type <= Firmware_App))
 293              		.loc 1 1773 5 view .LVU84
 294              		.loc 1 1773 24 is_stmt 0 view .LVU85
 295 0004 224B     		ldr	r3, .L40
 296 0006 1D7C     		ldrb	r5, [r3, #16]	@ zero_extendqisi2
 297              		.loc 1 1773 8 view .LVU86
 298 0008 002D     		cmp	r5, #0
 299 000a 35D0     		beq	.L26
 300              		.loc 1 1773 36 discriminator 1 view .LVU87
 301 000c 98B3     		cbz	r0, .L31
 302              		.loc 1 1773 63 discriminator 2 view .LVU88
 303 000e 0228     		cmp	r0, #2
 304 0010 35D8     		bhi	.L32
1774:System/storage/Storage.c ****     {
1775:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 305              		.loc 1 1775 9 is_stmt 1 view .LVU89
 306              		.loc 1 1775 13 is_stmt 0 view .LVU90
 307 0012 9E68     		ldr	r6, [r3, #8]
 308              	.LVL35:
1776:System/storage/Storage.c ****         if (dev == NULL)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 38


 309              		.loc 1 1776 9 is_stmt 1 view .LVU91
 310              		.loc 1 1776 12 is_stmt 0 view .LVU92
 311 0014 AEB3     		cbz	r6, .L33
1777:System/storage/Storage.c ****             return false;
1778:System/storage/Storage.c **** 
1779:System/storage/Storage.c ****         switch ((uint8_t)type)
 312              		.loc 1 1779 9 is_stmt 1 view .LVU93
 313 0016 0128     		cmp	r0, #1
 314 0018 0AD0     		beq	.L34
 315 001a 0228     		cmp	r0, #2
 316 001c 0DD1     		bne	.L35
1780:System/storage/Storage.c ****         {
1781:System/storage/Storage.c ****             case Firmware_App:
1782:System/storage/Storage.c ****                 format_size = App_Firmware_Size;
1783:System/storage/Storage.c ****                 erase_addr = App_Firmware_Addr;
 317              		.loc 1 1783 28 is_stmt 0 view .LVU94
 318 001e 4FF4A018 		mov	r8, #1310720
1782:System/storage/Storage.c ****                 erase_addr = App_Firmware_Addr;
 319              		.loc 1 1782 29 view .LVU95
 320 0022 4FF48017 		mov	r7, #1048576
 321              	.L27:
 322              	.LVL36:
1784:System/storage/Storage.c ****                 break;
1785:System/storage/Storage.c **** 
1786:System/storage/Storage.c ****             case Firmware_Boot:
1787:System/storage/Storage.c ****                 format_size = Boot_Firmware_Size;
1788:System/storage/Storage.c ****                 erase_addr = Boot_Firmware_Addr;
1789:System/storage/Storage.c ****                 break;
1790:System/storage/Storage.c **** 
1791:System/storage/Storage.c ****             default: break;
1792:System/storage/Storage.c ****         }
1793:System/storage/Storage.c **** 
1794:System/storage/Storage.c ****         if ((format_size % Storage_TabSize) != 0)
 323              		.loc 1 1794 9 is_stmt 1 view .LVU96
 324              		.loc 1 1794 26 is_stmt 0 view .LVU97
 325 0026 C7F30B03 		ubfx	r3, r7, #0, #12
 326              		.loc 1 1794 12 view .LVU98
 327 002a 63BB     		cbnz	r3, .L36
 328              	.LBB5:
1795:System/storage/Storage.c ****             return false;
1796:System/storage/Storage.c **** 
1797:System/storage/Storage.c ****         for (uint16_t i = 0; i < format_size / Storage_TabSize; i++)
 329              		.loc 1 1797 23 view .LVU99
 330 002c 0024     		movs	r4, #0
 331 002e 0AE0     		b	.L28
 332              	.LVL37:
 333              	.L34:
 334              		.loc 1 1797 23 view .LVU100
 335              	.LBE5:
1788:System/storage/Storage.c ****                 break;
 336              		.loc 1 1788 28 view .LVU101
 337 0030 4FF00008 		mov	r8, #0
1787:System/storage/Storage.c ****                 erase_addr = Boot_Firmware_Addr;
 338              		.loc 1 1787 29 view .LVU102
 339 0034 4FF48027 		mov	r7, #262144
 340 0038 F5E7     		b	.L27
 341              	.L35:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 39


1779:System/storage/Storage.c ****         {
 342              		.loc 1 1779 9 view .LVU103
 343 003a 4FF00008 		mov	r8, #0
 344 003e 4746     		mov	r7, r8
 345 0040 F1E7     		b	.L27
 346              	.LVL38:
 347              	.L29:
 348              	.LBB6:
 349              		.loc 1 1797 65 is_stmt 1 discriminator 2 view .LVU104
 350              		.loc 1 1797 66 is_stmt 0 discriminator 2 view .LVU105
 351 0042 0134     		adds	r4, r4, #1
 352              	.LVL39:
 353              		.loc 1 1797 66 discriminator 2 view .LVU106
 354 0044 A4B2     		uxth	r4, r4
 355              	.LVL40:
 356              	.L28:
 357              		.loc 1 1797 30 is_stmt 1 discriminator 1 view .LVU107
 358              		.loc 1 1797 9 is_stmt 0 discriminator 1 view .LVU108
 359 0046 B4EB173F 		cmp	r4, r7, lsr #12
 360 004a 12D2     		bcs	.L39
1798:System/storage/Storage.c ****         {
1799:System/storage/Storage.c ****             switch (dev->chip_type)
 361              		.loc 1 1799 13 is_stmt 1 view .LVU109
 362              		.loc 1 1799 24 is_stmt 0 view .LVU110
 363 004c 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 364              		.loc 1 1799 13 view .LVU111
 365 004e 012B     		cmp	r3, #1
 366 0050 F7D1     		bne	.L29
1800:System/storage/Storage.c ****             {
1801:System/storage/Storage.c ****                 case Storage_ChipType_W25Qxx:
1802:System/storage/Storage.c ****                     if (dev->dev_api && dev->dev_obj)
 367              		.loc 1 1802 21 is_stmt 1 view .LVU112
 368              		.loc 1 1802 28 is_stmt 0 view .LVU113
 369 0052 336B     		ldr	r3, [r6, #48]
 370              		.loc 1 1802 24 view .LVU114
 371 0054 002B     		cmp	r3, #0
 372 0056 F4D0     		beq	.L29
 373              		.loc 1 1802 44 discriminator 1 view .LVU115
 374 0058 F06A     		ldr	r0, [r6, #44]
 375              		.loc 1 1802 38 discriminator 1 view .LVU116
 376 005a 0028     		cmp	r0, #0
 377 005c F1D0     		beq	.L29
1803:System/storage/Storage.c ****                     {
1804:System/storage/Storage.c ****                         if (format_size == 0)
 378              		.loc 1 1804 25 is_stmt 1 view .LVU117
 379              		.loc 1 1804 28 is_stmt 0 view .LVU118
 380 005e 5FB1     		cbz	r7, .L26
1805:System/storage/Storage.c ****                             return true;
1806:System/storage/Storage.c **** 
1807:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(dev->dev_
 381              		.loc 1 1807 25 is_stmt 1 view .LVU119
 382              		.loc 1 1807 59 is_stmt 0 view .LVU120
 383 0060 5B69     		ldr	r3, [r3, #20]
 384              		.loc 1 1807 29 view .LVU121
 385 0062 4146     		mov	r1, r8
 386 0064 9847     		blx	r3
 387              	.LVL41:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 40


 388              		.loc 1 1807 28 view .LVU122
 389 0066 80B9     		cbnz	r0, .L37
1808:System/storage/Storage.c ****                             return false;
1809:System/storage/Storage.c ****                     
1810:System/storage/Storage.c ****                         erase_addr += Storage_TabSize;
 390              		.loc 1 1810 25 is_stmt 1 view .LVU123
 391              		.loc 1 1810 36 is_stmt 0 view .LVU124
 392 0068 08F58058 		add	r8, r8, #4096
 393              	.LVL42:
1811:System/storage/Storage.c ****                         format_size -= Storage_TabSize;
 394              		.loc 1 1811 25 is_stmt 1 view .LVU125
 395              		.loc 1 1811 37 is_stmt 0 view .LVU126
 396 006c A7F58057 		sub	r7, r7, #4096
 397              	.LVL43:
 398              		.loc 1 1811 37 view .LVU127
 399 0070 E7E7     		b	.L29
 400              	.L39:
 401              		.loc 1 1811 37 view .LVU128
 402              	.LBE6:
1812:System/storage/Storage.c ****                     }
1813:System/storage/Storage.c ****                     break;
1814:System/storage/Storage.c **** 
1815:System/storage/Storage.c ****                 default: break;
1816:System/storage/Storage.c ****             }
1817:System/storage/Storage.c ****         }
1818:System/storage/Storage.c ****     }
1819:System/storage/Storage.c **** 
1820:System/storage/Storage.c ****     return false;
 403              		.loc 1 1820 12 view .LVU129
 404 0072 0025     		movs	r5, #0
 405              	.LBB7:
 406 0074 00E0     		b	.L26
 407              	.LVL44:
 408              	.L31:
 409              		.loc 1 1820 12 view .LVU130
 410              	.LBE7:
 411 0076 0025     		movs	r5, #0
 412              	.LVL45:
 413              	.L26:
1821:System/storage/Storage.c **** }
 414              		.loc 1 1821 1 view .LVU131
 415 0078 2846     		mov	r0, r5
 416 007a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 417              	.LVL46:
 418              	.L32:
1820:System/storage/Storage.c **** }
 419              		.loc 1 1820 12 view .LVU132
 420 007e 0025     		movs	r5, #0
 421 0080 FAE7     		b	.L26
 422              	.LVL47:
 423              	.L33:
1777:System/storage/Storage.c **** 
 424              		.loc 1 1777 20 view .LVU133
 425 0082 0025     		movs	r5, #0
 426 0084 F8E7     		b	.L26
 427              	.LVL48:
 428              	.L36:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 41


1795:System/storage/Storage.c **** 
 429              		.loc 1 1795 20 view .LVU134
 430 0086 0025     		movs	r5, #0
 431 0088 F6E7     		b	.L26
 432              	.LVL49:
 433              	.L37:
 434              	.LBB8:
1808:System/storage/Storage.c ****                     
 435              		.loc 1 1808 36 view .LVU135
 436 008a 0025     		movs	r5, #0
 437 008c F4E7     		b	.L26
 438              	.L41:
 439 008e 00BF     		.align	2
 440              	.L40:
 441 0090 00000000 		.word	.LANCHOR0
 442              	.LBE8:
 443              		.cfi_endproc
 444              	.LFE169:
 446              		.section	.text.Storage_External_Chip_W25Qxx_SelectPin_Ctl,"ax",%progbits
 447              		.align	1
 448              		.syntax unified
 449              		.thumb
 450              		.thumb_func
 452              	Storage_External_Chip_W25Qxx_SelectPin_Ctl:
 453              	.LVL50:
 454              	.LFB172:
1822:System/storage/Storage.c **** 
1823:System/storage/Storage.c **** static bool Storage_Frimware_Read(Storage_FirmwareType_List type, uint32_t addr_offset, uint8_t *p_
1824:System/storage/Storage.c **** {
1825:System/storage/Storage.c ****     uint32_t base_addr = 0;
1826:System/storage/Storage.c ****     uint32_t firmware_size = 0;
1827:System/storage/Storage.c ****     uint32_t read_addr = 0;
1828:System/storage/Storage.c ****     uint32_t section_addr = 0;
1829:System/storage/Storage.c ****     uint32_t read_size = 0;
1830:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
1831:System/storage/Storage.c ****     dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
1832:System/storage/Storage.c **** 
1833:System/storage/Storage.c ****     if (dev && p_data && size)
1834:System/storage/Storage.c ****     {
1835:System/storage/Storage.c ****         switch ((uint8_t)type)
1836:System/storage/Storage.c ****         {
1837:System/storage/Storage.c ****             case Firmware_App:
1838:System/storage/Storage.c ****                 base_addr = App_Firmware_Addr;
1839:System/storage/Storage.c ****                 firmware_size = App_Firmware_Size;
1840:System/storage/Storage.c ****                 break;
1841:System/storage/Storage.c **** 
1842:System/storage/Storage.c ****             case Firmware_Boot:
1843:System/storage/Storage.c ****                 base_addr = Boot_Firmware_Addr;
1844:System/storage/Storage.c ****                 firmware_size = Boot_Firmware_Size;
1845:System/storage/Storage.c ****                 break;
1846:System/storage/Storage.c **** 
1847:System/storage/Storage.c ****             default: return false;
1848:System/storage/Storage.c ****         }
1849:System/storage/Storage.c ****         
1850:System/storage/Storage.c ****         read_addr = addr_offset + base_addr;
1851:System/storage/Storage.c ****         while (true)
1852:System/storage/Storage.c ****         {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 42


1853:System/storage/Storage.c ****             section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_DevW25Qxx_OBJ(
1854:System/storage/Storage.c ****             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), section_addr, 
1855:System/storage/Storage.c ****                 return false;
1856:System/storage/Storage.c **** 
1857:System/storage/Storage.c ****             if ((read_addr + size) > (section_addr + Storage_TabSize))
1858:System/storage/Storage.c ****             {
1859:System/storage/Storage.c ****                 read_size = Storage_TabSize - (read_addr - section_addr);
1860:System/storage/Storage.c ****                 size -= read_size;
1861:System/storage/Storage.c ****                 p_data += read_size;
1862:System/storage/Storage.c ****             }
1863:System/storage/Storage.c ****             else
1864:System/storage/Storage.c ****             {
1865:System/storage/Storage.c ****                 read_size = size;
1866:System/storage/Storage.c ****                 size = 0;
1867:System/storage/Storage.c ****             }
1868:System/storage/Storage.c **** 
1869:System/storage/Storage.c ****             memcpy(p_data, &flash_read_tmp[read_addr - section_addr], read_size);
1870:System/storage/Storage.c ****             read_addr = section_addr + Storage_TabSize;
1871:System/storage/Storage.c **** 
1872:System/storage/Storage.c ****             if (size == 0)
1873:System/storage/Storage.c ****                 return true;
1874:System/storage/Storage.c ****         }
1875:System/storage/Storage.c ****     }
1876:System/storage/Storage.c **** 
1877:System/storage/Storage.c ****     return false;
1878:System/storage/Storage.c **** }
1879:System/storage/Storage.c **** 
1880:System/storage/Storage.c **** static bool Storage_Firmware_Write(Storage_MediumType_List medium, Storage_FirmwareType_List type, 
1881:System/storage/Storage.c **** {
1882:System/storage/Storage.c ****     uint32_t ext_base_addr = 0;
1883:System/storage/Storage.c ****     uint32_t int_base_addr = 0;
1884:System/storage/Storage.c ****     uint32_t write_addr = 0;
1885:System/storage/Storage.c ****     uint32_t section_addr = 0;
1886:System/storage/Storage.c ****     uint32_t write_size = 0;
1887:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
1888:System/storage/Storage.c **** 
1889:System/storage/Storage.c ****     if (p_data && size)
1890:System/storage/Storage.c ****     {
1891:System/storage/Storage.c ****         switch ((uint8_t)type)
1892:System/storage/Storage.c ****         {
1893:System/storage/Storage.c ****             case Firmware_Boot:
1894:System/storage/Storage.c ****                 ext_base_addr = Boot_Firmware_Addr;
1895:System/storage/Storage.c ****                 int_base_addr = Boot_Address_Base;
1896:System/storage/Storage.c ****                 break;
1897:System/storage/Storage.c **** 
1898:System/storage/Storage.c ****             case Firmware_App:
1899:System/storage/Storage.c ****                 ext_base_addr = App_Firmware_Addr;
1900:System/storage/Storage.c ****                 int_base_addr = App_Address_Base;
1901:System/storage/Storage.c ****                 break;
1902:System/storage/Storage.c **** 
1903:System/storage/Storage.c ****             default: return false;
1904:System/storage/Storage.c ****         }
1905:System/storage/Storage.c **** 
1906:System/storage/Storage.c ****         if (medium == Internal_Flash)
1907:System/storage/Storage.c ****         {
1908:System/storage/Storage.c ****             write_addr = int_base_addr + addr_offset;
1909:System/storage/Storage.c ****             BspFlash.write(write_addr, p_data, size);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 43


1910:System/storage/Storage.c ****         }
1911:System/storage/Storage.c ****         else if (medium == External_Flash)
1912:System/storage/Storage.c ****         {
1913:System/storage/Storage.c ****             dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
1914:System/storage/Storage.c ****             if (dev == NULL)
1915:System/storage/Storage.c ****                 return false;
1916:System/storage/Storage.c **** 
1917:System/storage/Storage.c ****             switch ((uint8_t)dev->chip_type)
1918:System/storage/Storage.c ****             {
1919:System/storage/Storage.c ****                 case Storage_ChipType_W25Qxx:
1920:System/storage/Storage.c ****                     write_addr = ext_base_addr + addr_offset;
1921:System/storage/Storage.c ****                     section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_DevW25
1922:System/storage/Storage.c **** 
1923:System/storage/Storage.c ****                     while (true)
1924:System/storage/Storage.c ****                     {
1925:System/storage/Storage.c ****                         if (size == 0)
1926:System/storage/Storage.c ****                             return true;
1927:System/storage/Storage.c **** 
1928:System/storage/Storage.c ****                         /* read section first */
1929:System/storage/Storage.c ****                         memset(flash_read_tmp, 0, Storage_TabSize);
1930:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), se
1931:System/storage/Storage.c ****                             return false;
1932:System/storage/Storage.c **** 
1933:System/storage/Storage.c ****                         /* erase whole section */
1934:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(dev->dev_
1935:System/storage/Storage.c ****                             return false;
1936:System/storage/Storage.c **** 
1937:System/storage/Storage.c ****                         if ((write_addr + size) >= (section_addr + Storage_TabSize))
1938:System/storage/Storage.c ****                         {
1939:System/storage/Storage.c ****                             write_size = Storage_TabSize - (write_addr - section_addr);
1940:System/storage/Storage.c ****                             size -= write_size;
1941:System/storage/Storage.c ****                         }
1942:System/storage/Storage.c ****                         else
1943:System/storage/Storage.c ****                         {
1944:System/storage/Storage.c ****                             write_size = size;
1945:System/storage/Storage.c ****                             size = 0;
1946:System/storage/Storage.c ****                         }
1947:System/storage/Storage.c **** 
1948:System/storage/Storage.c ****                         /* update to flash */
1949:System/storage/Storage.c ****                         memcpy(&flash_read_tmp[write_addr - section_addr], p_data, write_size);
1950:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev_obj), s
1951:System/storage/Storage.c ****                             return false;
1952:System/storage/Storage.c **** 
1953:System/storage/Storage.c ****                         /* update section address */
1954:System/storage/Storage.c ****                         p_data += write_size;
1955:System/storage/Storage.c ****                         write_addr += write_size;
1956:System/storage/Storage.c ****                         section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_De
1957:System/storage/Storage.c ****                     }
1958:System/storage/Storage.c ****                     break;
1959:System/storage/Storage.c **** 
1960:System/storage/Storage.c ****                 default: return false;
1961:System/storage/Storage.c ****             }
1962:System/storage/Storage.c ****         }
1963:System/storage/Storage.c ****     }
1964:System/storage/Storage.c **** 
1965:System/storage/Storage.c ****     return false;
1966:System/storage/Storage.c **** }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 44


1967:System/storage/Storage.c **** 
1968:System/storage/Storage.c **** /************************************************** External Flash IO API Section *****************
1969:System/storage/Storage.c **** static bool Storage_External_Chip_W25Qxx_SelectPin_Ctl(bool state)
1970:System/storage/Storage.c **** {
 455              		.loc 1 1970 1 is_stmt 1 view -0
 456              		.cfi_startproc
 457              		@ args = 0, pretend = 0, frame = 0
 458              		@ frame_needed = 0, uses_anonymous_args = 0
 459              		.loc 1 1970 1 is_stmt 0 view .LVU137
 460 0000 10B5     		push	{r4, lr}
 461              	.LCFI2:
 462              		.cfi_def_cfa_offset 8
 463              		.cfi_offset 4, -8
 464              		.cfi_offset 14, -4
 465 0002 0346     		mov	r3, r0
1971:System/storage/Storage.c **** #if (FLASH_CHIP_STATE == ON)
1972:System/storage/Storage.c ****     BspGPIO.write(ExtFlash_CS_Pin, state);
 466              		.loc 1 1972 5 is_stmt 1 view .LVU138
 467              		.loc 1 1972 12 is_stmt 0 view .LVU139
 468 0004 034A     		ldr	r2, .L44
 469 0006 D469     		ldr	r4, [r2, #28]
 470              		.loc 1 1972 5 view .LVU140
 471 0008 034A     		ldr	r2, .L44+4
 472 000a 07CA     		ldm	r2, {r0, r1, r2}
 473              	.LVL51:
 474              		.loc 1 1972 5 view .LVU141
 475 000c A047     		blx	r4
 476              	.LVL52:
1973:System/storage/Storage.c ****     return true;
 477              		.loc 1 1973 5 is_stmt 1 view .LVU142
1974:System/storage/Storage.c **** #else
1975:System/storage/Storage.c ****     return false;
1976:System/storage/Storage.c **** #endif
1977:System/storage/Storage.c **** }
 478              		.loc 1 1977 1 is_stmt 0 view .LVU143
 479 000e 0120     		movs	r0, #1
 480 0010 10BD     		pop	{r4, pc}
 481              	.L45:
 482 0012 00BF     		.align	2
 483              	.L44:
 484 0014 00000000 		.word	BspGPIO
 485 0018 00000000 		.word	ExtFlash_CSPin
 486              		.cfi_endproc
 487              	.LFE172:
 489              		.section	.text.Storage_External_Chip_W25Qxx_BusTx,"ax",%progbits
 490              		.align	1
 491              		.syntax unified
 492              		.thumb
 493              		.thumb_func
 495              	Storage_External_Chip_W25Qxx_BusTx:
 496              	.LVL53:
 497              	.LFB173:
1978:System/storage/Storage.c **** 
1979:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusTx(uint8_t *p_data, uint16_t len, uint32_t time_out
1980:System/storage/Storage.c **** {
 498              		.loc 1 1980 1 is_stmt 1 view -0
 499              		.cfi_startproc
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 45


 500              		@ args = 0, pretend = 0, frame = 0
 501              		@ frame_needed = 0, uses_anonymous_args = 0
 502              		.loc 1 1980 1 is_stmt 0 view .LVU145
 503 0000 38B5     		push	{r3, r4, r5, lr}
 504              	.LCFI3:
 505              		.cfi_def_cfa_offset 16
 506              		.cfi_offset 3, -16
 507              		.cfi_offset 4, -12
 508              		.cfi_offset 5, -8
 509              		.cfi_offset 14, -4
1981:System/storage/Storage.c **** #if (FLASH_CHIP_STATE == ON)
1982:System/storage/Storage.c ****     BspSPI_NorModeConfig_TypeDef *p_cfg = To_NormalSPI_ObjPtr(Storage_Monitor.ExtBusCfg_Ptr);
 510              		.loc 1 1982 5 is_stmt 1 view .LVU146
 511              		.loc 1 1982 35 is_stmt 0 view .LVU147
 512 0002 0F4B     		ldr	r3, .L55
 513 0004 DB68     		ldr	r3, [r3, #12]
 514              	.LVL54:
1983:System/storage/Storage.c **** 
1984:System/storage/Storage.c ****     if (p_data && len && p_cfg && p_cfg->Instance && ExtFlash_Bus_InstObj)
 515              		.loc 1 1984 5 is_stmt 1 view .LVU148
 516              		.loc 1 1984 8 is_stmt 0 view .LVU149
 517 0006 88B1     		cbz	r0, .L48
 518 0008 0C46     		mov	r4, r1
 519 000a 0146     		mov	r1, r0
 520              	.LVL55:
 521              		.loc 1 1984 16 discriminator 1 view .LVU150
 522 000c 84B1     		cbz	r4, .L49
 523              		.loc 1 1984 23 discriminator 2 view .LVU151
 524 000e 8BB1     		cbz	r3, .L50
 525              		.loc 1 1984 40 discriminator 3 view .LVU152
 526 0010 DB69     		ldr	r3, [r3, #28]
 527              	.LVL56:
 528              		.loc 1 1984 32 discriminator 3 view .LVU153
 529 0012 8BB1     		cbz	r3, .L51
 530              		.loc 1 1984 51 discriminator 4 view .LVU154
 531 0014 0B4B     		ldr	r3, .L55+4
 532 0016 1B68     		ldr	r3, [r3]
 533 0018 83B1     		cbz	r3, .L52
1985:System/storage/Storage.c ****     {
1986:System/storage/Storage.c ****         if (ExtFlash_Bus_Api.trans(&ExtFlash_Bus_InstObj, p_data, len, time_out))
 534              		.loc 1 1986 9 is_stmt 1 view .LVU155
 535              		.loc 1 1986 29 is_stmt 0 view .LVU156
 536 001a 0B4B     		ldr	r3, .L55+8
 537 001c 9D68     		ldr	r5, [r3, #8]
 538              		.loc 1 1986 13 view .LVU157
 539 001e 93B2     		uxth	r3, r2
 540 0020 2246     		mov	r2, r4
 541              	.LVL57:
 542              		.loc 1 1986 13 view .LVU158
 543 0022 0848     		ldr	r0, .L55+4
 544              	.LVL58:
 545              		.loc 1 1986 13 view .LVU159
 546 0024 A847     		blx	r5
 547              	.LVL59:
 548              		.loc 1 1986 12 view .LVU160
 549 0026 20B1     		cbz	r0, .L47
1987:System/storage/Storage.c ****             return len;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 46


 550              		.loc 1 1987 20 view .LVU161
 551 0028 2046     		mov	r0, r4
 552 002a 02E0     		b	.L47
 553              	.LVL60:
 554              	.L48:
1988:System/storage/Storage.c ****     }
1989:System/storage/Storage.c **** #endif
1990:System/storage/Storage.c **** 
1991:System/storage/Storage.c ****     return 0;
 555              		.loc 1 1991 12 view .LVU162
 556 002c 0020     		movs	r0, #0
 557              	.LVL61:
 558              		.loc 1 1991 12 view .LVU163
 559 002e 00E0     		b	.L47
 560              	.LVL62:
 561              	.L49:
 562              		.loc 1 1991 12 view .LVU164
 563 0030 2046     		mov	r0, r4
 564              	.LVL63:
 565              	.L47:
1992:System/storage/Storage.c **** }
 566              		.loc 1 1992 1 view .LVU165
 567 0032 38BD     		pop	{r3, r4, r5, pc}
 568              	.LVL64:
 569              	.L50:
1991:System/storage/Storage.c **** }
 570              		.loc 1 1991 12 view .LVU166
 571 0034 0020     		movs	r0, #0
 572              	.LVL65:
1991:System/storage/Storage.c **** }
 573              		.loc 1 1991 12 view .LVU167
 574 0036 FCE7     		b	.L47
 575              	.LVL66:
 576              	.L51:
1991:System/storage/Storage.c **** }
 577              		.loc 1 1991 12 view .LVU168
 578 0038 0020     		movs	r0, #0
 579              	.LVL67:
1991:System/storage/Storage.c **** }
 580              		.loc 1 1991 12 view .LVU169
 581 003a FAE7     		b	.L47
 582              	.LVL68:
 583              	.L52:
1991:System/storage/Storage.c **** }
 584              		.loc 1 1991 12 view .LVU170
 585 003c 0020     		movs	r0, #0
 586              	.LVL69:
1991:System/storage/Storage.c **** }
 587              		.loc 1 1991 12 view .LVU171
 588 003e F8E7     		b	.L47
 589              	.L56:
 590              		.align	2
 591              	.L55:
 592 0040 00000000 		.word	.LANCHOR0
 593 0044 00000000 		.word	.LANCHOR1
 594 0048 00000000 		.word	BspSPI
 595              		.cfi_endproc
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 47


 596              	.LFE173:
 598              		.section	.text.Storage_External_Chip_W25Qxx_BusRx,"ax",%progbits
 599              		.align	1
 600              		.syntax unified
 601              		.thumb
 602              		.thumb_func
 604              	Storage_External_Chip_W25Qxx_BusRx:
 605              	.LVL70:
 606              	.LFB174:
1993:System/storage/Storage.c **** 
1994:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusRx(uint8_t *p_data, uint16_t len, uint32_t time_out
1995:System/storage/Storage.c **** {
 607              		.loc 1 1995 1 is_stmt 1 view -0
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 0
 610              		@ frame_needed = 0, uses_anonymous_args = 0
 611              		.loc 1 1995 1 is_stmt 0 view .LVU173
 612 0000 38B5     		push	{r3, r4, r5, lr}
 613              	.LCFI4:
 614              		.cfi_def_cfa_offset 16
 615              		.cfi_offset 3, -16
 616              		.cfi_offset 4, -12
 617              		.cfi_offset 5, -8
 618              		.cfi_offset 14, -4
1996:System/storage/Storage.c ****     BspSPI_NorModeConfig_TypeDef *p_cfg = To_NormalSPI_ObjPtr(Storage_Monitor.ExtBusCfg_Ptr);
 619              		.loc 1 1996 5 is_stmt 1 view .LVU174
 620              		.loc 1 1996 35 is_stmt 0 view .LVU175
 621 0002 0F4B     		ldr	r3, .L66
 622 0004 DB68     		ldr	r3, [r3, #12]
 623              	.LVL71:
1997:System/storage/Storage.c **** 
1998:System/storage/Storage.c **** #if (FLASH_CHIP_STATE == ON)
1999:System/storage/Storage.c ****     if (p_data && len && p_cfg && p_cfg->Instance && ExtFlash_Bus_InstObj)
 624              		.loc 1 1999 5 is_stmt 1 view .LVU176
 625              		.loc 1 1999 8 is_stmt 0 view .LVU177
 626 0006 88B1     		cbz	r0, .L59
 627 0008 0C46     		mov	r4, r1
 628 000a 0146     		mov	r1, r0
 629              	.LVL72:
 630              		.loc 1 1999 16 discriminator 1 view .LVU178
 631 000c 84B1     		cbz	r4, .L60
 632              		.loc 1 1999 23 discriminator 2 view .LVU179
 633 000e 8BB1     		cbz	r3, .L61
 634              		.loc 1 1999 40 discriminator 3 view .LVU180
 635 0010 DB69     		ldr	r3, [r3, #28]
 636              	.LVL73:
 637              		.loc 1 1999 32 discriminator 3 view .LVU181
 638 0012 8BB1     		cbz	r3, .L62
 639              		.loc 1 1999 51 discriminator 4 view .LVU182
 640 0014 0B4B     		ldr	r3, .L66+4
 641 0016 1B68     		ldr	r3, [r3]
 642 0018 83B1     		cbz	r3, .L63
2000:System/storage/Storage.c ****     {
2001:System/storage/Storage.c ****         if (ExtFlash_Bus_Api.receive(&ExtFlash_Bus_InstObj, p_data, len, time_out))
 643              		.loc 1 2001 9 is_stmt 1 view .LVU183
 644              		.loc 1 2001 29 is_stmt 0 view .LVU184
 645 001a 0B4B     		ldr	r3, .L66+8
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 48


 646 001c DD68     		ldr	r5, [r3, #12]
 647              		.loc 1 2001 13 view .LVU185
 648 001e 93B2     		uxth	r3, r2
 649 0020 2246     		mov	r2, r4
 650              	.LVL74:
 651              		.loc 1 2001 13 view .LVU186
 652 0022 0848     		ldr	r0, .L66+4
 653              	.LVL75:
 654              		.loc 1 2001 13 view .LVU187
 655 0024 A847     		blx	r5
 656              	.LVL76:
 657              		.loc 1 2001 12 view .LVU188
 658 0026 20B1     		cbz	r0, .L58
2002:System/storage/Storage.c ****             return len;
 659              		.loc 1 2002 20 view .LVU189
 660 0028 2046     		mov	r0, r4
 661 002a 02E0     		b	.L58
 662              	.LVL77:
 663              	.L59:
2003:System/storage/Storage.c ****     }
2004:System/storage/Storage.c **** #endif
2005:System/storage/Storage.c **** 
2006:System/storage/Storage.c ****     return 0;
 664              		.loc 1 2006 12 view .LVU190
 665 002c 0020     		movs	r0, #0
 666              	.LVL78:
 667              		.loc 1 2006 12 view .LVU191
 668 002e 00E0     		b	.L58
 669              	.LVL79:
 670              	.L60:
 671              		.loc 1 2006 12 view .LVU192
 672 0030 2046     		mov	r0, r4
 673              	.LVL80:
 674              	.L58:
2007:System/storage/Storage.c **** }
 675              		.loc 1 2007 1 view .LVU193
 676 0032 38BD     		pop	{r3, r4, r5, pc}
 677              	.LVL81:
 678              	.L61:
2006:System/storage/Storage.c **** }
 679              		.loc 1 2006 12 view .LVU194
 680 0034 0020     		movs	r0, #0
 681              	.LVL82:
2006:System/storage/Storage.c **** }
 682              		.loc 1 2006 12 view .LVU195
 683 0036 FCE7     		b	.L58
 684              	.LVL83:
 685              	.L62:
2006:System/storage/Storage.c **** }
 686              		.loc 1 2006 12 view .LVU196
 687 0038 0020     		movs	r0, #0
 688              	.LVL84:
2006:System/storage/Storage.c **** }
 689              		.loc 1 2006 12 view .LVU197
 690 003a FAE7     		b	.L58
 691              	.LVL85:
 692              	.L63:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 49


2006:System/storage/Storage.c **** }
 693              		.loc 1 2006 12 view .LVU198
 694 003c 0020     		movs	r0, #0
 695              	.LVL86:
2006:System/storage/Storage.c **** }
 696              		.loc 1 2006 12 view .LVU199
 697 003e F8E7     		b	.L58
 698              	.L67:
 699              		.align	2
 700              	.L66:
 701 0040 00000000 		.word	.LANCHOR0
 702 0044 00000000 		.word	.LANCHOR1
 703 0048 00000000 		.word	BspSPI
 704              		.cfi_endproc
 705              	.LFE174:
 707              		.section	.text.Storage_External_Chip_W25Qxx_BusTrans,"ax",%progbits
 708              		.align	1
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 713              	Storage_External_Chip_W25Qxx_BusTrans:
 714              	.LVL87:
 715              	.LFB175:
2008:System/storage/Storage.c **** 
2009:System/storage/Storage.c **** static uint16_t Storage_External_Chip_W25Qxx_BusTrans(uint8_t *tx, uint8_t *rx, uint16_t len, uint3
2010:System/storage/Storage.c **** {
 716              		.loc 1 2010 1 is_stmt 1 view -0
 717              		.cfi_startproc
 718              		@ args = 0, pretend = 0, frame = 0
 719              		@ frame_needed = 0, uses_anonymous_args = 0
 720              		.loc 1 2010 1 is_stmt 0 view .LVU201
 721 0000 70B5     		push	{r4, r5, r6, lr}
 722              	.LCFI5:
 723              		.cfi_def_cfa_offset 16
 724              		.cfi_offset 4, -16
 725              		.cfi_offset 5, -12
 726              		.cfi_offset 6, -8
 727              		.cfi_offset 14, -4
 728 0002 82B0     		sub	sp, sp, #8
 729              	.LCFI6:
 730              		.cfi_def_cfa_offset 24
 731 0004 1546     		mov	r5, r2
2011:System/storage/Storage.c ****     BspSPI_NorModeConfig_TypeDef *p_cfg = To_NormalSPI_ObjPtr(Storage_Monitor.ExtBusCfg_Ptr);
 732              		.loc 1 2011 5 is_stmt 1 view .LVU202
 733              		.loc 1 2011 35 is_stmt 0 view .LVU203
 734 0006 124C     		ldr	r4, .L78
 735 0008 E268     		ldr	r2, [r4, #12]
 736              	.LVL88:
2012:System/storage/Storage.c **** 
2013:System/storage/Storage.c **** #if (FLASH_CHIP_STATE == ON)
2014:System/storage/Storage.c ****     if (tx && rx && len && p_cfg && p_cfg->Instance && ExtFlash_Bus_InstObj)
 737              		.loc 1 2014 5 is_stmt 1 view .LVU204
 738              		.loc 1 2014 8 is_stmt 0 view .LVU205
 739 000a 98B1     		cbz	r0, .L70
 740              		.loc 1 2014 12 discriminator 1 view .LVU206
 741 000c A9B1     		cbz	r1, .L71
 742              		.loc 1 2014 18 discriminator 2 view .LVU207
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 50


 743 000e B5B1     		cbz	r5, .L72
 744              		.loc 1 2014 25 discriminator 3 view .LVU208
 745 0010 BAB1     		cbz	r2, .L73
 746              		.loc 1 2014 42 discriminator 4 view .LVU209
 747 0012 D269     		ldr	r2, [r2, #28]
 748              	.LVL89:
 749              		.loc 1 2014 34 discriminator 4 view .LVU210
 750 0014 BAB1     		cbz	r2, .L74
 751              		.loc 1 2014 53 discriminator 5 view .LVU211
 752 0016 0F4A     		ldr	r2, .L78+4
 753 0018 1268     		ldr	r2, [r2]
 754 001a B2B1     		cbz	r2, .L75
2015:System/storage/Storage.c ****     {
2016:System/storage/Storage.c ****         if (ExtFlash_Bus_Api.trans_receive(&ExtFlash_Bus_InstObj, tx, rx, len, time_out))
 755              		.loc 1 2016 9 is_stmt 1 view .LVU212
 756              		.loc 1 2016 29 is_stmt 0 view .LVU213
 757 001c 0E4A     		ldr	r2, .L78+8
 758 001e 1669     		ldr	r6, [r2, #16]
 759              		.loc 1 2016 13 view .LVU214
 760 0020 9BB2     		uxth	r3, r3
 761              	.LVL90:
 762              		.loc 1 2016 13 view .LVU215
 763 0022 0093     		str	r3, [sp]
 764 0024 2B46     		mov	r3, r5
 765 0026 0A46     		mov	r2, r1
 766 0028 0146     		mov	r1, r0
 767              	.LVL91:
 768              		.loc 1 2016 13 view .LVU216
 769 002a 0A48     		ldr	r0, .L78+4
 770              	.LVL92:
 771              		.loc 1 2016 13 view .LVU217
 772 002c B047     		blx	r6
 773              	.LVL93:
 774              		.loc 1 2016 12 view .LVU218
 775 002e 10B1     		cbz	r0, .L69
2017:System/storage/Storage.c ****             return len;
 776              		.loc 1 2017 20 view .LVU219
 777 0030 2846     		mov	r0, r5
 778 0032 00E0     		b	.L69
 779              	.LVL94:
 780              	.L70:
2018:System/storage/Storage.c ****     }
2019:System/storage/Storage.c **** #endif
2020:System/storage/Storage.c **** 
2021:System/storage/Storage.c ****     return 0;
 781              		.loc 1 2021 12 view .LVU220
 782 0034 0020     		movs	r0, #0
 783              	.LVL95:
 784              	.L69:
2022:System/storage/Storage.c **** }
 785              		.loc 1 2022 1 view .LVU221
 786 0036 02B0     		add	sp, sp, #8
 787              	.LCFI7:
 788              		.cfi_remember_state
 789              		.cfi_def_cfa_offset 16
 790              		@ sp needed
 791 0038 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 51


 792              	.LVL96:
 793              	.L71:
 794              	.LCFI8:
 795              		.cfi_restore_state
2021:System/storage/Storage.c **** }
 796              		.loc 1 2021 12 view .LVU222
 797 003a 0020     		movs	r0, #0
 798              	.LVL97:
2021:System/storage/Storage.c **** }
 799              		.loc 1 2021 12 view .LVU223
 800 003c FBE7     		b	.L69
 801              	.LVL98:
 802              	.L72:
2021:System/storage/Storage.c **** }
 803              		.loc 1 2021 12 view .LVU224
 804 003e 2846     		mov	r0, r5
 805              	.LVL99:
2021:System/storage/Storage.c **** }
 806              		.loc 1 2021 12 view .LVU225
 807 0040 F9E7     		b	.L69
 808              	.LVL100:
 809              	.L73:
2021:System/storage/Storage.c **** }
 810              		.loc 1 2021 12 view .LVU226
 811 0042 0020     		movs	r0, #0
 812              	.LVL101:
2021:System/storage/Storage.c **** }
 813              		.loc 1 2021 12 view .LVU227
 814 0044 F7E7     		b	.L69
 815              	.LVL102:
 816              	.L74:
2021:System/storage/Storage.c **** }
 817              		.loc 1 2021 12 view .LVU228
 818 0046 0020     		movs	r0, #0
 819              	.LVL103:
2021:System/storage/Storage.c **** }
 820              		.loc 1 2021 12 view .LVU229
 821 0048 F5E7     		b	.L69
 822              	.LVL104:
 823              	.L75:
2021:System/storage/Storage.c **** }
 824              		.loc 1 2021 12 view .LVU230
 825 004a 0020     		movs	r0, #0
 826              	.LVL105:
2021:System/storage/Storage.c **** }
 827              		.loc 1 2021 12 view .LVU231
 828 004c F3E7     		b	.L69
 829              	.L79:
 830 004e 00BF     		.align	2
 831              	.L78:
 832 0050 00000000 		.word	.LANCHOR0
 833 0054 00000000 		.word	.LANCHOR1
 834 0058 00000000 		.word	BspSPI
 835              		.cfi_endproc
 836              	.LFE175:
 838              		.section	.text.Storage_ExtFlash_ParaSec_Erase,"ax",%progbits
 839              		.align	1
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 52


 840              		.syntax unified
 841              		.thumb
 842              		.thumb_func
 844              	Storage_ExtFlash_ParaSec_Erase:
 845              	.LVL106:
 846              	.LFB178:
2023:System/storage/Storage.c **** 
2024:System/storage/Storage.c **** /************************************************** External Flash Parameter IO API Section *******
2025:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Read(uint32_t addr_offset, uint8_t *p_data, uint32_t len)
2026:System/storage/Storage.c **** {
2027:System/storage/Storage.c ****     uint32_t read_start_addr = 0;
2028:System/storage/Storage.c ****     uint32_t flash_end_addr = 0;
2029:System/storage/Storage.c ****     uint32_t section_start_addr = 0;
2030:System/storage/Storage.c ****     uint32_t next_read_addr = 0;
2031:System/storage/Storage.c ****     uint32_t section_size = 0;
2032:System/storage/Storage.c ****     uint32_t read_offset = 0;
2033:System/storage/Storage.c ****     uint32_t read_len = len;
2034:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
2035:System/storage/Storage.c **** 
2036:System/storage/Storage.c ****     if ((Storage_Monitor.ExtDev_ptr != NULL) && p_data && len)
2037:System/storage/Storage.c ****     {
2038:System/storage/Storage.c ****         read_start_addr = Storage_Monitor.external_info.base_addr + addr_offset;       
2039:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
2040:System/storage/Storage.c **** 
2041:System/storage/Storage.c ****         switch((uint8_t)dev->chip_type)
2042:System/storage/Storage.c ****         {
2043:System/storage/Storage.c ****             case Storage_ChipType_W25Qxx:
2044:System/storage/Storage.c ****                 if (dev->dev_api && dev->dev_obj)
2045:System/storage/Storage.c ****                 {
2046:System/storage/Storage.c ****                     section_size = To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->dev_o
2047:System/storage/Storage.c ****                     /* get w25qxx device info */
2048:System/storage/Storage.c ****                     /* address check */
2049:System/storage/Storage.c ****                     flash_end_addr = To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->dev
2050:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
2051:System/storage/Storage.c ****                         return false;
2052:System/storage/Storage.c **** 
2053:System/storage/Storage.c ****                     /* range check */
2054:System/storage/Storage.c ****                     flash_end_addr += To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->de
2055:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
2056:System/storage/Storage.c ****                         return false;
2057:System/storage/Storage.c **** 
2058:System/storage/Storage.c ****                     if (section_size)
2059:System/storage/Storage.c ****                     {
2060:System/storage/Storage.c ****                         section_start_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr
2061:System/storage/Storage.c ****                         read_offset = read_start_addr - section_start_addr;
2062:System/storage/Storage.c ****                         if (section_size > sizeof(flash_read_tmp))
2063:System/storage/Storage.c ****                             return false;
2064:System/storage/Storage.c **** 
2065:System/storage/Storage.c ****                         while(true)
2066:System/storage/Storage.c ****                         {
2067:System/storage/Storage.c ****                             /* circumstances 1: store data size less than flash sector size and onl
2068:System/storage/Storage.c ****                             /* circumstances 2: store data size less than flash sector length but n
2069:System/storage/Storage.c ****                             /* circumstances 3: store data size large than flash sector length */
2070:System/storage/Storage.c ****                             if (read_offset + read_len > section_size)
2071:System/storage/Storage.c ****                                 read_len = section_size - read_offset;
2072:System/storage/Storage.c **** 
2073:System/storage/Storage.c ****                             /* read whole section */
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 53


2074:System/storage/Storage.c ****                             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj)
2075:System/storage/Storage.c ****                                 return false;
2076:System/storage/Storage.c ****                         
2077:System/storage/Storage.c ****                             memcpy(p_data, flash_read_tmp + read_offset, read_len);
2078:System/storage/Storage.c ****                             memset(flash_read_tmp, 0, section_size);
2079:System/storage/Storage.c **** 
2080:System/storage/Storage.c ****                             len -= read_len;
2081:System/storage/Storage.c ****                             if (len == 0)
2082:System/storage/Storage.c ****                                 return true;
2083:System/storage/Storage.c ****                         
2084:System/storage/Storage.c ****                             read_offset = 0;
2085:System/storage/Storage.c ****                             next_read_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr
2086:System/storage/Storage.c ****                             if (next_read_addr == section_start_addr)
2087:System/storage/Storage.c ****                                 read_offset = read_len;
2088:System/storage/Storage.c ****                             
2089:System/storage/Storage.c ****                             p_data += read_len;
2090:System/storage/Storage.c ****                             read_len = len;
2091:System/storage/Storage.c ****                             section_start_addr = next_read_addr;
2092:System/storage/Storage.c ****                         }
2093:System/storage/Storage.c ****                     }
2094:System/storage/Storage.c ****                 }
2095:System/storage/Storage.c ****                 break;
2096:System/storage/Storage.c **** 
2097:System/storage/Storage.c ****             default:
2098:System/storage/Storage.c ****                 return false;
2099:System/storage/Storage.c ****         }
2100:System/storage/Storage.c ****     }
2101:System/storage/Storage.c **** 
2102:System/storage/Storage.c ****     return false;
2103:System/storage/Storage.c **** }
2104:System/storage/Storage.c **** 
2105:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Write(uint32_t addr_offset, uint8_t *p_data, uint32_t len)
2106:System/storage/Storage.c **** {
2107:System/storage/Storage.c ****     uint32_t write_start_addr = 0;
2108:System/storage/Storage.c ****     uint32_t flash_end_addr = 0;
2109:System/storage/Storage.c ****     uint32_t section_start_addr = 0;
2110:System/storage/Storage.c ****     uint32_t next_write_addr = 0;
2111:System/storage/Storage.c ****     uint32_t section_size = 0;
2112:System/storage/Storage.c ****     uint32_t write_offset = 0;
2113:System/storage/Storage.c ****     uint32_t write_len = len;
2114:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
2115:System/storage/Storage.c ****     DevW25Qxx_Error_List state = DevW25Qxx_Ok;
2116:System/storage/Storage.c **** 
2117:System/storage/Storage.c ****     if ((Storage_Monitor.ExtDev_ptr != NULL) && p_data && len)
2118:System/storage/Storage.c ****     {
2119:System/storage/Storage.c ****         write_start_addr = Storage_Monitor.external_info.base_addr + addr_offset;
2120:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
2121:System/storage/Storage.c ****     
2122:System/storage/Storage.c ****         switch((uint8_t)dev->chip_type)
2123:System/storage/Storage.c ****         {
2124:System/storage/Storage.c ****             case Storage_ChipType_W25Qxx:
2125:System/storage/Storage.c ****                 if (dev->dev_api && dev->dev_obj)
2126:System/storage/Storage.c ****                 {
2127:System/storage/Storage.c ****                     section_size = To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->dev_o
2128:System/storage/Storage.c ****                     /* get w25qxx device info */
2129:System/storage/Storage.c ****                     /* address check */
2130:System/storage/Storage.c ****                     flash_end_addr = To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->dev
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 54


2131:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
2132:System/storage/Storage.c ****                         return false;
2133:System/storage/Storage.c **** 
2134:System/storage/Storage.c ****                     /* range check */
2135:System/storage/Storage.c ****                     flash_end_addr += To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(dev->de
2136:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
2137:System/storage/Storage.c ****                         return false;
2138:System/storage/Storage.c ****                     
2139:System/storage/Storage.c ****                     if (section_size)
2140:System/storage/Storage.c ****                     {
2141:System/storage/Storage.c ****                         section_start_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr
2142:System/storage/Storage.c ****                         write_offset = write_start_addr - section_start_addr;
2143:System/storage/Storage.c ****                         if (section_size > sizeof(flash_write_tmp))
2144:System/storage/Storage.c ****                             return false;
2145:System/storage/Storage.c **** 
2146:System/storage/Storage.c ****                         while(true)
2147:System/storage/Storage.c ****                         {
2148:System/storage/Storage.c ****                             /* circumstances 1: store data size less than flash sector size and onl
2149:System/storage/Storage.c ****                             /* circumstances 2: store data size less than flash sector length but n
2150:System/storage/Storage.c ****                             /* circumstances 3: store data size large than flash sector length */
2151:System/storage/Storage.c ****                             /* read whole section */
2152:System/storage/Storage.c ****                             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj)
2153:System/storage/Storage.c ****                                 return false;
2154:System/storage/Storage.c **** 
2155:System/storage/Storage.c ****                             /* erase whole section */
2156:System/storage/Storage.c ****                             if (To_DevW25Qxx_API(dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(dev->
2157:System/storage/Storage.c ****                                 return false;
2158:System/storage/Storage.c **** 
2159:System/storage/Storage.c ****                             /* update whole section */
2160:System/storage/Storage.c ****                             if (write_offset + write_len > section_size)
2161:System/storage/Storage.c ****                                 write_len = section_size - write_offset;
2162:System/storage/Storage.c ****                             
2163:System/storage/Storage.c ****                             /* copy data to section data read out */
2164:System/storage/Storage.c ****                             memcpy(flash_write_tmp + write_offset, p_data, write_len);
2165:System/storage/Storage.c **** 
2166:System/storage/Storage.c ****                             state = To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev
2167:System/storage/Storage.c **** 
2168:System/storage/Storage.c ****                             /* clear cache buff */
2169:System/storage/Storage.c ****                             memset(flash_write_tmp, 0, section_size);
2170:System/storage/Storage.c ****                             
2171:System/storage/Storage.c ****                             len -= write_len;
2172:System/storage/Storage.c ****                             if (state == DevW25Qxx_Ok)
2173:System/storage/Storage.c ****                             {
2174:System/storage/Storage.c ****                                 if (len == 0)
2175:System/storage/Storage.c ****                                     return true;
2176:System/storage/Storage.c ****                             }
2177:System/storage/Storage.c ****                             else
2178:System/storage/Storage.c ****                                 return false;
2179:System/storage/Storage.c **** 
2180:System/storage/Storage.c ****                             write_offset = 0;
2181:System/storage/Storage.c ****                             next_write_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_add
2182:System/storage/Storage.c ****                             if (next_write_addr == section_start_addr)
2183:System/storage/Storage.c ****                                 write_offset = write_len;
2184:System/storage/Storage.c **** 
2185:System/storage/Storage.c ****                             p_data += write_len;
2186:System/storage/Storage.c ****                             write_len = len;
2187:System/storage/Storage.c ****                             section_start_addr = next_write_addr; 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 55


2188:System/storage/Storage.c ****                         }
2189:System/storage/Storage.c ****                     }
2190:System/storage/Storage.c ****                 }
2191:System/storage/Storage.c ****                 return false;
2192:System/storage/Storage.c **** 
2193:System/storage/Storage.c ****             default:
2194:System/storage/Storage.c ****                 return false;
2195:System/storage/Storage.c ****         }
2196:System/storage/Storage.c ****     }
2197:System/storage/Storage.c **** 
2198:System/storage/Storage.c ****     return false;
2199:System/storage/Storage.c **** }
2200:System/storage/Storage.c **** 
2201:System/storage/Storage.c **** static bool Storage_ExtFlash_ParaSec_Erase(uint32_t addr_offset, uint32_t len)
2202:System/storage/Storage.c **** {
 847              		.loc 1 2202 1 is_stmt 1 view -0
 848              		.cfi_startproc
 849              		@ args = 0, pretend = 0, frame = 32
 850              		@ frame_needed = 0, uses_anonymous_args = 0
 851              		.loc 1 2202 1 is_stmt 0 view .LVU233
 852 0000 30B5     		push	{r4, r5, lr}
 853              	.LCFI9:
 854              		.cfi_def_cfa_offset 12
 855              		.cfi_offset 4, -12
 856              		.cfi_offset 5, -8
 857              		.cfi_offset 14, -4
 858 0002 89B0     		sub	sp, sp, #36
 859              	.LCFI10:
 860              		.cfi_def_cfa_offset 48
2203:System/storage/Storage.c ****     uint32_t erase_start_addr = 0;
 861              		.loc 1 2203 5 is_stmt 1 view .LVU234
 862              	.LVL107:
2204:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
 863              		.loc 1 2204 5 view .LVU235
2205:System/storage/Storage.c **** 
2206:System/storage/Storage.c ****     if ((Storage_Monitor.ExtDev_ptr != NULL) && len)
 864              		.loc 1 2206 5 view .LVU236
 865              		.loc 1 2206 25 is_stmt 0 view .LVU237
 866 0004 154B     		ldr	r3, .L90
 867 0006 9C68     		ldr	r4, [r3, #8]
 868              		.loc 1 2206 8 view .LVU238
 869 0008 C4B1     		cbz	r4, .L82
 870              		.loc 1 2206 46 discriminator 1 view .LVU239
 871 000a C9B1     		cbz	r1, .L83
2207:System/storage/Storage.c ****     {
2208:System/storage/Storage.c ****         /* erase external flash sector */
2209:System/storage/Storage.c ****         erase_start_addr = Storage_Monitor.external_info.base_addr + addr_offset;
 872              		.loc 1 2209 9 is_stmt 1 view .LVU240
 873              		.loc 1 2209 57 is_stmt 0 view .LVU241
 874 000c D3F83610 		ldr	r1, [r3, #54]	@ unaligned
 875              	.LVL108:
 876              		.loc 1 2209 26 view .LVU242
 877 0010 0D18     		adds	r5, r1, r0
 878              	.LVL109:
2210:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 879              		.loc 1 2210 9 is_stmt 1 view .LVU243
2211:System/storage/Storage.c ****     
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 56


2212:System/storage/Storage.c ****         switch((uint8_t)dev->chip_type)
 880              		.loc 1 2212 9 view .LVU244
 881              		.loc 1 2212 28 is_stmt 0 view .LVU245
 882 0012 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 883              		.loc 1 2212 9 view .LVU246
 884 0014 012B     		cmp	r3, #1
 885 0016 16D1     		bne	.L84
2213:System/storage/Storage.c ****         {
2214:System/storage/Storage.c ****             case Storage_ChipType_W25Qxx:
2215:System/storage/Storage.c ****                 if (dev->dev_api && dev->dev_obj)
 886              		.loc 1 2215 17 is_stmt 1 view .LVU247
 887              		.loc 1 2215 24 is_stmt 0 view .LVU248
 888 0018 236B     		ldr	r3, [r4, #48]
 889              		.loc 1 2215 20 view .LVU249
 890 001a B3B1     		cbz	r3, .L85
 891              		.loc 1 2215 40 discriminator 1 view .LVU250
 892 001c E16A     		ldr	r1, [r4, #44]
 893              		.loc 1 2215 34 discriminator 1 view .LVU251
 894 001e B1B1     		cbz	r1, .L86
2216:System/storage/Storage.c ****                 {
2217:System/storage/Storage.c ****                     /* get w25qxx device info */
2218:System/storage/Storage.c ****                     /* address check */
2219:System/storage/Storage.c ****                     if (erase_start_addr < To_DevW25Qxx_API(dev->dev_api)->info(To_DevW25Qxx_OBJ(de
 895              		.loc 1 2219 21 is_stmt 1 view .LVU252
 896              		.loc 1 2219 74 is_stmt 0 view .LVU253
 897 0020 DB69     		ldr	r3, [r3, #28]
 898              		.loc 1 2219 44 view .LVU254
 899 0022 01A8     		add	r0, sp, #4
 900              	.LVL110:
 901              		.loc 1 2219 44 view .LVU255
 902 0024 9847     		blx	r3
 903              	.LVL111:
 904              		.loc 1 2219 112 view .LVU256
 905 0026 029B     		ldr	r3, [sp, #8]
 906              		.loc 1 2219 24 view .LVU257
 907 0028 AB42     		cmp	r3, r5
 908 002a 12D8     		bhi	.L87
2220:System/storage/Storage.c ****                         return false;
2221:System/storage/Storage.c **** 
2222:System/storage/Storage.c ****                     /* W25Qxx device read */
2223:System/storage/Storage.c ****                     if (To_DevW25Qxx_API(dev->dev_api)->erase_sector(To_DevW25Qxx_OBJ(dev->dev_obj)
 909              		.loc 1 2223 21 is_stmt 1 view .LVU258
 910              		.loc 1 2223 25 is_stmt 0 view .LVU259
 911 002c 236B     		ldr	r3, [r4, #48]
 912              		.loc 1 2223 55 view .LVU260
 913 002e 5B69     		ldr	r3, [r3, #20]
 914              		.loc 1 2223 25 view .LVU261
 915 0030 2946     		mov	r1, r5
 916 0032 E06A     		ldr	r0, [r4, #44]
 917 0034 9847     		blx	r3
 918              	.LVL112:
 919              		.loc 1 2223 24 view .LVU262
 920 0036 70B1     		cbz	r0, .L88
2224:System/storage/Storage.c ****                         return true;
2225:System/storage/Storage.c ****                 }
2226:System/storage/Storage.c ****                 break;
2227:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 57


2228:System/storage/Storage.c ****             default:
2229:System/storage/Storage.c ****                 return false;
2230:System/storage/Storage.c ****         }
2231:System/storage/Storage.c ****     }
2232:System/storage/Storage.c ****     
2233:System/storage/Storage.c ****     return false;
 921              		.loc 1 2233 12 view .LVU263
 922 0038 0020     		movs	r0, #0
 923 003a 02E0     		b	.L81
 924              	.LVL113:
 925              	.L82:
 926              		.loc 1 2233 12 view .LVU264
 927 003c 0020     		movs	r0, #0
 928              	.LVL114:
 929              		.loc 1 2233 12 view .LVU265
 930 003e 00E0     		b	.L81
 931              	.LVL115:
 932              	.L83:
 933              		.loc 1 2233 12 view .LVU266
 934 0040 0020     		movs	r0, #0
 935              	.LVL116:
 936              	.L81:
2234:System/storage/Storage.c **** }
 937              		.loc 1 2234 1 view .LVU267
 938 0042 09B0     		add	sp, sp, #36
 939              	.LCFI11:
 940              		.cfi_remember_state
 941              		.cfi_def_cfa_offset 12
 942              		@ sp needed
 943 0044 30BD     		pop	{r4, r5, pc}
 944              	.LVL117:
 945              	.L84:
 946              	.LCFI12:
 947              		.cfi_restore_state
2229:System/storage/Storage.c ****         }
 948              		.loc 1 2229 24 view .LVU268
 949 0046 0020     		movs	r0, #0
 950              	.LVL118:
2229:System/storage/Storage.c ****         }
 951              		.loc 1 2229 24 view .LVU269
 952 0048 FBE7     		b	.L81
 953              	.LVL119:
 954              	.L85:
2233:System/storage/Storage.c **** }
 955              		.loc 1 2233 12 view .LVU270
 956 004a 0020     		movs	r0, #0
 957              	.LVL120:
2233:System/storage/Storage.c **** }
 958              		.loc 1 2233 12 view .LVU271
 959 004c F9E7     		b	.L81
 960              	.LVL121:
 961              	.L86:
2233:System/storage/Storage.c **** }
 962              		.loc 1 2233 12 view .LVU272
 963 004e 0020     		movs	r0, #0
 964              	.LVL122:
2233:System/storage/Storage.c **** }
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 58


 965              		.loc 1 2233 12 view .LVU273
 966 0050 F7E7     		b	.L81
 967              	.L87:
2220:System/storage/Storage.c **** 
 968              		.loc 1 2220 32 view .LVU274
 969 0052 0020     		movs	r0, #0
 970 0054 F5E7     		b	.L81
 971              	.L88:
2224:System/storage/Storage.c ****                 }
 972              		.loc 1 2224 32 view .LVU275
 973 0056 0120     		movs	r0, #1
 974 0058 F3E7     		b	.L81
 975              	.L91:
 976 005a 00BF     		.align	2
 977              	.L90:
 978 005c 00000000 		.word	.LANCHOR0
 979              		.cfi_endproc
 980              	.LFE178:
 982              		.section	.text.Storage_Firmware_Write,"ax",%progbits
 983              		.align	1
 984              		.syntax unified
 985              		.thumb
 986              		.thumb_func
 988              	Storage_Firmware_Write:
 989              	.LVL123:
 990              	.LFB171:
1881:System/storage/Storage.c ****     uint32_t ext_base_addr = 0;
 991              		.loc 1 1881 1 is_stmt 1 view -0
 992              		.cfi_startproc
 993              		@ args = 4, pretend = 0, frame = 0
 994              		@ frame_needed = 0, uses_anonymous_args = 0
1881:System/storage/Storage.c ****     uint32_t ext_base_addr = 0;
 995              		.loc 1 1881 1 is_stmt 0 view .LVU277
 996 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 997              	.LCFI13:
 998              		.cfi_def_cfa_offset 40
 999              		.cfi_offset 3, -40
 1000              		.cfi_offset 4, -36
 1001              		.cfi_offset 5, -32
 1002              		.cfi_offset 6, -28
 1003              		.cfi_offset 7, -24
 1004              		.cfi_offset 8, -20
 1005              		.cfi_offset 9, -16
 1006              		.cfi_offset 10, -12
 1007              		.cfi_offset 11, -8
 1008              		.cfi_offset 14, -4
 1009 0004 BDF82840 		ldrh	r4, [sp, #40]
1882:System/storage/Storage.c ****     uint32_t int_base_addr = 0;
 1010              		.loc 1 1882 5 is_stmt 1 view .LVU278
 1011              	.LVL124:
1883:System/storage/Storage.c ****     uint32_t write_addr = 0;
 1012              		.loc 1 1883 5 view .LVU279
1884:System/storage/Storage.c ****     uint32_t section_addr = 0;
 1013              		.loc 1 1884 5 view .LVU280
1885:System/storage/Storage.c ****     uint32_t write_size = 0;
 1014              		.loc 1 1885 5 view .LVU281
1886:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 59


 1015              		.loc 1 1886 5 view .LVU282
1887:System/storage/Storage.c **** 
 1016              		.loc 1 1887 5 view .LVU283
1889:System/storage/Storage.c ****     {
 1017              		.loc 1 1889 5 view .LVU284
1889:System/storage/Storage.c ****     {
 1018              		.loc 1 1889 8 is_stmt 0 view .LVU285
 1019 0008 002B     		cmp	r3, #0
 1020 000a 71D0     		beq	.L100
 1021 000c 9446     		mov	ip, r2
 1022 000e 1D46     		mov	r5, r3
1889:System/storage/Storage.c ****     {
 1023              		.loc 1 1889 16 discriminator 1 view .LVU286
 1024 0010 002C     		cmp	r4, #0
 1025 0012 6FD0     		beq	.L101
1891:System/storage/Storage.c ****         {
 1026              		.loc 1 1891 9 is_stmt 1 view .LVU287
 1027 0014 0129     		cmp	r1, #1
 1028 0016 03D0     		beq	.L94
 1029 0018 0229     		cmp	r1, #2
 1030 001a 0ED0     		beq	.L95
 1031 001c 0020     		movs	r0, #0
 1032              	.LVL125:
1891:System/storage/Storage.c ****         {
 1033              		.loc 1 1891 9 is_stmt 0 view .LVU288
 1034 001e 6AE0     		b	.L93
 1035              	.LVL126:
 1036              	.L94:
1894:System/storage/Storage.c ****                 int_base_addr = Boot_Address_Base;
 1037              		.loc 1 1894 17 is_stmt 1 view .LVU289
1895:System/storage/Storage.c ****                 break;
 1038              		.loc 1 1895 17 view .LVU290
1895:System/storage/Storage.c ****                 break;
 1039              		.loc 1 1895 31 is_stmt 0 view .LVU291
 1040 0020 3C4B     		ldr	r3, .L112
 1041              	.LVL127:
1896:System/storage/Storage.c **** 
 1042              		.loc 1 1896 17 is_stmt 1 view .LVU292
1894:System/storage/Storage.c ****                 int_base_addr = Boot_Address_Base;
 1043              		.loc 1 1894 31 is_stmt 0 view .LVU293
 1044 0022 4FF00008 		mov	r8, #0
 1045              	.LVL128:
 1046              	.L96:
1906:System/storage/Storage.c ****         {
 1047              		.loc 1 1906 9 is_stmt 1 view .LVU294
1906:System/storage/Storage.c ****         {
 1048              		.loc 1 1906 12 is_stmt 0 view .LVU295
 1049 0026 60B9     		cbnz	r0, .L97
1908:System/storage/Storage.c ****             BspFlash.write(write_addr, p_data, size);
 1050              		.loc 1 1908 13 is_stmt 1 view .LVU296
 1051              	.LVL129:
1909:System/storage/Storage.c ****         }
 1052              		.loc 1 1909 13 view .LVU297
1909:System/storage/Storage.c ****         }
 1053              		.loc 1 1909 21 is_stmt 0 view .LVU298
 1054 0028 3B4A     		ldr	r2, .L112+4
 1055              	.LVL130:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 60


1909:System/storage/Storage.c ****         }
 1056              		.loc 1 1909 21 view .LVU299
 1057 002a 5669     		ldr	r6, [r2, #20]
1909:System/storage/Storage.c ****         }
 1058              		.loc 1 1909 13 view .LVU300
 1059 002c 2246     		mov	r2, r4
 1060 002e 2946     		mov	r1, r5
 1061              	.LVL131:
1909:System/storage/Storage.c ****         }
 1062              		.loc 1 1909 13 view .LVU301
 1063 0030 03EB0C00 		add	r0, r3, ip
 1064              	.LVL132:
1909:System/storage/Storage.c ****         }
 1065              		.loc 1 1909 13 view .LVU302
 1066 0034 B047     		blx	r6
 1067              	.LVL133:
1965:System/storage/Storage.c **** }
 1068              		.loc 1 1965 12 view .LVU303
 1069 0036 0020     		movs	r0, #0
 1070 0038 5DE0     		b	.L93
 1071              	.LVL134:
 1072              	.L95:
1899:System/storage/Storage.c ****                 int_base_addr = App_Address_Base;
 1073              		.loc 1 1899 17 is_stmt 1 view .LVU304
1900:System/storage/Storage.c ****                 break;
 1074              		.loc 1 1900 17 view .LVU305
1900:System/storage/Storage.c ****                 break;
 1075              		.loc 1 1900 31 is_stmt 0 view .LVU306
 1076 003a 384B     		ldr	r3, .L112+8
 1077              	.LVL135:
1901:System/storage/Storage.c **** 
 1078              		.loc 1 1901 17 is_stmt 1 view .LVU307
1899:System/storage/Storage.c ****                 int_base_addr = App_Address_Base;
 1079              		.loc 1 1899 31 is_stmt 0 view .LVU308
 1080 003c 4FF4A018 		mov	r8, #1310720
1901:System/storage/Storage.c **** 
 1081              		.loc 1 1901 17 view .LVU309
 1082 0040 F1E7     		b	.L96
 1083              	.LVL136:
 1084              	.L97:
1911:System/storage/Storage.c ****         {
 1085              		.loc 1 1911 14 is_stmt 1 view .LVU310
1911:System/storage/Storage.c ****         {
 1086              		.loc 1 1911 17 is_stmt 0 view .LVU311
 1087 0042 0128     		cmp	r0, #1
 1088 0044 01D0     		beq	.L111
1965:System/storage/Storage.c **** }
 1089              		.loc 1 1965 12 view .LVU312
 1090 0046 0020     		movs	r0, #0
 1091              	.LVL137:
1965:System/storage/Storage.c **** }
 1092              		.loc 1 1965 12 view .LVU313
 1093 0048 55E0     		b	.L93
 1094              	.LVL138:
 1095              	.L111:
1913:System/storage/Storage.c ****             if (dev == NULL)
 1096              		.loc 1 1913 13 is_stmt 1 view .LVU314
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 61


1913:System/storage/Storage.c ****             if (dev == NULL)
 1097              		.loc 1 1913 17 is_stmt 0 view .LVU315
 1098 004a 354B     		ldr	r3, .L112+12
 1099              	.LVL139:
1913:System/storage/Storage.c ****             if (dev == NULL)
 1100              		.loc 1 1913 17 view .LVU316
 1101 004c 9E68     		ldr	r6, [r3, #8]
 1102              	.LVL140:
1914:System/storage/Storage.c ****                 return false;
 1103              		.loc 1 1914 13 is_stmt 1 view .LVU317
1914:System/storage/Storage.c ****                 return false;
 1104              		.loc 1 1914 16 is_stmt 0 view .LVU318
 1105 004e 002E     		cmp	r6, #0
 1106 0050 53D0     		beq	.L103
1917:System/storage/Storage.c ****             {
 1107              		.loc 1 1917 13 is_stmt 1 view .LVU319
1917:System/storage/Storage.c ****             {
 1108              		.loc 1 1917 33 is_stmt 0 view .LVU320
 1109 0052 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
1917:System/storage/Storage.c ****             {
 1110              		.loc 1 1917 13 view .LVU321
 1111 0054 012B     		cmp	r3, #1
 1112 0056 52D1     		bne	.L104
1920:System/storage/Storage.c ****                     section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_DevW25
 1113              		.loc 1 1920 21 is_stmt 1 view .LVU322
1920:System/storage/Storage.c ****                     section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_DevW25
 1114              		.loc 1 1920 32 is_stmt 0 view .LVU323
 1115 0058 E044     		add	r8, r8, ip
 1116              	.LVL141:
1921:System/storage/Storage.c **** 
 1117              		.loc 1 1921 21 is_stmt 1 view .LVU324
1921:System/storage/Storage.c **** 
 1118              		.loc 1 1921 36 is_stmt 0 view .LVU325
 1119 005a 336B     		ldr	r3, [r6, #48]
1921:System/storage/Storage.c **** 
 1120              		.loc 1 1921 66 view .LVU326
 1121 005c 1B6A     		ldr	r3, [r3, #32]
1921:System/storage/Storage.c **** 
 1122              		.loc 1 1921 36 view .LVU327
 1123 005e 4146     		mov	r1, r8
 1124              	.LVL142:
1921:System/storage/Storage.c **** 
 1125              		.loc 1 1921 36 view .LVU328
 1126 0060 F06A     		ldr	r0, [r6, #44]
 1127              	.LVL143:
1921:System/storage/Storage.c **** 
 1128              		.loc 1 1921 36 view .LVU329
 1129 0062 9847     		blx	r3
 1130              	.LVL144:
1921:System/storage/Storage.c **** 
 1131              		.loc 1 1921 36 view .LVU330
 1132 0064 0746     		mov	r7, r0
 1133              	.LVL145:
1921:System/storage/Storage.c **** 
 1134              		.loc 1 1921 36 view .LVU331
 1135 0066 1CE0     		b	.L99
 1136              	.LVL146:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 62


 1137              	.L108:
1945:System/storage/Storage.c ****                         }
 1138              		.loc 1 1945 34 view .LVU332
 1139 0068 0024     		movs	r4, #0
 1140              	.LVL147:
 1141              	.L98:
1949:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev_obj), s
 1142              		.loc 1 1949 25 is_stmt 1 view .LVU333
1949:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev_obj), s
 1143              		.loc 1 1949 59 is_stmt 0 view .LVU334
 1144 006a A8EB0700 		sub	r0, r8, r7
1949:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev_obj), s
 1145              		.loc 1 1949 32 view .LVU335
 1146 006e DFF8B4A0 		ldr	r10, .L112+16
1949:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->write(To_DevW25Qxx_OBJ(dev->dev_obj), s
 1147              		.loc 1 1949 25 view .LVU336
 1148 0072 4A46     		mov	r2, r9
 1149 0074 2946     		mov	r1, r5
 1150 0076 5044     		add	r0, r0, r10
 1151 0078 FFF7FEFF 		bl	memcpy
 1152              	.LVL148:
1950:System/storage/Storage.c ****                             return false;
 1153              		.loc 1 1950 25 is_stmt 1 view .LVU337
1950:System/storage/Storage.c ****                             return false;
 1154              		.loc 1 1950 29 is_stmt 0 view .LVU338
 1155 007c 336B     		ldr	r3, [r6, #48]
1950:System/storage/Storage.c ****                             return false;
 1156              		.loc 1 1950 59 view .LVU339
 1157 007e D3F80CB0 		ldr	fp, [r3, #12]
1950:System/storage/Storage.c ****                             return false;
 1158              		.loc 1 1950 29 view .LVU340
 1159 0082 4FF48053 		mov	r3, #4096
 1160 0086 5246     		mov	r2, r10
 1161 0088 3946     		mov	r1, r7
 1162 008a F06A     		ldr	r0, [r6, #44]
 1163 008c D847     		blx	fp
 1164              	.LVL149:
1950:System/storage/Storage.c ****                             return false;
 1165              		.loc 1 1950 28 view .LVU341
 1166 008e 0028     		cmp	r0, #0
 1167 0090 3DD1     		bne	.L109
1954:System/storage/Storage.c ****                         write_addr += write_size;
 1168              		.loc 1 1954 25 is_stmt 1 view .LVU342
1954:System/storage/Storage.c ****                         write_addr += write_size;
 1169              		.loc 1 1954 32 is_stmt 0 view .LVU343
 1170 0092 4D44     		add	r5, r5, r9
 1171              	.LVL150:
1955:System/storage/Storage.c ****                         section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_De
 1172              		.loc 1 1955 25 is_stmt 1 view .LVU344
1955:System/storage/Storage.c ****                         section_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr(To_De
 1173              		.loc 1 1955 36 is_stmt 0 view .LVU345
 1174 0094 C844     		add	r8, r8, r9
 1175              	.LVL151:
1956:System/storage/Storage.c ****                     }
 1176              		.loc 1 1956 25 is_stmt 1 view .LVU346
1956:System/storage/Storage.c ****                     }
 1177              		.loc 1 1956 40 is_stmt 0 view .LVU347
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 63


 1178 0096 336B     		ldr	r3, [r6, #48]
1956:System/storage/Storage.c ****                     }
 1179              		.loc 1 1956 70 view .LVU348
 1180 0098 1B6A     		ldr	r3, [r3, #32]
1956:System/storage/Storage.c ****                     }
 1181              		.loc 1 1956 40 view .LVU349
 1182 009a 4146     		mov	r1, r8
 1183 009c F06A     		ldr	r0, [r6, #44]
 1184 009e 9847     		blx	r3
 1185              	.LVL152:
 1186 00a0 0746     		mov	r7, r0
 1187              	.LVL153:
1923:System/storage/Storage.c ****                     {
 1188              		.loc 1 1923 27 is_stmt 1 view .LVU350
 1189              	.L99:
1923:System/storage/Storage.c ****                     {
 1190              		.loc 1 1923 21 view .LVU351
1925:System/storage/Storage.c ****                             return true;
 1191              		.loc 1 1925 25 view .LVU352
1925:System/storage/Storage.c ****                             return true;
 1192              		.loc 1 1925 28 is_stmt 0 view .LVU353
 1193 00a2 74B3     		cbz	r4, .L105
1929:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), se
 1194              		.loc 1 1929 25 is_stmt 1 view .LVU354
 1195 00a4 DFF87C90 		ldr	r9, .L112+16
 1196 00a8 4FF4805A 		mov	r10, #4096
 1197 00ac 5246     		mov	r2, r10
 1198 00ae 0021     		movs	r1, #0
 1199 00b0 4846     		mov	r0, r9
 1200              	.LVL154:
1929:System/storage/Storage.c ****                         if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), se
 1201              		.loc 1 1929 25 is_stmt 0 view .LVU355
 1202 00b2 FFF7FEFF 		bl	memset
 1203              	.LVL155:
1930:System/storage/Storage.c ****                             return false;
 1204              		.loc 1 1930 25 is_stmt 1 view .LVU356
1930:System/storage/Storage.c ****                             return false;
 1205              		.loc 1 1930 29 is_stmt 0 view .LVU357
 1206 00b6 336B     		ldr	r3, [r6, #48]
1930:System/storage/Storage.c ****                             return false;
 1207              		.loc 1 1930 59 view .LVU358
 1208 00b8 D3F810B0 		ldr	fp, [r3, #16]
1930:System/storage/Storage.c ****                             return false;
 1209              		.loc 1 1930 29 view .LVU359
 1210 00bc 5346     		mov	r3, r10
 1211 00be 4A46     		mov	r2, r9
 1212 00c0 3946     		mov	r1, r7
 1213 00c2 F06A     		ldr	r0, [r6, #44]
 1214 00c4 D847     		blx	fp
 1215              	.LVL156:
1930:System/storage/Storage.c ****                             return false;
 1216              		.loc 1 1930 28 view .LVU360
 1217 00c6 F0B9     		cbnz	r0, .L106
1934:System/storage/Storage.c ****                             return false;
 1218              		.loc 1 1934 25 is_stmt 1 view .LVU361
1934:System/storage/Storage.c ****                             return false;
 1219              		.loc 1 1934 29 is_stmt 0 view .LVU362
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 64


 1220 00c8 336B     		ldr	r3, [r6, #48]
1934:System/storage/Storage.c ****                             return false;
 1221              		.loc 1 1934 59 view .LVU363
 1222 00ca 5B69     		ldr	r3, [r3, #20]
1934:System/storage/Storage.c ****                             return false;
 1223              		.loc 1 1934 29 view .LVU364
 1224 00cc 3946     		mov	r1, r7
 1225 00ce F06A     		ldr	r0, [r6, #44]
 1226 00d0 9847     		blx	r3
 1227              	.LVL157:
1934:System/storage/Storage.c ****                             return false;
 1228              		.loc 1 1934 28 view .LVU365
 1229 00d2 D0B9     		cbnz	r0, .L107
1937:System/storage/Storage.c ****                         {
 1230              		.loc 1 1937 25 is_stmt 1 view .LVU366
1937:System/storage/Storage.c ****                         {
 1231              		.loc 1 1937 41 is_stmt 0 view .LVU367
 1232 00d4 A146     		mov	r9, r4
 1233 00d6 04EB0803 		add	r3, r4, r8
1937:System/storage/Storage.c ****                         {
 1234              		.loc 1 1937 66 view .LVU368
 1235 00da 07EB0A02 		add	r2, r7, r10
1937:System/storage/Storage.c ****                         {
 1236              		.loc 1 1937 28 view .LVU369
 1237 00de 9342     		cmp	r3, r2
 1238 00e0 C2D3     		bcc	.L108
1939:System/storage/Storage.c ****                             size -= write_size;
 1239              		.loc 1 1939 29 is_stmt 1 view .LVU370
1939:System/storage/Storage.c ****                             size -= write_size;
 1240              		.loc 1 1939 72 is_stmt 0 view .LVU371
 1241 00e2 A7EB0809 		sub	r9, r7, r8
1939:System/storage/Storage.c ****                             size -= write_size;
 1242              		.loc 1 1939 40 view .LVU372
 1243 00e6 D144     		add	r9, r9, r10
 1244              	.LVL158:
1940:System/storage/Storage.c ****                         }
 1245              		.loc 1 1940 29 is_stmt 1 view .LVU373
1940:System/storage/Storage.c ****                         }
 1246              		.loc 1 1940 34 is_stmt 0 view .LVU374
 1247 00e8 A4EB0904 		sub	r4, r4, r9
 1248              	.LVL159:
1940:System/storage/Storage.c ****                         }
 1249              		.loc 1 1940 34 view .LVU375
 1250 00ec A4B2     		uxth	r4, r4
 1251              	.LVL160:
1940:System/storage/Storage.c ****                         }
 1252              		.loc 1 1940 34 view .LVU376
 1253 00ee BCE7     		b	.L98
 1254              	.LVL161:
 1255              	.L100:
1965:System/storage/Storage.c **** }
 1256              		.loc 1 1965 12 view .LVU377
 1257 00f0 0020     		movs	r0, #0
 1258              	.LVL162:
1965:System/storage/Storage.c **** }
 1259              		.loc 1 1965 12 view .LVU378
 1260 00f2 00E0     		b	.L93
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 65


 1261              	.LVL163:
 1262              	.L101:
1965:System/storage/Storage.c **** }
 1263              		.loc 1 1965 12 view .LVU379
 1264 00f4 0020     		movs	r0, #0
 1265              	.LVL164:
 1266              	.L93:
1966:System/storage/Storage.c **** 
 1267              		.loc 1 1966 1 view .LVU380
 1268 00f6 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1269              	.LVL165:
 1270              	.L103:
1915:System/storage/Storage.c **** 
 1271              		.loc 1 1915 24 view .LVU381
 1272 00fa 0020     		movs	r0, #0
 1273              	.LVL166:
1915:System/storage/Storage.c **** 
 1274              		.loc 1 1915 24 view .LVU382
 1275 00fc FBE7     		b	.L93
 1276              	.LVL167:
 1277              	.L104:
1960:System/storage/Storage.c ****             }
 1278              		.loc 1 1960 33 view .LVU383
 1279 00fe 0020     		movs	r0, #0
 1280              	.LVL168:
1960:System/storage/Storage.c ****             }
 1281              		.loc 1 1960 33 view .LVU384
 1282 0100 F9E7     		b	.L93
 1283              	.LVL169:
 1284              	.L105:
1926:System/storage/Storage.c **** 
 1285              		.loc 1 1926 36 view .LVU385
 1286 0102 0120     		movs	r0, #1
 1287              	.LVL170:
1926:System/storage/Storage.c **** 
 1288              		.loc 1 1926 36 view .LVU386
 1289 0104 F7E7     		b	.L93
 1290              	.L106:
1931:System/storage/Storage.c **** 
 1291              		.loc 1 1931 36 view .LVU387
 1292 0106 0020     		movs	r0, #0
 1293 0108 F5E7     		b	.L93
 1294              	.L107:
1935:System/storage/Storage.c **** 
 1295              		.loc 1 1935 36 view .LVU388
 1296 010a 0020     		movs	r0, #0
 1297 010c F3E7     		b	.L93
 1298              	.LVL171:
 1299              	.L109:
1951:System/storage/Storage.c **** 
 1300              		.loc 1 1951 36 view .LVU389
 1301 010e 0020     		movs	r0, #0
 1302 0110 F1E7     		b	.L93
 1303              	.L113:
 1304 0112 00BF     		.align	2
 1305              	.L112:
 1306 0114 00000000 		.word	__boot_s
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 66


 1307 0118 00000000 		.word	BspFlash
 1308 011c 00000000 		.word	__boot_e
 1309 0120 00000000 		.word	.LANCHOR0
 1310 0124 00000000 		.word	flash_read_tmp
 1311              		.cfi_endproc
 1312              	.LFE171:
 1314              		.section	.text.Storage_Frimware_Read,"ax",%progbits
 1315              		.align	1
 1316              		.syntax unified
 1317              		.thumb
 1318              		.thumb_func
 1320              	Storage_Frimware_Read:
 1321              	.LVL172:
 1322              	.LFB170:
1824:System/storage/Storage.c ****     uint32_t base_addr = 0;
 1323              		.loc 1 1824 1 is_stmt 1 view -0
 1324              		.cfi_startproc
 1325              		@ args = 0, pretend = 0, frame = 0
 1326              		@ frame_needed = 0, uses_anonymous_args = 0
1824:System/storage/Storage.c ****     uint32_t base_addr = 0;
 1327              		.loc 1 1824 1 is_stmt 0 view .LVU391
 1328 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1329              	.LCFI14:
 1330              		.cfi_def_cfa_offset 32
 1331              		.cfi_offset 3, -32
 1332              		.cfi_offset 4, -28
 1333              		.cfi_offset 5, -24
 1334              		.cfi_offset 6, -20
 1335              		.cfi_offset 7, -16
 1336              		.cfi_offset 8, -12
 1337              		.cfi_offset 9, -8
 1338              		.cfi_offset 14, -4
 1339 0004 1D46     		mov	r5, r3
1825:System/storage/Storage.c ****     uint32_t firmware_size = 0;
 1340              		.loc 1 1825 5 is_stmt 1 view .LVU392
 1341              	.LVL173:
1826:System/storage/Storage.c ****     uint32_t read_addr = 0;
 1342              		.loc 1 1826 5 view .LVU393
1827:System/storage/Storage.c ****     uint32_t section_addr = 0;
 1343              		.loc 1 1827 5 view .LVU394
1828:System/storage/Storage.c ****     uint32_t read_size = 0;
 1344              		.loc 1 1828 5 view .LVU395
1829:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
 1345              		.loc 1 1829 5 view .LVU396
1830:System/storage/Storage.c ****     dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 1346              		.loc 1 1830 5 view .LVU397
1831:System/storage/Storage.c **** 
 1347              		.loc 1 1831 5 view .LVU398
1831:System/storage/Storage.c **** 
 1348              		.loc 1 1831 9 is_stmt 0 view .LVU399
 1349 0006 254B     		ldr	r3, .L129
 1350              	.LVL174:
1831:System/storage/Storage.c **** 
 1351              		.loc 1 1831 9 view .LVU400
 1352 0008 9E68     		ldr	r6, [r3, #8]
 1353              	.LVL175:
1833:System/storage/Storage.c ****     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 67


 1354              		.loc 1 1833 5 is_stmt 1 view .LVU401
1833:System/storage/Storage.c ****     {
 1355              		.loc 1 1833 8 is_stmt 0 view .LVU402
 1356 000a 002E     		cmp	r6, #0
 1357 000c 3AD0     		beq	.L119
 1358 000e 1746     		mov	r7, r2
1833:System/storage/Storage.c ****     {
 1359              		.loc 1 1833 13 discriminator 1 view .LVU403
 1360 0010 002A     		cmp	r2, #0
 1361 0012 3AD0     		beq	.L120
1833:System/storage/Storage.c ****     {
 1362              		.loc 1 1833 23 discriminator 2 view .LVU404
 1363 0014 002D     		cmp	r5, #0
 1364 0016 3AD0     		beq	.L121
1835:System/storage/Storage.c ****         {
 1365              		.loc 1 1835 9 is_stmt 1 view .LVU405
 1366 0018 0128     		cmp	r0, #1
 1367 001a 06D0     		beq	.L122
 1368 001c 0228     		cmp	r0, #2
 1369 001e 38D1     		bne	.L123
 1370 0020 4FF4A014 		mov	r4, #1310720
 1371              	.L116:
 1372              	.LVL176:
1850:System/storage/Storage.c ****         while (true)
 1373              		.loc 1 1850 9 view .LVU406
1850:System/storage/Storage.c ****         while (true)
 1374              		.loc 1 1850 19 is_stmt 0 view .LVU407
 1375 0024 04EB0109 		add	r9, r4, r1
 1376              	.LVL177:
1850:System/storage/Storage.c ****         while (true)
 1377              		.loc 1 1850 19 view .LVU408
 1378 0028 0BE0     		b	.L118
 1379              	.LVL178:
 1380              	.L122:
1843:System/storage/Storage.c ****                 firmware_size = Boot_Firmware_Size;
 1381              		.loc 1 1843 27 view .LVU409
 1382 002a 0024     		movs	r4, #0
 1383 002c FAE7     		b	.L116
 1384              	.LVL179:
 1385              	.L125:
1866:System/storage/Storage.c ****             }
 1386              		.loc 1 1866 22 view .LVU410
 1387 002e 0025     		movs	r5, #0
 1388              	.LVL180:
 1389              	.L117:
1869:System/storage/Storage.c ****             read_addr = section_addr + Storage_TabSize;
 1390              		.loc 1 1869 13 is_stmt 1 view .LVU411
1869:System/storage/Storage.c ****             read_addr = section_addr + Storage_TabSize;
 1391              		.loc 1 1869 54 is_stmt 0 view .LVU412
 1392 0030 A9EB0404 		sub	r4, r9, r4
 1393              	.LVL181:
1869:System/storage/Storage.c ****             read_addr = section_addr + Storage_TabSize;
 1394              		.loc 1 1869 13 view .LVU413
 1395 0034 1A49     		ldr	r1, .L129+4
 1396 0036 2144     		add	r1, r1, r4
 1397 0038 3846     		mov	r0, r7
 1398 003a FFF7FEFF 		bl	memcpy
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 68


 1399              	.LVL182:
1870:System/storage/Storage.c **** 
 1400              		.loc 1 1870 13 is_stmt 1 view .LVU414
1872:System/storage/Storage.c ****                 return true;
 1401              		.loc 1 1872 13 view .LVU415
1872:System/storage/Storage.c ****                 return true;
 1402              		.loc 1 1872 16 is_stmt 0 view .LVU416
 1403 003e FDB1     		cbz	r5, .L128
1870:System/storage/Storage.c **** 
 1404              		.loc 1 1870 23 view .LVU417
 1405 0040 C146     		mov	r9, r8
 1406              	.LVL183:
 1407              	.L118:
1851:System/storage/Storage.c ****         {
 1408              		.loc 1 1851 9 is_stmt 1 view .LVU418
1853:System/storage/Storage.c ****             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), section_addr, 
 1409              		.loc 1 1853 13 view .LVU419
1853:System/storage/Storage.c ****             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), section_addr, 
 1410              		.loc 1 1853 28 is_stmt 0 view .LVU420
 1411 0042 336B     		ldr	r3, [r6, #48]
1853:System/storage/Storage.c ****             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), section_addr, 
 1412              		.loc 1 1853 58 view .LVU421
 1413 0044 1B6A     		ldr	r3, [r3, #32]
1853:System/storage/Storage.c ****             if (To_DevW25Qxx_API(dev->dev_api)->read(To_DevW25Qxx_OBJ(dev->dev_obj), section_addr, 
 1414              		.loc 1 1853 28 view .LVU422
 1415 0046 4946     		mov	r1, r9
 1416 0048 F06A     		ldr	r0, [r6, #44]
 1417 004a 9847     		blx	r3
 1418              	.LVL184:
 1419 004c 0446     		mov	r4, r0
 1420              	.LVL185:
1854:System/storage/Storage.c ****                 return false;
 1421              		.loc 1 1854 13 is_stmt 1 view .LVU423
1854:System/storage/Storage.c ****                 return false;
 1422              		.loc 1 1854 17 is_stmt 0 view .LVU424
 1423 004e 336B     		ldr	r3, [r6, #48]
1854:System/storage/Storage.c ****                 return false;
 1424              		.loc 1 1854 47 view .LVU425
 1425 0050 D3F81080 		ldr	r8, [r3, #16]
1854:System/storage/Storage.c ****                 return false;
 1426              		.loc 1 1854 17 view .LVU426
 1427 0054 4FF48053 		mov	r3, #4096
 1428 0058 114A     		ldr	r2, .L129+4
 1429 005a 0146     		mov	r1, r0
 1430 005c F06A     		ldr	r0, [r6, #44]
 1431              	.LVL186:
1854:System/storage/Storage.c ****                 return false;
 1432              		.loc 1 1854 17 view .LVU427
 1433 005e C047     		blx	r8
 1434              	.LVL187:
1854:System/storage/Storage.c ****                 return false;
 1435              		.loc 1 1854 16 view .LVU428
 1436 0060 C8B9     		cbnz	r0, .L124
1857:System/storage/Storage.c ****             {
 1437              		.loc 1 1857 13 is_stmt 1 view .LVU429
1857:System/storage/Storage.c ****             {
 1438              		.loc 1 1857 28 is_stmt 0 view .LVU430
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 69


 1439 0062 2A46     		mov	r2, r5
 1440 0064 05EB0903 		add	r3, r5, r9
1857:System/storage/Storage.c ****             {
 1441              		.loc 1 1857 52 view .LVU431
 1442 0068 04F58058 		add	r8, r4, #4096
1857:System/storage/Storage.c ****             {
 1443              		.loc 1 1857 16 view .LVU432
 1444 006c 4345     		cmp	r3, r8
 1445 006e DED9     		bls	.L125
1859:System/storage/Storage.c ****                 size -= read_size;
 1446              		.loc 1 1859 17 is_stmt 1 view .LVU433
1859:System/storage/Storage.c ****                 size -= read_size;
 1447              		.loc 1 1859 58 is_stmt 0 view .LVU434
 1448 0070 A4EB0903 		sub	r3, r4, r9
1859:System/storage/Storage.c ****                 size -= read_size;
 1449              		.loc 1 1859 27 view .LVU435
 1450 0074 03F58052 		add	r2, r3, #4096
 1451              	.LVL188:
1860:System/storage/Storage.c ****                 p_data += read_size;
 1452              		.loc 1 1860 17 is_stmt 1 view .LVU436
1860:System/storage/Storage.c ****                 p_data += read_size;
 1453              		.loc 1 1860 22 is_stmt 0 view .LVU437
 1454 0078 AD1A     		subs	r5, r5, r2
 1455              	.LVL189:
1860:System/storage/Storage.c ****                 p_data += read_size;
 1456              		.loc 1 1860 22 view .LVU438
 1457 007a ADB2     		uxth	r5, r5
 1458              	.LVL190:
1861:System/storage/Storage.c ****             }
 1459              		.loc 1 1861 17 is_stmt 1 view .LVU439
1861:System/storage/Storage.c ****             }
 1460              		.loc 1 1861 24 is_stmt 0 view .LVU440
 1461 007c 1744     		add	r7, r7, r2
 1462              	.LVL191:
1861:System/storage/Storage.c ****             }
 1463              		.loc 1 1861 24 view .LVU441
 1464 007e D7E7     		b	.L117
 1465              	.LVL192:
 1466              	.L128:
1873:System/storage/Storage.c ****         }
 1467              		.loc 1 1873 24 view .LVU442
 1468 0080 0120     		movs	r0, #1
 1469 0082 00E0     		b	.L115
 1470              	.LVL193:
 1471              	.L119:
1877:System/storage/Storage.c **** }
 1472              		.loc 1 1877 12 view .LVU443
 1473 0084 0020     		movs	r0, #0
 1474              	.LVL194:
 1475              	.L115:
1878:System/storage/Storage.c **** 
 1476              		.loc 1 1878 1 view .LVU444
 1477 0086 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1478              	.LVL195:
 1479              	.L120:
1877:System/storage/Storage.c **** }
 1480              		.loc 1 1877 12 view .LVU445
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 70


 1481 008a 0020     		movs	r0, #0
 1482              	.LVL196:
1877:System/storage/Storage.c **** }
 1483              		.loc 1 1877 12 view .LVU446
 1484 008c FBE7     		b	.L115
 1485              	.LVL197:
 1486              	.L121:
1877:System/storage/Storage.c **** }
 1487              		.loc 1 1877 12 view .LVU447
 1488 008e 0020     		movs	r0, #0
 1489              	.LVL198:
1877:System/storage/Storage.c **** }
 1490              		.loc 1 1877 12 view .LVU448
 1491 0090 F9E7     		b	.L115
 1492              	.LVL199:
 1493              	.L123:
1835:System/storage/Storage.c ****         {
 1494              		.loc 1 1835 9 view .LVU449
 1495 0092 0020     		movs	r0, #0
 1496              	.LVL200:
1835:System/storage/Storage.c ****         {
 1497              		.loc 1 1835 9 view .LVU450
 1498 0094 F7E7     		b	.L115
 1499              	.LVL201:
 1500              	.L124:
1855:System/storage/Storage.c **** 
 1501              		.loc 1 1855 24 view .LVU451
 1502 0096 0020     		movs	r0, #0
 1503 0098 F5E7     		b	.L115
 1504              	.L130:
 1505 009a 00BF     		.align	2
 1506              	.L129:
 1507 009c 00000000 		.word	.LANCHOR0
 1508 00a0 00000000 		.word	flash_read_tmp
 1509              		.cfi_endproc
 1510              	.LFE170:
 1512              		.section	.text.Storage_Get_DevInfo,"ax",%progbits
 1513              		.align	1
 1514              		.syntax unified
 1515              		.thumb
 1516              		.thumb_func
 1518              	Storage_Get_DevInfo:
 1519              	.LVL202:
 1520              	.LFB146:
 229:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
 1521              		.loc 1 229 1 is_stmt 1 view -0
 1522              		.cfi_startproc
 1523              		@ args = 0, pretend = 0, frame = 0
 1524              		@ frame_needed = 0, uses_anonymous_args = 0
 230:System/storage/Storage.c **** 
 1525              		.loc 1 230 5 view .LVU453
 232:System/storage/Storage.c ****     {
 1526              		.loc 1 232 5 view .LVU454
 232:System/storage/Storage.c ****     {
 1527              		.loc 1 232 8 is_stmt 0 view .LVU455
 1528 0000 10B3     		cbz	r0, .L134
 229:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 71


 1529              		.loc 1 229 1 view .LVU456
 1530 0002 10B5     		push	{r4, lr}
 1531              	.LCFI15:
 1532              		.cfi_def_cfa_offset 8
 1533              		.cfi_offset 4, -8
 1534              		.cfi_offset 14, -4
 1535 0004 0446     		mov	r4, r0
 234:System/storage/Storage.c ****         if (Storage_Monitor.init_state && Storage_Monitor.ExtDev_ptr)
 1536              		.loc 1 234 9 is_stmt 1 view .LVU457
 1537 0006 3422     		movs	r2, #52
 1538 0008 0021     		movs	r1, #0
 1539 000a FFF7FEFF 		bl	memset
 1540              	.LVL203:
 235:System/storage/Storage.c ****         {
 1541              		.loc 1 235 9 view .LVU458
 235:System/storage/Storage.c ****         {
 1542              		.loc 1 235 28 is_stmt 0 view .LVU459
 1543 000e 114B     		ldr	r3, .L141
 1544 0010 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 235:System/storage/Storage.c ****         {
 1545              		.loc 1 235 12 view .LVU460
 1546 0012 DBB1     		cbz	r3, .L135
 235:System/storage/Storage.c ****         {
 1547              		.loc 1 235 58 discriminator 1 view .LVU461
 1548 0014 0F4B     		ldr	r3, .L141
 1549 0016 9A68     		ldr	r2, [r3, #8]
 235:System/storage/Storage.c ****         {
 1550              		.loc 1 235 40 discriminator 1 view .LVU462
 1551 0018 D2B1     		cbz	r2, .L136
 237:System/storage/Storage.c ****             memcpy(info, p_dev, sizeof(Storage_ExtFLashDevObj_TypeDef));
 1552              		.loc 1 237 13 is_stmt 1 view .LVU463
 1553              	.LVL204:
 238:System/storage/Storage.c ****             return Storage_Error_None;
 1554              		.loc 1 238 13 view .LVU464
 1555 001a 1346     		mov	r3, r2
 1556 001c 2046     		mov	r0, r4
 1557 001e 3032     		adds	r2, r2, #48
 1558              	.LVL205:
 1559              	.L133:
 238:System/storage/Storage.c ****             return Storage_Error_None;
 1560              		.loc 1 238 13 is_stmt 0 view .LVU465
 1561 0020 D3F800E0 		ldr	lr, [r3]	@ unaligned
 1562 0024 D3F804C0 		ldr	ip, [r3, #4]	@ unaligned
 1563 0028 9C68     		ldr	r4, [r3, #8]	@ unaligned
 1564 002a D968     		ldr	r1, [r3, #12]	@ unaligned
 1565 002c C0F800E0 		str	lr, [r0]	@ unaligned
 1566 0030 C0F804C0 		str	ip, [r0, #4]	@ unaligned
 1567 0034 8460     		str	r4, [r0, #8]	@ unaligned
 1568 0036 C160     		str	r1, [r0, #12]	@ unaligned
 1569 0038 1033     		adds	r3, r3, #16
 1570 003a 1030     		adds	r0, r0, #16
 1571 003c 9342     		cmp	r3, r2
 1572 003e EFD1     		bne	.L133
 1573 0040 1B68     		ldr	r3, [r3]	@ unaligned
 1574 0042 0360     		str	r3, [r0]	@ unaligned
 239:System/storage/Storage.c ****         }
 1575              		.loc 1 239 13 is_stmt 1 view .LVU466
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 72


 239:System/storage/Storage.c ****         }
 1576              		.loc 1 239 20 is_stmt 0 view .LVU467
 1577 0044 0020     		movs	r0, #0
 1578              	.LVL206:
 1579              	.L132:
 246:System/storage/Storage.c **** 
 1580              		.loc 1 246 1 view .LVU468
 1581 0046 10BD     		pop	{r4, pc}
 1582              	.LVL207:
 1583              	.L134:
 1584              	.LCFI16:
 1585              		.cfi_def_cfa_offset 0
 1586              		.cfi_restore 4
 1587              		.cfi_restore 14
 245:System/storage/Storage.c **** }
 1588              		.loc 1 245 12 view .LVU469
 1589 0048 0520     		movs	r0, #5
 1590              	.LVL208:
 246:System/storage/Storage.c **** 
 1591              		.loc 1 246 1 view .LVU470
 1592 004a 7047     		bx	lr
 1593              	.LVL209:
 1594              	.L135:
 1595              	.LCFI17:
 1596              		.cfi_def_cfa_offset 8
 1597              		.cfi_offset 4, -8
 1598              		.cfi_offset 14, -4
 242:System/storage/Storage.c ****     }
 1599              		.loc 1 242 16 view .LVU471
 1600 004c 0720     		movs	r0, #7
 1601 004e FAE7     		b	.L132
 1602              	.L136:
 1603 0050 0720     		movs	r0, #7
 1604 0052 F8E7     		b	.L132
 1605              	.L142:
 1606              		.align	2
 1607              	.L141:
 1608 0054 00000000 		.word	.LANCHOR0
 1609              		.cfi_endproc
 1610              	.LFE146:
 1612              		.section	.text.Storage_ExtFlash_ParaSec_Read,"ax",%progbits
 1613              		.align	1
 1614              		.syntax unified
 1615              		.thumb
 1616              		.thumb_func
 1618              	Storage_ExtFlash_ParaSec_Read:
 1619              	.LVL210:
 1620              	.LFB176:
2026:System/storage/Storage.c ****     uint32_t read_start_addr = 0;
 1621              		.loc 1 2026 1 is_stmt 1 view -0
 1622              		.cfi_startproc
 1623              		@ args = 0, pretend = 0, frame = 88
 1624              		@ frame_needed = 0, uses_anonymous_args = 0
2026:System/storage/Storage.c ****     uint32_t read_start_addr = 0;
 1625              		.loc 1 2026 1 is_stmt 0 view .LVU473
 1626 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1627              	.LCFI18:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 73


 1628              		.cfi_def_cfa_offset 36
 1629              		.cfi_offset 4, -36
 1630              		.cfi_offset 5, -32
 1631              		.cfi_offset 6, -28
 1632              		.cfi_offset 7, -24
 1633              		.cfi_offset 8, -20
 1634              		.cfi_offset 9, -16
 1635              		.cfi_offset 10, -12
 1636              		.cfi_offset 11, -8
 1637              		.cfi_offset 14, -4
 1638 0004 97B0     		sub	sp, sp, #92
 1639              	.LCFI19:
 1640              		.cfi_def_cfa_offset 128
2027:System/storage/Storage.c ****     uint32_t flash_end_addr = 0;
 1641              		.loc 1 2027 5 is_stmt 1 view .LVU474
 1642              	.LVL211:
2028:System/storage/Storage.c ****     uint32_t section_start_addr = 0;
 1643              		.loc 1 2028 5 view .LVU475
2029:System/storage/Storage.c ****     uint32_t next_read_addr = 0;
 1644              		.loc 1 2029 5 view .LVU476
2030:System/storage/Storage.c ****     uint32_t section_size = 0;
 1645              		.loc 1 2030 5 view .LVU477
2031:System/storage/Storage.c ****     uint32_t read_offset = 0;
 1646              		.loc 1 2031 5 view .LVU478
2032:System/storage/Storage.c ****     uint32_t read_len = len;
 1647              		.loc 1 2032 5 view .LVU479
2033:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
 1648              		.loc 1 2033 5 view .LVU480
2034:System/storage/Storage.c **** 
 1649              		.loc 1 2034 5 view .LVU481
2036:System/storage/Storage.c ****     {
 1650              		.loc 1 2036 5 view .LVU482
2036:System/storage/Storage.c ****     {
 1651              		.loc 1 2036 25 is_stmt 0 view .LVU483
 1652 0006 434B     		ldr	r3, .L163
 1653 0008 9C68     		ldr	r4, [r3, #8]
2036:System/storage/Storage.c ****     {
 1654              		.loc 1 2036 8 view .LVU484
 1655 000a 002C     		cmp	r4, #0
 1656 000c 69D0     		beq	.L148
 1657 000e 0E46     		mov	r6, r1
 1658 0010 1546     		mov	r5, r2
2036:System/storage/Storage.c ****     {
 1659              		.loc 1 2036 46 discriminator 1 view .LVU485
 1660 0012 0029     		cmp	r1, #0
 1661 0014 69D0     		beq	.L149
2036:System/storage/Storage.c ****     {
 1662              		.loc 1 2036 56 discriminator 2 view .LVU486
 1663 0016 002A     		cmp	r2, #0
 1664 0018 69D0     		beq	.L150
2038:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 1665              		.loc 1 2038 9 is_stmt 1 view .LVU487
2038:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 1666              		.loc 1 2038 56 is_stmt 0 view .LVU488
 1667 001a D3F83630 		ldr	r3, [r3, #54]	@ unaligned
2038:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 1668              		.loc 1 2038 25 view .LVU489
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 74


 1669 001e 03EB000A 		add	r10, r3, r0
 1670              	.LVL212:
2039:System/storage/Storage.c **** 
 1671              		.loc 1 2039 9 is_stmt 1 view .LVU490
2041:System/storage/Storage.c ****         {
 1672              		.loc 1 2041 9 view .LVU491
2041:System/storage/Storage.c ****         {
 1673              		.loc 1 2041 28 is_stmt 0 view .LVU492
 1674 0022 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
2041:System/storage/Storage.c ****         {
 1675              		.loc 1 2041 9 view .LVU493
 1676 0024 012B     		cmp	r3, #1
 1677 0026 64D1     		bne	.L151
2044:System/storage/Storage.c ****                 {
 1678              		.loc 1 2044 17 is_stmt 1 view .LVU494
2044:System/storage/Storage.c ****                 {
 1679              		.loc 1 2044 24 is_stmt 0 view .LVU495
 1680 0028 236B     		ldr	r3, [r4, #48]
2044:System/storage/Storage.c ****                 {
 1681              		.loc 1 2044 20 view .LVU496
 1682 002a 002B     		cmp	r3, #0
 1683 002c 63D0     		beq	.L152
2044:System/storage/Storage.c ****                 {
 1684              		.loc 1 2044 40 discriminator 1 view .LVU497
 1685 002e E16A     		ldr	r1, [r4, #44]
 1686              	.LVL213:
2044:System/storage/Storage.c ****                 {
 1687              		.loc 1 2044 34 discriminator 1 view .LVU498
 1688 0030 0029     		cmp	r1, #0
 1689 0032 62D0     		beq	.L153
2046:System/storage/Storage.c ****                     /* get w25qxx device info */
 1690              		.loc 1 2046 21 is_stmt 1 view .LVU499
2046:System/storage/Storage.c ****                     /* get w25qxx device info */
 1691              		.loc 1 2046 66 is_stmt 0 view .LVU500
 1692 0034 DB69     		ldr	r3, [r3, #28]
2046:System/storage/Storage.c ****                     /* get w25qxx device info */
 1693              		.loc 1 2046 36 view .LVU501
 1694 0036 01A8     		add	r0, sp, #4
 1695              	.LVL214:
2046:System/storage/Storage.c ****                     /* get w25qxx device info */
 1696              		.loc 1 2046 36 view .LVU502
 1697 0038 9847     		blx	r3
 1698              	.LVL215:
2046:System/storage/Storage.c ****                     /* get w25qxx device info */
 1699              		.loc 1 2046 34 view .LVU503
 1700 003a DDF81480 		ldr	r8, [sp, #20]
 1701              	.LVL216:
2049:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
 1702              		.loc 1 2049 21 is_stmt 1 view .LVU504
2049:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
 1703              		.loc 1 2049 38 is_stmt 0 view .LVU505
 1704 003e 236B     		ldr	r3, [r4, #48]
2049:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
 1705              		.loc 1 2049 68 view .LVU506
 1706 0040 DB69     		ldr	r3, [r3, #28]
2049:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
 1707              		.loc 1 2049 38 view .LVU507
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 75


 1708 0042 E16A     		ldr	r1, [r4, #44]
 1709 0044 08A8     		add	r0, sp, #32
 1710 0046 9847     		blx	r3
 1711              	.LVL217:
2049:System/storage/Storage.c ****                     if (flash_end_addr > read_start_addr)
 1712              		.loc 1 2049 36 view .LVU508
 1713 0048 099F     		ldr	r7, [sp, #36]
 1714              	.LVL218:
2050:System/storage/Storage.c ****                         return false;
 1715              		.loc 1 2050 21 is_stmt 1 view .LVU509
2050:System/storage/Storage.c ****                         return false;
 1716              		.loc 1 2050 24 is_stmt 0 view .LVU510
 1717 004a BA45     		cmp	r10, r7
 1718 004c 57D3     		bcc	.L154
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1719              		.loc 1 2054 21 is_stmt 1 view .LVU511
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1720              		.loc 1 2054 39 is_stmt 0 view .LVU512
 1721 004e 236B     		ldr	r3, [r4, #48]
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1722              		.loc 1 2054 69 view .LVU513
 1723 0050 DB69     		ldr	r3, [r3, #28]
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1724              		.loc 1 2054 39 view .LVU514
 1725 0052 E16A     		ldr	r1, [r4, #44]
 1726 0054 0FA8     		add	r0, sp, #60
 1727 0056 9847     		blx	r3
 1728              	.LVL219:
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1729              		.loc 1 2054 107 view .LVU515
 1730 0058 119B     		ldr	r3, [sp, #68]
2054:System/storage/Storage.c ****                     if ((len + read_start_addr) > flash_end_addr)
 1731              		.loc 1 2054 36 view .LVU516
 1732 005a 07EB0309 		add	r9, r7, r3
 1733              	.LVL220:
2055:System/storage/Storage.c ****                         return false;
 1734              		.loc 1 2055 21 is_stmt 1 view .LVU517
2055:System/storage/Storage.c ****                         return false;
 1735              		.loc 1 2055 30 is_stmt 0 view .LVU518
 1736 005e 05EB0A03 		add	r3, r5, r10
2055:System/storage/Storage.c ****                         return false;
 1737              		.loc 1 2055 24 view .LVU519
 1738 0062 4B45     		cmp	r3, r9
 1739 0064 4DD8     		bhi	.L155
2058:System/storage/Storage.c ****                     {
 1740              		.loc 1 2058 21 is_stmt 1 view .LVU520
2058:System/storage/Storage.c ****                     {
 1741              		.loc 1 2058 24 is_stmt 0 view .LVU521
 1742 0066 B8F1000F 		cmp	r8, #0
 1743 006a 4CD0     		beq	.L156
2060:System/storage/Storage.c ****                         read_offset = read_start_addr - section_start_addr;
 1744              		.loc 1 2060 25 is_stmt 1 view .LVU522
2060:System/storage/Storage.c ****                         read_offset = read_start_addr - section_start_addr;
 1745              		.loc 1 2060 46 is_stmt 0 view .LVU523
 1746 006c 236B     		ldr	r3, [r4, #48]
2060:System/storage/Storage.c ****                         read_offset = read_start_addr - section_start_addr;
 1747              		.loc 1 2060 76 view .LVU524
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 76


 1748 006e 1B6A     		ldr	r3, [r3, #32]
2060:System/storage/Storage.c ****                         read_offset = read_start_addr - section_start_addr;
 1749              		.loc 1 2060 46 view .LVU525
 1750 0070 5146     		mov	r1, r10
 1751 0072 E06A     		ldr	r0, [r4, #44]
 1752 0074 9847     		blx	r3
 1753              	.LVL221:
 1754 0076 8146     		mov	r9, r0
 1755              	.LVL222:
2061:System/storage/Storage.c ****                         if (section_size > sizeof(flash_read_tmp))
 1756              		.loc 1 2061 25 is_stmt 1 view .LVU526
2061:System/storage/Storage.c ****                         if (section_size > sizeof(flash_read_tmp))
 1757              		.loc 1 2061 37 is_stmt 0 view .LVU527
 1758 0078 AAEB000A 		sub	r10, r10, r0
 1759              	.LVL223:
2062:System/storage/Storage.c ****                             return false;
 1760              		.loc 1 2062 25 is_stmt 1 view .LVU528
2062:System/storage/Storage.c ****                             return false;
 1761              		.loc 1 2062 28 is_stmt 0 view .LVU529
 1762 007c B8F5005F 		cmp	r8, #8192
 1763 0080 26D9     		bls	.L147
2063:System/storage/Storage.c **** 
 1764              		.loc 1 2063 36 view .LVU530
 1765 0082 0020     		movs	r0, #0
 1766              	.LVL224:
2063:System/storage/Storage.c **** 
 1767              		.loc 1 2063 36 view .LVU531
 1768 0084 2EE0     		b	.L144
 1769              	.LVL225:
 1770              	.L158:
2063:System/storage/Storage.c **** 
 1771              		.loc 1 2063 36 view .LVU532
 1772 0086 2F46     		mov	r7, r5
 1773              	.LVL226:
 1774              	.L145:
2074:System/storage/Storage.c ****                                 return false;
 1775              		.loc 1 2074 29 is_stmt 1 view .LVU533
2074:System/storage/Storage.c ****                                 return false;
 1776              		.loc 1 2074 33 is_stmt 0 view .LVU534
 1777 0088 236B     		ldr	r3, [r4, #48]
2074:System/storage/Storage.c ****                                 return false;
 1778              		.loc 1 2074 63 view .LVU535
 1779 008a D3F810B0 		ldr	fp, [r3, #16]
2074:System/storage/Storage.c ****                                 return false;
 1780              		.loc 1 2074 33 view .LVU536
 1781 008e 4346     		mov	r3, r8
 1782 0090 214A     		ldr	r2, .L163+4
 1783 0092 4946     		mov	r1, r9
 1784 0094 E06A     		ldr	r0, [r4, #44]
 1785              	.LVL227:
2074:System/storage/Storage.c ****                                 return false;
 1786              		.loc 1 2074 33 view .LVU537
 1787 0096 D847     		blx	fp
 1788              	.LVL228:
2074:System/storage/Storage.c ****                                 return false;
 1789              		.loc 1 2074 32 view .LVU538
 1790 0098 B8BB     		cbnz	r0, .L159
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 77


2077:System/storage/Storage.c ****                             memset(flash_read_tmp, 0, section_size);
 1791              		.loc 1 2077 29 is_stmt 1 view .LVU539
 1792 009a DFF87CB0 		ldr	fp, .L163+4
 1793 009e 3A46     		mov	r2, r7
 1794 00a0 0BEB0A01 		add	r1, fp, r10
 1795 00a4 3046     		mov	r0, r6
 1796 00a6 FFF7FEFF 		bl	memcpy
 1797              	.LVL229:
2078:System/storage/Storage.c **** 
 1798              		.loc 1 2078 29 view .LVU540
 1799 00aa 4246     		mov	r2, r8
 1800 00ac 0021     		movs	r1, #0
 1801 00ae 5846     		mov	r0, fp
 1802 00b0 FFF7FEFF 		bl	memset
 1803              	.LVL230:
2080:System/storage/Storage.c ****                             if (len == 0)
 1804              		.loc 1 2080 29 view .LVU541
2081:System/storage/Storage.c ****                                 return true;
 1805              		.loc 1 2081 29 view .LVU542
2081:System/storage/Storage.c ****                                 return true;
 1806              		.loc 1 2081 32 is_stmt 0 view .LVU543
 1807 00b4 ED1B     		subs	r5, r5, r7
 1808              	.LVL231:
2081:System/storage/Storage.c ****                                 return true;
 1809              		.loc 1 2081 32 view .LVU544
 1810 00b6 2AD0     		beq	.L160
2084:System/storage/Storage.c ****                             next_read_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr
 1811              		.loc 1 2084 29 is_stmt 1 view .LVU545
 1812              	.LVL232:
2085:System/storage/Storage.c ****                             if (next_read_addr == section_start_addr)
 1813              		.loc 1 2085 29 view .LVU546
2085:System/storage/Storage.c ****                             if (next_read_addr == section_start_addr)
 1814              		.loc 1 2085 46 is_stmt 0 view .LVU547
 1815 00b8 236B     		ldr	r3, [r4, #48]
2085:System/storage/Storage.c ****                             if (next_read_addr == section_start_addr)
 1816              		.loc 1 2085 76 view .LVU548
 1817 00ba 1B6A     		ldr	r3, [r3, #32]
2085:System/storage/Storage.c ****                             if (next_read_addr == section_start_addr)
 1818              		.loc 1 2085 46 view .LVU549
 1819 00bc 09EB0701 		add	r1, r9, r7
 1820 00c0 E06A     		ldr	r0, [r4, #44]
 1821 00c2 9847     		blx	r3
 1822              	.LVL233:
2086:System/storage/Storage.c ****                                 read_offset = read_len;
 1823              		.loc 1 2086 29 is_stmt 1 view .LVU550
2086:System/storage/Storage.c ****                                 read_offset = read_len;
 1824              		.loc 1 2086 32 is_stmt 0 view .LVU551
 1825 00c4 8145     		cmp	r9, r0
 1826 00c6 0AD0     		beq	.L161
2084:System/storage/Storage.c ****                             next_read_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_addr
 1827              		.loc 1 2084 41 view .LVU552
 1828 00c8 4FF0000A 		mov	r10, #0
 1829              	.L146:
 1830              	.LVL234:
2089:System/storage/Storage.c ****                             read_len = len;
 1831              		.loc 1 2089 29 is_stmt 1 view .LVU553
2089:System/storage/Storage.c ****                             read_len = len;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 78


 1832              		.loc 1 2089 36 is_stmt 0 view .LVU554
 1833 00cc 3E44     		add	r6, r6, r7
 1834              	.LVL235:
2090:System/storage/Storage.c ****                             section_start_addr = next_read_addr;
 1835              		.loc 1 2090 29 is_stmt 1 view .LVU555
2091:System/storage/Storage.c ****                         }
 1836              		.loc 1 2091 29 view .LVU556
2065:System/storage/Storage.c ****                         {
 1837              		.loc 1 2065 30 view .LVU557
2091:System/storage/Storage.c ****                         }
 1838              		.loc 1 2091 48 is_stmt 0 view .LVU558
 1839 00ce 8146     		mov	r9, r0
 1840              	.LVL236:
 1841              	.L147:
2065:System/storage/Storage.c ****                         {
 1842              		.loc 1 2065 25 is_stmt 1 view .LVU559
2070:System/storage/Storage.c ****                                 read_len = section_size - read_offset;
 1843              		.loc 1 2070 29 view .LVU560
2070:System/storage/Storage.c ****                                 read_len = section_size - read_offset;
 1844              		.loc 1 2070 45 is_stmt 0 view .LVU561
 1845 00d0 05EB0A03 		add	r3, r5, r10
2070:System/storage/Storage.c ****                                 read_len = section_size - read_offset;
 1846              		.loc 1 2070 32 view .LVU562
 1847 00d4 4345     		cmp	r3, r8
 1848 00d6 D6D9     		bls	.L158
2071:System/storage/Storage.c **** 
 1849              		.loc 1 2071 33 is_stmt 1 view .LVU563
2071:System/storage/Storage.c **** 
 1850              		.loc 1 2071 42 is_stmt 0 view .LVU564
 1851 00d8 A8EB0A07 		sub	r7, r8, r10
 1852              	.LVL237:
2071:System/storage/Storage.c **** 
 1853              		.loc 1 2071 42 view .LVU565
 1854 00dc D4E7     		b	.L145
 1855              	.LVL238:
 1856              	.L161:
2087:System/storage/Storage.c ****                             
 1857              		.loc 1 2087 45 view .LVU566
 1858 00de BA46     		mov	r10, r7
 1859 00e0 F4E7     		b	.L146
 1860              	.LVL239:
 1861              	.L148:
2102:System/storage/Storage.c **** }
 1862              		.loc 1 2102 12 view .LVU567
 1863 00e2 0020     		movs	r0, #0
 1864              	.LVL240:
 1865              	.L144:
2103:System/storage/Storage.c **** 
 1866              		.loc 1 2103 1 view .LVU568
 1867 00e4 17B0     		add	sp, sp, #92
 1868              	.LCFI20:
 1869              		.cfi_remember_state
 1870              		.cfi_def_cfa_offset 36
 1871              		@ sp needed
 1872 00e6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1873              	.LVL241:
 1874              	.L149:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 79


 1875              	.LCFI21:
 1876              		.cfi_restore_state
2102:System/storage/Storage.c **** }
 1877              		.loc 1 2102 12 view .LVU569
 1878 00ea 0020     		movs	r0, #0
 1879              	.LVL242:
2102:System/storage/Storage.c **** }
 1880              		.loc 1 2102 12 view .LVU570
 1881 00ec FAE7     		b	.L144
 1882              	.LVL243:
 1883              	.L150:
2102:System/storage/Storage.c **** }
 1884              		.loc 1 2102 12 view .LVU571
 1885 00ee 0020     		movs	r0, #0
 1886              	.LVL244:
2102:System/storage/Storage.c **** }
 1887              		.loc 1 2102 12 view .LVU572
 1888 00f0 F8E7     		b	.L144
 1889              	.LVL245:
 1890              	.L151:
2098:System/storage/Storage.c ****         }
 1891              		.loc 1 2098 24 view .LVU573
 1892 00f2 0020     		movs	r0, #0
 1893              	.LVL246:
2098:System/storage/Storage.c ****         }
 1894              		.loc 1 2098 24 view .LVU574
 1895 00f4 F6E7     		b	.L144
 1896              	.LVL247:
 1897              	.L152:
2102:System/storage/Storage.c **** }
 1898              		.loc 1 2102 12 view .LVU575
 1899 00f6 0020     		movs	r0, #0
 1900              	.LVL248:
2102:System/storage/Storage.c **** }
 1901              		.loc 1 2102 12 view .LVU576
 1902 00f8 F4E7     		b	.L144
 1903              	.LVL249:
 1904              	.L153:
2102:System/storage/Storage.c **** }
 1905              		.loc 1 2102 12 view .LVU577
 1906 00fa 0020     		movs	r0, #0
 1907              	.LVL250:
2102:System/storage/Storage.c **** }
 1908              		.loc 1 2102 12 view .LVU578
 1909 00fc F2E7     		b	.L144
 1910              	.LVL251:
 1911              	.L154:
2051:System/storage/Storage.c **** 
 1912              		.loc 1 2051 32 view .LVU579
 1913 00fe 0020     		movs	r0, #0
 1914 0100 F0E7     		b	.L144
 1915              	.LVL252:
 1916              	.L155:
2056:System/storage/Storage.c **** 
 1917              		.loc 1 2056 32 view .LVU580
 1918 0102 0020     		movs	r0, #0
 1919 0104 EEE7     		b	.L144
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 80


 1920              	.L156:
2102:System/storage/Storage.c **** }
 1921              		.loc 1 2102 12 view .LVU581
 1922 0106 0020     		movs	r0, #0
 1923 0108 ECE7     		b	.L144
 1924              	.LVL253:
 1925              	.L159:
2075:System/storage/Storage.c ****                         
 1926              		.loc 1 2075 40 view .LVU582
 1927 010a 0020     		movs	r0, #0
 1928 010c EAE7     		b	.L144
 1929              	.L160:
2082:System/storage/Storage.c ****                         
 1930              		.loc 1 2082 40 view .LVU583
 1931 010e 0120     		movs	r0, #1
 1932 0110 E8E7     		b	.L144
 1933              	.L164:
 1934 0112 00BF     		.align	2
 1935              	.L163:
 1936 0114 00000000 		.word	.LANCHOR0
 1937 0118 00000000 		.word	flash_read_tmp
 1938              		.cfi_endproc
 1939              	.LFE176:
 1941              		.section	.text.Storage_Format,"ax",%progbits
 1942              		.align	1
 1943              		.syntax unified
 1944              		.thumb
 1945              		.thumb_func
 1947              	Storage_Format:
 1948              	.LFB147:
 249:System/storage/Storage.c ****     uint32_t size = 0;
 1949              		.loc 1 249 1 is_stmt 1 view -0
 1950              		.cfi_startproc
 1951              		@ args = 0, pretend = 0, frame = 0
 1952              		@ frame_needed = 0, uses_anonymous_args = 0
 1953 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1954              	.LCFI22:
 1955              		.cfi_def_cfa_offset 24
 1956              		.cfi_offset 3, -24
 1957              		.cfi_offset 4, -20
 1958              		.cfi_offset 5, -16
 1959              		.cfi_offset 6, -12
 1960              		.cfi_offset 7, -8
 1961              		.cfi_offset 14, -4
 250:System/storage/Storage.c ****     uint8_t default_data = 0;
 1962              		.loc 1 250 5 view .LVU585
 1963              	.LVL254:
 251:System/storage/Storage.c ****     uint32_t read_time = 0;
 1964              		.loc 1 251 5 view .LVU586
 252:System/storage/Storage.c ****     uint32_t remain_size = 0;
 1965              		.loc 1 252 5 view .LVU587
 253:System/storage/Storage.c ****     uint32_t addr_offset = From_Start_Address;
 1966              		.loc 1 253 5 view .LVU588
 254:System/storage/Storage.c ****         
 1967              		.loc 1 254 5 view .LVU589
 256:System/storage/Storage.c ****     default_data = ExtFlash_Storage_DefaultData;
 1968              		.loc 1 256 5 view .LVU590
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 81


 257:System/storage/Storage.c ****     remain_size = ExtFlash_Storage_TotalSize;
 1969              		.loc 1 257 5 view .LVU591
 258:System/storage/Storage.c ****     read_time = ExtFlash_Storage_TotalSize / Storage_TabSize;
 1970              		.loc 1 258 5 view .LVU592
 259:System/storage/Storage.c ****     if (ExtFlash_Storage_TotalSize % Storage_TabSize)
 1971              		.loc 1 259 5 view .LVU593
 260:System/storage/Storage.c ****         read_time ++;
 1972              		.loc 1 260 5 view .LVU594
 263:System/storage/Storage.c ****     {
 1973              		.loc 1 263 5 view .LVU595
 1974              	.LBB9:
 263:System/storage/Storage.c ****     {
 1975              		.loc 1 263 9 view .LVU596
 263:System/storage/Storage.c ****     {
 1976              		.loc 1 263 18 is_stmt 0 view .LVU597
 1977 0002 0025     		movs	r5, #0
 1978              	.LBE9:
 254:System/storage/Storage.c ****         
 1979              		.loc 1 254 14 view .LVU598
 1980 0004 2F46     		mov	r7, r5
 258:System/storage/Storage.c ****     read_time = ExtFlash_Storage_TotalSize / Storage_TabSize;
 1981              		.loc 1 258 17 view .LVU599
 1982 0006 4FF40026 		mov	r6, #524288
 256:System/storage/Storage.c ****     default_data = ExtFlash_Storage_DefaultData;
 1983              		.loc 1 256 10 view .LVU600
 1984 000a 4FF48054 		mov	r4, #4096
 1985              	.LVL255:
 1986              	.L166:
 1987              	.LBB12:
 263:System/storage/Storage.c ****     {
 1988              		.loc 1 263 25 is_stmt 1 discriminator 1 view .LVU601
 263:System/storage/Storage.c ****     {
 1989              		.loc 1 263 5 is_stmt 0 discriminator 1 view .LVU602
 1990 000e 7F2D     		cmp	r5, #127
 1991 0010 1ED8     		bhi	.L176
 265:System/storage/Storage.c ****             size = remain_size;
 1992              		.loc 1 265 9 is_stmt 1 view .LVU603
 265:System/storage/Storage.c ****             size = remain_size;
 1993              		.loc 1 265 12 is_stmt 0 view .LVU604
 1994 0012 16B1     		cbz	r6, .L167
 265:System/storage/Storage.c ****             size = remain_size;
 1995              		.loc 1 265 32 discriminator 1 view .LVU605
 1996 0014 B442     		cmp	r4, r6
 1997 0016 00D9     		bls	.L167
 266:System/storage/Storage.c **** 
 1998              		.loc 1 266 18 view .LVU606
 1999 0018 3446     		mov	r4, r6
 2000              	.LVL256:
 2001              	.L167:
 268:System/storage/Storage.c ****             return false;
 2002              		.loc 1 268 9 is_stmt 1 view .LVU607
 268:System/storage/Storage.c ****             return false;
 2003              		.loc 1 268 14 is_stmt 0 view .LVU608
 2004 001a 2146     		mov	r1, r4
 2005 001c 3846     		mov	r0, r7
 2006 001e FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Erase
 2007              	.LVL257:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 82


 268:System/storage/Storage.c ****             return false;
 2008              		.loc 1 268 12 view .LVU609
 2009 0022 0146     		mov	r1, r0
 2010 0024 B8B1     		cbz	r0, .L168
 271:System/storage/Storage.c ****             return false;
 2011              		.loc 1 271 9 is_stmt 1 view .LVU610
 271:System/storage/Storage.c ****             return false;
 2012              		.loc 1 271 14 is_stmt 0 view .LVU611
 2013 0026 2246     		mov	r2, r4
 2014 0028 0C49     		ldr	r1, .L178
 2015 002a 3846     		mov	r0, r7
 2016 002c FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 2017              	.LVL258:
 271:System/storage/Storage.c ****             return false;
 2018              		.loc 1 271 12 view .LVU612
 2019 0030 0146     		mov	r1, r0
 2020 0032 80B1     		cbz	r0, .L168
 2021              	.LBB10:
 274:System/storage/Storage.c ****         {
 2022              		.loc 1 274 22 view .LVU613
 2023 0034 0023     		movs	r3, #0
 2024              	.L169:
 2025              	.LVL259:
 274:System/storage/Storage.c ****         {
 2026              		.loc 1 274 29 is_stmt 1 discriminator 1 view .LVU614
 274:System/storage/Storage.c ****         {
 2027              		.loc 1 274 9 is_stmt 0 discriminator 1 view .LVU615
 2028 0036 9C42     		cmp	r4, r3
 2029 0038 05D9     		bls	.L177
 276:System/storage/Storage.c ****                 return false;
 2030              		.loc 1 276 13 is_stmt 1 view .LVU616
 276:System/storage/Storage.c ****                 return false;
 2031              		.loc 1 276 30 is_stmt 0 view .LVU617
 2032 003a 084A     		ldr	r2, .L178
 2033 003c 525D     		ldrb	r2, [r2, r5]	@ zero_extendqisi2
 276:System/storage/Storage.c ****                 return false;
 2034              		.loc 1 276 16 view .LVU618
 2035 003e FF2A     		cmp	r2, #255
 2036 0040 08D1     		bne	.L174
 274:System/storage/Storage.c ****         {
 2037              		.loc 1 274 39 is_stmt 1 discriminator 2 view .LVU619
 274:System/storage/Storage.c ****         {
 2038              		.loc 1 274 40 is_stmt 0 discriminator 2 view .LVU620
 2039 0042 0133     		adds	r3, r3, #1
 2040              	.LVL260:
 274:System/storage/Storage.c ****         {
 2041              		.loc 1 274 40 discriminator 2 view .LVU621
 2042 0044 F7E7     		b	.L169
 2043              	.L177:
 274:System/storage/Storage.c ****         {
 2044              		.loc 1 274 40 discriminator 2 view .LVU622
 2045              	.LBE10:
 280:System/storage/Storage.c ****         remain_size -= size;
 2046              		.loc 1 280 9 is_stmt 1 view .LVU623
 280:System/storage/Storage.c ****         remain_size -= size;
 2047              		.loc 1 280 21 is_stmt 0 view .LVU624
 2048 0046 2744     		add	r7, r7, r4
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 83


 2049              	.LVL261:
 281:System/storage/Storage.c **** 
 2050              		.loc 1 281 9 is_stmt 1 view .LVU625
 283:System/storage/Storage.c ****             return true;
 2051              		.loc 1 283 9 view .LVU626
 283:System/storage/Storage.c ****             return true;
 2052              		.loc 1 283 12 is_stmt 0 view .LVU627
 2053 0048 361B     		subs	r6, r6, r4
 2054              	.LVL262:
 283:System/storage/Storage.c ****             return true;
 2055              		.loc 1 283 12 view .LVU628
 2056 004a 04D0     		beq	.L168
 263:System/storage/Storage.c ****     {
 2057              		.loc 1 263 40 is_stmt 1 discriminator 2 view .LVU629
 263:System/storage/Storage.c ****     {
 2058              		.loc 1 263 41 is_stmt 0 discriminator 2 view .LVU630
 2059 004c 0135     		adds	r5, r5, #1
 2060              	.LVL263:
 263:System/storage/Storage.c ****     {
 2061              		.loc 1 263 41 discriminator 2 view .LVU631
 2062 004e DEE7     		b	.L166
 2063              	.LVL264:
 2064              	.L176:
 263:System/storage/Storage.c ****     {
 2065              		.loc 1 263 41 discriminator 2 view .LVU632
 2066              	.LBE12:
 287:System/storage/Storage.c **** }
 2067              		.loc 1 287 12 view .LVU633
 2068 0050 0021     		movs	r1, #0
 2069              	.LBB13:
 2070 0052 00E0     		b	.L168
 2071              	.LVL265:
 2072              	.L174:
 2073              	.LBB11:
 277:System/storage/Storage.c ****         }
 2074              		.loc 1 277 24 view .LVU634
 2075 0054 0021     		movs	r1, #0
 2076              	.LVL266:
 2077              	.L168:
 277:System/storage/Storage.c ****         }
 2078              		.loc 1 277 24 view .LVU635
 2079              	.LBE11:
 2080              	.LBE13:
 288:System/storage/Storage.c **** 
 2081              		.loc 1 288 1 view .LVU636
 2082 0056 0846     		mov	r0, r1
 2083 0058 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2084              	.LVL267:
 2085              	.L179:
 288:System/storage/Storage.c **** 
 2086              		.loc 1 288 1 view .LVU637
 2087 005a 00BF     		.align	2
 2088              	.L178:
 2089 005c 00000000 		.word	page_data_tmp
 2090              		.cfi_endproc
 2091              	.LFE147:
 2093              		.section	.text.Storage_ExtFlash_ParaSec_Write,"ax",%progbits
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 84


 2094              		.align	1
 2095              		.syntax unified
 2096              		.thumb
 2097              		.thumb_func
 2099              	Storage_ExtFlash_ParaSec_Write:
 2100              	.LVL268:
 2101              	.LFB177:
2106:System/storage/Storage.c ****     uint32_t write_start_addr = 0;
 2102              		.loc 1 2106 1 is_stmt 1 view -0
 2103              		.cfi_startproc
 2104              		@ args = 0, pretend = 0, frame = 88
 2105              		@ frame_needed = 0, uses_anonymous_args = 0
2106:System/storage/Storage.c ****     uint32_t write_start_addr = 0;
 2106              		.loc 1 2106 1 is_stmt 0 view .LVU639
 2107 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2108              	.LCFI23:
 2109              		.cfi_def_cfa_offset 36
 2110              		.cfi_offset 4, -36
 2111              		.cfi_offset 5, -32
 2112              		.cfi_offset 6, -28
 2113              		.cfi_offset 7, -24
 2114              		.cfi_offset 8, -20
 2115              		.cfi_offset 9, -16
 2116              		.cfi_offset 10, -12
 2117              		.cfi_offset 11, -8
 2118              		.cfi_offset 14, -4
 2119 0004 97B0     		sub	sp, sp, #92
 2120              	.LCFI24:
 2121              		.cfi_def_cfa_offset 128
2107:System/storage/Storage.c ****     uint32_t flash_end_addr = 0;
 2122              		.loc 1 2107 5 is_stmt 1 view .LVU640
 2123              	.LVL269:
2108:System/storage/Storage.c ****     uint32_t section_start_addr = 0;
 2124              		.loc 1 2108 5 view .LVU641
2109:System/storage/Storage.c ****     uint32_t next_write_addr = 0;
 2125              		.loc 1 2109 5 view .LVU642
2110:System/storage/Storage.c ****     uint32_t section_size = 0;
 2126              		.loc 1 2110 5 view .LVU643
2111:System/storage/Storage.c ****     uint32_t write_offset = 0;
 2127              		.loc 1 2111 5 view .LVU644
2112:System/storage/Storage.c ****     uint32_t write_len = len;
 2128              		.loc 1 2112 5 view .LVU645
2113:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *dev = NULL;
 2129              		.loc 1 2113 5 view .LVU646
2114:System/storage/Storage.c ****     DevW25Qxx_Error_List state = DevW25Qxx_Ok;
 2130              		.loc 1 2114 5 view .LVU647
2115:System/storage/Storage.c **** 
 2131              		.loc 1 2115 5 view .LVU648
2117:System/storage/Storage.c ****     {
 2132              		.loc 1 2117 5 view .LVU649
2117:System/storage/Storage.c ****     {
 2133              		.loc 1 2117 25 is_stmt 0 view .LVU650
 2134 0006 494B     		ldr	r3, .L201
 2135 0008 9D68     		ldr	r5, [r3, #8]
2117:System/storage/Storage.c ****     {
 2136              		.loc 1 2117 8 view .LVU651
 2137 000a 002D     		cmp	r5, #0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 85


 2138 000c 77D0     		beq	.L186
 2139 000e 0E46     		mov	r6, r1
 2140 0010 1446     		mov	r4, r2
2117:System/storage/Storage.c ****     {
 2141              		.loc 1 2117 46 discriminator 1 view .LVU652
 2142 0012 0029     		cmp	r1, #0
 2143 0014 77D0     		beq	.L187
2117:System/storage/Storage.c ****     {
 2144              		.loc 1 2117 56 discriminator 2 view .LVU653
 2145 0016 002A     		cmp	r2, #0
 2146 0018 77D0     		beq	.L188
2119:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 2147              		.loc 1 2119 9 is_stmt 1 view .LVU654
2119:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 2148              		.loc 1 2119 57 is_stmt 0 view .LVU655
 2149 001a D3F83670 		ldr	r7, [r3, #54]	@ unaligned
2119:System/storage/Storage.c ****         dev = (Storage_ExtFLashDevObj_TypeDef *)(Storage_Monitor.ExtDev_ptr);
 2150              		.loc 1 2119 26 view .LVU656
 2151 001e 0744     		add	r7, r7, r0
 2152              	.LVL270:
2120:System/storage/Storage.c ****     
 2153              		.loc 1 2120 9 is_stmt 1 view .LVU657
2122:System/storage/Storage.c ****         {
 2154              		.loc 1 2122 9 view .LVU658
2122:System/storage/Storage.c ****         {
 2155              		.loc 1 2122 28 is_stmt 0 view .LVU659
 2156 0020 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
2122:System/storage/Storage.c ****         {
 2157              		.loc 1 2122 9 view .LVU660
 2158 0022 012B     		cmp	r3, #1
 2159 0024 73D1     		bne	.L189
2125:System/storage/Storage.c ****                 {
 2160              		.loc 1 2125 17 is_stmt 1 view .LVU661
2125:System/storage/Storage.c ****                 {
 2161              		.loc 1 2125 24 is_stmt 0 view .LVU662
 2162 0026 2B6B     		ldr	r3, [r5, #48]
2125:System/storage/Storage.c ****                 {
 2163              		.loc 1 2125 20 view .LVU663
 2164 0028 002B     		cmp	r3, #0
 2165 002a 66D0     		beq	.L182
2125:System/storage/Storage.c ****                 {
 2166              		.loc 1 2125 40 discriminator 1 view .LVU664
 2167 002c E96A     		ldr	r1, [r5, #44]
 2168              	.LVL271:
2125:System/storage/Storage.c ****                 {
 2169              		.loc 1 2125 34 discriminator 1 view .LVU665
 2170 002e 0029     		cmp	r1, #0
 2171 0030 63D0     		beq	.L182
2127:System/storage/Storage.c ****                     /* get w25qxx device info */
 2172              		.loc 1 2127 21 is_stmt 1 view .LVU666
2127:System/storage/Storage.c ****                     /* get w25qxx device info */
 2173              		.loc 1 2127 66 is_stmt 0 view .LVU667
 2174 0032 DB69     		ldr	r3, [r3, #28]
2127:System/storage/Storage.c ****                     /* get w25qxx device info */
 2175              		.loc 1 2127 36 view .LVU668
 2176 0034 01A8     		add	r0, sp, #4
 2177              	.LVL272:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 86


2127:System/storage/Storage.c ****                     /* get w25qxx device info */
 2178              		.loc 1 2127 36 view .LVU669
 2179 0036 9847     		blx	r3
 2180              	.LVL273:
2127:System/storage/Storage.c ****                     /* get w25qxx device info */
 2181              		.loc 1 2127 34 view .LVU670
 2182 0038 DDF81490 		ldr	r9, [sp, #20]
 2183              	.LVL274:
2130:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
 2184              		.loc 1 2130 21 is_stmt 1 view .LVU671
2130:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
 2185              		.loc 1 2130 38 is_stmt 0 view .LVU672
 2186 003c 2B6B     		ldr	r3, [r5, #48]
2130:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
 2187              		.loc 1 2130 68 view .LVU673
 2188 003e DB69     		ldr	r3, [r3, #28]
2130:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
 2189              		.loc 1 2130 38 view .LVU674
 2190 0040 E96A     		ldr	r1, [r5, #44]
 2191 0042 08A8     		add	r0, sp, #32
 2192 0044 9847     		blx	r3
 2193              	.LVL275:
2130:System/storage/Storage.c ****                     if (flash_end_addr > write_start_addr)
 2194              		.loc 1 2130 36 view .LVU675
 2195 0046 DDF82480 		ldr	r8, [sp, #36]
 2196              	.LVL276:
2131:System/storage/Storage.c ****                         return false;
 2197              		.loc 1 2131 21 is_stmt 1 view .LVU676
2131:System/storage/Storage.c ****                         return false;
 2198              		.loc 1 2131 24 is_stmt 0 view .LVU677
 2199 004a 4745     		cmp	r7, r8
 2200 004c 61D3     		bcc	.L190
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2201              		.loc 1 2135 21 is_stmt 1 view .LVU678
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2202              		.loc 1 2135 39 is_stmt 0 view .LVU679
 2203 004e 2B6B     		ldr	r3, [r5, #48]
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2204              		.loc 1 2135 69 view .LVU680
 2205 0050 DB69     		ldr	r3, [r3, #28]
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2206              		.loc 1 2135 39 view .LVU681
 2207 0052 E96A     		ldr	r1, [r5, #44]
 2208 0054 0FA8     		add	r0, sp, #60
 2209 0056 9847     		blx	r3
 2210              	.LVL277:
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2211              		.loc 1 2135 107 view .LVU682
 2212 0058 119B     		ldr	r3, [sp, #68]
2135:System/storage/Storage.c ****                     if ((len + write_start_addr) > flash_end_addr)
 2213              		.loc 1 2135 36 view .LVU683
 2214 005a 9844     		add	r8, r8, r3
 2215              	.LVL278:
2136:System/storage/Storage.c ****                         return false;
 2216              		.loc 1 2136 21 is_stmt 1 view .LVU684
2136:System/storage/Storage.c ****                         return false;
 2217              		.loc 1 2136 30 is_stmt 0 view .LVU685
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 87


 2218 005c E319     		adds	r3, r4, r7
2136:System/storage/Storage.c ****                         return false;
 2219              		.loc 1 2136 24 view .LVU686
 2220 005e 4345     		cmp	r3, r8
 2221 0060 59D8     		bhi	.L191
2139:System/storage/Storage.c ****                     {
 2222              		.loc 1 2139 21 is_stmt 1 view .LVU687
2139:System/storage/Storage.c ****                     {
 2223              		.loc 1 2139 24 is_stmt 0 view .LVU688
 2224 0062 B9F1000F 		cmp	r9, #0
 2225 0066 48D0     		beq	.L182
2141:System/storage/Storage.c ****                         write_offset = write_start_addr - section_start_addr;
 2226              		.loc 1 2141 25 is_stmt 1 view .LVU689
2141:System/storage/Storage.c ****                         write_offset = write_start_addr - section_start_addr;
 2227              		.loc 1 2141 46 is_stmt 0 view .LVU690
 2228 0068 2B6B     		ldr	r3, [r5, #48]
2141:System/storage/Storage.c ****                         write_offset = write_start_addr - section_start_addr;
 2229              		.loc 1 2141 76 view .LVU691
 2230 006a 1B6A     		ldr	r3, [r3, #32]
2141:System/storage/Storage.c ****                         write_offset = write_start_addr - section_start_addr;
 2231              		.loc 1 2141 46 view .LVU692
 2232 006c 3946     		mov	r1, r7
 2233 006e E86A     		ldr	r0, [r5, #44]
 2234 0070 9847     		blx	r3
 2235              	.LVL279:
 2236 0072 8046     		mov	r8, r0
 2237              	.LVL280:
2142:System/storage/Storage.c ****                         if (section_size > sizeof(flash_write_tmp))
 2238              		.loc 1 2142 25 is_stmt 1 view .LVU693
2142:System/storage/Storage.c ****                         if (section_size > sizeof(flash_write_tmp))
 2239              		.loc 1 2142 38 is_stmt 0 view .LVU694
 2240 0074 3F1A     		subs	r7, r7, r0
 2241              	.LVL281:
2143:System/storage/Storage.c ****                             return false;
 2242              		.loc 1 2143 25 is_stmt 1 view .LVU695
2143:System/storage/Storage.c ****                             return false;
 2243              		.loc 1 2143 28 is_stmt 0 view .LVU696
 2244 0076 B9F5005F 		cmp	r9, #8192
 2245 007a 27D9     		bls	.L185
2144:System/storage/Storage.c **** 
 2246              		.loc 1 2144 36 view .LVU697
 2247 007c 0020     		movs	r0, #0
 2248              	.LVL282:
2144:System/storage/Storage.c **** 
 2249              		.loc 1 2144 36 view .LVU698
 2250 007e 3FE0     		b	.L181
 2251              	.LVL283:
 2252              	.L195:
2144:System/storage/Storage.c **** 
 2253              		.loc 1 2144 36 view .LVU699
 2254 0080 A246     		mov	r10, r4
 2255              	.LVL284:
 2256              	.L183:
2164:System/storage/Storage.c **** 
 2257              		.loc 1 2164 29 is_stmt 1 view .LVU700
 2258 0082 DFF8ACB0 		ldr	fp, .L201+4
 2259 0086 5246     		mov	r2, r10
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 88


 2260 0088 3146     		mov	r1, r6
 2261 008a 0BEB0700 		add	r0, fp, r7
 2262 008e FFF7FEFF 		bl	memcpy
 2263              	.LVL285:
2166:System/storage/Storage.c **** 
 2264              		.loc 1 2166 29 view .LVU701
2166:System/storage/Storage.c **** 
 2265              		.loc 1 2166 37 is_stmt 0 view .LVU702
 2266 0092 2B6B     		ldr	r3, [r5, #48]
2166:System/storage/Storage.c **** 
 2267              		.loc 1 2166 67 view .LVU703
 2268 0094 DF68     		ldr	r7, [r3, #12]
 2269              	.LVL286:
2166:System/storage/Storage.c **** 
 2270              		.loc 1 2166 37 view .LVU704
 2271 0096 4B46     		mov	r3, r9
 2272 0098 5A46     		mov	r2, fp
 2273 009a 4146     		mov	r1, r8
 2274 009c E86A     		ldr	r0, [r5, #44]
 2275 009e B847     		blx	r7
 2276              	.LVL287:
 2277 00a0 0746     		mov	r7, r0
 2278              	.LVL288:
2169:System/storage/Storage.c ****                             
 2279              		.loc 1 2169 29 is_stmt 1 view .LVU705
 2280 00a2 4A46     		mov	r2, r9
 2281 00a4 0021     		movs	r1, #0
 2282 00a6 5846     		mov	r0, fp
 2283 00a8 FFF7FEFF 		bl	memset
 2284              	.LVL289:
2171:System/storage/Storage.c ****                             if (state == DevW25Qxx_Ok)
 2285              		.loc 1 2171 29 view .LVU706
2171:System/storage/Storage.c ****                             if (state == DevW25Qxx_Ok)
 2286              		.loc 1 2171 33 is_stmt 0 view .LVU707
 2287 00ac A4EB0A04 		sub	r4, r4, r10
 2288              	.LVL290:
2172:System/storage/Storage.c ****                             {
 2289              		.loc 1 2172 29 is_stmt 1 view .LVU708
2172:System/storage/Storage.c ****                             {
 2290              		.loc 1 2172 32 is_stmt 0 view .LVU709
 2291 00b0 002F     		cmp	r7, #0
 2292 00b2 36D1     		bne	.L196
2174:System/storage/Storage.c ****                                     return true;
 2293              		.loc 1 2174 33 is_stmt 1 view .LVU710
2174:System/storage/Storage.c ****                                     return true;
 2294              		.loc 1 2174 36 is_stmt 0 view .LVU711
 2295 00b4 002C     		cmp	r4, #0
 2296 00b6 36D0     		beq	.L197
2180:System/storage/Storage.c ****                             next_write_addr = To_DevW25Qxx_API(dev->dev_api)->get_section_start_add
 2297              		.loc 1 2180 29 is_stmt 1 view .LVU712
 2298              	.LVL291:
2181:System/storage/Storage.c ****                             if (next_write_addr == section_start_addr)
 2299              		.loc 1 2181 29 view .LVU713
2181:System/storage/Storage.c ****                             if (next_write_addr == section_start_addr)
 2300              		.loc 1 2181 47 is_stmt 0 view .LVU714
 2301 00b8 2B6B     		ldr	r3, [r5, #48]
2181:System/storage/Storage.c ****                             if (next_write_addr == section_start_addr)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 89


 2302              		.loc 1 2181 77 view .LVU715
 2303 00ba 1B6A     		ldr	r3, [r3, #32]
2181:System/storage/Storage.c ****                             if (next_write_addr == section_start_addr)
 2304              		.loc 1 2181 47 view .LVU716
 2305 00bc 08EB0A01 		add	r1, r8, r10
 2306 00c0 E86A     		ldr	r0, [r5, #44]
 2307 00c2 9847     		blx	r3
 2308              	.LVL292:
2182:System/storage/Storage.c ****                                 write_offset = write_len;
 2309              		.loc 1 2182 29 is_stmt 1 view .LVU717
2182:System/storage/Storage.c ****                                 write_offset = write_len;
 2310              		.loc 1 2182 32 is_stmt 0 view .LVU718
 2311 00c4 8045     		cmp	r8, r0
 2312 00c6 16D0     		beq	.L200
 2313              	.LVL293:
 2314              	.L184:
2185:System/storage/Storage.c ****                             write_len = len;
 2315              		.loc 1 2185 29 is_stmt 1 view .LVU719
2185:System/storage/Storage.c ****                             write_len = len;
 2316              		.loc 1 2185 36 is_stmt 0 view .LVU720
 2317 00c8 5644     		add	r6, r6, r10
 2318              	.LVL294:
2186:System/storage/Storage.c ****                             section_start_addr = next_write_addr; 
 2319              		.loc 1 2186 29 is_stmt 1 view .LVU721
2187:System/storage/Storage.c ****                         }
 2320              		.loc 1 2187 29 view .LVU722
2146:System/storage/Storage.c ****                         {
 2321              		.loc 1 2146 30 view .LVU723
2187:System/storage/Storage.c ****                         }
 2322              		.loc 1 2187 48 is_stmt 0 view .LVU724
 2323 00ca 8046     		mov	r8, r0
 2324              	.LVL295:
 2325              	.L185:
2146:System/storage/Storage.c ****                         {
 2326              		.loc 1 2146 25 is_stmt 1 view .LVU725
2152:System/storage/Storage.c ****                                 return false;
 2327              		.loc 1 2152 29 view .LVU726
2152:System/storage/Storage.c ****                                 return false;
 2328              		.loc 1 2152 33 is_stmt 0 view .LVU727
 2329 00cc 2B6B     		ldr	r3, [r5, #48]
2152:System/storage/Storage.c ****                                 return false;
 2330              		.loc 1 2152 63 view .LVU728
 2331 00ce D3F810A0 		ldr	r10, [r3, #16]
2152:System/storage/Storage.c ****                                 return false;
 2332              		.loc 1 2152 33 view .LVU729
 2333 00d2 4B46     		mov	r3, r9
 2334 00d4 164A     		ldr	r2, .L201+4
 2335 00d6 4146     		mov	r1, r8
 2336 00d8 E86A     		ldr	r0, [r5, #44]
 2337              	.LVL296:
2152:System/storage/Storage.c ****                                 return false;
 2338              		.loc 1 2152 33 view .LVU730
 2339 00da D047     		blx	r10
 2340              	.LVL297:
2152:System/storage/Storage.c ****                                 return false;
 2341              		.loc 1 2152 32 view .LVU731
 2342 00dc E8B9     		cbnz	r0, .L193
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 90


2156:System/storage/Storage.c ****                                 return false;
 2343              		.loc 1 2156 29 is_stmt 1 view .LVU732
2156:System/storage/Storage.c ****                                 return false;
 2344              		.loc 1 2156 33 is_stmt 0 view .LVU733
 2345 00de 2B6B     		ldr	r3, [r5, #48]
2156:System/storage/Storage.c ****                                 return false;
 2346              		.loc 1 2156 63 view .LVU734
 2347 00e0 5B69     		ldr	r3, [r3, #20]
2156:System/storage/Storage.c ****                                 return false;
 2348              		.loc 1 2156 33 view .LVU735
 2349 00e2 4146     		mov	r1, r8
 2350 00e4 E86A     		ldr	r0, [r5, #44]
 2351 00e6 9847     		blx	r3
 2352              	.LVL298:
2156:System/storage/Storage.c ****                                 return false;
 2353              		.loc 1 2156 32 view .LVU736
 2354 00e8 C8B9     		cbnz	r0, .L194
2160:System/storage/Storage.c ****                                 write_len = section_size - write_offset;
 2355              		.loc 1 2160 29 is_stmt 1 view .LVU737
2160:System/storage/Storage.c ****                                 write_len = section_size - write_offset;
 2356              		.loc 1 2160 46 is_stmt 0 view .LVU738
 2357 00ea E319     		adds	r3, r4, r7
2160:System/storage/Storage.c ****                                 write_len = section_size - write_offset;
 2358              		.loc 1 2160 32 view .LVU739
 2359 00ec 4B45     		cmp	r3, r9
 2360 00ee C7D9     		bls	.L195
2161:System/storage/Storage.c ****                             
 2361              		.loc 1 2161 33 is_stmt 1 view .LVU740
2161:System/storage/Storage.c ****                             
 2362              		.loc 1 2161 43 is_stmt 0 view .LVU741
 2363 00f0 A9EB070A 		sub	r10, r9, r7
 2364              	.LVL299:
2161:System/storage/Storage.c ****                             
 2365              		.loc 1 2161 43 view .LVU742
 2366 00f4 C5E7     		b	.L183
 2367              	.LVL300:
 2368              	.L200:
2183:System/storage/Storage.c **** 
 2369              		.loc 1 2183 46 view .LVU743
 2370 00f6 5746     		mov	r7, r10
 2371              	.LVL301:
2183:System/storage/Storage.c **** 
 2372              		.loc 1 2183 46 view .LVU744
 2373 00f8 E6E7     		b	.L184
 2374              	.LVL302:
 2375              	.L182:
2191:System/storage/Storage.c **** 
 2376              		.loc 1 2191 17 is_stmt 1 view .LVU745
2191:System/storage/Storage.c **** 
 2377              		.loc 1 2191 24 is_stmt 0 view .LVU746
 2378 00fa 0020     		movs	r0, #0
 2379 00fc 00E0     		b	.L181
 2380              	.LVL303:
 2381              	.L186:
2198:System/storage/Storage.c **** }
 2382              		.loc 1 2198 12 view .LVU747
 2383 00fe 0020     		movs	r0, #0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 91


 2384              	.LVL304:
 2385              	.L181:
2199:System/storage/Storage.c **** 
 2386              		.loc 1 2199 1 view .LVU748
 2387 0100 17B0     		add	sp, sp, #92
 2388              	.LCFI25:
 2389              		.cfi_remember_state
 2390              		.cfi_def_cfa_offset 36
 2391              		@ sp needed
 2392 0102 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2393              	.LVL305:
 2394              	.L187:
 2395              	.LCFI26:
 2396              		.cfi_restore_state
2198:System/storage/Storage.c **** }
 2397              		.loc 1 2198 12 view .LVU749
 2398 0106 0020     		movs	r0, #0
 2399              	.LVL306:
2198:System/storage/Storage.c **** }
 2400              		.loc 1 2198 12 view .LVU750
 2401 0108 FAE7     		b	.L181
 2402              	.LVL307:
 2403              	.L188:
2198:System/storage/Storage.c **** }
 2404              		.loc 1 2198 12 view .LVU751
 2405 010a 0020     		movs	r0, #0
 2406              	.LVL308:
2198:System/storage/Storage.c **** }
 2407              		.loc 1 2198 12 view .LVU752
 2408 010c F8E7     		b	.L181
 2409              	.LVL309:
 2410              	.L189:
2194:System/storage/Storage.c ****         }
 2411              		.loc 1 2194 24 view .LVU753
 2412 010e 0020     		movs	r0, #0
 2413              	.LVL310:
2194:System/storage/Storage.c ****         }
 2414              		.loc 1 2194 24 view .LVU754
 2415 0110 F6E7     		b	.L181
 2416              	.LVL311:
 2417              	.L190:
2132:System/storage/Storage.c **** 
 2418              		.loc 1 2132 32 view .LVU755
 2419 0112 0020     		movs	r0, #0
 2420 0114 F4E7     		b	.L181
 2421              	.L191:
2137:System/storage/Storage.c ****                     
 2422              		.loc 1 2137 32 view .LVU756
 2423 0116 0020     		movs	r0, #0
 2424 0118 F2E7     		b	.L181
 2425              	.LVL312:
 2426              	.L193:
2153:System/storage/Storage.c **** 
 2427              		.loc 1 2153 40 view .LVU757
 2428 011a 0020     		movs	r0, #0
 2429 011c F0E7     		b	.L181
 2430              	.L194:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 92


2157:System/storage/Storage.c **** 
 2431              		.loc 1 2157 40 view .LVU758
 2432 011e 0020     		movs	r0, #0
 2433 0120 EEE7     		b	.L181
 2434              	.LVL313:
 2435              	.L196:
2178:System/storage/Storage.c **** 
 2436              		.loc 1 2178 40 view .LVU759
 2437 0122 0020     		movs	r0, #0
 2438 0124 ECE7     		b	.L181
 2439              	.L197:
2175:System/storage/Storage.c ****                             }
 2440              		.loc 1 2175 44 view .LVU760
 2441 0126 0120     		movs	r0, #1
 2442 0128 EAE7     		b	.L181
 2443              	.L202:
 2444 012a 00BF     		.align	2
 2445              	.L201:
 2446 012c 00000000 		.word	.LANCHOR0
 2447 0130 00200000 		.word	flash_write_tmp
 2448              		.cfi_endproc
 2449              	.LFE177:
 2451              		.section	.text.Storage_Clear_Tab,"ax",%progbits
 2452              		.align	1
 2453              		.syntax unified
 2454              		.thumb
 2455              		.thumb_func
 2457              	Storage_Clear_Tab:
 2458              	.LVL314:
 2459              	.LFB150:
 446:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 2460              		.loc 1 446 1 is_stmt 1 view -0
 2461              		.cfi_startproc
 2462              		@ args = 0, pretend = 0, frame = 0
 2463              		@ frame_needed = 0, uses_anonymous_args = 0
 447:System/storage/Storage.c **** 
 2464              		.loc 1 447 5 view .LVU762
 449:System/storage/Storage.c ****         (tab_num == 0))
 2465              		.loc 1 449 5 view .LVU763
 449:System/storage/Storage.c ****         (tab_num == 0))
 2466              		.loc 1 449 8 is_stmt 0 view .LVU764
 2467 0000 F0B1     		cbz	r0, .L207
 446:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 2468              		.loc 1 446 1 discriminator 1 view .LVU765
 2469 0002 70B5     		push	{r4, r5, r6, lr}
 2470              	.LCFI27:
 2471              		.cfi_def_cfa_offset 16
 2472              		.cfi_offset 4, -16
 2473              		.cfi_offset 5, -12
 2474              		.cfi_offset 6, -8
 2475              		.cfi_offset 14, -4
 2476 0004 0E46     		mov	r6, r1
 2477 0006 0446     		mov	r4, r0
 449:System/storage/Storage.c ****         (tab_num == 0))
 2478              		.loc 1 449 21 discriminator 1 view .LVU766
 2479 0008 11B9     		cbnz	r1, .L213
 451:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 93


 2480              		.loc 1 451 16 view .LVU767
 2481 000a 0023     		movs	r3, #0
 2482              	.LVL315:
 2483              	.L204:
 465:System/storage/Storage.c **** 
 2484              		.loc 1 465 1 view .LVU768
 2485 000c 1846     		mov	r0, r3
 2486 000e 70BD     		pop	{r4, r5, r6, pc}
 2487              	.LVL316:
 2488              	.L213:
 453:System/storage/Storage.c ****     addr_tmp = addr;
 2489              		.loc 1 453 5 is_stmt 1 view .LVU769
 2490 0010 4FF48052 		mov	r2, #4096
 2491 0014 0021     		movs	r1, #0
 2492              	.LVL317:
 453:System/storage/Storage.c ****     addr_tmp = addr;
 2493              		.loc 1 453 5 is_stmt 0 view .LVU770
 2494 0016 0C48     		ldr	r0, .L215
 2495              	.LVL318:
 453:System/storage/Storage.c ****     addr_tmp = addr;
 2496              		.loc 1 453 5 view .LVU771
 2497 0018 FFF7FEFF 		bl	memset
 2498              	.LVL319:
 454:System/storage/Storage.c ****     
 2499              		.loc 1 454 5 is_stmt 1 view .LVU772
 456:System/storage/Storage.c ****     {
 2500              		.loc 1 456 5 view .LVU773
 2501              	.LBB14:
 456:System/storage/Storage.c ****     {
 2502              		.loc 1 456 9 view .LVU774
 456:System/storage/Storage.c ****     {
 2503              		.loc 1 456 18 is_stmt 0 view .LVU775
 2504 001c 0025     		movs	r5, #0
 2505              	.LVL320:
 2506              	.L205:
 456:System/storage/Storage.c ****     {
 2507              		.loc 1 456 25 is_stmt 1 discriminator 1 view .LVU776
 456:System/storage/Storage.c ****     {
 2508              		.loc 1 456 5 is_stmt 0 discriminator 1 view .LVU777
 2509 001e B542     		cmp	r5, r6
 2510 0020 0CD2     		bcs	.L214
 458:System/storage/Storage.c ****             return false;
 2511              		.loc 1 458 9 is_stmt 1 view .LVU778
 458:System/storage/Storage.c ****             return false;
 2512              		.loc 1 458 14 is_stmt 0 view .LVU779
 2513 0022 4FF48052 		mov	r2, #4096
 2514 0026 0849     		ldr	r1, .L215
 2515 0028 2046     		mov	r0, r4
 2516 002a FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 2517              	.LVL321:
 458:System/storage/Storage.c ****             return false;
 2518              		.loc 1 458 12 view .LVU780
 2519 002e 0346     		mov	r3, r0
 2520 0030 0028     		cmp	r0, #0
 2521 0032 EBD0     		beq	.L204
 461:System/storage/Storage.c ****     }
 2522              		.loc 1 461 9 is_stmt 1 discriminator 2 view .LVU781
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 94


 461:System/storage/Storage.c ****     }
 2523              		.loc 1 461 18 is_stmt 0 discriminator 2 view .LVU782
 2524 0034 04F58054 		add	r4, r4, #4096
 2525              	.LVL322:
 456:System/storage/Storage.c ****     {
 2526              		.loc 1 456 38 is_stmt 1 discriminator 2 view .LVU783
 456:System/storage/Storage.c ****     {
 2527              		.loc 1 456 39 is_stmt 0 discriminator 2 view .LVU784
 2528 0038 0135     		adds	r5, r5, #1
 2529              	.LVL323:
 456:System/storage/Storage.c ****     {
 2530              		.loc 1 456 39 discriminator 2 view .LVU785
 2531 003a F0E7     		b	.L205
 2532              	.L214:
 456:System/storage/Storage.c ****     {
 2533              		.loc 1 456 39 discriminator 2 view .LVU786
 2534              	.LBE14:
 464:System/storage/Storage.c **** }
 2535              		.loc 1 464 12 view .LVU787
 2536 003c 0123     		movs	r3, #1
 2537              	.LBB15:
 2538 003e E5E7     		b	.L204
 2539              	.LVL324:
 2540              	.L207:
 2541              	.LCFI28:
 2542              		.cfi_def_cfa_offset 0
 2543              		.cfi_restore 4
 2544              		.cfi_restore 5
 2545              		.cfi_restore 6
 2546              		.cfi_restore 14
 464:System/storage/Storage.c **** }
 2547              		.loc 1 464 12 view .LVU788
 2548              	.LBE15:
 451:System/storage/Storage.c **** 
 2549              		.loc 1 451 16 view .LVU789
 2550 0040 0023     		movs	r3, #0
 465:System/storage/Storage.c **** 
 2551              		.loc 1 465 1 view .LVU790
 2552 0042 1846     		mov	r0, r3
 2553              	.LVL325:
 465:System/storage/Storage.c **** 
 2554              		.loc 1 465 1 view .LVU791
 2555 0044 7047     		bx	lr
 2556              	.L216:
 2557 0046 00BF     		.align	2
 2558              	.L215:
 2559 0048 00000000 		.word	page_data_tmp
 2560              		.cfi_endproc
 2561              	.LFE150:
 2563              		.section	.rodata.Storage_Read_Section.str1.4,"aMS",%progbits,1
 2564              		.align	2
 2565              	.LC0:
 2566 0000 73656374 		.ascii	"section read failed\015\012\000"
 2566      696F6E20 
 2566      72656164 
 2566      20666169 
 2566      6C65640D 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 95


 2567 0016 0000     		.align	2
 2568              	.LC1:
 2569 0018 5B205354 		.ascii	"[ STORAGE INFO ] \000"
 2569      4F524147 
 2569      4520494E 
 2569      464F205D 
 2569      2000
 2570              		.section	.text.Storage_Read_Section,"ax",%progbits
 2571              		.align	1
 2572              		.syntax unified
 2573              		.thumb
 2574              		.thumb_func
 2576              	Storage_Read_Section:
 2577              	.LVL326:
 2578              	.LFB167:
1687:System/storage/Storage.c ****     uint32_t read_cnt = 0;
 2579              		.loc 1 1687 1 is_stmt 1 view -0
 2580              		.cfi_startproc
 2581              		@ args = 0, pretend = 0, frame = 0
 2582              		@ frame_needed = 0, uses_anonymous_args = 0
1687:System/storage/Storage.c ****     uint32_t read_cnt = 0;
 2583              		.loc 1 1687 1 is_stmt 0 view .LVU793
 2584 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2585              	.LCFI29:
 2586              		.cfi_def_cfa_offset 32
 2587              		.cfi_offset 4, -32
 2588              		.cfi_offset 5, -28
 2589              		.cfi_offset 6, -24
 2590              		.cfi_offset 7, -20
 2591              		.cfi_offset 8, -16
 2592              		.cfi_offset 9, -12
 2593              		.cfi_offset 10, -8
 2594              		.cfi_offset 14, -4
1688:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 2595              		.loc 1 1688 5 is_stmt 1 view .LVU794
 2596              	.LVL327:
1689:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
 2597              		.loc 1 1689 5 view .LVU795
1690:System/storage/Storage.c **** 
 2598              		.loc 1 1690 5 view .LVU796
1692:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
 2599              		.loc 1 1692 5 view .LVU797
1692:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
 2600              		.loc 1 1692 11 is_stmt 0 view .LVU798
 2601 0004 2C4C     		ldr	r4, .L234
 2602 0006 A468     		ldr	r4, [r4, #8]
 2603              	.LVL328:
1693:System/storage/Storage.c ****     {
 2604              		.loc 1 1693 5 is_stmt 1 view .LVU799
1693:System/storage/Storage.c ****     {
 2605              		.loc 1 1693 8 is_stmt 0 view .LVU800
 2606 0008 0028     		cmp	r0, #0
 2607 000a 41D0     		beq	.L222
 2608 000c 0E46     		mov	r6, r1
 2609 000e 1546     		mov	r5, r2
 2610 0010 0746     		mov	r7, r0
1693:System/storage/Storage.c ****     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 96


 2611              		.loc 1 1693 14 discriminator 1 view .LVU801
 2612 0012 0029     		cmp	r1, #0
 2613 0014 3FD0     		beq	.L223
1693:System/storage/Storage.c ****     {
 2614              		.loc 1 1693 24 discriminator 2 view .LVU802
 2615 0016 002A     		cmp	r2, #0
 2616 0018 3FD0     		beq	.L224
1693:System/storage/Storage.c ****     {
 2617              		.loc 1 1693 31 discriminator 3 view .LVU803
 2618 001a 002C     		cmp	r4, #0
 2619 001c 3FD0     		beq	.L225
1693:System/storage/Storage.c ****     {
 2620              		.loc 1 1693 48 discriminator 4 view .LVU804
 2621 001e 236B     		ldr	r3, [r4, #48]
1693:System/storage/Storage.c ****     {
 2622              		.loc 1 1693 40 discriminator 4 view .LVU805
 2623 0020 002B     		cmp	r3, #0
 2624 0022 3ED0     		beq	.L226
1693:System/storage/Storage.c ****     {
 2625              		.loc 1 1693 66 discriminator 5 view .LVU806
 2626 0024 E36A     		ldr	r3, [r4, #44]
1693:System/storage/Storage.c ****     {
 2627              		.loc 1 1693 58 discriminator 5 view .LVU807
 2628 0026 002B     		cmp	r3, #0
 2629 0028 3DD0     		beq	.L227
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2630              		.loc 1 1695 9 is_stmt 1 view .LVU808
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2631              		.loc 1 1695 26 is_stmt 0 view .LVU809
 2632 002a A36A     		ldr	r3, [r4, #40]
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2633              		.loc 1 1695 19 view .LVU810
 2634 002c B0FBF3F2 		udiv	r2, r0, r3
 2635              	.LVL329:
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2636              		.loc 1 1695 19 view .LVU811
 2637 0030 03FB1202 		mls	r2, r3, r2, r0
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2638              		.loc 1 1695 12 view .LVU812
 2639 0034 002A     		cmp	r2, #0
 2640 0036 38D1     		bne	.L228
1696:System/storage/Storage.c ****             return false;
 2641              		.loc 1 1696 18 discriminator 1 view .LVU813
 2642 0038 B5FBF3F2 		udiv	r2, r5, r3
 2643 003c 03FB1252 		mls	r2, r3, r2, r5
1695:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2644              		.loc 1 1695 41 discriminator 1 view .LVU814
 2645 0040 AABB     		cbnz	r2, .L229
1699:System/storage/Storage.c ****         addr_tmp = addr;
 2646              		.loc 1 1699 9 is_stmt 1 view .LVU815
1699:System/storage/Storage.c ****         addr_tmp = addr;
 2647              		.loc 1 1699 18 is_stmt 0 view .LVU816
 2648 0042 B5FBF3F9 		udiv	r9, r5, r3
 2649              	.LVL330:
1700:System/storage/Storage.c **** 
 2650              		.loc 1 1700 9 is_stmt 1 view .LVU817
1702:System/storage/Storage.c ****         {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 97


 2651              		.loc 1 1702 9 view .LVU818
 2652              	.LBB16:
1702:System/storage/Storage.c ****         {
 2653              		.loc 1 1702 14 view .LVU819
1702:System/storage/Storage.c ****         {
 2654              		.loc 1 1702 22 is_stmt 0 view .LVU820
 2655 0046 4FF00008 		mov	r8, #0
 2656              	.LVL331:
 2657              	.L219:
1702:System/storage/Storage.c ****         {
 2658              		.loc 1 1702 29 is_stmt 1 discriminator 1 view .LVU821
1702:System/storage/Storage.c ****         {
 2659              		.loc 1 1702 9 is_stmt 0 discriminator 1 view .LVU822
 2660 004a C845     		cmp	r8, r9
 2661 004c 1ED2     		bcs	.L232
1704:System/storage/Storage.c ****             {
 2662              		.loc 1 1704 13 is_stmt 1 view .LVU823
1704:System/storage/Storage.c ****             {
 2663              		.loc 1 1704 34 is_stmt 0 view .LVU824
 2664 004e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1704:System/storage/Storage.c ****             {
 2665              		.loc 1 1704 13 view .LVU825
 2666 0050 012B     		cmp	r3, #1
 2667 0052 2ED1     		bne	.L230
1708:System/storage/Storage.c ****                     {
 2668              		.loc 1 1708 21 is_stmt 1 view .LVU826
1708:System/storage/Storage.c ****                     {
 2669              		.loc 1 1708 25 is_stmt 0 view .LVU827
 2670 0054 236B     		ldr	r3, [r4, #48]
1708:System/storage/Storage.c ****                     {
 2671              		.loc 1 1708 57 view .LVU828
 2672 0056 D3F810A0 		ldr	r10, [r3, #16]
1708:System/storage/Storage.c ****                     {
 2673              		.loc 1 1708 25 view .LVU829
 2674 005a 2B46     		mov	r3, r5
 2675 005c 3246     		mov	r2, r6
 2676 005e 3946     		mov	r1, r7
 2677 0060 E06A     		ldr	r0, [r4, #44]
 2678 0062 D047     		blx	r10
 2679              	.LVL332:
1708:System/storage/Storage.c ****                     {
 2680              		.loc 1 1708 24 view .LVU830
 2681 0064 30B9     		cbnz	r0, .L233
1714:System/storage/Storage.c **** 
 2682              		.loc 1 1714 21 is_stmt 1 discriminator 2 view .LVU831
1719:System/storage/Storage.c ****         }
 2683              		.loc 1 1719 13 discriminator 2 view .LVU832
1719:System/storage/Storage.c ****         }
 2684              		.loc 1 1719 30 is_stmt 0 discriminator 2 view .LVU833
 2685 0066 A36A     		ldr	r3, [r4, #40]
1719:System/storage/Storage.c ****         }
 2686              		.loc 1 1719 22 discriminator 2 view .LVU834
 2687 0068 1F44     		add	r7, r7, r3
 2688              	.LVL333:
1702:System/storage/Storage.c ****         {
 2689              		.loc 1 1702 43 is_stmt 1 discriminator 2 view .LVU835
1702:System/storage/Storage.c ****         {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 98


 2690              		.loc 1 1702 44 is_stmt 0 discriminator 2 view .LVU836
 2691 006a 08F10108 		add	r8, r8, #1
 2692              	.LVL334:
1702:System/storage/Storage.c ****         {
 2693              		.loc 1 1702 44 discriminator 2 view .LVU837
 2694 006e 5FFA88F8 		uxtb	r8, r8
 2695              	.LVL335:
1702:System/storage/Storage.c ****         {
 2696              		.loc 1 1702 44 discriminator 2 view .LVU838
 2697 0072 EAE7     		b	.L219
 2698              	.L233:
1710:System/storage/Storage.c ****                         memset(p_data, 0, len);
 2699              		.loc 1 1710 25 is_stmt 1 view .LVU839
 2700 0074 114A     		ldr	r2, .L234+4
 2701 0076 1249     		ldr	r1, .L234+8
 2702 0078 1248     		ldr	r0, .L234+12
 2703 007a FFF7FEFF 		bl	Debug_Print
 2704              	.LVL336:
1711:System/storage/Storage.c ****                         return false;
 2705              		.loc 1 1711 25 view .LVU840
 2706 007e 2A46     		mov	r2, r5
 2707 0080 0021     		movs	r1, #0
 2708 0082 3046     		mov	r0, r6
 2709 0084 FFF7FEFF 		bl	memset
 2710              	.LVL337:
1712:System/storage/Storage.c ****                     }
 2711              		.loc 1 1712 25 view .LVU841
1712:System/storage/Storage.c ****                     }
 2712              		.loc 1 1712 32 is_stmt 0 view .LVU842
 2713 0088 0020     		movs	r0, #0
 2714 008a 02E0     		b	.L218
 2715              	.L232:
1712:System/storage/Storage.c ****                     }
 2716              		.loc 1 1712 32 view .LVU843
 2717              	.LBE16:
1722:System/storage/Storage.c ****     }
 2718              		.loc 1 1722 16 view .LVU844
 2719 008c 0120     		movs	r0, #1
 2720              	.LBB17:
 2721 008e 00E0     		b	.L218
 2722              	.LVL338:
 2723              	.L222:
1722:System/storage/Storage.c ****     }
 2724              		.loc 1 1722 16 view .LVU845
 2725              	.LBE17:
1725:System/storage/Storage.c **** }
 2726              		.loc 1 1725 12 view .LVU846
 2727 0090 0020     		movs	r0, #0
 2728              	.LVL339:
 2729              	.L218:
1726:System/storage/Storage.c **** 
 2730              		.loc 1 1726 1 view .LVU847
 2731 0092 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2732              	.LVL340:
 2733              	.L223:
1725:System/storage/Storage.c **** }
 2734              		.loc 1 1725 12 view .LVU848
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 99


 2735 0096 0020     		movs	r0, #0
 2736              	.LVL341:
1725:System/storage/Storage.c **** }
 2737              		.loc 1 1725 12 view .LVU849
 2738 0098 FBE7     		b	.L218
 2739              	.LVL342:
 2740              	.L224:
1725:System/storage/Storage.c **** }
 2741              		.loc 1 1725 12 view .LVU850
 2742 009a 0020     		movs	r0, #0
 2743              	.LVL343:
1725:System/storage/Storage.c **** }
 2744              		.loc 1 1725 12 view .LVU851
 2745 009c F9E7     		b	.L218
 2746              	.LVL344:
 2747              	.L225:
1725:System/storage/Storage.c **** }
 2748              		.loc 1 1725 12 view .LVU852
 2749 009e 0020     		movs	r0, #0
 2750              	.LVL345:
1725:System/storage/Storage.c **** }
 2751              		.loc 1 1725 12 view .LVU853
 2752 00a0 F7E7     		b	.L218
 2753              	.LVL346:
 2754              	.L226:
1725:System/storage/Storage.c **** }
 2755              		.loc 1 1725 12 view .LVU854
 2756 00a2 0020     		movs	r0, #0
 2757              	.LVL347:
1725:System/storage/Storage.c **** }
 2758              		.loc 1 1725 12 view .LVU855
 2759 00a4 F5E7     		b	.L218
 2760              	.LVL348:
 2761              	.L227:
1725:System/storage/Storage.c **** }
 2762              		.loc 1 1725 12 view .LVU856
 2763 00a6 0020     		movs	r0, #0
 2764              	.LVL349:
1725:System/storage/Storage.c **** }
 2765              		.loc 1 1725 12 view .LVU857
 2766 00a8 F3E7     		b	.L218
 2767              	.LVL350:
 2768              	.L228:
1697:System/storage/Storage.c ****     
 2769              		.loc 1 1697 20 view .LVU858
 2770 00aa 0020     		movs	r0, #0
 2771              	.LVL351:
1697:System/storage/Storage.c ****     
 2772              		.loc 1 1697 20 view .LVU859
 2773 00ac F1E7     		b	.L218
 2774              	.LVL352:
 2775              	.L229:
1697:System/storage/Storage.c ****     
 2776              		.loc 1 1697 20 view .LVU860
 2777 00ae 0020     		movs	r0, #0
 2778              	.LVL353:
1697:System/storage/Storage.c ****     
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 100


 2779              		.loc 1 1697 20 view .LVU861
 2780 00b0 EFE7     		b	.L218
 2781              	.LVL354:
 2782              	.L230:
 2783              	.LBB18:
1716:System/storage/Storage.c ****             }
 2784              		.loc 1 1716 33 view .LVU862
 2785 00b2 0020     		movs	r0, #0
 2786 00b4 EDE7     		b	.L218
 2787              	.L235:
 2788 00b6 00BF     		.align	2
 2789              	.L234:
 2790 00b8 00000000 		.word	.LANCHOR0
 2791 00bc 00000000 		.word	.LC0
 2792 00c0 18000000 		.word	.LC1
 2793 00c4 00000000 		.word	DebugPort
 2794              	.LBE18:
 2795              		.cfi_endproc
 2796              	.LFE167:
 2798              		.section	.rodata.Storage_Write_Section.str1.4,"aMS",%progbits,1
 2799              		.align	2
 2800              	.LC2:
 2801 0000 73656374 		.ascii	"section erase failed\015\012\000"
 2801      696F6E20 
 2801      65726173 
 2801      65206661 
 2801      696C6564 
 2802 0017 00       		.align	2
 2803              	.LC3:
 2804 0018 73656374 		.ascii	"section write failed\015\012\000"
 2804      696F6E20 
 2804      77726974 
 2804      65206661 
 2804      696C6564 
 2805              		.section	.text.Storage_Write_Section,"ax",%progbits
 2806              		.align	1
 2807              		.syntax unified
 2808              		.thumb
 2809              		.thumb_func
 2811              	Storage_Write_Section:
 2812              	.LVL355:
 2813              	.LFB166:
1639:System/storage/Storage.c ****     uint32_t write_cnt = 0;
 2814              		.loc 1 1639 1 is_stmt 1 view -0
 2815              		.cfi_startproc
 2816              		@ args = 0, pretend = 0, frame = 0
 2817              		@ frame_needed = 0, uses_anonymous_args = 0
1639:System/storage/Storage.c ****     uint32_t write_cnt = 0;
 2818              		.loc 1 1639 1 is_stmt 0 view .LVU864
 2819 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2820              	.LCFI30:
 2821              		.cfi_def_cfa_offset 32
 2822              		.cfi_offset 3, -32
 2823              		.cfi_offset 4, -28
 2824              		.cfi_offset 5, -24
 2825              		.cfi_offset 6, -20
 2826              		.cfi_offset 7, -16
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 101


 2827              		.cfi_offset 8, -12
 2828              		.cfi_offset 9, -8
 2829              		.cfi_offset 14, -4
1640:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 2830              		.loc 1 1640 5 is_stmt 1 view .LVU865
 2831              	.LVL356:
1641:System/storage/Storage.c ****     Storage_ExtFLashDevObj_TypeDef *p_dev = NULL;
 2832              		.loc 1 1641 5 view .LVU866
1642:System/storage/Storage.c **** 
 2833              		.loc 1 1642 5 view .LVU867
1644:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
 2834              		.loc 1 1644 5 view .LVU868
1644:System/storage/Storage.c ****     if (addr && p_data && len && p_dev && p_dev->dev_api && p_dev->dev_obj)
 2835              		.loc 1 1644 11 is_stmt 0 view .LVU869
 2836 0004 304B     		ldr	r3, .L255
 2837 0006 9D68     		ldr	r5, [r3, #8]
 2838              	.LVL357:
1645:System/storage/Storage.c ****     {
 2839              		.loc 1 1645 5 is_stmt 1 view .LVU870
1645:System/storage/Storage.c ****     {
 2840              		.loc 1 1645 8 is_stmt 0 view .LVU871
 2841 0008 0028     		cmp	r0, #0
 2842 000a 49D0     		beq	.L242
 2843 000c 0F46     		mov	r7, r1
 2844 000e 0646     		mov	r6, r0
1645:System/storage/Storage.c ****     {
 2845              		.loc 1 1645 14 discriminator 1 view .LVU872
 2846 0010 0029     		cmp	r1, #0
 2847 0012 48D0     		beq	.L243
1645:System/storage/Storage.c ****     {
 2848              		.loc 1 1645 24 discriminator 2 view .LVU873
 2849 0014 002A     		cmp	r2, #0
 2850 0016 48D0     		beq	.L244
1645:System/storage/Storage.c ****     {
 2851              		.loc 1 1645 31 discriminator 3 view .LVU874
 2852 0018 002D     		cmp	r5, #0
 2853 001a 48D0     		beq	.L245
1645:System/storage/Storage.c ****     {
 2854              		.loc 1 1645 48 discriminator 4 view .LVU875
 2855 001c 2B6B     		ldr	r3, [r5, #48]
1645:System/storage/Storage.c ****     {
 2856              		.loc 1 1645 40 discriminator 4 view .LVU876
 2857 001e 002B     		cmp	r3, #0
 2858 0020 47D0     		beq	.L246
1645:System/storage/Storage.c ****     {
 2859              		.loc 1 1645 66 discriminator 5 view .LVU877
 2860 0022 EB6A     		ldr	r3, [r5, #44]
1645:System/storage/Storage.c ****     {
 2861              		.loc 1 1645 58 discriminator 5 view .LVU878
 2862 0024 002B     		cmp	r3, #0
 2863 0026 46D0     		beq	.L247
1647:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2864              		.loc 1 1647 9 is_stmt 1 view .LVU879
1647:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2865              		.loc 1 1647 26 is_stmt 0 view .LVU880
 2866 0028 AC6A     		ldr	r4, [r5, #40]
1647:System/storage/Storage.c ****             (len % p_dev->sector_size))
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 102


 2867              		.loc 1 1647 19 view .LVU881
 2868 002a B0FBF4F3 		udiv	r3, r0, r4
 2869 002e 04FB1303 		mls	r3, r4, r3, r0
1647:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2870              		.loc 1 1647 12 view .LVU882
 2871 0032 002B     		cmp	r3, #0
 2872 0034 41D1     		bne	.L248
1648:System/storage/Storage.c ****             return false;
 2873              		.loc 1 1648 18 discriminator 1 view .LVU883
 2874 0036 B2FBF4F3 		udiv	r3, r2, r4
 2875 003a 04FB1323 		mls	r3, r4, r3, r2
1647:System/storage/Storage.c ****             (len % p_dev->sector_size))
 2876              		.loc 1 1647 41 discriminator 1 view .LVU884
 2877 003e 002B     		cmp	r3, #0
 2878 0040 3DD1     		bne	.L249
1651:System/storage/Storage.c ****         addr_tmp = addr;
 2879              		.loc 1 1651 9 is_stmt 1 view .LVU885
1651:System/storage/Storage.c ****         addr_tmp = addr;
 2880              		.loc 1 1651 19 is_stmt 0 view .LVU886
 2881 0042 B2FBF4F4 		udiv	r4, r2, r4
 2882              	.LVL358:
1652:System/storage/Storage.c **** 
 2883              		.loc 1 1652 9 is_stmt 1 view .LVU887
1654:System/storage/Storage.c ****         {
 2884              		.loc 1 1654 9 view .LVU888
 2885              	.LBB19:
1654:System/storage/Storage.c ****         {
 2886              		.loc 1 1654 14 view .LVU889
1654:System/storage/Storage.c ****         {
 2887              		.loc 1 1654 22 is_stmt 0 view .LVU890
 2888 0046 4FF00008 		mov	r8, #0
 2889              	.LVL359:
 2890              	.L238:
1654:System/storage/Storage.c ****         {
 2891              		.loc 1 1654 29 is_stmt 1 discriminator 1 view .LVU891
1654:System/storage/Storage.c ****         {
 2892              		.loc 1 1654 9 is_stmt 0 discriminator 1 view .LVU892
 2893 004a A045     		cmp	r8, r4
 2894 004c 26D2     		bcs	.L252
1656:System/storage/Storage.c ****             {
 2895              		.loc 1 1656 13 is_stmt 1 view .LVU893
1656:System/storage/Storage.c ****             {
 2896              		.loc 1 1656 34 is_stmt 0 view .LVU894
 2897 004e 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
1656:System/storage/Storage.c ****             {
 2898              		.loc 1 1656 13 view .LVU895
 2899 0050 012B     		cmp	r3, #1
 2900 0052 36D1     		bne	.L250
1660:System/storage/Storage.c ****                     {
 2901              		.loc 1 1660 21 is_stmt 1 view .LVU896
1660:System/storage/Storage.c ****                     {
 2902              		.loc 1 1660 25 is_stmt 0 view .LVU897
 2903 0054 2B6B     		ldr	r3, [r5, #48]
1660:System/storage/Storage.c ****                     {
 2904              		.loc 1 1660 57 view .LVU898
 2905 0056 5B69     		ldr	r3, [r3, #20]
1660:System/storage/Storage.c ****                     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 103


 2906              		.loc 1 1660 25 view .LVU899
 2907 0058 3146     		mov	r1, r6
 2908 005a E86A     		ldr	r0, [r5, #44]
 2909 005c 9847     		blx	r3
 2910              	.LVL360:
1660:System/storage/Storage.c ****                     {
 2911              		.loc 1 1660 24 view .LVU900
 2912 005e 78B9     		cbnz	r0, .L253
1667:System/storage/Storage.c ****                     {
 2913              		.loc 1 1667 21 is_stmt 1 view .LVU901
1667:System/storage/Storage.c ****                     {
 2914              		.loc 1 1667 25 is_stmt 0 view .LVU902
 2915 0060 2B6B     		ldr	r3, [r5, #48]
1667:System/storage/Storage.c ****                     {
 2916              		.loc 1 1667 57 view .LVU903
 2917 0062 D3F80C90 		ldr	r9, [r3, #12]
1667:System/storage/Storage.c ****                     {
 2918              		.loc 1 1667 25 view .LVU904
 2919 0066 AB6A     		ldr	r3, [r5, #40]
 2920 0068 3A46     		mov	r2, r7
 2921 006a 3146     		mov	r1, r6
 2922 006c E86A     		ldr	r0, [r5, #44]
 2923 006e C847     		blx	r9
 2924              	.LVL361:
1667:System/storage/Storage.c ****                     {
 2925              		.loc 1 1667 24 view .LVU905
 2926 0070 68B9     		cbnz	r0, .L254
1672:System/storage/Storage.c **** 
 2927              		.loc 1 1672 21 is_stmt 1 discriminator 2 view .LVU906
1677:System/storage/Storage.c ****         }
 2928              		.loc 1 1677 13 discriminator 2 view .LVU907
1677:System/storage/Storage.c ****         }
 2929              		.loc 1 1677 30 is_stmt 0 discriminator 2 view .LVU908
 2930 0072 AB6A     		ldr	r3, [r5, #40]
1677:System/storage/Storage.c ****         }
 2931              		.loc 1 1677 22 discriminator 2 view .LVU909
 2932 0074 1E44     		add	r6, r6, r3
 2933              	.LVL362:
1654:System/storage/Storage.c ****         {
 2934              		.loc 1 1654 44 is_stmt 1 discriminator 2 view .LVU910
1654:System/storage/Storage.c ****         {
 2935              		.loc 1 1654 46 is_stmt 0 discriminator 2 view .LVU911
 2936 0076 08F10108 		add	r8, r8, #1
 2937              	.LVL363:
1654:System/storage/Storage.c ****         {
 2938              		.loc 1 1654 46 discriminator 2 view .LVU912
 2939 007a 5FFA88F8 		uxtb	r8, r8
 2940              	.LVL364:
1654:System/storage/Storage.c ****         {
 2941              		.loc 1 1654 46 discriminator 2 view .LVU913
 2942 007e E4E7     		b	.L238
 2943              	.L253:
1662:System/storage/Storage.c ****                         return false;
 2944              		.loc 1 1662 25 is_stmt 1 view .LVU914
 2945 0080 124A     		ldr	r2, .L255+4
 2946 0082 1349     		ldr	r1, .L255+8
 2947 0084 1348     		ldr	r0, .L255+12
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 104


 2948 0086 FFF7FEFF 		bl	Debug_Print
 2949              	.LVL365:
1663:System/storage/Storage.c ****                     }
 2950              		.loc 1 1663 25 view .LVU915
1663:System/storage/Storage.c ****                     }
 2951              		.loc 1 1663 32 is_stmt 0 view .LVU916
 2952 008a 0020     		movs	r0, #0
 2953 008c 09E0     		b	.L237
 2954              	.L254:
1669:System/storage/Storage.c ****                         return false;
 2955              		.loc 1 1669 25 is_stmt 1 view .LVU917
 2956 008e 124A     		ldr	r2, .L255+16
 2957 0090 0F49     		ldr	r1, .L255+8
 2958 0092 1048     		ldr	r0, .L255+12
 2959 0094 FFF7FEFF 		bl	Debug_Print
 2960              	.LVL366:
1670:System/storage/Storage.c ****                     }
 2961              		.loc 1 1670 25 view .LVU918
1670:System/storage/Storage.c ****                     }
 2962              		.loc 1 1670 32 is_stmt 0 view .LVU919
 2963 0098 0020     		movs	r0, #0
 2964 009a 02E0     		b	.L237
 2965              	.L252:
1670:System/storage/Storage.c ****                     }
 2966              		.loc 1 1670 32 view .LVU920
 2967              	.LBE19:
1680:System/storage/Storage.c ****     }
 2968              		.loc 1 1680 16 view .LVU921
 2969 009c 0120     		movs	r0, #1
 2970              	.LBB20:
 2971 009e 00E0     		b	.L237
 2972              	.LVL367:
 2973              	.L242:
1680:System/storage/Storage.c ****     }
 2974              		.loc 1 1680 16 view .LVU922
 2975              	.LBE20:
1683:System/storage/Storage.c **** }
 2976              		.loc 1 1683 12 view .LVU923
 2977 00a0 0020     		movs	r0, #0
 2978              	.LVL368:
 2979              	.L237:
1684:System/storage/Storage.c **** 
 2980              		.loc 1 1684 1 view .LVU924
 2981 00a2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2982              	.LVL369:
 2983              	.L243:
1683:System/storage/Storage.c **** }
 2984              		.loc 1 1683 12 view .LVU925
 2985 00a6 0020     		movs	r0, #0
 2986              	.LVL370:
1683:System/storage/Storage.c **** }
 2987              		.loc 1 1683 12 view .LVU926
 2988 00a8 FBE7     		b	.L237
 2989              	.LVL371:
 2990              	.L244:
1683:System/storage/Storage.c **** }
 2991              		.loc 1 1683 12 view .LVU927
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 105


 2992 00aa 0020     		movs	r0, #0
 2993              	.LVL372:
1683:System/storage/Storage.c **** }
 2994              		.loc 1 1683 12 view .LVU928
 2995 00ac F9E7     		b	.L237
 2996              	.LVL373:
 2997              	.L245:
1683:System/storage/Storage.c **** }
 2998              		.loc 1 1683 12 view .LVU929
 2999 00ae 0020     		movs	r0, #0
 3000              	.LVL374:
1683:System/storage/Storage.c **** }
 3001              		.loc 1 1683 12 view .LVU930
 3002 00b0 F7E7     		b	.L237
 3003              	.LVL375:
 3004              	.L246:
1683:System/storage/Storage.c **** }
 3005              		.loc 1 1683 12 view .LVU931
 3006 00b2 0020     		movs	r0, #0
 3007              	.LVL376:
1683:System/storage/Storage.c **** }
 3008              		.loc 1 1683 12 view .LVU932
 3009 00b4 F5E7     		b	.L237
 3010              	.LVL377:
 3011              	.L247:
1683:System/storage/Storage.c **** }
 3012              		.loc 1 1683 12 view .LVU933
 3013 00b6 0020     		movs	r0, #0
 3014              	.LVL378:
1683:System/storage/Storage.c **** }
 3015              		.loc 1 1683 12 view .LVU934
 3016 00b8 F3E7     		b	.L237
 3017              	.LVL379:
 3018              	.L248:
1649:System/storage/Storage.c **** 
 3019              		.loc 1 1649 20 view .LVU935
 3020 00ba 0020     		movs	r0, #0
 3021              	.LVL380:
1649:System/storage/Storage.c **** 
 3022              		.loc 1 1649 20 view .LVU936
 3023 00bc F1E7     		b	.L237
 3024              	.LVL381:
 3025              	.L249:
1649:System/storage/Storage.c **** 
 3026              		.loc 1 1649 20 view .LVU937
 3027 00be 0020     		movs	r0, #0
 3028              	.LVL382:
1649:System/storage/Storage.c **** 
 3029              		.loc 1 1649 20 view .LVU938
 3030 00c0 EFE7     		b	.L237
 3031              	.LVL383:
 3032              	.L250:
 3033              	.LBB21:
1674:System/storage/Storage.c ****             }
 3034              		.loc 1 1674 33 view .LVU939
 3035 00c2 0020     		movs	r0, #0
 3036 00c4 EDE7     		b	.L237
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 106


 3037              	.L256:
 3038 00c6 00BF     		.align	2
 3039              	.L255:
 3040 00c8 00000000 		.word	.LANCHOR0
 3041 00cc 00000000 		.word	.LC2
 3042 00d0 18000000 		.word	.LC1
 3043 00d4 00000000 		.word	DebugPort
 3044 00d8 18000000 		.word	.LC3
 3045              	.LBE21:
 3046              		.cfi_endproc
 3047              	.LFE166:
 3049              		.section	.text.Storage_Get_Data,"ax",%progbits
 3050              		.align	1
 3051              		.syntax unified
 3052              		.thumb
 3053              		.thumb_func
 3055              	Storage_Get_Data:
 3056              	.LVL384:
 3057              	.LFB153:
 554:System/storage/Storage.c ****     uint32_t data_len = 0;
 3058              		.loc 1 554 1 is_stmt 1 view -0
 3059              		.cfi_startproc
 3060              		@ args = 76, pretend = 16, frame = 64
 3061              		@ frame_needed = 0, uses_anonymous_args = 0
 554:System/storage/Storage.c ****     uint32_t data_len = 0;
 3062              		.loc 1 554 1 is_stmt 0 view .LVU941
 3063 0000 84B0     		sub	sp, sp, #16
 3064              	.LCFI31:
 3065              		.cfi_def_cfa_offset 16
 3066 0002 70B5     		push	{r4, r5, r6, lr}
 3067              	.LCFI32:
 3068              		.cfi_def_cfa_offset 32
 3069              		.cfi_offset 4, -32
 3070              		.cfi_offset 5, -28
 3071              		.cfi_offset 6, -24
 3072              		.cfi_offset 14, -20
 3073 0004 90B0     		sub	sp, sp, #64
 3074              	.LCFI33:
 3075              		.cfi_def_cfa_offset 96
 3076 0006 15A8     		add	r0, sp, #84
 3077 0008 80E80E00 		stm	r0, {r1, r2, r3}
 3078 000c 259E     		ldr	r6, [sp, #148]
 3079 000e BDF89840 		ldrh	r4, [sp, #152]
 555:System/storage/Storage.c ****     uint32_t data_addr = 0;
 3080              		.loc 1 555 5 is_stmt 1 view .LVU942
 3081              	.LVL385:
 556:System/storage/Storage.c ****     uint8_t *p_read_out = NULL;
 3082              		.loc 1 556 5 view .LVU943
 557:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 3083              		.loc 1 557 5 view .LVU944
 558:System/storage/Storage.c ****     uint16_t crc_len = 0;
 3084              		.loc 1 558 5 view .LVU945
 559:System/storage/Storage.c ****     uint16_t crc = 0;
 3085              		.loc 1 559 5 view .LVU946
 560:System/storage/Storage.c ****     Storage_DataSlot_TypeDef DataSlot;
 3086              		.loc 1 560 5 view .LVU947
 561:System/storage/Storage.c ****     uint8_t *p_data_start = NULL;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 107


 3087              		.loc 1 561 5 view .LVU948
 562:System/storage/Storage.c **** 
 3088              		.loc 1 562 5 view .LVU949
 564:System/storage/Storage.c ****     if (item.data_addr && p_data && size)
 3089              		.loc 1 564 5 view .LVU950
 3090 0012 4022     		movs	r2, #64
 3091 0014 0021     		movs	r1, #0
 3092 0016 6846     		mov	r0, sp
 3093 0018 FFF7FEFF 		bl	memset
 3094              	.LVL386:
 565:System/storage/Storage.c ****     {
 3095              		.loc 1 565 5 view .LVU951
 565:System/storage/Storage.c ****     {
 3096              		.loc 1 565 13 is_stmt 0 view .LVU952
 3097 001c DDF87F00 		ldr	r0, [sp, #127]	@ unaligned
 565:System/storage/Storage.c ****     {
 3098              		.loc 1 565 8 view .LVU953
 3099 0020 0028     		cmp	r0, #0
 3100 0022 66D0     		beq	.L263
 565:System/storage/Storage.c ****     {
 3101              		.loc 1 565 24 discriminator 1 view .LVU954
 3102 0024 002E     		cmp	r6, #0
 3103 0026 6AD0     		beq	.L264
 565:System/storage/Storage.c ****     {
 3104              		.loc 1 565 34 discriminator 2 view .LVU955
 3105 0028 002C     		cmp	r4, #0
 3106 002a 6AD0     		beq	.L265
 567:System/storage/Storage.c ****         data_addr = item.data_addr;
 3107              		.loc 1 567 9 is_stmt 1 view .LVU956
 567:System/storage/Storage.c ****         data_addr = item.data_addr;
 3108              		.loc 1 567 24 is_stmt 0 view .LVU957
 3109 002c BDF88350 		ldrh	r5, [sp, #131]	@ unaligned
 3110              	.LVL387:
 568:System/storage/Storage.c **** 
 3111              		.loc 1 568 9 is_stmt 1 view .LVU958
 570:System/storage/Storage.c ****         {
 3112              		.loc 1 570 9 view .LVU959
 3113              	.L259:
 570:System/storage/Storage.c ****         {
 3114              		.loc 1 570 14 view .LVU960
 3115 0030 002D     		cmp	r5, #0
 3116 0032 5AD0     		beq	.L261
 572:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3117              		.loc 1 572 13 view .LVU961
 572:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3118              		.loc 1 572 18 is_stmt 0 view .LVU962
 3119 0034 05F14002 		add	r2, r5, #64
 3120 0038 3949     		ldr	r1, .L274
 3121 003a FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 3122              	.LVL388:
 572:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3123              		.loc 1 572 16 view .LVU963
 3124 003e 0028     		cmp	r0, #0
 3125 0040 61D0     		beq	.L266
 575:System/storage/Storage.c ****             memcpy(&DataSlot.head_tag, p_read_out, sizeof(DataSlot.head_tag));
 3126              		.loc 1 575 13 is_stmt 1 view .LVU964
 3127              	.LVL389:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 108


 576:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.head_tag);
 3128              		.loc 1 576 13 view .LVU965
 3129 0042 374B     		ldr	r3, .L274
 3130 0044 1B68     		ldr	r3, [r3]
 3131 0046 0093     		str	r3, [sp]
 577:System/storage/Storage.c ****             if (DataSlot.head_tag != STORAGE_SLOT_HEAD_TAG)
 3132              		.loc 1 577 13 view .LVU966
 3133              	.LVL390:
 578:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3134              		.loc 1 578 13 view .LVU967
 578:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3135              		.loc 1 578 16 is_stmt 0 view .LVU968
 3136 0048 364A     		ldr	r2, .L274+4
 3137 004a 9342     		cmp	r3, r2
 3138 004c 5DD1     		bne	.L267
 581:System/storage/Storage.c ****             p_read_out += STORAGE_NAME_LEN;
 3139              		.loc 1 581 13 is_stmt 1 view .LVU969
 3140 004e 344C     		ldr	r4, .L274
 3141 0050 0DF1040C 		add	ip, sp, #4
 3142 0054 04F1040E 		add	lr, r4, #4
 3143 0058 BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 3144 005c ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 3145 0060 BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 3146 0064 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 3147 0068 9EE80700 		ldm	lr, {r0, r1, r2}
 3148 006c ACE80300 		stmia	ip!, {r0, r1}
 3149 0070 8CF80020 		strb	r2, [ip]
 582:System/storage/Storage.c **** 
 3150              		.loc 1 582 13 view .LVU970
 3151              	.LVL391:
 584:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.total_data_size);
 3152              		.loc 1 584 13 view .LVU971
 3153 0074 D4F82D30 		ldr	r3, [r4, #45]	@ unaligned
 3154 0078 CDF82D30 		str	r3, [sp, #45]	@ unaligned
 585:System/storage/Storage.c ****             if (DataSlot.total_data_size == 0)
 3155              		.loc 1 585 13 view .LVU972
 3156              	.LVL392:
 586:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3157              		.loc 1 586 13 view .LVU973
 586:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3158              		.loc 1 586 16 is_stmt 0 view .LVU974
 3159 007c 002B     		cmp	r3, #0
 3160 007e 46D0     		beq	.L268
 589:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.cur_slot_size);
 3161              		.loc 1 589 13 is_stmt 1 view .LVU975
 3162 0080 D4F83110 		ldr	r1, [r4, #49]	@ unaligned
 3163 0084 CDF83110 		str	r1, [sp, #49]	@ unaligned
 590:System/storage/Storage.c ****             if (DataSlot.cur_slot_size == 0)
 3164              		.loc 1 590 13 view .LVU976
 3165              	.LVL393:
 591:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3166              		.loc 1 591 13 view .LVU977
 591:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3167              		.loc 1 591 16 is_stmt 0 view .LVU978
 3168 0088 0029     		cmp	r1, #0
 3169 008a 42D0     		beq	.L269
 594:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.nxt_addr);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 109


 3170              		.loc 1 594 13 is_stmt 1 view .LVU979
 3171 008c D4F83530 		ldr	r3, [r4, #53]	@ unaligned
 3172 0090 CDF83530 		str	r3, [sp, #53]	@ unaligned
 595:System/storage/Storage.c **** 
 3173              		.loc 1 595 13 view .LVU980
 3174              	.LVL394:
 597:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.align_size);
 3175              		.loc 1 597 13 view .LVU981
 3176 0094 94F83930 		ldrb	r3, [r4, #57]	@ zero_extendqisi2
 3177 0098 8DF83930 		strb	r3, [sp, #57]
 598:System/storage/Storage.c ****             p_data_start = p_read_out;
 3178              		.loc 1 598 13 view .LVU982
 3179              	.LVL395:
 599:System/storage/Storage.c **** 
 3180              		.loc 1 599 13 view .LVU983
 601:System/storage/Storage.c ****             crc_len = DataSlot.cur_slot_size;
 3181              		.loc 1 601 13 view .LVU984
 602:System/storage/Storage.c ****             crc = Common_CRC16(crc_buf, crc_len);
 3182              		.loc 1 602 13 view .LVU985
 603:System/storage/Storage.c **** 
 3183              		.loc 1 603 13 view .LVU986
 603:System/storage/Storage.c **** 
 3184              		.loc 1 603 19 is_stmt 0 view .LVU987
 3185 009c 3A34     		adds	r4, r4, #58
 3186 009e 89B2     		uxth	r1, r1
 603:System/storage/Storage.c **** 
 3187              		.loc 1 603 19 view .LVU988
 3188 00a0 2046     		mov	r0, r4
 3189 00a2 FFF7FEFF 		bl	Common_CRC16
 3190              	.LVL396:
 603:System/storage/Storage.c **** 
 3191              		.loc 1 603 17 view .LVU989
 3192 00a6 80B2     		uxth	r0, r0
 3193              	.LVL397:
 605:System/storage/Storage.c ****             memcpy(&DataSlot.slot_crc, p_read_out, sizeof(DataSlot.slot_crc));
 3194              		.loc 1 605 13 is_stmt 1 view .LVU990
 605:System/storage/Storage.c ****             memcpy(&DataSlot.slot_crc, p_read_out, sizeof(DataSlot.slot_crc));
 3195              		.loc 1 605 35 is_stmt 0 view .LVU991
 3196 00a8 DDF83130 		ldr	r3, [sp, #49]	@ unaligned
 605:System/storage/Storage.c ****             memcpy(&DataSlot.slot_crc, p_read_out, sizeof(DataSlot.slot_crc));
 3197              		.loc 1 605 24 view .LVU992
 3198 00ac 1919     		adds	r1, r3, r4
 3199              	.LVL398:
 606:System/storage/Storage.c ****             p_read_out += sizeof(DataSlot.slot_crc);
 3200              		.loc 1 606 13 is_stmt 1 view .LVU993
 3201 00ae E25A     		ldrh	r2, [r4, r3]	@ unaligned
 3202 00b0 ADF83A20 		strh	r2, [sp, #58]	@ movhi
 607:System/storage/Storage.c ****             if (crc != DataSlot.slot_crc)
 3203              		.loc 1 607 13 view .LVU994
 3204              	.LVL399:
 608:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3205              		.loc 1 608 13 view .LVU995
 608:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3206              		.loc 1 608 16 is_stmt 0 view .LVU996
 3207 00b4 9042     		cmp	r0, r2
 3208 00b6 2ED1     		bne	.L270
 611:System/storage/Storage.c ****             if (DataSlot.end_tag != STORAGE_SLOT_END_TAG)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 110


 3209              		.loc 1 611 13 is_stmt 1 view .LVU997
 3210 00b8 D1F80220 		ldr	r2, [r1, #2]	@ unaligned
 3211 00bc 0F92     		str	r2, [sp, #60]
 612:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3212              		.loc 1 612 13 view .LVU998
 612:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3213              		.loc 1 612 16 is_stmt 0 view .LVU999
 3214 00be 1A49     		ldr	r1, .L274+8
 3215              	.LVL400:
 612:System/storage/Storage.c ****                 return Storage_GetData_Error;
 3216              		.loc 1 612 16 view .LVU1000
 3217 00c0 8A42     		cmp	r2, r1
 3218 00c2 2AD1     		bne	.L271
 615:System/storage/Storage.c ****             data_len -= DataSlot.cur_slot_size;
 3219              		.loc 1 615 13 is_stmt 1 view .LVU1001
 615:System/storage/Storage.c ****             data_len -= DataSlot.cur_slot_size;
 3220              		.loc 1 615 75 is_stmt 0 view .LVU1002
 3221 00c4 9DF83920 		ldrb	r2, [sp, #57]	@ zero_extendqisi2
 615:System/storage/Storage.c ****             data_len -= DataSlot.cur_slot_size;
 3222              		.loc 1 615 13 view .LVU1003
 3223 00c8 9A1A     		subs	r2, r3, r2
 3224 00ca 2146     		mov	r1, r4
 3225 00cc 3046     		mov	r0, r6
 3226              	.LVL401:
 615:System/storage/Storage.c ****             data_len -= DataSlot.cur_slot_size;
 3227              		.loc 1 615 13 view .LVU1004
 3228 00ce FFF7FEFF 		bl	memcpy
 3229              	.LVL402:
 616:System/storage/Storage.c **** 
 3230              		.loc 1 616 13 is_stmt 1 view .LVU1005
 616:System/storage/Storage.c **** 
 3231              		.loc 1 616 33 is_stmt 0 view .LVU1006
 3232 00d2 DDF83130 		ldr	r3, [sp, #49]	@ unaligned
 616:System/storage/Storage.c **** 
 3233              		.loc 1 616 22 view .LVU1007
 3234 00d6 ED1A     		subs	r5, r5, r3
 3235              	.LVL403:
 618:System/storage/Storage.c ****             {
 3236              		.loc 1 618 13 is_stmt 1 view .LVU1008
 618:System/storage/Storage.c ****             {
 3237              		.loc 1 618 25 is_stmt 0 view .LVU1009
 3238 00d8 DDF83500 		ldr	r0, [sp, #53]	@ unaligned
 618:System/storage/Storage.c ****             {
 3239              		.loc 1 618 16 view .LVU1010
 3240 00dc 20B1     		cbz	r0, .L260
 620:System/storage/Storage.c ****                 data_addr = DataSlot.nxt_addr;
 3241              		.loc 1 620 17 is_stmt 1 view .LVU1011
 620:System/storage/Storage.c ****                 data_addr = DataSlot.nxt_addr;
 3242              		.loc 1 620 60 is_stmt 0 view .LVU1012
 3243 00de 9DF83920 		ldrb	r2, [sp, #57]	@ zero_extendqisi2
 620:System/storage/Storage.c ****                 data_addr = DataSlot.nxt_addr;
 3244              		.loc 1 620 50 view .LVU1013
 3245 00e2 9B1A     		subs	r3, r3, r2
 620:System/storage/Storage.c ****                 data_addr = DataSlot.nxt_addr;
 3246              		.loc 1 620 24 view .LVU1014
 3247 00e4 1E44     		add	r6, r6, r3
 3248              	.LVL404:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 111


 621:System/storage/Storage.c ****             }
 3249              		.loc 1 621 17 is_stmt 1 view .LVU1015
 621:System/storage/Storage.c ****             }
 3250              		.loc 1 621 17 is_stmt 0 view .LVU1016
 3251 00e6 A3E7     		b	.L259
 3252              	.LVL405:
 3253              	.L260:
 625:System/storage/Storage.c ****                     break;
 3254              		.loc 1 625 17 is_stmt 1 view .LVU1017
 625:System/storage/Storage.c ****                     break;
 3255              		.loc 1 625 20 is_stmt 0 view .LVU1018
 3256 00e8 0DB9     		cbnz	r5, .L273
 3257              	.LVL406:
 3258              	.L261:
 632:System/storage/Storage.c ****     }
 3259              		.loc 1 632 9 is_stmt 1 view .LVU1019
 632:System/storage/Storage.c ****     }
 3260              		.loc 1 632 16 is_stmt 0 view .LVU1020
 3261 00ea 0020     		movs	r0, #0
 3262 00ec 02E0     		b	.L258
 3263              	.LVL407:
 3264              	.L273:
 628:System/storage/Storage.c ****             }
 3265              		.loc 1 628 24 view .LVU1021
 3266 00ee 1E20     		movs	r0, #30
 3267 00f0 00E0     		b	.L258
 3268              	.LVL408:
 3269              	.L263:
 635:System/storage/Storage.c **** }
 3270              		.loc 1 635 12 view .LVU1022
 3271 00f2 1E20     		movs	r0, #30
 3272              	.LVL409:
 3273              	.L258:
 636:System/storage/Storage.c **** 
 3274              		.loc 1 636 1 view .LVU1023
 3275 00f4 10B0     		add	sp, sp, #64
 3276              	.LCFI34:
 3277              		.cfi_remember_state
 3278              		.cfi_def_cfa_offset 32
 3279              		@ sp needed
 3280 00f6 BDE87040 		pop	{r4, r5, r6, lr}
 3281              	.LCFI35:
 3282              		.cfi_restore 14
 3283              		.cfi_restore 6
 3284              		.cfi_restore 5
 3285              		.cfi_restore 4
 3286              		.cfi_def_cfa_offset 16
 3287 00fa 04B0     		add	sp, sp, #16
 3288              	.LCFI36:
 3289              		.cfi_def_cfa_offset 0
 3290 00fc 7047     		bx	lr
 3291              	.LVL410:
 3292              	.L264:
 3293              	.LCFI37:
 3294              		.cfi_restore_state
 635:System/storage/Storage.c **** }
 3295              		.loc 1 635 12 view .LVU1024
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 112


 3296 00fe 1E20     		movs	r0, #30
 3297 0100 F8E7     		b	.L258
 3298              	.L265:
 3299 0102 1E20     		movs	r0, #30
 3300 0104 F6E7     		b	.L258
 3301              	.LVL411:
 3302              	.L266:
 573:System/storage/Storage.c **** 
 3303              		.loc 1 573 24 view .LVU1025
 3304 0106 1E20     		movs	r0, #30
 3305 0108 F4E7     		b	.L258
 3306              	.LVL412:
 3307              	.L267:
 579:System/storage/Storage.c **** 
 3308              		.loc 1 579 24 view .LVU1026
 3309 010a 1E20     		movs	r0, #30
 3310 010c F2E7     		b	.L258
 3311              	.LVL413:
 3312              	.L268:
 587:System/storage/Storage.c **** 
 3313              		.loc 1 587 24 view .LVU1027
 3314 010e 1E20     		movs	r0, #30
 3315 0110 F0E7     		b	.L258
 3316              	.LVL414:
 3317              	.L269:
 592:System/storage/Storage.c **** 
 3318              		.loc 1 592 24 view .LVU1028
 3319 0112 1E20     		movs	r0, #30
 3320 0114 EEE7     		b	.L258
 3321              	.LVL415:
 3322              	.L270:
 609:System/storage/Storage.c **** 
 3323              		.loc 1 609 24 view .LVU1029
 3324 0116 1E20     		movs	r0, #30
 3325              	.LVL416:
 609:System/storage/Storage.c **** 
 3326              		.loc 1 609 24 view .LVU1030
 3327 0118 ECE7     		b	.L258
 3328              	.LVL417:
 3329              	.L271:
 613:System/storage/Storage.c **** 
 3330              		.loc 1 613 24 view .LVU1031
 3331 011a 1E20     		movs	r0, #30
 3332              	.LVL418:
 613:System/storage/Storage.c **** 
 3333              		.loc 1 613 24 view .LVU1032
 3334 011c EAE7     		b	.L258
 3335              	.L275:
 3336 011e 00BF     		.align	2
 3337              	.L274:
 3338 0120 00000000 		.word	page_data_tmp
 3339 0124 EF1001EF 		.word	-285142801
 3340 0128 FE0110FE 		.word	-32505346
 3341              		.cfi_endproc
 3342              	.LFE153:
 3344              		.section	.text.Storage_SlotData_Update,"ax",%progbits
 3345              		.align	1
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 113


 3346              		.syntax unified
 3347              		.thumb
 3348              		.thumb_func
 3350              	Storage_SlotData_Update:
 3351              	.LVL419:
 3352              	.LFB154:
 639:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 3353              		.loc 1 639 1 is_stmt 1 view -0
 3354              		.cfi_startproc
 3355              		@ args = 0, pretend = 0, frame = 8
 3356              		@ frame_needed = 0, uses_anonymous_args = 0
 639:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 3357              		.loc 1 639 1 is_stmt 0 view .LVU1034
 3358 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3359              	.LCFI38:
 3360              		.cfi_def_cfa_offset 36
 3361              		.cfi_offset 4, -36
 3362              		.cfi_offset 5, -32
 3363              		.cfi_offset 6, -28
 3364              		.cfi_offset 7, -24
 3365              		.cfi_offset 8, -20
 3366              		.cfi_offset 9, -16
 3367              		.cfi_offset 10, -12
 3368              		.cfi_offset 11, -8
 3369              		.cfi_offset 14, -4
 3370 0004 83B0     		sub	sp, sp, #12
 3371              	.LCFI39:
 3372              		.cfi_def_cfa_offset 48
 3373 0006 1E46     		mov	r6, r3
 640:System/storage/Storage.c ****     Storage_DataSlot_TypeDef *p_slotdata = NULL;
 3374              		.loc 1 640 5 is_stmt 1 view .LVU1035
 3375              	.LVL420:
 641:System/storage/Storage.c ****     uint8_t *p_read_tmp = page_data_tmp;
 3376              		.loc 1 641 5 view .LVU1036
 642:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 3377              		.loc 1 642 5 view .LVU1037
 643:System/storage/Storage.c ****     uint16_t crc = 0;
 3378              		.loc 1 643 5 view .LVU1038
 644:System/storage/Storage.c ****     uint32_t read_addr = 0;
 3379              		.loc 1 644 5 view .LVU1039
 645:System/storage/Storage.c ****     uint32_t read_size = 0;
 3380              		.loc 1 645 5 view .LVU1040
 646:System/storage/Storage.c ****     uint32_t valid_data_size = 0;
 3381              		.loc 1 646 5 view .LVU1041
 647:System/storage/Storage.c ****     uint8_t align_byte = 0;
 3382              		.loc 1 647 5 view .LVU1042
 648:System/storage/Storage.c **** 
 3383              		.loc 1 648 5 view .LVU1043
 650:System/storage/Storage.c ****         (_class > Para_User) || \
 3384              		.loc 1 650 5 view .LVU1044
 650:System/storage/Storage.c ****         (_class > Para_User) || \
 3385              		.loc 1 650 25 is_stmt 0 view .LVU1045
 3386 0008 814B     		ldr	r3, .L316
 3387              	.LVL421:
 650:System/storage/Storage.c ****         (_class > Para_User) || \
 3388              		.loc 1 650 25 view .LVU1046
 3389 000a 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 114


 650:System/storage/Storage.c ****         (_class > Para_User) || \
 3390              		.loc 1 650 8 view .LVU1047
 3391 000c 002B     		cmp	r3, #0
 3392 000e 00F0D280 		beq	.L283
 3393 0012 0C46     		mov	r4, r1
 3394 0014 1546     		mov	r5, r2
 650:System/storage/Storage.c ****         (_class > Para_User) || \
 3395              		.loc 1 650 37 discriminator 1 view .LVU1048
 3396 0016 0228     		cmp	r0, #2
 3397 0018 00F2D180 		bhi	.L284
 651:System/storage/Storage.c ****         (data_slot_hdl == 0) || \
 3398              		.loc 1 651 30 view .LVU1049
 3399 001c 0029     		cmp	r1, #0
 3400 001e 00F0D080 		beq	.L285
 652:System/storage/Storage.c ****         (p_data == NULL) || \
 3401              		.loc 1 652 30 view .LVU1050
 3402 0022 002A     		cmp	r2, #0
 3403 0024 00F0CF80 		beq	.L286
 653:System/storage/Storage.c ****         (size == 0))
 3404              		.loc 1 653 26 view .LVU1051
 3405 0028 002E     		cmp	r6, #0
 3406 002a 00F0CE80 		beq	.L287
 657:System/storage/Storage.c ****     
 3407              		.loc 1 657 5 is_stmt 1 view .LVU1052
 657:System/storage/Storage.c ****     
 3408              		.loc 1 657 13 is_stmt 0 view .LVU1053
 3409 002e 0146     		mov	r1, r0
 3410              	.LVL422:
 657:System/storage/Storage.c ****     
 3411              		.loc 1 657 13 view .LVU1054
 3412 0030 7848     		ldr	r0, .L316+4
 3413              	.LVL423:
 657:System/storage/Storage.c ****     
 3414              		.loc 1 657 13 view .LVU1055
 3415 0032 FFF7FEFF 		bl	Storage_Get_SecInfo
 3416              	.LVL424:
 659:System/storage/Storage.c ****         (p_Sec->data_sec_addr > data_slot_hdl) || \
 3417              		.loc 1 659 5 is_stmt 1 view .LVU1056
 659:System/storage/Storage.c ****         (p_Sec->data_sec_addr > data_slot_hdl) || \
 3418              		.loc 1 659 8 is_stmt 0 view .LVU1057
 3419 0036 0746     		mov	r7, r0
 3420 0038 0028     		cmp	r0, #0
 3421 003a 00F0C880 		beq	.L288
 660:System/storage/Storage.c ****         (data_slot_hdl > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
 3422              		.loc 1 660 15 discriminator 1 view .LVU1058
 3423 003e 4368     		ldr	r3, [r0, #4]	@ unaligned
 659:System/storage/Storage.c ****         (p_Sec->data_sec_addr > data_slot_hdl) || \
 3424              		.loc 1 659 25 discriminator 1 view .LVU1059
 3425 0040 A342     		cmp	r3, r4
 3426 0042 00F2C680 		bhi	.L289
 661:System/storage/Storage.c ****         return Storage_Param_Error;
 3427              		.loc 1 661 55 view .LVU1060
 3428 0046 8268     		ldr	r2, [r0, #8]	@ unaligned
 661:System/storage/Storage.c ****         return Storage_Param_Error;
 3429              		.loc 1 661 48 view .LVU1061
 3430 0048 1344     		add	r3, r3, r2
 660:System/storage/Storage.c ****         (data_slot_hdl > (p_Sec->data_sec_addr + p_Sec->data_sec_size)))
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 115


 3431              		.loc 1 660 48 view .LVU1062
 3432 004a A342     		cmp	r3, r4
 3433 004c 01D2     		bcs	.L311
 662:System/storage/Storage.c **** 
 3434              		.loc 1 662 16 view .LVU1063
 3435 004e 0120     		movs	r0, #1
 3436              	.LVL425:
 662:System/storage/Storage.c **** 
 3437              		.loc 1 662 16 view .LVU1064
 3438 0050 B2E0     		b	.L277
 3439              	.LVL426:
 3440              	.L311:
 664:System/storage/Storage.c ****     memset(page_data_tmp, 0, sizeof(Storage_DataSlot_TypeDef));
 3441              		.loc 1 664 5 is_stmt 1 view .LVU1065
 665:System/storage/Storage.c ****     if (size % STORAGE_DATA_ALIGN)
 3442              		.loc 1 665 5 view .LVU1066
 3443 0052 4022     		movs	r2, #64
 3444 0054 0021     		movs	r1, #0
 3445 0056 7048     		ldr	r0, .L316+8
 3446              	.LVL427:
 665:System/storage/Storage.c ****     if (size % STORAGE_DATA_ALIGN)
 3447              		.loc 1 665 5 is_stmt 0 view .LVU1067
 3448 0058 FFF7FEFF 		bl	memset
 3449              	.LVL428:
 666:System/storage/Storage.c ****     {
 3450              		.loc 1 666 5 is_stmt 1 view .LVU1068
 666:System/storage/Storage.c ****     {
 3451              		.loc 1 666 8 is_stmt 0 view .LVU1069
 3452 005c 16F0030F 		tst	r6, #3
 3453 0060 22D0     		beq	.L291
 668:System/storage/Storage.c ****     }
 3454              		.loc 1 668 9 is_stmt 1 view .LVU1070
 668:System/storage/Storage.c ****     }
 3455              		.loc 1 668 48 is_stmt 0 view .LVU1071
 3456 0062 06F00308 		and	r8, r6, #3
 668:System/storage/Storage.c ****     }
 3457              		.loc 1 668 20 view .LVU1072
 3458 0066 C8F10408 		rsb	r8, r8, #4
 3459 006a 5FFA88F8 		uxtb	r8, r8
 3460              	.LVL429:
 3461              	.L278:
 674:System/storage/Storage.c ****         return Storage_Read_Error;
 3462              		.loc 1 674 5 is_stmt 1 view .LVU1073
 674:System/storage/Storage.c ****         return Storage_Read_Error;
 3463              		.loc 1 674 10 is_stmt 0 view .LVU1074
 3464 006e 4022     		movs	r2, #64
 3465 0070 6949     		ldr	r1, .L316+8
 3466 0072 2046     		mov	r0, r4
 3467 0074 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 3468              	.LVL430:
 674:System/storage/Storage.c ****         return Storage_Read_Error;
 3469              		.loc 1 674 8 view .LVU1075
 3470 0078 0028     		cmp	r0, #0
 3471 007a 00F0AC80 		beq	.L292
 678:System/storage/Storage.c ****     if ((p_slotdata->head_tag != STORAGE_SLOT_HEAD_TAG) || \
 3472              		.loc 1 678 5 is_stmt 1 view .LVU1076
 3473              	.LVL431:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 116


 679:System/storage/Storage.c ****         (p_slotdata->total_data_size == 0) || \
 3474              		.loc 1 679 5 view .LVU1077
 679:System/storage/Storage.c ****         (p_slotdata->total_data_size == 0) || \
 3475              		.loc 1 679 20 is_stmt 0 view .LVU1078
 3476 007e 664B     		ldr	r3, .L316+8
 3477 0080 1A68     		ldr	r2, [r3]
 679:System/storage/Storage.c ****         (p_slotdata->total_data_size == 0) || \
 3478              		.loc 1 679 8 view .LVU1079
 3479 0082 664B     		ldr	r3, .L316+12
 3480 0084 9A42     		cmp	r2, r3
 3481 0086 40F0A880 		bne	.L293
 680:System/storage/Storage.c ****         (p_slotdata->total_data_size > p_Sec->data_sec_size))
 3482              		.loc 1 680 20 discriminator 1 view .LVU1080
 3483 008a 634B     		ldr	r3, .L316+8
 3484 008c D3F82D30 		ldr	r3, [r3, #45]	@ unaligned
 679:System/storage/Storage.c ****         (p_slotdata->total_data_size == 0) || \
 3485              		.loc 1 679 57 discriminator 1 view .LVU1081
 3486 0090 002B     		cmp	r3, #0
 3487 0092 00F0A480 		beq	.L294
 681:System/storage/Storage.c ****         return Storage_DataInfo_Error;
 3488              		.loc 1 681 45 view .LVU1082
 3489 0096 BA68     		ldr	r2, [r7, #8]	@ unaligned
 680:System/storage/Storage.c ****         (p_slotdata->total_data_size > p_Sec->data_sec_size))
 3490              		.loc 1 680 44 view .LVU1083
 3491 0098 9342     		cmp	r3, r2
 3492 009a 00F2A280 		bhi	.L295
 684:System/storage/Storage.c ****         return Storage_Update_DataSize_Error;
 3493              		.loc 1 684 5 is_stmt 1 view .LVU1084
 684:System/storage/Storage.c ****         return Storage_Update_DataSize_Error;
 3494              		.loc 1 684 46 is_stmt 0 view .LVU1085
 3495 009e B044     		add	r8, r8, r6
 3496              	.LVL432:
 684:System/storage/Storage.c ****         return Storage_Update_DataSize_Error;
 3497              		.loc 1 684 8 view .LVU1086
 3498 00a0 4345     		cmp	r3, r8
 3499 00a2 04D0     		beq	.L312
 685:System/storage/Storage.c **** 
 3500              		.loc 1 685 16 view .LVU1087
 3501 00a4 2020     		movs	r0, #32
 3502 00a6 87E0     		b	.L277
 3503              	.LVL433:
 3504              	.L291:
 671:System/storage/Storage.c **** 
 3505              		.loc 1 671 20 view .LVU1088
 3506 00a8 4FF00008 		mov	r8, #0
 3507 00ac DFE7     		b	.L278
 3508              	.LVL434:
 3509              	.L312:
 687:System/storage/Storage.c ****     p_read_tmp = page_data_tmp;
 3510              		.loc 1 687 5 is_stmt 1 view .LVU1089
 687:System/storage/Storage.c ****     p_read_tmp = page_data_tmp;
 3511              		.loc 1 687 15 is_stmt 0 view .LVU1090
 3512 00ae 4033     		adds	r3, r3, #64
 3513 00b0 0193     		str	r3, [sp, #4]
 3514              	.LVL435:
 688:System/storage/Storage.c ****     memset(p_read_tmp, 0, sizeof(Storage_DataSlot_TypeDef));
 3515              		.loc 1 688 5 is_stmt 1 view .LVU1091
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 117


 689:System/storage/Storage.c ****     p_slotdata = NULL;
 3516              		.loc 1 689 5 view .LVU1092
 3517 00b2 4022     		movs	r2, #64
 3518 00b4 0021     		movs	r1, #0
 3519 00b6 5848     		ldr	r0, .L316+8
 3520 00b8 FFF7FEFF 		bl	memset
 3521              	.LVL436:
 690:System/storage/Storage.c ****     while(true)
 3522              		.loc 1 690 5 view .LVU1093
 647:System/storage/Storage.c ****     uint8_t align_byte = 0;
 3523              		.loc 1 647 14 is_stmt 0 view .LVU1094
 3524 00bc 4FF0000A 		mov	r10, #0
 3525 00c0 00E0     		b	.L282
 3526              	.LVL437:
 3527              	.L307:
 647:System/storage/Storage.c ****     uint8_t align_byte = 0;
 3528              		.loc 1 647 14 view .LVU1095
 3529 00c2 1C46     		mov	r4, r3
 3530              	.LVL438:
 3531              	.L282:
 691:System/storage/Storage.c ****     {
 3532              		.loc 1 691 5 is_stmt 1 view .LVU1096
 693:System/storage/Storage.c ****         p_slotdata = (Storage_DataSlot_TypeDef *)p_read_tmp;
 3533              		.loc 1 693 9 view .LVU1097
 694:System/storage/Storage.c **** 
 3534              		.loc 1 694 9 view .LVU1098
 697:System/storage/Storage.c ****             return Storage_Read_Error;
 3535              		.loc 1 697 9 view .LVU1099
 697:System/storage/Storage.c ****             return Storage_Read_Error;
 3536              		.loc 1 697 14 is_stmt 0 view .LVU1100
 3537 00c4 019A     		ldr	r2, [sp, #4]
 3538 00c6 5449     		ldr	r1, .L316+8
 3539 00c8 2046     		mov	r0, r4
 3540 00ca FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 3541              	.LVL439:
 697:System/storage/Storage.c ****             return Storage_Read_Error;
 3542              		.loc 1 697 12 view .LVU1101
 3543 00ce 0028     		cmp	r0, #0
 3544 00d0 00F08980 		beq	.L297
 700:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->head_tag);
 3545              		.loc 1 700 9 is_stmt 1 view .LVU1102
 700:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->head_tag);
 3546              		.loc 1 700 32 is_stmt 0 view .LVU1103
 3547 00d4 504B     		ldr	r3, .L316+8
 3548 00d6 1A68     		ldr	r2, [r3]
 701:System/storage/Storage.c ****         if (p_slotdata->head_tag != STORAGE_SLOT_HEAD_TAG)
 3549              		.loc 1 701 9 is_stmt 1 view .LVU1104
 3550              	.LVL440:
 702:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3551              		.loc 1 702 9 view .LVU1105
 702:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3552              		.loc 1 702 12 is_stmt 0 view .LVU1106
 3553 00d8 504B     		ldr	r3, .L316+12
 3554 00da 9A42     		cmp	r2, r3
 3555 00dc 40F08580 		bne	.L298
 705:System/storage/Storage.c ****         p_read_tmp += STORAGE_NAME_LEN;
 3556              		.loc 1 705 9 is_stmt 1 view .LVU1107
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 118


 706:System/storage/Storage.c **** 
 3557              		.loc 1 706 9 view .LVU1108
 3558              	.LVL441:
 708:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->total_data_size);
 3559              		.loc 1 708 9 view .LVU1109
 708:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->total_data_size);
 3560              		.loc 1 708 39 is_stmt 0 view .LVU1110
 3561 00e0 4D4B     		ldr	r3, .L316+8
 3562 00e2 D3F82D30 		ldr	r3, [r3, #45]	@ unaligned
 709:System/storage/Storage.c ****         if ((p_slotdata->total_data_size == 0) || \
 3563              		.loc 1 709 9 is_stmt 1 view .LVU1111
 3564              	.LVL442:
 710:System/storage/Storage.c ****             (p_slotdata->total_data_size > p_Sec->data_sec_size))
 3565              		.loc 1 710 9 view .LVU1112
 710:System/storage/Storage.c ****             (p_slotdata->total_data_size > p_Sec->data_sec_size))
 3566              		.loc 1 710 12 is_stmt 0 view .LVU1113
 3567 00e6 002B     		cmp	r3, #0
 3568 00e8 00F08180 		beq	.L299
 711:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3569              		.loc 1 711 49 discriminator 1 view .LVU1114
 3570 00ec BA68     		ldr	r2, [r7, #8]	@ unaligned
 710:System/storage/Storage.c ****             (p_slotdata->total_data_size > p_Sec->data_sec_size))
 3571              		.loc 1 710 48 discriminator 1 view .LVU1115
 3572 00ee 9342     		cmp	r3, r2
 3573 00f0 7FD8     		bhi	.L300
 714:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->cur_slot_size);
 3574              		.loc 1 714 9 is_stmt 1 view .LVU1116
 714:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->cur_slot_size);
 3575              		.loc 1 714 37 is_stmt 0 view .LVU1117
 3576 00f2 4949     		ldr	r1, .L316+8
 3577 00f4 D1F83180 		ldr	r8, [r1, #49]	@ unaligned
 715:System/storage/Storage.c ****         if (p_slotdata->cur_slot_size > p_slotdata->total_data_size)
 3578              		.loc 1 715 9 is_stmt 1 view .LVU1118
 3579              	.LVL443:
 716:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3580              		.loc 1 716 9 view .LVU1119
 716:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3581              		.loc 1 716 12 is_stmt 0 view .LVU1120
 3582 00f8 4345     		cmp	r3, r8
 3583 00fa 7CD3     		bcc	.L301
 719:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->nxt_addr);
 3584              		.loc 1 719 9 is_stmt 1 view .LVU1121
 719:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->nxt_addr);
 3585              		.loc 1 719 32 is_stmt 0 view .LVU1122
 3586 00fc D1F83530 		ldr	r3, [r1, #53]	@ unaligned
 720:System/storage/Storage.c ****         if (p_slotdata->nxt_addr)
 3587              		.loc 1 720 9 is_stmt 1 view .LVU1123
 3588              	.LVL444:
 721:System/storage/Storage.c ****         {
 3589              		.loc 1 721 9 view .LVU1124
 721:System/storage/Storage.c ****         {
 3590              		.loc 1 721 12 is_stmt 0 view .LVU1125
 3591 0100 2BB1     		cbz	r3, .L279
 723:System/storage/Storage.c ****                 (p_slotdata->nxt_addr > p_Sec->data_sec_addr + p_Sec->data_sec_size))
 3592              		.loc 1 723 13 is_stmt 1 view .LVU1126
 723:System/storage/Storage.c ****                 (p_slotdata->nxt_addr > p_Sec->data_sec_addr + p_Sec->data_sec_size))
 3593              		.loc 1 723 46 is_stmt 0 view .LVU1127
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 119


 3594 0102 7968     		ldr	r1, [r7, #4]	@ unaligned
 723:System/storage/Storage.c ****                 (p_slotdata->nxt_addr > p_Sec->data_sec_addr + p_Sec->data_sec_size))
 3595              		.loc 1 723 16 view .LVU1128
 3596 0104 8B42     		cmp	r3, r1
 3597 0106 78D3     		bcc	.L302
 724:System/storage/Storage.c ****                 return Storage_DataInfo_Error;
 3598              		.loc 1 724 62 discriminator 1 view .LVU1129
 3599 0108 0A44     		add	r2, r2, r1
 723:System/storage/Storage.c ****                 (p_slotdata->nxt_addr > p_Sec->data_sec_addr + p_Sec->data_sec_size))
 3600              		.loc 1 723 63 discriminator 1 view .LVU1130
 3601 010a 9342     		cmp	r3, r2
 3602 010c 77D8     		bhi	.L303
 3603              	.L279:
 728:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->align_size);
 3604              		.loc 1 728 9 is_stmt 1 view .LVU1131
 728:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->align_size);
 3605              		.loc 1 728 34 is_stmt 0 view .LVU1132
 3606 010e 424B     		ldr	r3, .L316+8
 3607 0110 93F83990 		ldrb	r9, [r3, #57]	@ zero_extendqisi2
 729:System/storage/Storage.c ****         if (p_slotdata->align_size >= STORAGE_DATA_ALIGN)
 3608              		.loc 1 729 9 is_stmt 1 view .LVU1133
 3609              	.LVL445:
 730:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3610              		.loc 1 730 9 view .LVU1134
 730:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3611              		.loc 1 730 12 is_stmt 0 view .LVU1135
 3612 0114 B9F1030F 		cmp	r9, #3
 3613 0118 73D8     		bhi	.L304
 733:System/storage/Storage.c ****         memcpy(p_read_tmp, p_data, (p_slotdata->cur_slot_size - p_slotdata->align_size));
 3614              		.loc 1 733 9 is_stmt 1 view .LVU1136
 3615              	.LVL446:
 734:System/storage/Storage.c ****         p_read_tmp += p_slotdata->cur_slot_size - p_slotdata->align_size;
 3616              		.loc 1 734 9 view .LVU1137
 734:System/storage/Storage.c ****         p_read_tmp += p_slotdata->cur_slot_size - p_slotdata->align_size;
 3617              		.loc 1 734 63 is_stmt 0 view .LVU1138
 3618 011a A8EB0908 		sub	r8, r8, r9
 734:System/storage/Storage.c ****         p_read_tmp += p_slotdata->cur_slot_size - p_slotdata->align_size;
 3619              		.loc 1 734 9 view .LVU1139
 3620 011e 03F13A0B 		add	fp, r3, #58
 3621 0122 4246     		mov	r2, r8
 3622 0124 2946     		mov	r1, r5
 3623 0126 5846     		mov	r0, fp
 3624 0128 FFF7FEFF 		bl	memcpy
 3625              	.LVL447:
 735:System/storage/Storage.c **** 
 3626              		.loc 1 735 9 is_stmt 1 view .LVU1140
 735:System/storage/Storage.c **** 
 3627              		.loc 1 735 20 is_stmt 0 view .LVU1141
 3628 012c D844     		add	r8, r8, fp
 3629              	.LVL448:
 737:System/storage/Storage.c ****             /* set align byte */
 3630              		.loc 1 737 9 is_stmt 1 view .LVU1142
 737:System/storage/Storage.c ****             /* set align byte */
 3631              		.loc 1 737 12 is_stmt 0 view .LVU1143
 3632 012e B9F1000F 		cmp	r9, #0
 3633 0132 30D1     		bne	.L313
 3634              	.L280:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 120


 741:System/storage/Storage.c ****         /* update crc */
 3635              		.loc 1 741 9 is_stmt 1 view .LVU1144
 741:System/storage/Storage.c ****         /* update crc */
 3636              		.loc 1 741 33 is_stmt 0 view .LVU1145
 3637 0134 DFF8E090 		ldr	r9, .L316+8
 3638 0138 99F839B0 		ldrb	fp, [r9, #57]	@ zero_extendqisi2
 741:System/storage/Storage.c ****         /* update crc */
 3639              		.loc 1 741 20 view .LVU1146
 3640 013c 08EB0B03 		add	r3, r8, fp
 3641 0140 0093     		str	r3, [sp]
 3642              	.LVL449:
 743:System/storage/Storage.c ****         
 3643              		.loc 1 743 9 is_stmt 1 view .LVU1147
 743:System/storage/Storage.c ****         
 3644              		.loc 1 743 15 is_stmt 0 view .LVU1148
 3645 0142 D9F83110 		ldr	r1, [r9, #49]	@ unaligned
 3646 0146 09F13A00 		add	r0, r9, #58
 3647 014a FFF7FEFF 		bl	Common_CRC16
 3648              	.LVL450:
 743:System/storage/Storage.c ****         
 3649              		.loc 1 743 15 view .LVU1149
 3650 014e 80B2     		uxth	r0, r0
 3651              	.LVL451:
 745:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 3652              		.loc 1 745 9 is_stmt 1 view .LVU1150
 745:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 3653              		.loc 1 745 38 is_stmt 0 view .LVU1151
 3654 0150 D9F83130 		ldr	r3, [r9, #49]	@ unaligned
 745:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 3655              		.loc 1 745 66 view .LVU1152
 3656 0154 99F83920 		ldrb	r2, [r9, #57]	@ zero_extendqisi2
 745:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 3657              		.loc 1 745 54 view .LVU1153
 3658 0158 9B1A     		subs	r3, r3, r2
 745:System/storage/Storage.c ****         if (p_slotdata->nxt_addr == 0)
 3659              		.loc 1 745 25 view .LVU1154
 3660 015a 9A44     		add	r10, r10, r3
 3661              	.LVL452:
 746:System/storage/Storage.c ****         {
 3662              		.loc 1 746 9 is_stmt 1 view .LVU1155
 746:System/storage/Storage.c ****         {
 3663              		.loc 1 746 23 is_stmt 0 view .LVU1156
 3664 015c D9F83530 		ldr	r3, [r9, #53]	@ unaligned
 746:System/storage/Storage.c ****         {
 3665              		.loc 1 746 12 view .LVU1157
 3666 0160 0BB9     		cbnz	r3, .L281
 750:System/storage/Storage.c ****                 return Storage_Update_DataSize_Error;
 3667              		.loc 1 750 13 is_stmt 1 view .LVU1158
 750:System/storage/Storage.c ****                 return Storage_Update_DataSize_Error;
 3668              		.loc 1 750 16 is_stmt 0 view .LVU1159
 3669 0162 5645     		cmp	r6, r10
 3670 0164 4FD1     		bne	.L305
 3671              	.L281:
 754:System/storage/Storage.c ****         
 3672              		.loc 1 754 9 is_stmt 1 view .LVU1160
 3673 0166 28F80B00 		strh	r0, [r8, fp]	@ unaligned
 756:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 121


 3674              		.loc 1 756 9 view .LVU1161
 756:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
 3675              		.loc 1 756 29 is_stmt 0 view .LVU1162
 3676 016a 2B4B     		ldr	r3, .L316+8
 3677 016c D3F83120 		ldr	r2, [r3, #49]	@ unaligned
 756:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
 3678              		.loc 1 756 57 view .LVU1163
 3679 0170 93F83930 		ldrb	r3, [r3, #57]	@ zero_extendqisi2
 756:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
 3680              		.loc 1 756 45 view .LVU1164
 3681 0174 D31A     		subs	r3, r2, r3
 756:System/storage/Storage.c ****         p_read_tmp += sizeof(p_slotdata->slot_crc);
 3682              		.loc 1 756 16 view .LVU1165
 3683 0176 1D44     		add	r5, r5, r3
 3684              	.LVL453:
 757:System/storage/Storage.c **** 
 3685              		.loc 1 757 9 is_stmt 1 view .LVU1166
 759:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3686              		.loc 1 759 9 view .LVU1167
 759:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3687              		.loc 1 759 13 is_stmt 0 view .LVU1168
 3688 0178 009B     		ldr	r3, [sp]
 3689 017a D3F80210 		ldr	r1, [r3, #2]
 759:System/storage/Storage.c ****             return Storage_DataInfo_Error;
 3690              		.loc 1 759 12 view .LVU1169
 3691 017e 284B     		ldr	r3, .L316+16
 3692 0180 9942     		cmp	r1, r3
 3693 0182 42D1     		bne	.L306
 762:System/storage/Storage.c ****             (size == valid_data_size))
 3694              		.loc 1 762 9 is_stmt 1 view .LVU1170
 762:System/storage/Storage.c ****             (size == valid_data_size))
 3695              		.loc 1 762 24 is_stmt 0 view .LVU1171
 3696 0184 244B     		ldr	r3, .L316+8
 3697 0186 D3F83530 		ldr	r3, [r3, #53]	@ unaligned
 762:System/storage/Storage.c ****             (size == valid_data_size))
 3698              		.loc 1 762 12 view .LVU1172
 3699 018a 002B     		cmp	r3, #0
 3700 018c 99D1     		bne	.L307
 762:System/storage/Storage.c ****             (size == valid_data_size))
 3701              		.loc 1 762 41 discriminator 1 view .LVU1173
 3702 018e 5645     		cmp	r6, r10
 3703 0190 07D0     		beq	.L314
 3704 0192 1C46     		mov	r4, r3
 3705              	.LVL454:
 762:System/storage/Storage.c ****             (size == valid_data_size))
 3706              		.loc 1 762 41 discriminator 1 view .LVU1174
 3707 0194 96E7     		b	.L282
 3708              	.LVL455:
 3709              	.L313:
 739:System/storage/Storage.c ****         
 3710              		.loc 1 739 13 is_stmt 1 view .LVU1175
 3711 0196 4A46     		mov	r2, r9
 3712 0198 0021     		movs	r1, #0
 3713 019a 4046     		mov	r0, r8
 3714 019c FFF7FEFF 		bl	memset
 3715              	.LVL456:
 3716 01a0 C8E7     		b	.L280
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 122


 3717              	.LVL457:
 3718              	.L314:
 766:System/storage/Storage.c ****                 return Storage_Write_Error;
 3719              		.loc 1 766 13 view .LVU1176
 766:System/storage/Storage.c ****                 return Storage_Write_Error;
 3720              		.loc 1 766 18 is_stmt 0 view .LVU1177
 3721 01a2 4032     		adds	r2, r2, #64
 3722 01a4 1C49     		ldr	r1, .L316+8
 3723 01a6 2046     		mov	r0, r4
 3724              	.LVL458:
 766:System/storage/Storage.c ****                 return Storage_Write_Error;
 3725              		.loc 1 766 18 view .LVU1178
 3726 01a8 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 3727              	.LVL459:
 766:System/storage/Storage.c ****                 return Storage_Write_Error;
 3728              		.loc 1 766 16 view .LVU1179
 3729 01ac 08B1     		cbz	r0, .L315
 770:System/storage/Storage.c ****         }
 3730              		.loc 1 770 20 view .LVU1180
 3731 01ae 0020     		movs	r0, #0
 3732 01b0 02E0     		b	.L277
 3733              	.L315:
 767:System/storage/Storage.c **** 
 3734              		.loc 1 767 24 view .LVU1181
 3735 01b2 0A20     		movs	r0, #10
 3736 01b4 00E0     		b	.L277
 3737              	.LVL460:
 3738              	.L283:
 655:System/storage/Storage.c **** 
 3739              		.loc 1 655 16 view .LVU1182
 3740 01b6 0120     		movs	r0, #1
 3741              	.LVL461:
 3742              	.L277:
 777:System/storage/Storage.c **** 
 3743              		.loc 1 777 1 view .LVU1183
 3744 01b8 03B0     		add	sp, sp, #12
 3745              	.LCFI40:
 3746              		.cfi_remember_state
 3747              		.cfi_def_cfa_offset 36
 3748              		@ sp needed
 3749 01ba BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3750              	.LVL462:
 3751              	.L284:
 3752              	.LCFI41:
 3753              		.cfi_restore_state
 655:System/storage/Storage.c **** 
 3754              		.loc 1 655 16 view .LVU1184
 3755 01be 0120     		movs	r0, #1
 3756              	.LVL463:
 655:System/storage/Storage.c **** 
 3757              		.loc 1 655 16 view .LVU1185
 3758 01c0 FAE7     		b	.L277
 3759              	.LVL464:
 3760              	.L285:
 655:System/storage/Storage.c **** 
 3761              		.loc 1 655 16 view .LVU1186
 3762 01c2 0120     		movs	r0, #1
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 123


 3763              	.LVL465:
 655:System/storage/Storage.c **** 
 3764              		.loc 1 655 16 view .LVU1187
 3765 01c4 F8E7     		b	.L277
 3766              	.LVL466:
 3767              	.L286:
 655:System/storage/Storage.c **** 
 3768              		.loc 1 655 16 view .LVU1188
 3769 01c6 0120     		movs	r0, #1
 3770              	.LVL467:
 655:System/storage/Storage.c **** 
 3771              		.loc 1 655 16 view .LVU1189
 3772 01c8 F6E7     		b	.L277
 3773              	.LVL468:
 3774              	.L287:
 655:System/storage/Storage.c **** 
 3775              		.loc 1 655 16 view .LVU1190
 3776 01ca 0120     		movs	r0, #1
 3777              	.LVL469:
 655:System/storage/Storage.c **** 
 3778              		.loc 1 655 16 view .LVU1191
 3779 01cc F4E7     		b	.L277
 3780              	.LVL470:
 3781              	.L288:
 662:System/storage/Storage.c **** 
 3782              		.loc 1 662 16 view .LVU1192
 3783 01ce 0120     		movs	r0, #1
 3784              	.LVL471:
 662:System/storage/Storage.c **** 
 3785              		.loc 1 662 16 view .LVU1193
 3786 01d0 F2E7     		b	.L277
 3787              	.LVL472:
 3788              	.L289:
 662:System/storage/Storage.c **** 
 3789              		.loc 1 662 16 view .LVU1194
 3790 01d2 0120     		movs	r0, #1
 3791              	.LVL473:
 662:System/storage/Storage.c **** 
 3792              		.loc 1 662 16 view .LVU1195
 3793 01d4 F0E7     		b	.L277
 3794              	.LVL474:
 3795              	.L292:
 675:System/storage/Storage.c ****     
 3796              		.loc 1 675 16 view .LVU1196
 3797 01d6 0920     		movs	r0, #9
 3798 01d8 EEE7     		b	.L277
 3799              	.LVL475:
 3800              	.L293:
 682:System/storage/Storage.c **** 
 3801              		.loc 1 682 16 view .LVU1197
 3802 01da 1320     		movs	r0, #19
 3803 01dc ECE7     		b	.L277
 3804              	.L294:
 3805 01de 1320     		movs	r0, #19
 3806 01e0 EAE7     		b	.L277
 3807              	.L295:
 682:System/storage/Storage.c **** 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 124


 3808              		.loc 1 682 16 view .LVU1198
 3809 01e2 1320     		movs	r0, #19
 3810 01e4 E8E7     		b	.L277
 3811              	.LVL476:
 3812              	.L297:
 698:System/storage/Storage.c **** 
 3813              		.loc 1 698 20 view .LVU1199
 3814 01e6 0920     		movs	r0, #9
 3815 01e8 E6E7     		b	.L277
 3816              	.LVL477:
 3817              	.L298:
 703:System/storage/Storage.c **** 
 3818              		.loc 1 703 20 view .LVU1200
 3819 01ea 1320     		movs	r0, #19
 3820 01ec E4E7     		b	.L277
 3821              	.LVL478:
 3822              	.L299:
 712:System/storage/Storage.c **** 
 3823              		.loc 1 712 20 view .LVU1201
 3824 01ee 1320     		movs	r0, #19
 3825 01f0 E2E7     		b	.L277
 3826              	.L300:
 712:System/storage/Storage.c **** 
 3827              		.loc 1 712 20 view .LVU1202
 3828 01f2 1320     		movs	r0, #19
 3829 01f4 E0E7     		b	.L277
 3830              	.LVL479:
 3831              	.L301:
 717:System/storage/Storage.c **** 
 3832              		.loc 1 717 20 view .LVU1203
 3833 01f6 1320     		movs	r0, #19
 3834 01f8 DEE7     		b	.L277
 3835              	.LVL480:
 3836              	.L302:
 725:System/storage/Storage.c ****         }
 3837              		.loc 1 725 24 view .LVU1204
 3838 01fa 1320     		movs	r0, #19
 3839 01fc DCE7     		b	.L277
 3840              	.L303:
 3841 01fe 1320     		movs	r0, #19
 3842 0200 DAE7     		b	.L277
 3843              	.LVL481:
 3844              	.L304:
 731:System/storage/Storage.c **** 
 3845              		.loc 1 731 20 view .LVU1205
 3846 0202 1320     		movs	r0, #19
 3847 0204 D8E7     		b	.L277
 3848              	.LVL482:
 3849              	.L305:
 751:System/storage/Storage.c ****         }
 3850              		.loc 1 751 24 view .LVU1206
 3851 0206 2020     		movs	r0, #32
 3852              	.LVL483:
 751:System/storage/Storage.c ****         }
 3853              		.loc 1 751 24 view .LVU1207
 3854 0208 D6E7     		b	.L277
 3855              	.LVL484:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 125


 3856              	.L306:
 760:System/storage/Storage.c **** 
 3857              		.loc 1 760 20 view .LVU1208
 3858 020a 1320     		movs	r0, #19
 3859              	.LVL485:
 760:System/storage/Storage.c **** 
 3860              		.loc 1 760 20 view .LVU1209
 3861 020c D4E7     		b	.L277
 3862              	.L317:
 3863 020e 00BF     		.align	2
 3864              	.L316:
 3865 0210 00000000 		.word	.LANCHOR0
 3866 0214 16000000 		.word	.LANCHOR0+22
 3867 0218 00000000 		.word	page_data_tmp
 3868 021c EF1001EF 		.word	-285142801
 3869 0220 FE0110FE 		.word	-32505346
 3870              		.cfi_endproc
 3871              	.LFE154:
 3873              		.section	.text.Storage_Comput_ItemSlot_CRC,"ax",%progbits
 3874              		.align	1
 3875              		.syntax unified
 3876              		.thumb
 3877              		.thumb_func
 3879              	Storage_Comput_ItemSlot_CRC:
 3880              	.LVL486:
 3881              	.LFB164:
1603:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 3882              		.loc 1 1603 1 is_stmt 1 view -0
 3883              		.cfi_startproc
 3884              		@ args = 0, pretend = 0, frame = 0
 3885              		@ frame_needed = 0, uses_anonymous_args = 0
1604:System/storage/Storage.c ****     uint16_t crc_len = sizeof(Storage_Item_TypeDef);
 3886              		.loc 1 1604 5 view .LVU1211
1605:System/storage/Storage.c ****     
 3887              		.loc 1 1605 5 view .LVU1212
1607:System/storage/Storage.c ****     {
 3888              		.loc 1 1607 5 view .LVU1213
1607:System/storage/Storage.c ****     {
 3889              		.loc 1 1607 8 is_stmt 0 view .LVU1214
 3890 0000 08B9     		cbnz	r0, .L325
1618:System/storage/Storage.c **** }
 3891              		.loc 1 1618 12 view .LVU1215
 3892 0002 0020     		movs	r0, #0
 3893              	.LVL487:
1619:System/storage/Storage.c **** 
 3894              		.loc 1 1619 1 view .LVU1216
 3895 0004 7047     		bx	lr
 3896              	.LVL488:
 3897              	.L325:
1603:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 3898              		.loc 1 1603 1 view .LVU1217
 3899 0006 10B5     		push	{r4, lr}
 3900              	.LCFI42:
 3901              		.cfi_def_cfa_offset 8
 3902              		.cfi_offset 4, -8
 3903              		.cfi_offset 14, -4
 3904 0008 0446     		mov	r4, r0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 126


1609:System/storage/Storage.c ****         crc_len -= sizeof(p_item->head_tag);
 3905              		.loc 1 1609 9 is_stmt 1 view .LVU1218
 3906              	.LVL489:
1610:System/storage/Storage.c ****         crc_len -= sizeof(p_item->end_tag);
 3907              		.loc 1 1610 9 view .LVU1219
1611:System/storage/Storage.c ****         crc_len -= sizeof(p_item->crc16);
 3908              		.loc 1 1611 9 view .LVU1220
1612:System/storage/Storage.c ****         p_item->crc16 = Common_CRC16(crc_buf, crc_len);
 3909              		.loc 1 1612 9 view .LVU1221
1613:System/storage/Storage.c **** 
 3910              		.loc 1 1613 9 view .LVU1222
1613:System/storage/Storage.c **** 
 3911              		.loc 1 1613 25 is_stmt 0 view .LVU1223
 3912 000a 3C21     		movs	r1, #60
 3913 000c 0130     		adds	r0, r0, #1
 3914              	.LVL490:
1613:System/storage/Storage.c **** 
 3915              		.loc 1 1613 25 view .LVU1224
 3916 000e FFF7FEFF 		bl	Common_CRC16
 3917              	.LVL491:
1613:System/storage/Storage.c **** 
 3918              		.loc 1 1613 23 view .LVU1225
 3919 0012 A4F83D00 		strh	r0, [r4, #61]	@ unaligned
1615:System/storage/Storage.c ****     }
 3920              		.loc 1 1615 9 is_stmt 1 view .LVU1226
1615:System/storage/Storage.c ****     }
 3921              		.loc 1 1615 16 is_stmt 0 view .LVU1227
 3922 0016 0120     		movs	r0, #1
1619:System/storage/Storage.c **** 
 3923              		.loc 1 1619 1 view .LVU1228
 3924 0018 10BD     		pop	{r4, pc}
1619:System/storage/Storage.c **** 
 3925              		.loc 1 1619 1 view .LVU1229
 3926              		.cfi_endproc
 3927              	.LFE164:
 3929              		.section	.text.Storage_Compare_ItemSlot_CRC,"ax",%progbits
 3930              		.align	1
 3931              		.syntax unified
 3932              		.thumb
 3933              		.thumb_func
 3935              	Storage_Compare_ItemSlot_CRC:
 3936              	.LFB163:
1585:System/storage/Storage.c ****     uint8_t *crc_buf = (uint8_t *)&item;
 3937              		.loc 1 1585 1 is_stmt 1 view -0
 3938              		.cfi_startproc
 3939              		@ args = 64, pretend = 16, frame = 0
 3940              		@ frame_needed = 0, uses_anonymous_args = 0
 3941 0000 84B0     		sub	sp, sp, #16
 3942              	.LCFI43:
 3943              		.cfi_def_cfa_offset 16
 3944 0002 08B5     		push	{r3, lr}
 3945              	.LCFI44:
 3946              		.cfi_def_cfa_offset 24
 3947              		.cfi_offset 3, -24
 3948              		.cfi_offset 14, -20
 3949 0004 0DF1080C 		add	ip, sp, #8
 3950 0008 8CE80F00 		stm	ip, {r0, r1, r2, r3}
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 127


1586:System/storage/Storage.c ****     uint16_t crc_len = sizeof(Storage_Item_TypeDef);
 3951              		.loc 1 1586 5 view .LVU1231
 3952              	.LVL492:
1587:System/storage/Storage.c ****     uint16_t crc = 0;
 3953              		.loc 1 1587 5 view .LVU1232
1588:System/storage/Storage.c ****     
 3954              		.loc 1 1588 5 view .LVU1233
1590:System/storage/Storage.c ****     crc_len -= sizeof(item.head_tag);
 3955              		.loc 1 1590 5 view .LVU1234
1591:System/storage/Storage.c ****     crc_len -= sizeof(item.end_tag);
 3956              		.loc 1 1591 5 view .LVU1235
1592:System/storage/Storage.c ****     crc_len -= sizeof(item.crc16);
 3957              		.loc 1 1592 5 view .LVU1236
1593:System/storage/Storage.c ****     crc = Common_CRC16(crc_buf, crc_len);
 3958              		.loc 1 1593 5 view .LVU1237
1594:System/storage/Storage.c **** 
 3959              		.loc 1 1594 5 view .LVU1238
1594:System/storage/Storage.c **** 
 3960              		.loc 1 1594 11 is_stmt 0 view .LVU1239
 3961 000c 3C21     		movs	r1, #60
 3962 000e 0DF10900 		add	r0, sp, #9
 3963 0012 FFF7FEFF 		bl	Common_CRC16
 3964              	.LVL493:
1594:System/storage/Storage.c **** 
 3965              		.loc 1 1594 9 view .LVU1240
 3966 0016 80B2     		uxth	r0, r0
 3967              	.LVL494:
1596:System/storage/Storage.c ****         return true;
 3968              		.loc 1 1596 5 is_stmt 1 view .LVU1241
1596:System/storage/Storage.c ****         return true;
 3969              		.loc 1 1596 20 is_stmt 0 view .LVU1242
 3970 0018 BDF84530 		ldrh	r3, [sp, #69]	@ unaligned
1596:System/storage/Storage.c ****         return true;
 3971              		.loc 1 1596 8 view .LVU1243
 3972 001c 8342     		cmp	r3, r0
 3973 001e 04D0     		beq	.L328
1599:System/storage/Storage.c **** }
 3974              		.loc 1 1599 12 view .LVU1244
 3975 0020 0020     		movs	r0, #0
 3976              	.LVL495:
 3977              	.L327:
1600:System/storage/Storage.c **** 
 3978              		.loc 1 1600 1 view .LVU1245
 3979 0022 BDE80840 		pop	{r3, lr}
 3980              	.LCFI45:
 3981              		.cfi_remember_state
 3982              		.cfi_restore 14
 3983              		.cfi_restore 3
 3984              		.cfi_def_cfa_offset 16
 3985 0026 04B0     		add	sp, sp, #16
 3986              	.LCFI46:
 3987              		.cfi_def_cfa_offset 0
 3988 0028 7047     		bx	lr
 3989              	.LVL496:
 3990              	.L328:
 3991              	.LCFI47:
 3992              		.cfi_restore_state
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 128


1597:System/storage/Storage.c **** 
 3993              		.loc 1 1597 16 view .LVU1246
 3994 002a 0120     		movs	r0, #1
 3995              	.LVL497:
1597:System/storage/Storage.c **** 
 3996              		.loc 1 1597 16 view .LVU1247
 3997 002c F9E7     		b	.L327
 3998              		.cfi_endproc
 3999              	.LFE163:
 4001              		.section	.text.Storage_Check_Tab,"ax",%progbits
 4002              		.align	1
 4003              		.syntax unified
 4004              		.thumb
 4005              		.thumb_func
 4007              	Storage_Check_Tab:
 4008              	.LVL498:
 4009              	.LFB148:
 291:System/storage/Storage.c ****     uint32_t free_i = 0;
 4010              		.loc 1 291 1 is_stmt 1 view -0
 4011              		.cfi_startproc
 4012              		@ args = 0, pretend = 0, frame = 0
 4013              		@ frame_needed = 0, uses_anonymous_args = 0
 291:System/storage/Storage.c ****     uint32_t free_i = 0;
 4014              		.loc 1 291 1 is_stmt 0 view .LVU1249
 4015 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4016              	.LCFI48:
 4017              		.cfi_def_cfa_offset 40
 4018              		.cfi_offset 3, -40
 4019              		.cfi_offset 4, -36
 4020              		.cfi_offset 5, -32
 4021              		.cfi_offset 6, -28
 4022              		.cfi_offset 7, -24
 4023              		.cfi_offset 8, -20
 4024              		.cfi_offset 9, -16
 4025              		.cfi_offset 10, -12
 4026              		.cfi_offset 11, -8
 4027              		.cfi_offset 14, -4
 292:System/storage/Storage.c ****     uint32_t tab_addr = 0;
 4028              		.loc 1 292 5 is_stmt 1 view .LVU1250
 4029              	.LVL499:
 293:System/storage/Storage.c ****     uint32_t store_param_found = 0;
 4030              		.loc 1 293 5 view .LVU1251
 294:System/storage/Storage.c ****     uint32_t store_param_size = 0;
 4031              		.loc 1 294 5 view .LVU1252
 295:System/storage/Storage.c ****     uint32_t free_slot_addr = 0;
 4032              		.loc 1 295 5 view .LVU1253
 296:System/storage/Storage.c ****     uint32_t sec_start_addr = 0;
 4033              		.loc 1 296 5 view .LVU1254
 297:System/storage/Storage.c ****     uint32_t sec_end_addr = 0;
 4034              		.loc 1 297 5 view .LVU1255
 298:System/storage/Storage.c ****     uint16_t crc16 = 0;
 4035              		.loc 1 298 5 view .LVU1256
 299:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 4036              		.loc 1 299 5 view .LVU1257
 300:System/storage/Storage.c ****     uint16_t crc_len = 0;
 4037              		.loc 1 300 5 view .LVU1258
 301:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef *FreeSlot_Info = NULL;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 129


 4038              		.loc 1 301 5 view .LVU1259
 302:System/storage/Storage.c ****     Storage_Item_TypeDef *p_ItemList = NULL;
 4039              		.loc 1 302 5 view .LVU1260
 303:System/storage/Storage.c **** 
 4040              		.loc 1 303 5 view .LVU1261
 305:System/storage/Storage.c ****     {
 4041              		.loc 1 305 5 view .LVU1262
 305:System/storage/Storage.c ****     {
 4042              		.loc 1 305 8 is_stmt 0 view .LVU1263
 4043 0004 0028     		cmp	r0, #0
 4044 0006 73D0     		beq	.L341
 4045 0008 8046     		mov	r8, r0
 308:System/storage/Storage.c ****         sec_start_addr = sec_info->data_sec_addr;
 4046              		.loc 1 308 9 is_stmt 1 view .LVU1264
 308:System/storage/Storage.c ****         sec_start_addr = sec_info->data_sec_addr;
 4047              		.loc 1 308 24 is_stmt 0 view .LVU1265
 4048 000a 4569     		ldr	r5, [r0, #20]	@ unaligned
 4049              	.LVL500:
 309:System/storage/Storage.c ****         sec_end_addr = sec_start_addr + sec_info->data_sec_size;
 4050              		.loc 1 309 9 is_stmt 1 view .LVU1266
 309:System/storage/Storage.c ****         sec_end_addr = sec_start_addr + sec_info->data_sec_size;
 4051              		.loc 1 309 24 is_stmt 0 view .LVU1267
 4052 000c 4668     		ldr	r6, [r0, #4]	@ unaligned
 4053              	.LVL501:
 310:System/storage/Storage.c **** 
 4054              		.loc 1 310 9 is_stmt 1 view .LVU1268
 310:System/storage/Storage.c **** 
 4055              		.loc 1 310 49 is_stmt 0 view .LVU1269
 4056 000e 8468     		ldr	r4, [r0, #8]	@ unaligned
 310:System/storage/Storage.c **** 
 4057              		.loc 1 310 22 view .LVU1270
 4058 0010 3444     		add	r4, r4, r6
 4059              	.LVL502:
 312:System/storage/Storage.c ****         {
 4060              		.loc 1 312 9 is_stmt 1 view .LVU1271
 4061              	.L334:
 315:System/storage/Storage.c ****                 (free_slot_addr < sec_start_addr) || \
 4062              		.loc 1 315 13 view .LVU1272
 315:System/storage/Storage.c ****                 (free_slot_addr < sec_start_addr) || \
 4063              		.loc 1 315 16 is_stmt 0 view .LVU1273
 4064 0012 15B3     		cbz	r5, .L332
 315:System/storage/Storage.c ****                 (free_slot_addr < sec_start_addr) || \
 4065              		.loc 1 315 39 discriminator 1 view .LVU1274
 4066 0014 B542     		cmp	r5, r6
 4067 0016 20D3     		bcc	.L332
 316:System/storage/Storage.c ****                 (free_slot_addr > sec_end_addr) || \
 4068              		.loc 1 316 51 view .LVU1275
 4069 0018 A542     		cmp	r5, r4
 4070 001a 1ED8     		bhi	.L332
 318:System/storage/Storage.c ****                 return false;
 4071              		.loc 1 318 18 view .LVU1276
 4072 001c 4FF48052 		mov	r2, #4096
 4073 0020 3749     		ldr	r1, .L353
 4074 0022 2846     		mov	r0, r5
 4075 0024 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 4076              	.LVL503:
 317:System/storage/Storage.c ****                 !Storage_ExtFlash_ParaSec_Read(free_slot_addr, page_data_tmp, Storage_TabSize))
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 130


 4077              		.loc 1 317 49 view .LVU1277
 4078 0028 0746     		mov	r7, r0
 4079 002a B0B1     		cbz	r0, .L332
 321:System/storage/Storage.c **** 
 4080              		.loc 1 321 13 is_stmt 1 view .LVU1278
 4081              	.LVL504:
 323:System/storage/Storage.c ****                 (FreeSlot_Info->end_tag != STORAGE_SLOT_END_TAG))
 4082              		.loc 1 323 13 view .LVU1279
 323:System/storage/Storage.c ****                 (FreeSlot_Info->end_tag != STORAGE_SLOT_END_TAG))
 4083              		.loc 1 323 31 is_stmt 0 view .LVU1280
 4084 002c 344B     		ldr	r3, .L353
 4085 002e 1A68     		ldr	r2, [r3]
 323:System/storage/Storage.c ****                 (FreeSlot_Info->end_tag != STORAGE_SLOT_END_TAG))
 4086              		.loc 1 323 16 view .LVU1281
 4087 0030 344B     		ldr	r3, .L353+4
 4088 0032 9A42     		cmp	r2, r3
 4089 0034 5ED1     		bne	.L342
 324:System/storage/Storage.c ****                 return false;
 4090              		.loc 1 324 31 discriminator 1 view .LVU1282
 4091 0036 324B     		ldr	r3, .L353
 4092 0038 DA68     		ldr	r2, [r3, #12]
 323:System/storage/Storage.c ****                 (FreeSlot_Info->end_tag != STORAGE_SLOT_END_TAG))
 4093              		.loc 1 323 68 discriminator 1 view .LVU1283
 4094 003a 334B     		ldr	r3, .L353+8
 4095 003c 9A42     		cmp	r2, r3
 4096 003e 5BD1     		bne	.L343
 327:System/storage/Storage.c ****             if (FreeSlot_Info->nxt_addr == 0)
 4097              		.loc 1 327 13 is_stmt 1 view .LVU1284
 328:System/storage/Storage.c ****                 break;
 4098              		.loc 1 328 13 view .LVU1285
 328:System/storage/Storage.c ****                 break;
 4099              		.loc 1 328 30 is_stmt 0 view .LVU1286
 4100 0040 2F4B     		ldr	r3, .L353
 4101 0042 9D68     		ldr	r5, [r3, #8]
 4102              	.LVL505:
 328:System/storage/Storage.c ****                 break;
 4103              		.loc 1 328 16 view .LVU1287
 4104 0044 002D     		cmp	r5, #0
 4105 0046 E4D1     		bne	.L334
 334:System/storage/Storage.c ****         {
 4106              		.loc 1 334 9 is_stmt 1 view .LVU1288
 334:System/storage/Storage.c ****         {
 4107              		.loc 1 334 21 is_stmt 0 view .LVU1289
 4108 0048 D8F82030 		ldr	r3, [r8, #32]	@ unaligned
 334:System/storage/Storage.c ****         {
 4109              		.loc 1 334 12 view .LVU1290
 4110 004c 33B1     		cbz	r3, .L331
 336:System/storage/Storage.c **** 
 4111              		.loc 1 336 13 is_stmt 1 view .LVU1291
 336:System/storage/Storage.c **** 
 4112              		.loc 1 336 22 is_stmt 0 view .LVU1292
 4113 004e D8F800B0 		ldr	fp, [r8]	@ unaligned
 4114              	.LVL506:
 338:System/storage/Storage.c ****             {
 4115              		.loc 1 338 13 is_stmt 1 view .LVU1293
 4116              	.LBB22:
 338:System/storage/Storage.c ****             {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 131


 4117              		.loc 1 338 18 view .LVU1294
 338:System/storage/Storage.c ****             {
 4118              		.loc 1 338 18 is_stmt 0 view .LVU1295
 4119              	.LBE22:
 295:System/storage/Storage.c ****     uint32_t free_slot_addr = 0;
 4120              		.loc 1 295 14 view .LVU1296
 4121 0052 A946     		mov	r9, r5
 4122              	.LBB25:
 338:System/storage/Storage.c ****             {
 4123              		.loc 1 338 27 view .LVU1297
 4124 0054 4FF0000A 		mov	r10, #0
 338:System/storage/Storage.c ****             {
 4125              		.loc 1 338 13 view .LVU1298
 4126 0058 30E0     		b	.L336
 4127              	.LVL507:
 4128              	.L332:
 338:System/storage/Storage.c ****             {
 4129              		.loc 1 338 13 view .LVU1299
 4130              	.LBE25:
 319:System/storage/Storage.c **** 
 4131              		.loc 1 319 17 is_stmt 1 view .LVU1300
 319:System/storage/Storage.c **** 
 4132              		.loc 1 319 24 is_stmt 0 view .LVU1301
 4133 005a 0027     		movs	r7, #0
 4134              	.LVL508:
 4135              	.L331:
 391:System/storage/Storage.c **** 
 4136              		.loc 1 391 1 view .LVU1302
 4137 005c 3846     		mov	r0, r7
 4138 005e BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4139              	.LVL509:
 4140              	.L352:
 4141              	.LBB26:
 341:System/storage/Storage.c ****             
 4142              		.loc 1 341 28 view .LVU1303
 4143 0062 0746     		mov	r7, r0
 4144 0064 FAE7     		b	.L331
 4145              	.LVL510:
 4146              	.L350:
 4147              	.LBB23:
 375:System/storage/Storage.c ****                     }
 4148              		.loc 1 375 25 is_stmt 1 view .LVU1304
 375:System/storage/Storage.c ****                     }
 4149              		.loc 1 375 43 is_stmt 0 view .LVU1305
 4150 0066 0135     		adds	r5, r5, #1
 4151              	.LVL511:
 4152              	.L338:
 344:System/storage/Storage.c ****                 {
 4153              		.loc 1 344 74 is_stmt 1 discriminator 2 view .LVU1306
 344:System/storage/Storage.c ****                 {
 4154              		.loc 1 344 81 is_stmt 0 discriminator 2 view .LVU1307
 4155 0068 0134     		adds	r4, r4, #1
 4156              	.LVL512:
 344:System/storage/Storage.c ****                 {
 4157              		.loc 1 344 81 discriminator 2 view .LVU1308
 4158 006a A4B2     		uxth	r4, r4
 4159              	.LVL513:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 132


 4160              	.L337:
 344:System/storage/Storage.c ****                 {
 4161              		.loc 1 344 42 is_stmt 1 discriminator 1 view .LVU1309
 344:System/storage/Storage.c ****                 {
 4162              		.loc 1 344 17 is_stmt 0 discriminator 1 view .LVU1310
 4163 006c 3F2C     		cmp	r4, #63
 4164 006e 1AD8     		bhi	.L349
 346:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 4165              		.loc 1 346 21 is_stmt 1 view .LVU1311
 346:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 4166              		.loc 1 346 36 is_stmt 0 view .LVU1312
 4167 0070 A001     		lsls	r0, r4, #6
 4168 0072 234B     		ldr	r3, .L353
 4169 0074 03EB8416 		add	r6, r3, r4, lsl #6
 346:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 4170              		.loc 1 346 44 view .LVU1313
 4171 0078 C35C     		ldrb	r3, [r0, r3]	@ zero_extendqisi2
 346:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 4172              		.loc 1 346 24 view .LVU1314
 4173 007a AA2B     		cmp	r3, #170
 4174 007c F4D1     		bne	.L338
 347:System/storage/Storage.c ****                     {
 4175              		.loc 1 347 44 discriminator 1 view .LVU1315
 4176 007e 96F83F30 		ldrb	r3, [r6, #63]	@ zero_extendqisi2
 346:System/storage/Storage.c ****                         (p_ItemList[item_i].end_tag == STORAGE_ITEM_END_TAG))
 4177              		.loc 1 346 80 discriminator 1 view .LVU1316
 4178 0082 BB2B     		cmp	r3, #187
 4179 0084 F0D1     		bne	.L338
 364:System/storage/Storage.c ****                         crc_len = sizeof(Storage_Item_TypeDef);
 4180              		.loc 1 364 25 is_stmt 1 view .LVU1317
 364:System/storage/Storage.c ****                         crc_len = sizeof(Storage_Item_TypeDef);
 4181              		.loc 1 364 33 is_stmt 0 view .LVU1318
 4182 0086 0130     		adds	r0, r0, #1
 4183              	.LVL514:
 365:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].head_tag);
 4184              		.loc 1 365 25 is_stmt 1 view .LVU1319
 366:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].end_tag);
 4185              		.loc 1 366 25 view .LVU1320
 367:System/storage/Storage.c ****                         crc_len -= sizeof(p_ItemList[item_i].crc16);
 4186              		.loc 1 367 25 view .LVU1321
 368:System/storage/Storage.c ****                         store_param_size += p_ItemList[item_i].len;
 4187              		.loc 1 368 25 view .LVU1322
 369:System/storage/Storage.c ****                         
 4188              		.loc 1 369 25 view .LVU1323
 369:System/storage/Storage.c ****                         
 4189              		.loc 1 369 63 is_stmt 0 view .LVU1324
 4190 0088 B6F82F30 		ldrh	r3, [r6, #47]	@ unaligned
 369:System/storage/Storage.c ****                         
 4191              		.loc 1 369 42 view .LVU1325
 4192 008c 9944     		add	r9, r9, r3
 4193              	.LVL515:
 371:System/storage/Storage.c ****                         if (crc16 != p_ItemList[item_i].crc16)
 4194              		.loc 1 371 25 is_stmt 1 view .LVU1326
 371:System/storage/Storage.c ****                         if (crc16 != p_ItemList[item_i].crc16)
 4195              		.loc 1 371 33 is_stmt 0 view .LVU1327
 4196 008e 3C21     		movs	r1, #60
 4197 0090 1B4B     		ldr	r3, .L353
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 133


 4198 0092 1844     		add	r0, r0, r3
 4199              	.LVL516:
 371:System/storage/Storage.c ****                         if (crc16 != p_ItemList[item_i].crc16)
 4200              		.loc 1 371 33 view .LVU1328
 4201 0094 FFF7FEFF 		bl	Common_CRC16
 4202              	.LVL517:
 371:System/storage/Storage.c ****                         if (crc16 != p_ItemList[item_i].crc16)
 4203              		.loc 1 371 31 view .LVU1329
 4204 0098 80B2     		uxth	r0, r0
 4205              	.LVL518:
 372:System/storage/Storage.c ****                             return false;
 4206              		.loc 1 372 25 is_stmt 1 view .LVU1330
 372:System/storage/Storage.c ****                             return false;
 4207              		.loc 1 372 56 is_stmt 0 view .LVU1331
 4208 009a B6F83D30 		ldrh	r3, [r6, #61]	@ unaligned
 372:System/storage/Storage.c ****                             return false;
 4209              		.loc 1 372 28 view .LVU1332
 4210 009e 8342     		cmp	r3, r0
 4211 00a0 E1D0     		beq	.L350
 373:System/storage/Storage.c **** 
 4212              		.loc 1 373 36 view .LVU1333
 4213 00a2 0027     		movs	r7, #0
 4214 00a4 DAE7     		b	.L331
 4215              	.LVL519:
 4216              	.L349:
 373:System/storage/Storage.c **** 
 4217              		.loc 1 373 36 view .LVU1334
 4218              	.LBE23:
 379:System/storage/Storage.c ****             }
 4219              		.loc 1 379 17 is_stmt 1 discriminator 2 view .LVU1335
 379:System/storage/Storage.c ****             }
 4220              		.loc 1 379 38 is_stmt 0 discriminator 2 view .LVU1336
 4221 00a6 D8F81030 		ldr	r3, [r8, #16]	@ unaligned
 379:System/storage/Storage.c ****             }
 4222              		.loc 1 379 59 discriminator 2 view .LVU1337
 4223 00aa D8F80C20 		ldr	r2, [r8, #12]	@ unaligned
 379:System/storage/Storage.c ****             }
 4224              		.loc 1 379 49 discriminator 2 view .LVU1338
 4225 00ae B3FBF2F3 		udiv	r3, r3, r2
 379:System/storage/Storage.c ****             }
 4226              		.loc 1 379 26 discriminator 2 view .LVU1339
 4227 00b2 9B44     		add	fp, fp, r3
 4228              	.LVL520:
 338:System/storage/Storage.c ****             {
 4229              		.loc 1 338 66 is_stmt 1 discriminator 2 view .LVU1340
 338:System/storage/Storage.c ****             {
 4230              		.loc 1 338 72 is_stmt 0 discriminator 2 view .LVU1341
 4231 00b4 0AF1010A 		add	r10, r10, #1
 4232              	.LVL521:
 338:System/storage/Storage.c ****             {
 4233              		.loc 1 338 72 discriminator 2 view .LVU1342
 4234 00b8 1FFA8AFA 		uxth	r10, r10
 4235              	.LVL522:
 4236              	.L336:
 338:System/storage/Storage.c ****             {
 4237              		.loc 1 338 38 is_stmt 1 discriminator 1 view .LVU1343
 338:System/storage/Storage.c ****             {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 134


 4238              		.loc 1 338 54 is_stmt 0 discriminator 1 view .LVU1344
 4239 00bc D8F80C30 		ldr	r3, [r8, #12]	@ unaligned
 338:System/storage/Storage.c ****             {
 4240              		.loc 1 338 13 discriminator 1 view .LVU1345
 4241 00c0 9A45     		cmp	r10, r3
 4242 00c2 0BD2     		bcs	.L351
 340:System/storage/Storage.c ****                     return false;
 4243              		.loc 1 340 17 is_stmt 1 view .LVU1346
 340:System/storage/Storage.c ****                     return false;
 4244              		.loc 1 340 85 is_stmt 0 view .LVU1347
 4245 00c4 D8F81020 		ldr	r2, [r8, #16]	@ unaligned
 340:System/storage/Storage.c ****                     return false;
 4246              		.loc 1 340 22 view .LVU1348
 4247 00c8 B2FBF3F2 		udiv	r2, r2, r3
 4248 00cc 0C49     		ldr	r1, .L353
 4249 00ce 5846     		mov	r0, fp
 4250 00d0 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 4251              	.LVL523:
 340:System/storage/Storage.c ****                     return false;
 4252              		.loc 1 340 20 view .LVU1349
 4253 00d4 0028     		cmp	r0, #0
 4254 00d6 C4D0     		beq	.L352
 4255              	.LBB24:
 344:System/storage/Storage.c ****                 {
 4256              		.loc 1 344 30 view .LVU1350
 4257 00d8 0024     		movs	r4, #0
 4258 00da C7E7     		b	.L337
 4259              	.L351:
 4260              	.LBE24:
 4261              	.LBE26:
 382:System/storage/Storage.c ****                 (store_param_size != sec_info->para_size))
 4262              		.loc 1 382 13 is_stmt 1 view .LVU1351
 382:System/storage/Storage.c ****                 (store_param_size != sec_info->para_size))
 4263              		.loc 1 382 47 is_stmt 0 view .LVU1352
 4264 00dc D8F82030 		ldr	r3, [r8, #32]	@ unaligned
 382:System/storage/Storage.c ****                 (store_param_size != sec_info->para_size))
 4265              		.loc 1 382 16 view .LVU1353
 4266 00e0 AB42     		cmp	r3, r5
 4267 00e2 0BD1     		bne	.L346
 383:System/storage/Storage.c ****                 return false;
 4268              		.loc 1 383 46 discriminator 1 view .LVU1354
 4269 00e4 D8F81C30 		ldr	r3, [r8, #28]	@ unaligned
 382:System/storage/Storage.c ****                 (store_param_size != sec_info->para_size))
 4270              		.loc 1 382 59 discriminator 1 view .LVU1355
 4271 00e8 4B45     		cmp	r3, r9
 4272 00ea B7D0     		beq	.L331
 384:System/storage/Storage.c ****         }
 4273              		.loc 1 384 24 view .LVU1356
 4274 00ec 0027     		movs	r7, #0
 4275 00ee B5E7     		b	.L331
 4276              	.LVL524:
 4277              	.L341:
 390:System/storage/Storage.c **** }
 4278              		.loc 1 390 12 view .LVU1357
 4279 00f0 0027     		movs	r7, #0
 4280 00f2 B3E7     		b	.L331
 4281              	.LVL525:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 135


 4282              	.L342:
 325:System/storage/Storage.c **** 
 4283              		.loc 1 325 24 view .LVU1358
 4284 00f4 0027     		movs	r7, #0
 4285 00f6 B1E7     		b	.L331
 4286              	.L343:
 4287 00f8 0027     		movs	r7, #0
 4288 00fa AFE7     		b	.L331
 4289              	.LVL526:
 4290              	.L346:
 384:System/storage/Storage.c ****         }
 4291              		.loc 1 384 24 view .LVU1359
 4292 00fc 0027     		movs	r7, #0
 4293 00fe ADE7     		b	.L331
 4294              	.L354:
 4295              		.align	2
 4296              	.L353:
 4297 0100 00000000 		.word	page_data_tmp
 4298 0104 EF1001EF 		.word	-285142801
 4299 0108 FE0110FE 		.word	-32505346
 4300              		.cfi_endproc
 4301              	.LFE148:
 4303              		.section	.text.Storage_Establish_Tab,"ax",%progbits
 4304              		.align	1
 4305              		.syntax unified
 4306              		.thumb
 4307              		.thumb_func
 4309              	Storage_Establish_Tab:
 4310              	.LVL527:
 4311              	.LFB161:
1389:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
 4312              		.loc 1 1389 1 is_stmt 1 view -0
 4313              		.cfi_startproc
 4314              		@ args = 0, pretend = 0, frame = 16
 4315              		@ frame_needed = 0, uses_anonymous_args = 0
1389:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
 4316              		.loc 1 1389 1 is_stmt 0 view .LVU1361
 4317 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4318              	.LCFI49:
 4319              		.cfi_def_cfa_offset 28
 4320              		.cfi_offset 4, -28
 4321              		.cfi_offset 5, -24
 4322              		.cfi_offset 6, -20
 4323              		.cfi_offset 7, -16
 4324              		.cfi_offset 8, -12
 4325              		.cfi_offset 9, -8
 4326              		.cfi_offset 14, -4
 4327 0004 85B0     		sub	sp, sp, #20
 4328              	.LCFI50:
 4329              		.cfi_def_cfa_offset 48
 4330 0006 0146     		mov	r1, r0
1390:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_SecInfo = NULL;
 4331              		.loc 1 1390 5 is_stmt 1 view .LVU1362
 4332              	.LVL528:
1391:System/storage/Storage.c ****     uint16_t clear_cnt = 0;
 4333              		.loc 1 1391 5 view .LVU1363
1392:System/storage/Storage.c ****     uint32_t clear_byte = 0;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 136


 4334              		.loc 1 1392 5 view .LVU1364
1393:System/storage/Storage.c ****     uint32_t clear_remain = 0;
 4335              		.loc 1 1393 5 view .LVU1365
1394:System/storage/Storage.c ****     uint32_t addr_tmp = 0;
 4336              		.loc 1 1394 5 view .LVU1366
1395:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef free_slot;
 4337              		.loc 1 1395 5 view .LVU1367
1396:System/storage/Storage.c ****     uint16_t crc = 0;
 4338              		.loc 1 1396 5 view .LVU1368
1397:System/storage/Storage.c **** 
 4339              		.loc 1 1397 5 view .LVU1369
1399:System/storage/Storage.c ****     p_SecInfo = Storage_Get_SecInfo(p_Flash, class);
 4340              		.loc 1 1399 5 view .LVU1370
1400:System/storage/Storage.c ****     if (p_SecInfo == NULL)
 4341              		.loc 1 1400 5 view .LVU1371
1400:System/storage/Storage.c ****     if (p_SecInfo == NULL)
 4342              		.loc 1 1400 17 is_stmt 0 view .LVU1372
 4343 0008 4548     		ldr	r0, .L369
 4344              	.LVL529:
1400:System/storage/Storage.c ****     if (p_SecInfo == NULL)
 4345              		.loc 1 1400 17 view .LVU1373
 4346 000a FFF7FEFF 		bl	Storage_Get_SecInfo
 4347              	.LVL530:
1401:System/storage/Storage.c ****         return false;
 4348              		.loc 1 1401 5 is_stmt 1 view .LVU1374
1401:System/storage/Storage.c ****         return false;
 4349              		.loc 1 1401 8 is_stmt 0 view .LVU1375
 4350 000e 0028     		cmp	r0, #0
 4351 0010 00F08380 		beq	.L361
 4352 0014 0546     		mov	r5, r0
1404:System/storage/Storage.c ****     {
 4353              		.loc 1 1404 5 is_stmt 1 view .LVU1376
1404:System/storage/Storage.c ****     {
 4354              		.loc 1 1404 18 is_stmt 0 view .LVU1377
 4355 0016 0068     		ldr	r0, [r0]	@ unaligned
 4356              	.LVL531:
1404:System/storage/Storage.c ****     {
 4357              		.loc 1 1404 8 view .LVU1378
 4358 0018 18B9     		cbnz	r0, .L366
1469:System/storage/Storage.c **** }
 4359              		.loc 1 1469 12 view .LVU1379
 4360 001a 0020     		movs	r0, #0
 4361              	.LVL532:
 4362              	.L356:
1470:System/storage/Storage.c **** 
 4363              		.loc 1 1470 1 view .LVU1380
 4364 001c 05B0     		add	sp, sp, #20
 4365              	.LCFI51:
 4366              		.cfi_remember_state
 4367              		.cfi_def_cfa_offset 28
 4368              		@ sp needed
 4369 001e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4370              	.LVL533:
 4371              	.L366:
 4372              	.LCFI52:
 4373              		.cfi_restore_state
1404:System/storage/Storage.c ****     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 137


 4374              		.loc 1 1404 32 discriminator 1 view .LVU1381
 4375 0022 E968     		ldr	r1, [r5, #12]	@ unaligned
 4376 0024 FFF7FEFF 		bl	Storage_Clear_Tab
 4377              	.LVL534:
1404:System/storage/Storage.c ****     {
 4378              		.loc 1 1404 29 discriminator 1 view .LVU1382
 4379 0028 0028     		cmp	r0, #0
 4380 002a F7D0     		beq	.L356
1407:System/storage/Storage.c ****             return false;
 4381              		.loc 1 1407 9 is_stmt 1 view .LVU1383
1407:System/storage/Storage.c ****             return false;
 4382              		.loc 1 1407 22 is_stmt 0 view .LVU1384
 4383 002c 6B68     		ldr	r3, [r5, #4]	@ unaligned
1407:System/storage/Storage.c ****             return false;
 4384              		.loc 1 1407 12 view .LVU1385
 4385 002e 0BB9     		cbnz	r3, .L367
1408:System/storage/Storage.c **** 
 4386              		.loc 1 1408 20 view .LVU1386
 4387 0030 0020     		movs	r0, #0
 4388 0032 F3E7     		b	.L356
 4389              	.L367:
1411:System/storage/Storage.c ****         clear_cnt = p_SecInfo->data_sec_size / Storage_TabSize;
 4390              		.loc 1 1411 9 is_stmt 1 view .LVU1387
 4391 0034 4FF48052 		mov	r2, #4096
 4392 0038 0021     		movs	r1, #0
 4393 003a 3A48     		ldr	r0, .L369+4
 4394 003c FFF7FEFF 		bl	memset
 4395              	.LVL535:
1412:System/storage/Storage.c ****         clear_remain = p_SecInfo->data_sec_size;
 4396              		.loc 1 1412 9 view .LVU1388
1412:System/storage/Storage.c ****         clear_remain = p_SecInfo->data_sec_size;
 4397              		.loc 1 1412 30 is_stmt 0 view .LVU1389
 4398 0040 AE68     		ldr	r6, [r5, #8]	@ unaligned
1412:System/storage/Storage.c ****         clear_remain = p_SecInfo->data_sec_size;
 4399              		.loc 1 1412 19 view .LVU1390
 4400 0042 C6F30F39 		ubfx	r9, r6, #12, #16
 4401              	.LVL536:
1413:System/storage/Storage.c ****         addr_tmp = p_SecInfo->data_sec_addr;
 4402              		.loc 1 1413 9 is_stmt 1 view .LVU1391
1414:System/storage/Storage.c ****         clear_byte = Storage_TabSize;
 4403              		.loc 1 1414 9 view .LVU1392
1414:System/storage/Storage.c ****         clear_byte = Storage_TabSize;
 4404              		.loc 1 1414 18 is_stmt 0 view .LVU1393
 4405 0046 D5F80480 		ldr	r8, [r5, #4]	@ unaligned
 4406              	.LVL537:
1415:System/storage/Storage.c ****         if (p_SecInfo->data_sec_size % Storage_TabSize)
 4407              		.loc 1 1415 9 is_stmt 1 view .LVU1394
1416:System/storage/Storage.c ****             clear_cnt ++;
 4408              		.loc 1 1416 9 view .LVU1395
1416:System/storage/Storage.c ****             clear_cnt ++;
 4409              		.loc 1 1416 38 is_stmt 0 view .LVU1396
 4410 004a C6F30B03 		ubfx	r3, r6, #0, #12
1416:System/storage/Storage.c ****             clear_cnt ++;
 4411              		.loc 1 1416 12 view .LVU1397
 4412 004e 1BB1     		cbz	r3, .L357
1417:System/storage/Storage.c ****  
 4413              		.loc 1 1417 13 is_stmt 1 view .LVU1398
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 138


1417:System/storage/Storage.c ****  
 4414              		.loc 1 1417 23 is_stmt 0 view .LVU1399
 4415 0050 09F10109 		add	r9, r9, #1
 4416              	.LVL538:
1417:System/storage/Storage.c ****  
 4417              		.loc 1 1417 23 view .LVU1400
 4418 0054 1FFA89F9 		uxth	r9, r9
 4419              	.LVL539:
 4420              	.L357:
1419:System/storage/Storage.c ****         {
 4421              		.loc 1 1419 9 is_stmt 1 view .LVU1401
 4422              	.LBB27:
1419:System/storage/Storage.c ****         {
 4423              		.loc 1 1419 13 view .LVU1402
1419:System/storage/Storage.c ****         {
 4424              		.loc 1 1419 22 is_stmt 0 view .LVU1403
 4425 0058 0024     		movs	r4, #0
 4426              	.LBE27:
1415:System/storage/Storage.c ****         if (p_SecInfo->data_sec_size % Storage_TabSize)
 4427              		.loc 1 1415 20 view .LVU1404
 4428 005a 4FF48057 		mov	r7, #4096
 4429              	.LBB28:
1419:System/storage/Storage.c ****         {
 4430              		.loc 1 1419 9 view .LVU1405
 4431 005e 01E0     		b	.L358
 4432              	.LVL540:
 4433              	.L359:
1419:System/storage/Storage.c ****         {
 4434              		.loc 1 1419 44 is_stmt 1 discriminator 2 view .LVU1406
1419:System/storage/Storage.c ****         {
 4435              		.loc 1 1419 45 is_stmt 0 discriminator 2 view .LVU1407
 4436 0060 0134     		adds	r4, r4, #1
 4437              	.LVL541:
1419:System/storage/Storage.c ****         {
 4438              		.loc 1 1419 45 discriminator 2 view .LVU1408
 4439 0062 A4B2     		uxth	r4, r4
 4440              	.LVL542:
 4441              	.L358:
1419:System/storage/Storage.c ****         {
 4442              		.loc 1 1419 29 is_stmt 1 discriminator 1 view .LVU1409
1419:System/storage/Storage.c ****         {
 4443              		.loc 1 1419 9 is_stmt 0 discriminator 1 view .LVU1410
 4444 0064 A145     		cmp	r9, r4
 4445 0066 0ED9     		bls	.L368
1421:System/storage/Storage.c ****                 return false;
 4446              		.loc 1 1421 13 is_stmt 1 view .LVU1411
1421:System/storage/Storage.c ****                 return false;
 4447              		.loc 1 1421 18 is_stmt 0 view .LVU1412
 4448 0068 3A46     		mov	r2, r7
 4449 006a 2E49     		ldr	r1, .L369+4
 4450 006c 4046     		mov	r0, r8
 4451 006e FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 4452              	.LVL543:
1421:System/storage/Storage.c ****                 return false;
 4453              		.loc 1 1421 16 view .LVU1413
 4454 0072 0028     		cmp	r0, #0
 4455 0074 D2D0     		beq	.L356
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 139


1424:System/storage/Storage.c ****             clear_remain -= clear_byte;
 4456              		.loc 1 1424 13 is_stmt 1 view .LVU1414
1424:System/storage/Storage.c ****             clear_remain -= clear_byte;
 4457              		.loc 1 1424 22 is_stmt 0 view .LVU1415
 4458 0076 08F58058 		add	r8, r8, #4096
 4459              	.LVL544:
1425:System/storage/Storage.c ****             if (clear_remain && clear_remain <= clear_byte)
 4460              		.loc 1 1425 13 is_stmt 1 view .LVU1416
1426:System/storage/Storage.c ****                 clear_byte = clear_remain;
 4461              		.loc 1 1426 13 view .LVU1417
1426:System/storage/Storage.c ****                 clear_byte = clear_remain;
 4462              		.loc 1 1426 16 is_stmt 0 view .LVU1418
 4463 007a F61B     		subs	r6, r6, r7
 4464              	.LVL545:
1426:System/storage/Storage.c ****                 clear_byte = clear_remain;
 4465              		.loc 1 1426 16 view .LVU1419
 4466 007c F0D0     		beq	.L359
1426:System/storage/Storage.c ****                 clear_byte = clear_remain;
 4467              		.loc 1 1426 30 discriminator 1 view .LVU1420
 4468 007e B742     		cmp	r7, r6
 4469 0080 EED3     		bcc	.L359
1427:System/storage/Storage.c ****         }
 4470              		.loc 1 1427 28 view .LVU1421
 4471 0082 3746     		mov	r7, r6
 4472              	.LVL546:
1427:System/storage/Storage.c ****         }
 4473              		.loc 1 1427 28 view .LVU1422
 4474 0084 ECE7     		b	.L359
 4475              	.LVL547:
 4476              	.L368:
1427:System/storage/Storage.c ****         }
 4477              		.loc 1 1427 28 view .LVU1423
 4478              	.LBE28:
1431:System/storage/Storage.c ****         free_slot.head_tag = STORAGE_SLOT_HEAD_TAG;
 4479              		.loc 1 1431 9 is_stmt 1 view .LVU1424
 4480 0086 6B46     		mov	r3, sp
 4481 0088 0022     		movs	r2, #0
 4482 008a 0092     		str	r2, [sp]
 4483 008c 5A60     		str	r2, [r3, #4]
 4484 008e 9A60     		str	r2, [r3, #8]
 4485 0090 DA60     		str	r2, [r3, #12]
1432:System/storage/Storage.c ****         free_slot.cur_slot_size = p_SecInfo->data_sec_size - sizeof(free_slot);
 4486              		.loc 1 1432 9 view .LVU1425
1432:System/storage/Storage.c ****         free_slot.cur_slot_size = p_SecInfo->data_sec_size - sizeof(free_slot);
 4487              		.loc 1 1432 28 is_stmt 0 view .LVU1426
 4488 0092 254A     		ldr	r2, .L369+8
 4489 0094 0092     		str	r2, [sp]
1433:System/storage/Storage.c ****         free_slot.nxt_addr = 0;
 4490              		.loc 1 1433 9 is_stmt 1 view .LVU1427
1433:System/storage/Storage.c ****         free_slot.nxt_addr = 0;
 4491              		.loc 1 1433 44 is_stmt 0 view .LVU1428
 4492 0096 AA68     		ldr	r2, [r5, #8]	@ unaligned
1433:System/storage/Storage.c ****         free_slot.nxt_addr = 0;
 4493              		.loc 1 1433 60 view .LVU1429
 4494 0098 103A     		subs	r2, r2, #16
1433:System/storage/Storage.c ****         free_slot.nxt_addr = 0;
 4495              		.loc 1 1433 33 view .LVU1430
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 140


 4496 009a 0192     		str	r2, [sp, #4]
1434:System/storage/Storage.c ****         /* if current free slot get enought space for data then set next address (nxt_addr) as 0 */
 4497              		.loc 1 1434 9 is_stmt 1 view .LVU1431
1439:System/storage/Storage.c ****         
 4498              		.loc 1 1439 9 view .LVU1432
1439:System/storage/Storage.c ****         
 4499              		.loc 1 1439 27 is_stmt 0 view .LVU1433
 4500 009c 234A     		ldr	r2, .L369+12
 4501 009e 0392     		str	r2, [sp, #12]
1441:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(p_SecInfo->data_sec_addr, page_data_tmp, Storage_TabSiz
 4502              		.loc 1 1441 9 is_stmt 1 view .LVU1434
 4503 00a0 204C     		ldr	r4, .L369+4
 4504              	.LVL548:
1441:System/storage/Storage.c ****         if (!Storage_ExtFlash_ParaSec_Write(p_SecInfo->data_sec_addr, page_data_tmp, Storage_TabSiz
 4505              		.loc 1 1441 9 is_stmt 0 view .LVU1435
 4506 00a2 0FCB     		ldm	r3, {r0, r1, r2, r3}
 4507 00a4 84E80F00 		stm	r4, {r0, r1, r2, r3}
1442:System/storage/Storage.c ****             return false;
 4508              		.loc 1 1442 9 is_stmt 1 view .LVU1436
1442:System/storage/Storage.c ****             return false;
 4509              		.loc 1 1442 14 is_stmt 0 view .LVU1437
 4510 00a8 4FF48052 		mov	r2, #4096
 4511 00ac 2146     		mov	r1, r4
 4512 00ae 6868     		ldr	r0, [r5, #4]	@ unaligned
 4513 00b0 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 4514              	.LVL549:
1442:System/storage/Storage.c ****             return false;
 4515              		.loc 1 1442 12 view .LVU1438
 4516 00b4 0028     		cmp	r0, #0
 4517 00b6 B1D0     		beq	.L356
1446:System/storage/Storage.c ****         p_SecInfo->free_space_size = p_SecInfo->data_sec_size;
 4518              		.loc 1 1446 9 is_stmt 1 view .LVU1439
1446:System/storage/Storage.c ****         p_SecInfo->free_space_size = p_SecInfo->data_sec_size;
 4519              		.loc 1 1446 46 is_stmt 0 view .LVU1440
 4520 00b8 6B68     		ldr	r3, [r5, #4]	@ unaligned
1446:System/storage/Storage.c ****         p_SecInfo->free_space_size = p_SecInfo->data_sec_size;
 4521              		.loc 1 1446 35 view .LVU1441
 4522 00ba 6B61     		str	r3, [r5, #20]	@ unaligned
1447:System/storage/Storage.c ****         p_SecInfo->para_num = 0;
 4523              		.loc 1 1447 9 is_stmt 1 view .LVU1442
1447:System/storage/Storage.c ****         p_SecInfo->para_num = 0;
 4524              		.loc 1 1447 47 is_stmt 0 view .LVU1443
 4525 00bc AB68     		ldr	r3, [r5, #8]	@ unaligned
1447:System/storage/Storage.c ****         p_SecInfo->para_num = 0;
 4526              		.loc 1 1447 36 view .LVU1444
 4527 00be AB61     		str	r3, [r5, #24]	@ unaligned
1448:System/storage/Storage.c ****         p_SecInfo->para_size = 0;
 4528              		.loc 1 1448 9 is_stmt 1 view .LVU1445
1448:System/storage/Storage.c ****         p_SecInfo->para_size = 0;
 4529              		.loc 1 1448 29 is_stmt 0 view .LVU1446
 4530 00c0 0020     		movs	r0, #0
 4531 00c2 85F82000 		strb	r0, [r5, #32]
 4532 00c6 85F82100 		strb	r0, [r5, #33]
 4533 00ca 85F82200 		strb	r0, [r5, #34]
 4534 00ce 85F82300 		strb	r0, [r5, #35]
1449:System/storage/Storage.c **** 
 4535              		.loc 1 1449 9 is_stmt 1 view .LVU1447
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 141


1449:System/storage/Storage.c **** 
 4536              		.loc 1 1449 30 is_stmt 0 view .LVU1448
 4537 00d2 2877     		strb	r0, [r5, #28]
 4538 00d4 6877     		strb	r0, [r5, #29]
 4539 00d6 A877     		strb	r0, [r5, #30]
 4540 00d8 E877     		strb	r0, [r5, #31]
1452:System/storage/Storage.c ****             return false;
 4541              		.loc 1 1452 9 is_stmt 1 view .LVU1449
1452:System/storage/Storage.c ****             return false;
 4542              		.loc 1 1452 14 is_stmt 0 view .LVU1450
 4543 00da 4FF48052 		mov	r2, #4096
 4544 00de 2146     		mov	r1, r4
 4545 00e0 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 4546              	.LVL550:
1452:System/storage/Storage.c ****             return false;
 4547              		.loc 1 1452 12 view .LVU1451
 4548 00e4 0028     		cmp	r0, #0
 4549 00e6 99D0     		beq	.L356
1455:System/storage/Storage.c ****         memcpy(page_data_tmp, p_Flash, sizeof(Storage_FlashInfo_TypeDef));
 4550              		.loc 1 1455 9 is_stmt 1 view .LVU1452
 4551 00e8 4FF48062 		mov	r2, #1024
 4552 00ec 0021     		movs	r1, #0
 4553 00ee 2046     		mov	r0, r4
 4554 00f0 FFF7FEFF 		bl	memset
 4555              	.LVL551:
1456:System/storage/Storage.c **** 
 4556              		.loc 1 1456 9 view .LVU1453
 4557 00f4 9C22     		movs	r2, #156
 4558 00f6 0A49     		ldr	r1, .L369
 4559 00f8 2046     		mov	r0, r4
 4560 00fa FFF7FEFF 		bl	memcpy
 4561              	.LVL552:
1459:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
 4562              		.loc 1 1459 9 view .LVU1454
1459:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
 4563              		.loc 1 1459 15 is_stmt 0 view .LVU1455
 4564 00fe 40F2FE31 		movw	r1, #1022
 4565 0102 2046     		mov	r0, r4
 4566 0104 FFF7FEFF 		bl	Common_CRC16
 4567              	.LVL553:
1460:System/storage/Storage.c **** 
 4568              		.loc 1 1460 9 is_stmt 1 view .LVU1456
 4569 0108 A4F8FE03 		strh	r0, [r4, #1022]	@ movhi
1463:System/storage/Storage.c ****             return false;
 4570              		.loc 1 1463 9 view .LVU1457
1463:System/storage/Storage.c ****             return false;
 4571              		.loc 1 1463 14 is_stmt 0 view .LVU1458
 4572 010c 4FF48052 		mov	r2, #4096
 4573 0110 2146     		mov	r1, r4
 4574 0112 0020     		movs	r0, #0
 4575              	.LVL554:
1463:System/storage/Storage.c ****             return false;
 4576              		.loc 1 1463 14 view .LVU1459
 4577 0114 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 4578              	.LVL555:
1463:System/storage/Storage.c ****             return false;
 4579              		.loc 1 1463 14 view .LVU1460
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 142


 4580 0118 80E7     		b	.L356
 4581              	.LVL556:
 4582              	.L361:
1402:System/storage/Storage.c **** 
 4583              		.loc 1 1402 16 view .LVU1461
 4584 011a 0020     		movs	r0, #0
 4585              	.LVL557:
1402:System/storage/Storage.c **** 
 4586              		.loc 1 1402 16 view .LVU1462
 4587 011c 7EE7     		b	.L356
 4588              	.L370:
 4589 011e 00BF     		.align	2
 4590              	.L369:
 4591 0120 16000000 		.word	.LANCHOR0+22
 4592 0124 00000000 		.word	page_data_tmp
 4593 0128 EF1001EF 		.word	-285142801
 4594 012c FE0110FE 		.word	-32505346
 4595              		.cfi_endproc
 4596              	.LFE161:
 4598              		.section	.rodata.Storage_CreateItem.str1.4,"aMS",%progbits,1
 4599              		.align	2
 4600              	.LC4:
 4601 0000 4974656D 		.ascii	"Item_Avaliable\000"
 4601      5F417661 
 4601      6C696162 
 4601      6C6500
 4602              		.section	.text.Storage_CreateItem,"ax",%progbits
 4603              		.align	1
 4604              		.syntax unified
 4605              		.thumb
 4606              		.thumb_func
 4608              	Storage_CreateItem:
 4609              	.LVL558:
 4610              	.LFB160:
1140:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 4611              		.loc 1 1140 1 is_stmt 1 view -0
 4612              		.cfi_startproc
 4613              		@ args = 0, pretend = 0, frame = 176
 4614              		@ frame_needed = 0, uses_anonymous_args = 0
1140:System/storage/Storage.c ****     uint8_t *crc_buf = NULL;
 4615              		.loc 1 1140 1 is_stmt 0 view .LVU1464
 4616 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4617              	.LCFI53:
 4618              		.cfi_def_cfa_offset 36
 4619              		.cfi_offset 4, -36
 4620              		.cfi_offset 5, -32
 4621              		.cfi_offset 6, -28
 4622              		.cfi_offset 7, -24
 4623              		.cfi_offset 8, -20
 4624              		.cfi_offset 9, -16
 4625              		.cfi_offset 10, -12
 4626              		.cfi_offset 11, -8
 4627              		.cfi_offset 14, -4
 4628 0004 ADB0     		sub	sp, sp, #180
 4629              	.LCFI54:
 4630              		.cfi_def_cfa_offset 216
 4631 0006 8146     		mov	r9, r0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 143


 4632 0008 0E46     		mov	r6, r1
 4633 000a 1746     		mov	r7, r2
 4634 000c 9846     		mov	r8, r3
1141:System/storage/Storage.c ****     uint8_t *slot_update_ptr = NULL;
 4635              		.loc 1 1141 5 is_stmt 1 view .LVU1465
 4636              	.LVL559:
1142:System/storage/Storage.c ****     uint16_t base_info_crc = 0;
 4637              		.loc 1 1142 5 view .LVU1466
1143:System/storage/Storage.c ****     uint32_t storage_data_size = 0;
 4638              		.loc 1 1143 5 view .LVU1467
1144:System/storage/Storage.c ****     uint32_t stored_size = 0;
 4639              		.loc 1 1144 5 view .LVU1468
1145:System/storage/Storage.c ****     uint32_t store_addr = 0;
 4640              		.loc 1 1145 5 view .LVU1469
1146:System/storage/Storage.c ****     uint32_t unstored_size = 0;
 4641              		.loc 1 1146 5 view .LVU1470
1147:System/storage/Storage.c ****     uint32_t storage_tab_addr = 0;
 4642              		.loc 1 1147 5 view .LVU1471
1148:System/storage/Storage.c ****     uint32_t cur_freeslot_addr = 0;
 4643              		.loc 1 1148 5 view .LVU1472
1149:System/storage/Storage.c ****     uint32_t slot_useful_size = 0;
 4644              		.loc 1 1149 5 view .LVU1473
1150:System/storage/Storage.c ****     uint8_t item_index = 0;
 4645              		.loc 1 1150 5 view .LVU1474
1151:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
 4646              		.loc 1 1151 5 view .LVU1475
1152:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 4647              		.loc 1 1152 5 view .LVU1476
1153:System/storage/Storage.c ****     Storage_Item_TypeDef *tab_item = NULL;
 4648              		.loc 1 1153 5 view .LVU1477
1154:System/storage/Storage.c ****     Storage_Item_TypeDef crt_item_slot;
 4649              		.loc 1 1154 5 view .LVU1478
1155:System/storage/Storage.c ****     Storage_FreeSlot_TypeDef FreeSlot;
 4650              		.loc 1 1155 5 view .LVU1479
1156:System/storage/Storage.c ****     Storage_DataSlot_TypeDef DataSlot;
 4651              		.loc 1 1156 5 view .LVU1480
1157:System/storage/Storage.c ****     uint8_t align_byte = 0;
 4652              		.loc 1 1157 5 view .LVU1481
1158:System/storage/Storage.c **** 
 4653              		.loc 1 1158 5 view .LVU1482
1160:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
 4654              		.loc 1 1160 5 view .LVU1483
 4655 000e 4024     		movs	r4, #64
 4656 0010 2246     		mov	r2, r4
 4657              	.LVL560:
1160:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
 4658              		.loc 1 1160 5 is_stmt 0 view .LVU1484
 4659 0012 0021     		movs	r1, #0
 4660              	.LVL561:
1160:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
 4661              		.loc 1 1160 5 view .LVU1485
 4662 0014 1CA8     		add	r0, sp, #112
 4663              	.LVL562:
1160:System/storage/Storage.c ****     memset(&DataSlot, 0, sizeof(Storage_DataSlot_TypeDef));
 4664              		.loc 1 1160 5 view .LVU1486
 4665 0016 FFF7FEFF 		bl	memset
 4666              	.LVL563:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 144


1161:System/storage/Storage.c ****     memset(&FreeSlot, 0, sizeof(Storage_FreeSlot_TypeDef));
 4667              		.loc 1 1161 5 is_stmt 1 view .LVU1487
 4668 001a 2246     		mov	r2, r4
 4669 001c 0021     		movs	r1, #0
 4670 001e 08A8     		add	r0, sp, #32
 4671 0020 FFF7FEFF 		bl	memset
 4672              	.LVL564:
1162:System/storage/Storage.c **** 
 4673              		.loc 1 1162 5 view .LVU1488
 4674 0024 0023     		movs	r3, #0
 4675 0026 1893     		str	r3, [sp, #96]
 4676 0028 1993     		str	r3, [sp, #100]
 4677 002a 1A93     		str	r3, [sp, #104]
 4678 002c 1B93     		str	r3, [sp, #108]
1164:System/storage/Storage.c ****         return Storage_Param_Error;
 4679              		.loc 1 1164 5 view .LVU1489
1164:System/storage/Storage.c ****         return Storage_Param_Error;
 4680              		.loc 1 1164 8 is_stmt 0 view .LVU1490
 4681 002e 002E     		cmp	r6, #0
 4682 0030 00F0EB81 		beq	.L391
1164:System/storage/Storage.c ****         return Storage_Param_Error;
 4683              		.loc 1 1164 24 discriminator 1 view .LVU1491
 4684 0034 002F     		cmp	r7, #0
 4685 0036 00F0EA81 		beq	.L392
1164:System/storage/Storage.c ****         return Storage_Param_Error;
 4686              		.loc 1 1164 44 discriminator 2 view .LVU1492
 4687 003a B8F1000F 		cmp	r8, #0
 4688 003e 00F0E881 		beq	.L393
1167:System/storage/Storage.c ****     p_Sec = Storage_Get_SecInfo(p_Flash, _class);
 4689              		.loc 1 1167 5 is_stmt 1 view .LVU1493
 4690              	.LVL565:
1168:System/storage/Storage.c ****     if (p_Sec == NULL)
 4691              		.loc 1 1168 5 view .LVU1494
1168:System/storage/Storage.c ****     if (p_Sec == NULL)
 4692              		.loc 1 1168 13 is_stmt 0 view .LVU1495
 4693 0042 4946     		mov	r1, r9
 4694 0044 C648     		ldr	r0, .L419
 4695 0046 FFF7FEFF 		bl	Storage_Get_SecInfo
 4696              	.LVL566:
1169:System/storage/Storage.c ****         return Storage_Class_Error;
 4697              		.loc 1 1169 5 is_stmt 1 view .LVU1496
1169:System/storage/Storage.c ****         return Storage_Class_Error;
 4698              		.loc 1 1169 8 is_stmt 0 view .LVU1497
 4699 004a 8346     		mov	fp, r0
 4700 004c 0028     		cmp	r0, #0
 4701 004e 00F0E481 		beq	.L394
1172:System/storage/Storage.c ****         return Storage_FreeSlot_Addr_Error;
 4702              		.loc 1 1172 5 is_stmt 1 view .LVU1498
1172:System/storage/Storage.c ****         return Storage_FreeSlot_Addr_Error;
 4703              		.loc 1 1172 14 is_stmt 0 view .LVU1499
 4704 0052 4069     		ldr	r0, [r0, #20]	@ unaligned
 4705              	.LVL567:
1172:System/storage/Storage.c ****         return Storage_FreeSlot_Addr_Error;
 4706              		.loc 1 1172 8 view .LVU1500
 4707 0054 0028     		cmp	r0, #0
 4708 0056 00F0E281 		beq	.L395
1175:System/storage/Storage.c ****         (FreeSlot.head_tag == STORAGE_SLOT_HEAD_TAG) && \
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 145


 4709              		.loc 1 1175 5 is_stmt 1 view .LVU1501
1175:System/storage/Storage.c ****         (FreeSlot.head_tag == STORAGE_SLOT_HEAD_TAG) && \
 4710              		.loc 1 1175 9 is_stmt 0 view .LVU1502
 4711 005a 1022     		movs	r2, #16
 4712 005c 18A9     		add	r1, sp, #96
 4713 005e FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 4714              	.LVL568:
1175:System/storage/Storage.c ****         (FreeSlot.head_tag == STORAGE_SLOT_HEAD_TAG) && \
 4715              		.loc 1 1175 8 view .LVU1503
 4716 0062 0028     		cmp	r0, #0
 4717 0064 00F0DD81 		beq	.L396
1175:System/storage/Storage.c ****         (FreeSlot.head_tag == STORAGE_SLOT_HEAD_TAG) && \
 4718              		.loc 1 1175 118 discriminator 1 view .LVU1504
 4719 0068 189A     		ldr	r2, [sp, #96]
 4720 006a BE4B     		ldr	r3, .L419+4
 4721 006c 9A42     		cmp	r2, r3
 4722 006e 01D0     		beq	.L410
1385:System/storage/Storage.c **** }
 4723              		.loc 1 1385 12 view .LVU1505
 4724 0070 0020     		movs	r0, #0
 4725 0072 CFE1     		b	.L372
 4726              	.L410:
1176:System/storage/Storage.c ****         (FreeSlot.end_tag == STORAGE_SLOT_END_TAG) && \
 4727              		.loc 1 1176 54 view .LVU1506
 4728 0074 1B9A     		ldr	r2, [sp, #108]
 4729 0076 BC4B     		ldr	r3, .L419+8
 4730 0078 9A42     		cmp	r2, r3
 4731 007a 01D0     		beq	.L411
1385:System/storage/Storage.c **** }
 4732              		.loc 1 1385 12 view .LVU1507
 4733 007c 0020     		movs	r0, #0
 4734 007e C9E1     		b	.L372
 4735              	.L411:
1178:System/storage/Storage.c ****     {
 4736              		.loc 1 1178 10 view .LVU1508
 4737 0080 3046     		mov	r0, r6
 4738 0082 FFF7FEFF 		bl	strlen
 4739              	.LVL569:
1177:System/storage/Storage.c ****         (strlen(name) <= STORAGE_NAME_LEN))
 4740              		.loc 1 1177 52 view .LVU1509
 4741 0086 2928     		cmp	r0, #41
 4742 0088 00F2CD81 		bhi	.L399
1180:System/storage/Storage.c **** 
 4743              		.loc 1 1180 9 is_stmt 1 view .LVU1510
1180:System/storage/Storage.c **** 
 4744              		.loc 1 1180 27 is_stmt 0 view .LVU1511
 4745 008c DBF81430 		ldr	r3, [fp, #20]	@ unaligned
 4746 0090 0293     		str	r3, [sp, #8]
 4747              	.LVL570:
1182:System/storage/Storage.c ****         {
 4748              		.loc 1 1182 9 is_stmt 1 view .LVU1512
1182:System/storage/Storage.c ****         {
 4749              		.loc 1 1182 12 is_stmt 0 view .LVU1513
 4750 0092 18F0030F 		tst	r8, #3
 4751 0096 1DD0     		beq	.L400
1184:System/storage/Storage.c ****         }
 4752              		.loc 1 1184 13 is_stmt 1 view .LVU1514
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 146


1184:System/storage/Storage.c ****         }
 4753              		.loc 1 1184 52 is_stmt 0 view .LVU1515
 4754 0098 08F00303 		and	r3, r8, #3
 4755              	.LVL571:
1184:System/storage/Storage.c ****         }
 4756              		.loc 1 1184 24 view .LVU1516
 4757 009c C3F10403 		rsb	r3, r3, #4
 4758 00a0 DBB2     		uxtb	r3, r3
 4759 00a2 0093     		str	r3, [sp]
 4760              	.LVL572:
 4761              	.L373:
1189:System/storage/Storage.c ****         p_Sec->para_size += (size + align_byte);
 4762              		.loc 1 1189 9 is_stmt 1 view .LVU1517
1189:System/storage/Storage.c ****         p_Sec->para_size += (size + align_byte);
 4763              		.loc 1 1189 14 is_stmt 0 view .LVU1518
 4764 00a4 DBF82030 		ldr	r3, [fp, #32]	@ unaligned
1189:System/storage/Storage.c ****         p_Sec->para_size += (size + align_byte);
 4765              		.loc 1 1189 25 view .LVU1519
 4766 00a8 0133     		adds	r3, r3, #1
 4767 00aa CBF82030 		str	r3, [fp, #32]	@ unaligned
1190:System/storage/Storage.c ****         
 4768              		.loc 1 1190 9 is_stmt 1 view .LVU1520
1190:System/storage/Storage.c ****         
 4769              		.loc 1 1190 35 is_stmt 0 view .LVU1521
 4770 00ae 009B     		ldr	r3, [sp]
 4771 00b0 08EB0302 		add	r2, r8, r3
1190:System/storage/Storage.c ****         
 4772              		.loc 1 1190 26 view .LVU1522
 4773 00b4 DBF81C30 		ldr	r3, [fp, #28]	@ unaligned
 4774 00b8 1344     		add	r3, r3, r2
 4775 00ba CBF81C30 		str	r3, [fp, #28]	@ unaligned
1192:System/storage/Storage.c ****         for(uint16_t tab_i = 0; tab_i < p_Sec->page_num; tab_i ++)
 4776              		.loc 1 1192 9 is_stmt 1 view .LVU1523
1192:System/storage/Storage.c ****         for(uint16_t tab_i = 0; tab_i < p_Sec->page_num; tab_i ++)
 4777              		.loc 1 1192 26 is_stmt 0 view .LVU1524
 4778 00be DBF80020 		ldr	r2, [fp]	@ unaligned
 4779              	.LVL573:
1193:System/storage/Storage.c ****         {
 4780              		.loc 1 1193 9 is_stmt 1 view .LVU1525
 4781              	.LBB29:
1193:System/storage/Storage.c ****         {
 4782              		.loc 1 1193 13 view .LVU1526
1193:System/storage/Storage.c ****         {
 4783              		.loc 1 1193 22 is_stmt 0 view .LVU1527
 4784 00c2 0023     		movs	r3, #0
 4785              	.LBE29:
1151:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Flash = NULL;
 4786              		.loc 1 1151 13 view .LVU1528
 4787 00c4 0193     		str	r3, [sp, #4]
1146:System/storage/Storage.c ****     uint32_t unstored_size = 0;
 4788              		.loc 1 1146 14 view .LVU1529
 4789 00c6 1D46     		mov	r5, r3
 4790 00c8 9246     		mov	r10, r2
 4791 00ca CDF80C90 		str	r9, [sp, #12]
 4792 00ce 9946     		mov	r9, r3
 4793 00d0 0497     		str	r7, [sp, #16]
 4794              	.LBB32:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 147


1193:System/storage/Storage.c ****         {
 4795              		.loc 1 1193 9 view .LVU1530
 4796 00d2 61E0     		b	.L374
 4797              	.LVL574:
 4798              	.L400:
1193:System/storage/Storage.c ****         {
 4799              		.loc 1 1193 9 view .LVU1531
 4800              	.LBE32:
1187:System/storage/Storage.c **** 
 4801              		.loc 1 1187 24 view .LVU1532
 4802 00d4 0023     		movs	r3, #0
 4803              	.LVL575:
1187:System/storage/Storage.c **** 
 4804              		.loc 1 1187 24 view .LVU1533
 4805 00d6 0093     		str	r3, [sp]
 4806 00d8 E4E7     		b	.L373
 4807              	.LVL576:
 4808              	.L414:
 4809              	.LBB33:
1200:System/storage/Storage.c **** 
 4810              		.loc 1 1200 24 view .LVU1534
 4811 00da 0920     		movs	r0, #9
 4812 00dc 9AE1     		b	.L372
 4813              	.LVL577:
 4814              	.L413:
 4815              	.LBB30:
1206:System/storage/Storage.c ****                      (memcmp(tab_item[item_i].name, STORAGE_FREEITEM_NAME, strlen(STORAGE_FREEITEM_
 4816              		.loc 1 1206 39 discriminator 1 view .LVU1535
 4817 00de 97F83F30 		ldrb	r3, [r7, #63]	@ zero_extendqisi2
1205:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
 4818              		.loc 1 1205 75 discriminator 1 view .LVU1536
 4819 00e2 BB2B     		cmp	r3, #187
 4820 00e4 11D1     		bne	.L376
1207:System/storage/Storage.c ****                     ((tab_item[item_i].head_tag != STORAGE_ITEM_HEAD_TAG) && \
 4821              		.loc 1 1207 23 view .LVU1537
 4822 00e6 0E22     		movs	r2, #14
 4823 00e8 A049     		ldr	r1, .L419+12
 4824 00ea B81C     		adds	r0, r7, #2
 4825 00ec FFF7FEFF 		bl	memcmp
 4826              	.LVL578:
1206:System/storage/Storage.c ****                      (memcmp(tab_item[item_i].name, STORAGE_FREEITEM_NAME, strlen(STORAGE_FREEITEM_
 4827              		.loc 1 1206 73 view .LVU1538
 4828 00f0 58B9     		cbnz	r0, .L376
 4829 00f2 10E0     		b	.L377
 4830              	.L378:
1203:System/storage/Storage.c ****             {
 4831              		.loc 1 1203 71 is_stmt 1 discriminator 2 view .LVU1539
1203:System/storage/Storage.c ****             {
 4832              		.loc 1 1203 78 is_stmt 0 discriminator 2 view .LVU1540
 4833 00f4 0134     		adds	r4, r4, #1
 4834              	.LVL579:
1203:System/storage/Storage.c ****             {
 4835              		.loc 1 1203 78 discriminator 2 view .LVU1541
 4836 00f6 A4B2     		uxth	r4, r4
 4837              	.LVL580:
 4838              	.L375:
1203:System/storage/Storage.c ****             {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 148


 4839              		.loc 1 1203 39 is_stmt 1 discriminator 1 view .LVU1542
1203:System/storage/Storage.c ****             {
 4840              		.loc 1 1203 13 is_stmt 0 discriminator 1 view .LVU1543
 4841 00f8 3F2C     		cmp	r4, #63
 4842 00fa 5DD8     		bhi	.L412
1205:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
 4843              		.loc 1 1205 17 is_stmt 1 view .LVU1544
1205:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
 4844              		.loc 1 1205 31 is_stmt 0 view .LVU1545
 4845 00fc A301     		lsls	r3, r4, #6
 4846 00fe 9C4A     		ldr	r2, .L419+16
 4847 0100 02EB8417 		add	r7, r2, r4, lsl #6
1205:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
 4848              		.loc 1 1205 39 view .LVU1546
 4849 0104 9D5C     		ldrb	r5, [r3, r2]	@ zero_extendqisi2
1205:System/storage/Storage.c ****                      (tab_item[item_i].end_tag == STORAGE_ITEM_END_TAG) && \
 4850              		.loc 1 1205 20 view .LVU1547
 4851 0106 AA2D     		cmp	r5, #170
 4852 0108 E9D0     		beq	.L413
 4853              	.L376:
1207:System/storage/Storage.c ****                     ((tab_item[item_i].head_tag != STORAGE_ITEM_HEAD_TAG) && \
 4854              		.loc 1 1207 114 view .LVU1548
 4855 010a AA2D     		cmp	r5, #170
 4856 010c F2D0     		beq	.L378
1209:System/storage/Storage.c ****                 {
 4857              		.loc 1 1209 39 view .LVU1549
 4858 010e 97F83F30 		ldrb	r3, [r7, #63]	@ zero_extendqisi2
1208:System/storage/Storage.c ****                      (tab_item[item_i].end_tag != STORAGE_ITEM_END_TAG)))
 4859              		.loc 1 1208 75 view .LVU1550
 4860 0112 BB2B     		cmp	r3, #187
 4861 0114 EED0     		beq	.L378
 4862              	.L377:
1211:System/storage/Storage.c **** 
 4863              		.loc 1 1211 21 is_stmt 1 view .LVU1551
1211:System/storage/Storage.c **** 
 4864              		.loc 1 1211 32 is_stmt 0 view .LVU1552
 4865 0116 E3B2     		uxtb	r3, r4
 4866 0118 0193     		str	r3, [sp, #4]
 4867              	.LVL581:
1214:System/storage/Storage.c **** 
 4868              		.loc 1 1214 21 is_stmt 1 view .LVU1553
1214:System/storage/Storage.c **** 
 4869              		.loc 1 1214 35 is_stmt 0 view .LVU1554
 4870 011a 3C46     		mov	r4, r7
 4871              	.LVL582:
1214:System/storage/Storage.c **** 
 4872              		.loc 1 1214 35 view .LVU1555
 4873 011c 1CAD     		add	r5, sp, #112
 4874 011e 4037     		adds	r7, r7, #64
 4875              	.LVL583:
 4876              	.L379:
1214:System/storage/Storage.c **** 
 4877              		.loc 1 1214 35 view .LVU1556
 4878 0120 AC46     		mov	ip, r5
 4879 0122 2068     		ldr	r0, [r4]	@ unaligned
 4880 0124 6168     		ldr	r1, [r4, #4]	@ unaligned
 4881 0126 A268     		ldr	r2, [r4, #8]	@ unaligned
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 149


 4882 0128 E368     		ldr	r3, [r4, #12]	@ unaligned
 4883 012a ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 4884 012e 1034     		adds	r4, r4, #16
 4885 0130 6546     		mov	r5, ip
 4886 0132 BC42     		cmp	r4, r7
 4887 0134 F4D1     		bne	.L379
1217:System/storage/Storage.c ****                     memset(crt_item_slot.name, '\0', STORAGE_NAME_LEN);
 4888              		.loc 1 1217 21 is_stmt 1 view .LVU1557
1217:System/storage/Storage.c ****                     memset(crt_item_slot.name, '\0', STORAGE_NAME_LEN);
 4889              		.loc 1 1217 42 is_stmt 0 view .LVU1558
 4890 0136 039B     		ldr	r3, [sp, #12]
 4891 0138 8DF87130 		strb	r3, [sp, #113]
1218:System/storage/Storage.c ****                     memcpy(crt_item_slot.name, name, strlen(name));
 4892              		.loc 1 1218 21 is_stmt 1 view .LVU1559
 4893 013c 2922     		movs	r2, #41
 4894 013e 0021     		movs	r1, #0
 4895 0140 0DF17200 		add	r0, sp, #114
 4896 0144 FFF7FEFF 		bl	memset
 4897              	.LVL584:
1219:System/storage/Storage.c ****                     crt_item_slot.len = size + align_byte;
 4898              		.loc 1 1219 21 view .LVU1560
 4899 0148 3046     		mov	r0, r6
 4900 014a FFF7FEFF 		bl	strlen
 4901              	.LVL585:
 4902 014e 0246     		mov	r2, r0
 4903 0150 3146     		mov	r1, r6
 4904 0152 0DF17200 		add	r0, sp, #114
 4905 0156 FFF7FEFF 		bl	memcpy
 4906              	.LVL586:
1220:System/storage/Storage.c **** 
 4907              		.loc 1 1220 21 view .LVU1561
1220:System/storage/Storage.c **** 
 4908              		.loc 1 1220 46 is_stmt 0 view .LVU1562
 4909 015a 009B     		ldr	r3, [sp]
 4910 015c 4344     		add	r3, r8, r3
1220:System/storage/Storage.c **** 
 4911              		.loc 1 1220 39 view .LVU1563
 4912 015e ADF89F30 		strh	r3, [sp, #159]	@ unaligned
1223:System/storage/Storage.c ****                     crt_item_slot.head_tag = STORAGE_ITEM_HEAD_TAG;
 4913              		.loc 1 1223 21 is_stmt 1 view .LVU1564
1223:System/storage/Storage.c ****                     crt_item_slot.head_tag = STORAGE_ITEM_HEAD_TAG;
 4914              		.loc 1 1223 52 is_stmt 0 view .LVU1565
 4915 0162 DBF81430 		ldr	r3, [fp, #20]	@ unaligned
1223:System/storage/Storage.c ****                     crt_item_slot.head_tag = STORAGE_ITEM_HEAD_TAG;
 4916              		.loc 1 1223 45 view .LVU1566
 4917 0166 CDF89B30 		str	r3, [sp, #155]	@ unaligned
1224:System/storage/Storage.c ****                     crt_item_slot.end_tag = STORAGE_ITEM_END_TAG;
 4918              		.loc 1 1224 21 is_stmt 1 view .LVU1567
1224:System/storage/Storage.c ****                     crt_item_slot.end_tag = STORAGE_ITEM_END_TAG;
 4919              		.loc 1 1224 44 is_stmt 0 view .LVU1568
 4920 016a AA23     		movs	r3, #170
 4921 016c 8DF87030 		strb	r3, [sp, #112]
1225:System/storage/Storage.c **** 
 4922              		.loc 1 1225 21 is_stmt 1 view .LVU1569
1225:System/storage/Storage.c **** 
 4923              		.loc 1 1225 43 is_stmt 0 view .LVU1570
 4924 0170 BB23     		movs	r3, #187
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 150


 4925 0172 8DF8AF30 		strb	r3, [sp, #175]
1228:System/storage/Storage.c ****                     store_addr = crt_item_slot.data_addr;
 4926              		.loc 1 1228 21 is_stmt 1 view .LVU1571
 4927 0176 1CA8     		add	r0, sp, #112
 4928 0178 FFF7FEFF 		bl	Storage_Comput_ItemSlot_CRC
 4929              	.LVL587:
1229:System/storage/Storage.c ****                     break; 
 4930              		.loc 1 1229 21 view .LVU1572
1229:System/storage/Storage.c ****                     break; 
 4931              		.loc 1 1229 32 is_stmt 0 view .LVU1573
 4932 017c DDF89B50 		ldr	r5, [sp, #155]	@ unaligned
 4933              	.LVL588:
1230:System/storage/Storage.c ****                 }
 4934              		.loc 1 1230 21 is_stmt 1 view .LVU1574
 4935              	.L380:
1230:System/storage/Storage.c ****                 }
 4936              		.loc 1 1230 21 is_stmt 0 view .LVU1575
 4937              	.LBE30:
1234:System/storage/Storage.c ****                 break;
 4938              		.loc 1 1234 13 is_stmt 1 view .LVU1576
1234:System/storage/Storage.c ****                 break;
 4939              		.loc 1 1234 16 is_stmt 0 view .LVU1577
 4940 0180 F5B9     		cbnz	r5, .L382
1237:System/storage/Storage.c ****         }
 4941              		.loc 1 1237 13 is_stmt 1 discriminator 2 view .LVU1578
1237:System/storage/Storage.c ****         }
 4942              		.loc 1 1237 39 is_stmt 0 discriminator 2 view .LVU1579
 4943 0182 DBF81030 		ldr	r3, [fp, #16]	@ unaligned
1237:System/storage/Storage.c ****         }
 4944              		.loc 1 1237 57 discriminator 2 view .LVU1580
 4945 0186 DBF80C20 		ldr	r2, [fp, #12]	@ unaligned
1237:System/storage/Storage.c ****         }
 4946              		.loc 1 1237 50 discriminator 2 view .LVU1581
 4947 018a B3FBF2F3 		udiv	r3, r3, r2
1237:System/storage/Storage.c ****         }
 4948              		.loc 1 1237 30 discriminator 2 view .LVU1582
 4949 018e 9A44     		add	r10, r10, r3
 4950              	.LVL589:
1193:System/storage/Storage.c ****         {
 4951              		.loc 1 1193 58 is_stmt 1 discriminator 2 view .LVU1583
1193:System/storage/Storage.c ****         {
 4952              		.loc 1 1193 64 is_stmt 0 discriminator 2 view .LVU1584
 4953 0190 09F10109 		add	r9, r9, #1
 4954              	.LVL590:
1193:System/storage/Storage.c ****         {
 4955              		.loc 1 1193 64 discriminator 2 view .LVU1585
 4956 0194 1FFA89F9 		uxth	r9, r9
 4957              	.LVL591:
 4958              	.L374:
1193:System/storage/Storage.c ****         {
 4959              		.loc 1 1193 33 is_stmt 1 discriminator 1 view .LVU1586
1193:System/storage/Storage.c ****         {
 4960              		.loc 1 1193 46 is_stmt 0 discriminator 1 view .LVU1587
 4961 0198 DBF80C30 		ldr	r3, [fp, #12]	@ unaligned
1193:System/storage/Storage.c ****         {
 4962              		.loc 1 1193 9 discriminator 1 view .LVU1588
 4963 019c 9945     		cmp	r9, r3
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 151


 4964 019e 0FD2     		bcs	.L382
1195:System/storage/Storage.c ****             item_index = 0;
 4965              		.loc 1 1195 13 is_stmt 1 view .LVU1589
 4966              	.LVL592:
1196:System/storage/Storage.c **** 
 4967              		.loc 1 1196 13 view .LVU1590
1199:System/storage/Storage.c ****                 return Storage_Read_Error;
 4968              		.loc 1 1199 13 view .LVU1591
1199:System/storage/Storage.c ****                 return Storage_Read_Error;
 4969              		.loc 1 1199 87 is_stmt 0 view .LVU1592
 4970 01a0 DBF81020 		ldr	r2, [fp, #16]	@ unaligned
1199:System/storage/Storage.c ****                 return Storage_Read_Error;
 4971              		.loc 1 1199 18 view .LVU1593
 4972 01a4 B2FBF3F2 		udiv	r2, r2, r3
 4973 01a8 7149     		ldr	r1, .L419+16
 4974 01aa 5046     		mov	r0, r10
 4975 01ac FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 4976              	.LVL593:
1199:System/storage/Storage.c ****                 return Storage_Read_Error;
 4977              		.loc 1 1199 16 view .LVU1594
 4978 01b0 0028     		cmp	r0, #0
 4979 01b2 92D0     		beq	.L414
 4980              	.LBB31:
1203:System/storage/Storage.c ****             {
 4981              		.loc 1 1203 27 view .LVU1595
 4982 01b4 0024     		movs	r4, #0
 4983 01b6 9FE7     		b	.L375
 4984              	.LVL594:
 4985              	.L412:
1203:System/storage/Storage.c ****             {
 4986              		.loc 1 1203 27 view .LVU1596
 4987              	.LBE31:
1196:System/storage/Storage.c **** 
 4988              		.loc 1 1196 24 view .LVU1597
 4989 01b8 0023     		movs	r3, #0
 4990 01ba 0193     		str	r3, [sp, #4]
1195:System/storage/Storage.c ****             item_index = 0;
 4991              		.loc 1 1195 24 view .LVU1598
 4992 01bc 1D46     		mov	r5, r3
 4993 01be DFE7     		b	.L380
 4994              	.LVL595:
 4995              	.L382:
1195:System/storage/Storage.c ****             item_index = 0;
 4996              		.loc 1 1195 24 view .LVU1599
 4997              	.LBE33:
1240:System/storage/Storage.c ****             return Storage_DataAddr_Update_Error;
 4998              		.loc 1 1240 12 view .LVU1600
 4999 01c0 CDF81CA0 		str	r10, [sp, #28]
 5000 01c4 049F     		ldr	r7, [sp, #16]
1240:System/storage/Storage.c ****             return Storage_DataAddr_Update_Error;
 5001              		.loc 1 1240 9 is_stmt 1 view .LVU1601
1240:System/storage/Storage.c ****             return Storage_DataAddr_Update_Error;
 5002              		.loc 1 1240 12 is_stmt 0 view .LVU1602
 5003 01c6 002D     		cmp	r5, #0
 5004 01c8 00F02F81 		beq	.L402
1243:System/storage/Storage.c ****         /* get align byte size */
 5005              		.loc 1 1243 9 is_stmt 1 view .LVU1603
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 152


 5006              	.LVL596:
1246:System/storage/Storage.c **** 
 5007              		.loc 1 1246 9 view .LVU1604
1246:System/storage/Storage.c **** 
 5008              		.loc 1 1246 27 is_stmt 0 view .LVU1605
 5009 01cc 009B     		ldr	r3, [sp]
 5010 01ce 4344     		add	r3, r3, r8
 5011 01d0 1A46     		mov	r2, r3
 5012 01d2 0493     		str	r3, [sp, #16]
 5013              	.LVL597:
1249:System/storage/Storage.c ****         unstored_size = DataSlot.total_data_size;
 5014              		.loc 1 1249 9 is_stmt 1 view .LVU1606
1249:System/storage/Storage.c ****         unstored_size = DataSlot.total_data_size;
 5015              		.loc 1 1249 34 is_stmt 0 view .LVU1607
 5016 01d4 CDF84D30 		str	r3, [sp, #77]	@ unaligned
1250:System/storage/Storage.c **** 
 5017              		.loc 1 1250 9 is_stmt 1 view .LVU1608
 5018              	.LVL598:
1252:System/storage/Storage.c ****         {
 5019              		.loc 1 1252 9 view .LVU1609
1252:System/storage/Storage.c ****         {
 5020              		.loc 1 1252 18 is_stmt 0 view .LVU1610
 5021 01d8 DBF81830 		ldr	r3, [fp, #24]	@ unaligned
1252:System/storage/Storage.c ****         {
 5022              		.loc 1 1252 12 view .LVU1611
 5023 01dc 9342     		cmp	r3, r2
 5024 01de C0F0D280 		bcc	.L384
1145:System/storage/Storage.c ****     uint32_t store_addr = 0;
 5025              		.loc 1 1145 14 view .LVU1612
 5026 01e2 4FF0000A 		mov	r10, #0
 5027              	.LVL599:
1145:System/storage/Storage.c ****     uint32_t store_addr = 0;
 5028              		.loc 1 1145 14 view .LVU1613
 5029 01e6 9046     		mov	r8, r2
 5030 01e8 CDF814B0 		str	fp, [sp, #20]
 5031 01ec 0696     		str	r6, [sp, #24]
 5032 01ee 3BE0     		b	.L389
 5033              	.LVL600:
 5034              	.L416:
1274:System/storage/Storage.c ****                     stored_size += DataSlot.cur_slot_size;
 5035              		.loc 1 1274 21 is_stmt 1 view .LVU1614
1274:System/storage/Storage.c ****                     stored_size += DataSlot.cur_slot_size;
 5036              		.loc 1 1274 44 is_stmt 0 view .LVU1615
 5037 01f0 CDF85160 		str	r6, [sp, #81]	@ unaligned
1275:System/storage/Storage.c ****                     unstored_size -= stored_size;
 5038              		.loc 1 1275 21 is_stmt 1 view .LVU1616
1275:System/storage/Storage.c ****                     unstored_size -= stored_size;
 5039              		.loc 1 1275 33 is_stmt 0 view .LVU1617
 5040 01f4 0AEB060B 		add	fp, r10, r6
 5041              	.LVL601:
1276:System/storage/Storage.c ****                     DataSlot.align_size = 0;
 5042              		.loc 1 1276 21 is_stmt 1 view .LVU1618
1276:System/storage/Storage.c ****                     DataSlot.align_size = 0;
 5043              		.loc 1 1276 35 is_stmt 0 view .LVU1619
 5044 01f8 A8EB0B08 		sub	r8, r8, fp
 5045              	.LVL602:
1277:System/storage/Storage.c ****                     
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 153


 5046              		.loc 1 1277 21 is_stmt 1 view .LVU1620
1277:System/storage/Storage.c ****                     
 5047              		.loc 1 1277 41 is_stmt 0 view .LVU1621
 5048 01fc 0023     		movs	r3, #0
 5049 01fe 8DF85930 		strb	r3, [sp, #89]
1280:System/storage/Storage.c **** 
 5050              		.loc 1 1280 21 is_stmt 1 view .LVU1622
1280:System/storage/Storage.c **** 
 5051              		.loc 1 1280 49 is_stmt 0 view .LVU1623
 5052 0202 1A9B     		ldr	r3, [sp, #104]
 5053 0204 0293     		str	r3, [sp, #8]
 5054              	.LVL603:
1280:System/storage/Storage.c **** 
 5055              		.loc 1 1280 39 view .LVU1624
 5056 0206 CDF85530 		str	r3, [sp, #85]	@ unaligned
1284:System/storage/Storage.c ****                     if (!Storage_ExtFlash_ParaSec_Read(cur_freeslot_addr, (uint8_t *)&FreeSlot, siz
 5057              		.loc 1 1284 21 is_stmt 1 view .LVU1625
 5058              	.LVL604:
1285:System/storage/Storage.c ****                         return Storage_FreeSlot_Get_Error;   
 5059              		.loc 1 1285 21 view .LVU1626
1285:System/storage/Storage.c ****                         return Storage_FreeSlot_Get_Error;   
 5060              		.loc 1 1285 26 is_stmt 0 view .LVU1627
 5061 020a 1022     		movs	r2, #16
 5062 020c 18A9     		add	r1, sp, #96
 5063 020e 1846     		mov	r0, r3
 5064 0210 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 5065              	.LVL605:
1285:System/storage/Storage.c ****                         return Storage_FreeSlot_Get_Error;   
 5066              		.loc 1 1285 24 view .LVU1628
 5067 0214 0028     		cmp	r0, #0
 5068 0216 5BD1     		bne	.L386
1286:System/storage/Storage.c ****                 }
 5069              		.loc 1 1286 32 view .LVU1629
 5070 0218 1820     		movs	r0, #24
 5071 021a FBE0     		b	.L372
 5072              	.LVL606:
 5073              	.L387:
1325:System/storage/Storage.c **** 
 5074              		.loc 1 1325 17 is_stmt 1 view .LVU1630
1325:System/storage/Storage.c **** 
 5075              		.loc 1 1325 44 is_stmt 0 view .LVU1631
 5076 021c 9DF859A0 		ldrb	r10, [sp, #89]	@ zero_extendqisi2
1325:System/storage/Storage.c **** 
 5077              		.loc 1 1325 33 view .LVU1632
 5078 0220 04EB0A03 		add	r3, r4, r10
 5079 0224 0393     		str	r3, [sp, #12]
 5080              	.LVL607:
1328:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
 5081              		.loc 1 1328 17 is_stmt 1 view .LVU1633
1328:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
 5082              		.loc 1 1328 37 is_stmt 0 view .LVU1634
 5083 0226 DFF84C91 		ldr	r9, .L419+20
 5084              	.LVL608:
1328:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
 5085              		.loc 1 1328 37 view .LVU1635
 5086 022a DDF85110 		ldr	r1, [sp, #81]	@ unaligned
 5087 022e 4846     		mov	r0, r9
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 154


 5088 0230 FFF7FEFF 		bl	Common_CRC16
 5089              	.LVL609:
1328:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
 5090              		.loc 1 1328 37 view .LVU1636
 5091 0234 80B2     		uxth	r0, r0
1328:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.slot_crc, sizeof(DataSlot.slot_crc));
 5092              		.loc 1 1328 35 view .LVU1637
 5093 0236 ADF85A00 		strh	r0, [sp, #90]	@ movhi
1329:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.slot_crc);
 5094              		.loc 1 1329 17 is_stmt 1 view .LVU1638
 5095 023a 24F80A00 		strh	r0, [r4, r10]	@ unaligned
1330:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.end_tag, sizeof(DataSlot.end_tag));
 5096              		.loc 1 1330 17 view .LVU1639
 5097              	.LVL610:
1331:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.end_tag);
 5098              		.loc 1 1331 17 view .LVU1640
 5099 023e 179B     		ldr	r3, [sp, #92]
 5100 0240 039A     		ldr	r2, [sp, #12]
 5101 0242 C2F80230 		str	r3, [r2, #2]	@ unaligned
1332:System/storage/Storage.c **** 
 5102              		.loc 1 1332 17 view .LVU1641
 5103              	.LVL611:
1335:System/storage/Storage.c ****                     return Storage_Write_Error;
 5104              		.loc 1 1335 17 view .LVU1642
1335:System/storage/Storage.c ****                     return Storage_Write_Error;
 5105              		.loc 1 1335 89 is_stmt 0 view .LVU1643
 5106 0246 DDF85120 		ldr	r2, [sp, #81]	@ unaligned
1335:System/storage/Storage.c ****                     return Storage_Write_Error;
 5107              		.loc 1 1335 22 view .LVU1644
 5108 024a 4032     		adds	r2, r2, #64
 5109 024c A9F13A01 		sub	r1, r9, #58
 5110 0250 2846     		mov	r0, r5
 5111 0252 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 5112              	.LVL612:
1335:System/storage/Storage.c ****                     return Storage_Write_Error;
 5113              		.loc 1 1335 20 view .LVU1645
 5114 0256 0028     		cmp	r0, #0
 5115 0258 00F0EB80 		beq	.L404
1338:System/storage/Storage.c ****                 {
 5116              		.loc 1 1338 17 is_stmt 1 view .LVU1646
1338:System/storage/Storage.c ****                 {
 5117              		.loc 1 1338 29 is_stmt 0 view .LVU1647
 5118 025c DDF85550 		ldr	r5, [sp, #85]	@ unaligned
 5119              	.LVL613:
1338:System/storage/Storage.c ****                 {
 5120              		.loc 1 1338 20 view .LVU1648
 5121 0260 002D     		cmp	r5, #0
 5122 0262 73D0     		beq	.L415
1355:System/storage/Storage.c ****                     store_addr = DataSlot.nxt_addr;
 5123              		.loc 1 1355 21 is_stmt 1 view .LVU1649
1355:System/storage/Storage.c ****                     store_addr = DataSlot.nxt_addr;
 5124              		.loc 1 1355 33 is_stmt 0 view .LVU1650
 5125 0264 0BEB060A 		add	r10, fp, r6
 5126              	.LVL614:
1356:System/storage/Storage.c ****                 }
 5127              		.loc 1 1356 21 is_stmt 1 view .LVU1651
1254:System/storage/Storage.c ****             {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 155


 5128              		.loc 1 1254 18 view .LVU1652
 5129              	.L389:
1254:System/storage/Storage.c ****             {
 5130              		.loc 1 1254 13 view .LVU1653
1257:System/storage/Storage.c ****                 DataSlot.end_tag = STORAGE_SLOT_END_TAG;
 5131              		.loc 1 1257 17 view .LVU1654
1257:System/storage/Storage.c ****                 DataSlot.end_tag = STORAGE_SLOT_END_TAG;
 5132              		.loc 1 1257 35 is_stmt 0 view .LVU1655
 5133 0268 3E4B     		ldr	r3, .L419+4
 5134 026a 0893     		str	r3, [sp, #32]
1258:System/storage/Storage.c ****                 memset(DataSlot.name, '\0', STORAGE_NAME_LEN);
 5135              		.loc 1 1258 17 is_stmt 1 view .LVU1656
1258:System/storage/Storage.c ****                 memset(DataSlot.name, '\0', STORAGE_NAME_LEN);
 5136              		.loc 1 1258 34 is_stmt 0 view .LVU1657
 5137 026c 3E4B     		ldr	r3, .L419+8
 5138 026e 1793     		str	r3, [sp, #92]
1259:System/storage/Storage.c ****                 memcpy(DataSlot.name, name, strlen(name));
 5139              		.loc 1 1259 17 is_stmt 1 view .LVU1658
 5140 0270 2922     		movs	r2, #41
 5141 0272 0021     		movs	r1, #0
 5142 0274 09A8     		add	r0, sp, #36
 5143 0276 FFF7FEFF 		bl	memset
 5144              	.LVL615:
1260:System/storage/Storage.c ****                 
 5145              		.loc 1 1260 17 view .LVU1659
 5146 027a 069C     		ldr	r4, [sp, #24]
 5147 027c 2046     		mov	r0, r4
 5148 027e FFF7FEFF 		bl	strlen
 5149              	.LVL616:
 5150 0282 0246     		mov	r2, r0
 5151 0284 2146     		mov	r1, r4
 5152 0286 09A8     		add	r0, sp, #36
 5153 0288 FFF7FEFF 		bl	memcpy
 5154              	.LVL617:
1262:System/storage/Storage.c ****                     return Storage_No_Enough_Space;
 5155              		.loc 1 1262 17 view .LVU1660
1262:System/storage/Storage.c ****                     return Storage_No_Enough_Space;
 5156              		.loc 1 1262 29 is_stmt 0 view .LVU1661
 5157 028c 199B     		ldr	r3, [sp, #100]
1262:System/storage/Storage.c ****                     return Storage_No_Enough_Space;
 5158              		.loc 1 1262 20 view .LVU1662
 5159 028e 402B     		cmp	r3, #64
 5160 0290 40F2CD80 		bls	.L403
1265:System/storage/Storage.c ****                 slot_useful_size = FreeSlot.cur_slot_size - sizeof(Storage_DataSlot_TypeDef);
 5161              		.loc 1 1265 17 is_stmt 1 view .LVU1663
1265:System/storage/Storage.c ****                 slot_useful_size = FreeSlot.cur_slot_size - sizeof(Storage_DataSlot_TypeDef);
 5162              		.loc 1 1265 24 is_stmt 0 view .LVU1664
 5163 0294 5744     		add	r7, r7, r10
 5164              	.LVL618:
1266:System/storage/Storage.c ****                 /* current have space for new data need to be storage */
 5165              		.loc 1 1266 17 is_stmt 1 view .LVU1665
1266:System/storage/Storage.c ****                 /* current have space for new data need to be storage */
 5166              		.loc 1 1266 34 is_stmt 0 view .LVU1666
 5167 0296 A3F14006 		sub	r6, r3, #64
 5168              	.LVL619:
1268:System/storage/Storage.c ****                 {
 5169              		.loc 1 1268 17 is_stmt 1 view .LVU1667
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 156


1268:System/storage/Storage.c ****                 {
 5170              		.loc 1 1268 20 is_stmt 0 view .LVU1668
 5171 029a 049A     		ldr	r2, [sp, #16]
 5172 029c B242     		cmp	r2, r6
 5173 029e A7D8     		bhi	.L416
1291:System/storage/Storage.c ****                     DataSlot.cur_slot_size = unstored_size;
 5174              		.loc 1 1291 21 is_stmt 1 view .LVU1669
1291:System/storage/Storage.c ****                     DataSlot.cur_slot_size = unstored_size;
 5175              		.loc 1 1291 33 is_stmt 0 view .LVU1670
 5176 02a0 0AEB080B 		add	fp, r10, r8
 5177              	.LVL620:
1292:System/storage/Storage.c ****                     DataSlot.align_size = align_byte;
 5178              		.loc 1 1292 21 is_stmt 1 view .LVU1671
1292:System/storage/Storage.c ****                     DataSlot.align_size = align_byte;
 5179              		.loc 1 1292 44 is_stmt 0 view .LVU1672
 5180 02a4 CDF85180 		str	r8, [sp, #81]	@ unaligned
1293:System/storage/Storage.c ****                     DataSlot.nxt_addr = 0;
 5181              		.loc 1 1293 21 is_stmt 1 view .LVU1673
1293:System/storage/Storage.c ****                     DataSlot.nxt_addr = 0;
 5182              		.loc 1 1293 41 is_stmt 0 view .LVU1674
 5183 02a8 009A     		ldr	r2, [sp]
 5184 02aa 8DF85920 		strb	r2, [sp, #89]
1294:System/storage/Storage.c **** 
 5185              		.loc 1 1294 21 is_stmt 1 view .LVU1675
1294:System/storage/Storage.c **** 
 5186              		.loc 1 1294 39 is_stmt 0 view .LVU1676
 5187 02ae 0022     		movs	r2, #0
 5188 02b0 8DF85520 		strb	r2, [sp, #85]
 5189 02b4 8DF85620 		strb	r2, [sp, #86]
 5190 02b8 8DF85720 		strb	r2, [sp, #87]
 5191 02bc 8DF85820 		strb	r2, [sp, #88]
1297:System/storage/Storage.c ****                     FreeSlot.cur_slot_size -= DataSlot.cur_slot_size + sizeof(Storage_DataSlot_Type
 5192              		.loc 1 1297 21 is_stmt 1 view .LVU1677
1297:System/storage/Storage.c ****                     FreeSlot.cur_slot_size -= DataSlot.cur_slot_size + sizeof(Storage_DataSlot_Type
 5193              		.loc 1 1297 39 is_stmt 0 view .LVU1678
 5194 02c0 029A     		ldr	r2, [sp, #8]
 5195 02c2 4244     		add	r2, r2, r8
 5196 02c4 4032     		adds	r2, r2, #64
 5197 02c6 0292     		str	r2, [sp, #8]
 5198              	.LVL621:
1298:System/storage/Storage.c ****                 }
 5199              		.loc 1 1298 21 is_stmt 1 view .LVU1679
1298:System/storage/Storage.c ****                 }
 5200              		.loc 1 1298 44 is_stmt 0 view .LVU1680
 5201 02c8 A3EB0803 		sub	r3, r3, r8
 5202 02cc 403B     		subs	r3, r3, #64
 5203 02ce 1993     		str	r3, [sp, #100]
 5204              	.LVL622:
 5205              	.L386:
1301:System/storage/Storage.c **** 
 5206              		.loc 1 1301 17 is_stmt 1 view .LVU1681
1301:System/storage/Storage.c **** 
 5207              		.loc 1 1301 51 is_stmt 0 view .LVU1682
 5208 02d0 DDF85120 		ldr	r2, [sp, #81]	@ unaligned
1301:System/storage/Storage.c **** 
 5209              		.loc 1 1301 40 view .LVU1683
 5210 02d4 0599     		ldr	r1, [sp, #20]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 157


 5211 02d6 8B69     		ldr	r3, [r1, #24]	@ unaligned
 5212 02d8 9B1A     		subs	r3, r3, r2
 5213 02da 8B61     		str	r3, [r1, #24]	@ unaligned
1305:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.head_tag, sizeof(DataSlot.head_tag));
 5214              		.loc 1 1305 17 is_stmt 1 view .LVU1684
 5215              	.LVL623:
1306:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.head_tag);
 5216              		.loc 1 1306 17 view .LVU1685
 5217 02dc 244C     		ldr	r4, .L419+16
 5218 02de A446     		mov	ip, r4
 5219 02e0 089B     		ldr	r3, [sp, #32]
 5220 02e2 4CF8043B 		str	r3, [ip], #4
1307:System/storage/Storage.c ****                 memcpy(slot_update_ptr, DataSlot.name, STORAGE_NAME_LEN);
 5221              		.loc 1 1307 17 view .LVU1686
 5222              	.LVL624:
1308:System/storage/Storage.c ****                 slot_update_ptr += STORAGE_NAME_LEN;
 5223              		.loc 1 1308 17 view .LVU1687
 5224 02e6 0DF1240E 		add	lr, sp, #36
 5225 02ea BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 5226 02ee ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 5227 02f2 BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 5228 02f6 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 5229 02fa 9EE80700 		ldm	lr, {r0, r1, r2}
 5230 02fe ACE80300 		stmia	ip!, {r0, r1}
 5231 0302 8CF80020 		strb	r2, [ip]
1309:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.total_data_size, sizeof(DataSlot.total_data_size)
 5232              		.loc 1 1309 17 view .LVU1688
 5233              	.LVL625:
1310:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.total_data_size);
 5234              		.loc 1 1310 17 view .LVU1689
 5235 0306 DDF84D30 		ldr	r3, [sp, #77]	@ unaligned
 5236 030a C4F82D30 		str	r3, [r4, #45]	@ unaligned
1311:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.cur_slot_size, sizeof(DataSlot.cur_slot_size));
 5237              		.loc 1 1311 17 view .LVU1690
 5238              	.LVL626:
1312:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.cur_slot_size);
 5239              		.loc 1 1312 17 view .LVU1691
 5240 030e DDF851A0 		ldr	r10, [sp, #81]	@ unaligned
 5241 0312 C4F831A0 		str	r10, [r4, #49]	@ unaligned
1313:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.nxt_addr, sizeof(DataSlot.nxt_addr));
 5242              		.loc 1 1313 17 view .LVU1692
 5243              	.LVL627:
1314:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.nxt_addr);
 5244              		.loc 1 1314 17 view .LVU1693
 5245 0316 DDF85530 		ldr	r3, [sp, #85]	@ unaligned
 5246 031a C4F83530 		str	r3, [r4, #53]	@ unaligned
1315:System/storage/Storage.c ****                 memcpy(slot_update_ptr, &DataSlot.align_size, sizeof(DataSlot.align_size));
 5247              		.loc 1 1315 17 view .LVU1694
 5248              	.LVL628:
1316:System/storage/Storage.c ****                 slot_update_ptr += sizeof(DataSlot.align_size);
 5249              		.loc 1 1316 17 view .LVU1695
 5250 031e 9DF85990 		ldrb	r9, [sp, #89]	@ zero_extendqisi2
 5251 0322 84F83990 		strb	r9, [r4, #57]
1317:System/storage/Storage.c ****                 crc_buf = slot_update_ptr;
 5252              		.loc 1 1317 17 view .LVU1696
 5253              	.LVL629:
1318:System/storage/Storage.c ****                 memcpy(slot_update_ptr, p_data, (DataSlot.cur_slot_size - DataSlot.align_size));
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 158


 5254              		.loc 1 1318 17 view .LVU1697
1319:System/storage/Storage.c ****                 slot_update_ptr += (DataSlot.cur_slot_size - DataSlot.align_size);
 5255              		.loc 1 1319 17 view .LVU1698
1319:System/storage/Storage.c ****                 slot_update_ptr += (DataSlot.cur_slot_size - DataSlot.align_size);
 5256              		.loc 1 1319 73 is_stmt 0 view .LVU1699
 5257 0326 AAEB090A 		sub	r10, r10, r9
1319:System/storage/Storage.c ****                 slot_update_ptr += (DataSlot.cur_slot_size - DataSlot.align_size);
 5258              		.loc 1 1319 17 view .LVU1700
 5259 032a 3A34     		adds	r4, r4, #58
 5260 032c 5246     		mov	r2, r10
 5261 032e 3946     		mov	r1, r7
 5262 0330 2046     		mov	r0, r4
 5263 0332 FFF7FEFF 		bl	memcpy
 5264              	.LVL630:
1320:System/storage/Storage.c ****                 
 5265              		.loc 1 1320 17 is_stmt 1 view .LVU1701
1320:System/storage/Storage.c ****                 
 5266              		.loc 1 1320 33 is_stmt 0 view .LVU1702
 5267 0336 5444     		add	r4, r4, r10
 5268              	.LVL631:
1322:System/storage/Storage.c ****                     memset(slot_update_ptr, 0, DataSlot.align_size);
 5269              		.loc 1 1322 17 is_stmt 1 view .LVU1703
1322:System/storage/Storage.c ****                     memset(slot_update_ptr, 0, DataSlot.align_size);
 5270              		.loc 1 1322 20 is_stmt 0 view .LVU1704
 5271 0338 B9F1000F 		cmp	r9, #0
 5272 033c 3FF46EAF 		beq	.L387
1323:System/storage/Storage.c ****                 
 5273              		.loc 1 1323 21 is_stmt 1 view .LVU1705
 5274 0340 4A46     		mov	r2, r9
 5275 0342 0021     		movs	r1, #0
 5276 0344 2046     		mov	r0, r4
 5277 0346 FFF7FEFF 		bl	memset
 5278              	.LVL632:
 5279 034a 67E7     		b	.L387
 5280              	.LVL633:
 5281              	.L415:
1340:System/storage/Storage.c ****                     {
 5282              		.loc 1 1340 33 is_stmt 0 view .LVU1706
 5283 034c DA46     		mov	r10, fp
 5284 034e DDF814B0 		ldr	fp, [sp, #20]
 5285              	.LVL634:
1340:System/storage/Storage.c ****                     {
 5286              		.loc 1 1340 21 is_stmt 1 view .LVU1707
1340:System/storage/Storage.c ****                     {
 5287              		.loc 1 1340 33 is_stmt 0 view .LVU1708
 5288 0352 DDF84D30 		ldr	r3, [sp, #77]	@ unaligned
1340:System/storage/Storage.c ****                     {
 5289              		.loc 1 1340 24 view .LVU1709
 5290 0356 5345     		cmp	r3, r10
 5291 0358 0ED0     		beq	.L417
1349:System/storage/Storage.c ****                 }
 5292              		.loc 1 1349 28 view .LVU1710
 5293 035a 1220     		movs	r0, #18
 5294 035c 5AE0     		b	.L372
 5295              	.L420:
 5296 035e 00BF     		.align	2
 5297              	.L419:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 159


 5298 0360 16000000 		.word	.LANCHOR0+22
 5299 0364 EF1001EF 		.word	-285142801
 5300 0368 FE0110FE 		.word	-32505346
 5301 036c 00000000 		.word	.LC4
 5302 0370 00000000 		.word	page_data_tmp
 5303 0374 3A000000 		.word	page_data_tmp+58
 5304              	.L417:
1343:System/storage/Storage.c ****                             return Storage_Write_Error;
 5305              		.loc 1 1343 25 is_stmt 1 view .LVU1711
1343:System/storage/Storage.c ****                             return Storage_Write_Error;
 5306              		.loc 1 1343 30 is_stmt 0 view .LVU1712
 5307 0378 1022     		movs	r2, #16
 5308 037a 18A9     		add	r1, sp, #96
 5309 037c 0298     		ldr	r0, [sp, #8]
 5310 037e FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 5311              	.LVL635:
1343:System/storage/Storage.c ****                             return Storage_Write_Error;
 5312              		.loc 1 1343 28 view .LVU1713
 5313 0382 0028     		cmp	r0, #0
 5314 0384 3FD0     		beq	.L418
 5315              	.LVL636:
 5316              	.L384:
1362:System/storage/Storage.c ****             return Storage_Read_Error;
 5317              		.loc 1 1362 9 is_stmt 1 view .LVU1714
1362:System/storage/Storage.c ****             return Storage_Read_Error;
 5318              		.loc 1 1362 83 is_stmt 0 view .LVU1715
 5319 0386 DBF81020 		ldr	r2, [fp, #16]	@ unaligned
1362:System/storage/Storage.c ****             return Storage_Read_Error;
 5320              		.loc 1 1362 101 view .LVU1716
 5321 038a DBF80C30 		ldr	r3, [fp, #12]	@ unaligned
1362:System/storage/Storage.c ****             return Storage_Read_Error;
 5322              		.loc 1 1362 14 view .LVU1717
 5323 038e B2FBF3F2 		udiv	r2, r2, r3
 5324 0392 2C49     		ldr	r1, .L421
 5325 0394 0798     		ldr	r0, [sp, #28]
 5326 0396 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 5327              	.LVL637:
1362:System/storage/Storage.c ****             return Storage_Read_Error;
 5328              		.loc 1 1362 12 view .LVU1718
 5329 039a 0028     		cmp	r0, #0
 5330 039c 4BD0     		beq	.L406
1365:System/storage/Storage.c ****         tab_item[item_index] = crt_item_slot;
 5331              		.loc 1 1365 9 is_stmt 1 view .LVU1719
 5332              	.LVL638:
1366:System/storage/Storage.c **** 
 5333              		.loc 1 1366 9 view .LVU1720
1366:System/storage/Storage.c **** 
 5334              		.loc 1 1366 30 is_stmt 0 view .LVU1721
 5335 039e 1CAE     		add	r6, sp, #112
 5336 03a0 284C     		ldr	r4, .L421
 5337 03a2 019B     		ldr	r3, [sp, #4]
 5338 03a4 04EB8314 		add	r4, r4, r3, lsl #6
 5339 03a8 2CAF     		add	r7, sp, #176
 5340              	.LVL639:
 5341              	.L390:
1366:System/storage/Storage.c **** 
 5342              		.loc 1 1366 30 view .LVU1722
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 160


 5343 03aa 3546     		mov	r5, r6
 5344 03ac 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 5345 03ae 2060     		str	r0, [r4]	@ unaligned
 5346 03b0 6160     		str	r1, [r4, #4]	@ unaligned
 5347 03b2 A260     		str	r2, [r4, #8]	@ unaligned
 5348 03b4 E360     		str	r3, [r4, #12]	@ unaligned
 5349 03b6 2E46     		mov	r6, r5
 5350 03b8 1034     		adds	r4, r4, #16
 5351 03ba BD42     		cmp	r5, r7
 5352 03bc F5D1     		bne	.L390
1369:System/storage/Storage.c ****             return Storage_Write_Error;
 5353              		.loc 1 1369 9 is_stmt 1 view .LVU1723
1369:System/storage/Storage.c ****             return Storage_Write_Error;
 5354              		.loc 1 1369 84 is_stmt 0 view .LVU1724
 5355 03be DBF81020 		ldr	r2, [fp, #16]	@ unaligned
1369:System/storage/Storage.c ****             return Storage_Write_Error;
 5356              		.loc 1 1369 102 view .LVU1725
 5357 03c2 DBF80C30 		ldr	r3, [fp, #12]	@ unaligned
1369:System/storage/Storage.c ****             return Storage_Write_Error;
 5358              		.loc 1 1369 14 view .LVU1726
 5359 03c6 B2FBF3F2 		udiv	r2, r2, r3
 5360 03ca 1E49     		ldr	r1, .L421
 5361 03cc 0798     		ldr	r0, [sp, #28]
 5362 03ce FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 5363              	.LVL640:
1369:System/storage/Storage.c ****             return Storage_Write_Error;
 5364              		.loc 1 1369 12 view .LVU1727
 5365 03d2 90B3     		cbz	r0, .L407
1373:System/storage/Storage.c **** 
 5366              		.loc 1 1373 9 is_stmt 1 view .LVU1728
1373:System/storage/Storage.c **** 
 5367              		.loc 1 1373 31 is_stmt 0 view .LVU1729
 5368 03d4 029B     		ldr	r3, [sp, #8]
 5369 03d6 CBF81430 		str	r3, [fp, #20]	@ unaligned
1376:System/storage/Storage.c ****         base_info_crc = Common_CRC16(page_data_tmp, Storage_InfoPageSize - sizeof(base_info_crc));
 5370              		.loc 1 1376 9 is_stmt 1 view .LVU1730
 5371 03da 1A4C     		ldr	r4, .L421
 5372 03dc 9C22     		movs	r2, #156
 5373 03de 1A49     		ldr	r1, .L421+4
 5374 03e0 2046     		mov	r0, r4
 5375 03e2 FFF7FEFF 		bl	memcpy
 5376              	.LVL641:
1377:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(base_info_crc)], &base_info_crc, sizeof
 5377              		.loc 1 1377 9 view .LVU1731
1377:System/storage/Storage.c ****         memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(base_info_crc)], &base_info_crc, sizeof
 5378              		.loc 1 1377 25 is_stmt 0 view .LVU1732
 5379 03e6 40F2FE31 		movw	r1, #1022
 5380 03ea 2046     		mov	r0, r4
 5381 03ec FFF7FEFF 		bl	Common_CRC16
 5382              	.LVL642:
1378:System/storage/Storage.c ****         
 5383              		.loc 1 1378 9 is_stmt 1 view .LVU1733
 5384 03f0 A4F8FE03 		strh	r0, [r4, #1022]	@ movhi
1381:System/storage/Storage.c ****             return Storage_Write_Error;
 5385              		.loc 1 1381 9 view .LVU1734
1381:System/storage/Storage.c ****             return Storage_Write_Error;
 5386              		.loc 1 1381 14 is_stmt 0 view .LVU1735
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 161


 5387 03f4 4FF48062 		mov	r2, #1024
 5388 03f8 2146     		mov	r1, r4
 5389 03fa 0020     		movs	r0, #0
 5390              	.LVL643:
1381:System/storage/Storage.c ****             return Storage_Write_Error;
 5391              		.loc 1 1381 14 view .LVU1736
 5392 03fc FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 5393              	.LVL644:
1381:System/storage/Storage.c ****             return Storage_Write_Error;
 5394              		.loc 1 1381 12 view .LVU1737
 5395 0400 E8B1     		cbz	r0, .L408
1385:System/storage/Storage.c **** }
 5396              		.loc 1 1385 12 view .LVU1738
 5397 0402 0020     		movs	r0, #0
 5398 0404 06E0     		b	.L372
 5399              	.LVL645:
 5400              	.L418:
1344:System/storage/Storage.c **** 
 5401              		.loc 1 1344 36 view .LVU1739
 5402 0406 0A20     		movs	r0, #10
 5403 0408 04E0     		b	.L372
 5404              	.LVL646:
 5405              	.L391:
1165:System/storage/Storage.c **** 
 5406              		.loc 1 1165 16 view .LVU1740
 5407 040a 0120     		movs	r0, #1
 5408 040c 02E0     		b	.L372
 5409              	.L392:
 5410 040e 0120     		movs	r0, #1
 5411 0410 00E0     		b	.L372
 5412              	.L393:
 5413 0412 0120     		movs	r0, #1
 5414              	.LVL647:
 5415              	.L372:
1386:System/storage/Storage.c **** 
 5416              		.loc 1 1386 1 view .LVU1741
 5417 0414 2DB0     		add	sp, sp, #180
 5418              	.LCFI55:
 5419              		.cfi_remember_state
 5420              		.cfi_def_cfa_offset 36
 5421              		@ sp needed
 5422 0416 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5423              	.LVL648:
 5424              	.L394:
 5425              	.LCFI56:
 5426              		.cfi_restore_state
1170:System/storage/Storage.c **** 
 5427              		.loc 1 1170 16 view .LVU1742
 5428 041a 1020     		movs	r0, #16
 5429              	.LVL649:
1170:System/storage/Storage.c **** 
 5430              		.loc 1 1170 16 view .LVU1743
 5431 041c FAE7     		b	.L372
 5432              	.L395:
1173:System/storage/Storage.c **** 
 5433              		.loc 1 1173 16 view .LVU1744
 5434 041e 1920     		movs	r0, #25
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 162


 5435 0420 F8E7     		b	.L372
 5436              	.L396:
1385:System/storage/Storage.c **** }
 5437              		.loc 1 1385 12 view .LVU1745
 5438 0422 0020     		movs	r0, #0
 5439 0424 F6E7     		b	.L372
 5440              	.L399:
1385:System/storage/Storage.c **** }
 5441              		.loc 1 1385 12 view .LVU1746
 5442 0426 0020     		movs	r0, #0
 5443 0428 F4E7     		b	.L372
 5444              	.LVL650:
 5445              	.L402:
1241:System/storage/Storage.c **** 
 5446              		.loc 1 1241 20 view .LVU1747
 5447 042a 1620     		movs	r0, #22
 5448 042c F2E7     		b	.L372
 5449              	.LVL651:
 5450              	.L403:
1263:System/storage/Storage.c **** 
 5451              		.loc 1 1263 28 view .LVU1748
 5452 042e 1220     		movs	r0, #18
 5453 0430 F0E7     		b	.L372
 5454              	.LVL652:
 5455              	.L404:
1336:System/storage/Storage.c **** 
 5456              		.loc 1 1336 28 view .LVU1749
 5457 0432 0A20     		movs	r0, #10
 5458 0434 EEE7     		b	.L372
 5459              	.LVL653:
 5460              	.L406:
1363:System/storage/Storage.c **** 
 5461              		.loc 1 1363 20 view .LVU1750
 5462 0436 0920     		movs	r0, #9
 5463 0438 ECE7     		b	.L372
 5464              	.LVL654:
 5465              	.L407:
1370:System/storage/Storage.c **** 
 5466              		.loc 1 1370 20 view .LVU1751
 5467 043a 0A20     		movs	r0, #10
 5468 043c EAE7     		b	.L372
 5469              	.LVL655:
 5470              	.L408:
1382:System/storage/Storage.c ****     }
 5471              		.loc 1 1382 20 view .LVU1752
 5472 043e 0A20     		movs	r0, #10
 5473 0440 E8E7     		b	.L372
 5474              	.L422:
 5475 0442 00BF     		.align	2
 5476              	.L421:
 5477 0444 00000000 		.word	page_data_tmp
 5478 0448 16000000 		.word	.LANCHOR0+22
 5479              		.cfi_endproc
 5480              	.LFE160:
 5482              		.section	.text.Storage_Search,"ax",%progbits
 5483              		.align	1
 5484              		.syntax unified
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 163


 5485              		.thumb
 5486              		.thumb_func
 5488              	Storage_Search:
 5489              	.LVL656:
 5490              	.LFB151:
 472:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 5491              		.loc 1 472 1 is_stmt 1 view -0
 5492              		.cfi_startproc
 5493              		@ args = 0, pretend = 0, frame = 96
 5494              		@ frame_needed = 0, uses_anonymous_args = 0
 472:System/storage/Storage.c ****     Storage_BaseSecInfo_TypeDef *p_Sec = NULL;
 5495              		.loc 1 472 1 is_stmt 0 view .LVU1754
 5496 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5497              	.LCFI57:
 5498              		.cfi_def_cfa_offset 36
 5499              		.cfi_offset 4, -36
 5500              		.cfi_offset 5, -32
 5501              		.cfi_offset 6, -28
 5502              		.cfi_offset 7, -24
 5503              		.cfi_offset 8, -20
 5504              		.cfi_offset 9, -16
 5505              		.cfi_offset 10, -12
 5506              		.cfi_offset 11, -8
 5507              		.cfi_offset 14, -4
 5508 0004 A5B0     		sub	sp, sp, #148
 5509              	.LCFI58:
 5510              		.cfi_def_cfa_offset 184
 5511 0006 0D90     		str	r0, [sp, #52]
 5512 0008 0C46     		mov	r4, r1
 5513 000a 9346     		mov	fp, r2
 473:System/storage/Storage.c ****     Storage_Item_TypeDef *item_list = NULL;
 5514              		.loc 1 473 5 is_stmt 1 view .LVU1755
 5515              	.LVL657:
 474:System/storage/Storage.c ****     Storage_Item_TypeDef *p_item = NULL;
 5516              		.loc 1 474 5 view .LVU1756
 475:System/storage/Storage.c ****     uint32_t tab_addr = 0;
 5517              		.loc 1 475 5 view .LVU1757
 476:System/storage/Storage.c ****     Storage_ItemSearchOut_TypeDef ItemSearch;
 5518              		.loc 1 476 5 view .LVU1758
 477:System/storage/Storage.c **** 
 5519              		.loc 1 477 5 view .LVU1759
 479:System/storage/Storage.c **** 
 5520              		.loc 1 479 5 view .LVU1760
 5521 000c 4522     		movs	r2, #69
 5522              	.LVL658:
 479:System/storage/Storage.c **** 
 5523              		.loc 1 479 5 is_stmt 0 view .LVU1761
 5524 000e 0021     		movs	r1, #0
 5525              	.LVL659:
 479:System/storage/Storage.c **** 
 5526              		.loc 1 479 5 view .LVU1762
 5527 0010 12A8     		add	r0, sp, #72
 5528              	.LVL660:
 479:System/storage/Storage.c **** 
 5529              		.loc 1 479 5 view .LVU1763
 5530 0012 FFF7FEFF 		bl	memset
 5531              	.LVL661:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 164


 481:System/storage/Storage.c ****         (name == NULL) || \
 5532              		.loc 1 481 5 is_stmt 1 view .LVU1764
 481:System/storage/Storage.c ****         (name == NULL) || \
 5533              		.loc 1 481 25 is_stmt 0 view .LVU1765
 5534 0016 544B     		ldr	r3, .L441
 5535 0018 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 481:System/storage/Storage.c ****         (name == NULL) || \
 5536              		.loc 1 481 8 view .LVU1766
 5537 001a CBB1     		cbz	r3, .L424
 481:System/storage/Storage.c ****         (name == NULL) || \
 5538              		.loc 1 481 37 discriminator 1 view .LVU1767
 5539 001c BBF1000F 		cmp	fp, #0
 5540 0020 16D0     		beq	.L424
 483:System/storage/Storage.c ****         (_class > Para_User))
 5541              		.loc 1 483 23 view .LVU1768
 5542 0022 9BF80030 		ldrb	r3, [fp]	@ zero_extendqisi2
 482:System/storage/Storage.c ****         (strlen(name) == 0) || \
 5543              		.loc 1 482 24 view .LVU1769
 5544 0026 9BB1     		cbz	r3, .L424
 483:System/storage/Storage.c ****         (_class > Para_User))
 5545              		.loc 1 483 29 view .LVU1770
 5546 0028 022C     		cmp	r4, #2
 5547 002a 11D8     		bhi	.L424
 487:System/storage/Storage.c **** 
 5548              		.loc 1 487 5 is_stmt 1 view .LVU1771
 487:System/storage/Storage.c **** 
 5549              		.loc 1 487 13 is_stmt 0 view .LVU1772
 5550 002c 2146     		mov	r1, r4
 5551 002e 4F48     		ldr	r0, .L441+4
 5552 0030 FFF7FEFF 		bl	Storage_Get_SecInfo
 5553              	.LVL662:
 489:System/storage/Storage.c ****         (p_Sec->para_num == 0) || \
 5554              		.loc 1 489 5 is_stmt 1 view .LVU1773
 489:System/storage/Storage.c ****         (p_Sec->para_num == 0) || \
 5555              		.loc 1 489 8 is_stmt 0 view .LVU1774
 5556 0034 0546     		mov	r5, r0
 5557 0036 A0B1     		cbz	r0, .L427
 490:System/storage/Storage.c ****         (p_Sec->para_size == 0))
 5558              		.loc 1 490 15 discriminator 1 view .LVU1775
 5559 0038 036A     		ldr	r3, [r0, #32]	@ unaligned
 489:System/storage/Storage.c ****         (p_Sec->para_num == 0) || \
 5560              		.loc 1 489 25 discriminator 1 view .LVU1776
 5561 003a 93B1     		cbz	r3, .L427
 491:System/storage/Storage.c ****         return ItemSearch;
 5562              		.loc 1 491 15 view .LVU1777
 5563 003c C369     		ldr	r3, [r0, #28]	@ unaligned
 490:System/storage/Storage.c ****         (p_Sec->para_size == 0))
 5564              		.loc 1 490 32 view .LVU1778
 5565 003e 83B1     		cbz	r3, .L427
 494:System/storage/Storage.c ****     /* tab traverse */
 5566              		.loc 1 494 5 is_stmt 1 view .LVU1779
 494:System/storage/Storage.c ****     /* tab traverse */
 5567              		.loc 1 494 14 is_stmt 0 view .LVU1780
 5568 0040 0368     		ldr	r3, [r0]	@ unaligned
 5569 0042 0E93     		str	r3, [sp, #56]
 5570              	.LVL663:
 496:System/storage/Storage.c ****     {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 165


 5571              		.loc 1 496 5 is_stmt 1 view .LVU1781
 5572              	.LBB34:
 496:System/storage/Storage.c ****     {
 5573              		.loc 1 496 10 view .LVU1782
 496:System/storage/Storage.c ****     {
 5574              		.loc 1 496 18 is_stmt 0 view .LVU1783
 5575 0044 4FF0000A 		mov	r10, #0
 5576 0048 5B46     		mov	r3, fp
 5577              	.LVL664:
 496:System/storage/Storage.c ****     {
 5578              		.loc 1 496 18 view .LVU1784
 5579 004a D346     		mov	fp, r10
 5580              	.LVL665:
 496:System/storage/Storage.c ****     {
 5581              		.loc 1 496 18 view .LVU1785
 5582 004c 9A46     		mov	r10, r3
 496:System/storage/Storage.c ****     {
 5583              		.loc 1 496 5 view .LVU1786
 5584 004e 77E0     		b	.L429
 5585              	.LVL666:
 5586              	.L424:
 496:System/storage/Storage.c ****     {
 5587              		.loc 1 496 5 view .LVU1787
 5588              	.LBE34:
 485:System/storage/Storage.c **** 
 5589              		.loc 1 485 9 is_stmt 1 view .LVU1788
 485:System/storage/Storage.c **** 
 5590              		.loc 1 485 16 is_stmt 0 view .LVU1789
 5591 0050 4522     		movs	r2, #69
 5592 0052 0021     		movs	r1, #0
 5593 0054 0D98     		ldr	r0, [sp, #52]
 5594 0056 FFF7FEFF 		bl	memset
 5595              	.LVL667:
 5596              	.L423:
 526:System/storage/Storage.c **** 
 5597              		.loc 1 526 1 view .LVU1790
 5598 005a 0D98     		ldr	r0, [sp, #52]
 5599 005c 25B0     		add	sp, sp, #148
 5600              	.LCFI59:
 5601              		.cfi_remember_state
 5602              		.cfi_def_cfa_offset 36
 5603              		@ sp needed
 5604 005e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5605              	.LVL668:
 5606              	.L427:
 5607              	.LCFI60:
 5608              		.cfi_restore_state
 492:System/storage/Storage.c **** 
 5609              		.loc 1 492 9 is_stmt 1 view .LVU1791
 492:System/storage/Storage.c **** 
 5610              		.loc 1 492 16 is_stmt 0 view .LVU1792
 5611 0062 4522     		movs	r2, #69
 5612 0064 0021     		movs	r1, #0
 5613 0066 0D98     		ldr	r0, [sp, #52]
 5614              	.LVL669:
 492:System/storage/Storage.c **** 
 5615              		.loc 1 492 16 view .LVU1793
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 166


 5616 0068 FFF7FEFF 		bl	memset
 5617              	.LVL670:
 5618 006c F5E7     		b	.L423
 5619              	.LVL671:
 5620              	.L440:
 5621              	.LBB37:
 499:System/storage/Storage.c ****     
 5622              		.loc 1 499 13 is_stmt 1 view .LVU1794
 499:System/storage/Storage.c ****     
 5623              		.loc 1 499 20 is_stmt 0 view .LVU1795
 5624 006e 4522     		movs	r2, #69
 5625 0070 12A9     		add	r1, sp, #72
 5626 0072 0D98     		ldr	r0, [sp, #52]
 5627 0074 FFF7FEFF 		bl	memcpy
 5628              	.LVL672:
 5629 0078 EFE7     		b	.L423
 5630              	.LVL673:
 5631              	.L431:
 5632              	.LBB35:
 503:System/storage/Storage.c ****         {
 5633              		.loc 1 503 114 is_stmt 1 discriminator 2 view .LVU1796
 503:System/storage/Storage.c ****         {
 5634              		.loc 1 503 121 is_stmt 0 discriminator 2 view .LVU1797
 5635 007a 0134     		adds	r4, r4, #1
 5636              	.LVL674:
 503:System/storage/Storage.c ****         {
 5637              		.loc 1 503 121 discriminator 2 view .LVU1798
 5638 007c A4B2     		uxth	r4, r4
 5639              	.LVL675:
 5640              	.L430:
 503:System/storage/Storage.c ****         {
 5641              		.loc 1 503 35 is_stmt 1 discriminator 1 view .LVU1799
 503:System/storage/Storage.c ****         {
 5642              		.loc 1 503 51 is_stmt 0 discriminator 1 view .LVU1800
 5643 007e 2B69     		ldr	r3, [r5, #16]	@ unaligned
 503:System/storage/Storage.c ****         {
 5644              		.loc 1 503 69 discriminator 1 view .LVU1801
 5645 0080 EA68     		ldr	r2, [r5, #12]	@ unaligned
 503:System/storage/Storage.c ****         {
 5646              		.loc 1 503 62 discriminator 1 view .LVU1802
 5647 0082 B3FBF2F3 		udiv	r3, r3, r2
 503:System/storage/Storage.c ****         {
 5648              		.loc 1 503 9 discriminator 1 view .LVU1803
 5649 0086 B4EB931F 		cmp	r4, r3, lsr #6
 5650 008a 52D2     		bcs	.L438
 505:System/storage/Storage.c **** 
 5651              		.loc 1 505 13 is_stmt 1 view .LVU1804
 505:System/storage/Storage.c **** 
 5652              		.loc 1 505 32 is_stmt 0 view .LVU1805
 5653 008c 4FEA8418 		lsl	r8, r4, #6
 505:System/storage/Storage.c **** 
 5654              		.loc 1 505 20 view .LVU1806
 5655 0090 374F     		ldr	r7, .L441+8
 5656 0092 07EB8416 		add	r6, r7, r4, lsl #6
 5657              	.LVL676:
 507:System/storage/Storage.c ****                 (p_item->end_tag == STORAGE_ITEM_END_TAG) && \
 5658              		.loc 1 507 13 is_stmt 1 view .LVU1807
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 167


 507:System/storage/Storage.c ****                 (p_item->end_tag == STORAGE_ITEM_END_TAG) && \
 5659              		.loc 1 507 24 is_stmt 0 view .LVU1808
 5660 0096 18F80730 		ldrb	r3, [r8, r7]	@ zero_extendqisi2
 507:System/storage/Storage.c ****                 (p_item->end_tag == STORAGE_ITEM_END_TAG) && \
 5661              		.loc 1 507 16 view .LVU1809
 5662 009a AA2B     		cmp	r3, #170
 5663 009c EDD1     		bne	.L431
 508:System/storage/Storage.c ****                 (memcmp(p_item->name, name, strlen(name)) == 0))
 5664              		.loc 1 508 24 discriminator 1 view .LVU1810
 5665 009e 96F83F30 		ldrb	r3, [r6, #63]	@ zero_extendqisi2
 507:System/storage/Storage.c ****                 (p_item->end_tag == STORAGE_ITEM_END_TAG) && \
 5666              		.loc 1 507 61 discriminator 1 view .LVU1811
 5667 00a2 BB2B     		cmp	r3, #187
 5668 00a4 E9D1     		bne	.L431
 509:System/storage/Storage.c ****             {
 5669              		.loc 1 509 31 view .LVU1812
 5670 00a6 06F10209 		add	r9, r6, #2
 509:System/storage/Storage.c ****             {
 5671              		.loc 1 509 18 view .LVU1813
 5672 00aa 5046     		mov	r0, r10
 5673 00ac FFF7FEFF 		bl	strlen
 5674              	.LVL677:
 5675 00b0 0246     		mov	r2, r0
 5676 00b2 5146     		mov	r1, r10
 5677 00b4 4846     		mov	r0, r9
 5678 00b6 FFF7FEFF 		bl	memcmp
 5679              	.LVL678:
 508:System/storage/Storage.c ****                 (memcmp(p_item->name, name, strlen(name)) == 0))
 5680              		.loc 1 508 59 view .LVU1814
 5681 00ba 0028     		cmp	r0, #0
 5682 00bc DDD1     		bne	.L431
 511:System/storage/Storage.c ****                 {
 5683              		.loc 1 511 17 is_stmt 1 view .LVU1815
 511:System/storage/Storage.c ****                 {
 5684              		.loc 1 511 21 is_stmt 0 view .LVU1816
 5685 00be 58F80790 		ldr	r9, [r8, r7]	@ unaligned
 5686 00c2 7368     		ldr	r3, [r6, #4]	@ unaligned
 5687 00c4 0F93     		str	r3, [sp, #60]
 5688 00c6 B368     		ldr	r3, [r6, #8]	@ unaligned
 5689 00c8 1093     		str	r3, [sp, #64]
 5690 00ca F368     		ldr	r3, [r6, #12]	@ unaligned
 5691 00cc 1193     		str	r3, [sp, #68]
 5692 00ce 06F11007 		add	r7, r6, #16
 5693 00d2 EE46     		mov	lr, sp
 5694 00d4 06F14008 		add	r8, r6, #64
 5695              	.L432:
 5696 00d8 F446     		mov	ip, lr
 5697 00da 3868     		ldr	r0, [r7]	@ unaligned
 5698 00dc 7968     		ldr	r1, [r7, #4]	@ unaligned
 5699 00de BA68     		ldr	r2, [r7, #8]	@ unaligned
 5700 00e0 FB68     		ldr	r3, [r7, #12]	@ unaligned
 5701 00e2 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 5702 00e6 1037     		adds	r7, r7, #16
 5703 00e8 E646     		mov	lr, ip
 5704 00ea 4745     		cmp	r7, r8
 5705 00ec F4D1     		bne	.L432
 5706 00ee 4846     		mov	r0, r9
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 168


 5707 00f0 0F99     		ldr	r1, [sp, #60]
 5708 00f2 109A     		ldr	r2, [sp, #64]
 5709 00f4 119B     		ldr	r3, [sp, #68]
 5710 00f6 FFF7FEFF 		bl	Storage_Compare_ItemSlot_CRC
 5711              	.LVL679:
 511:System/storage/Storage.c ****                 {
 5712              		.loc 1 511 20 view .LVU1817
 5713 00fa 0028     		cmp	r0, #0
 5714 00fc BDD0     		beq	.L431
 513:System/storage/Storage.c ****                     ItemSearch.item_index = item_i;
 5715              		.loc 1 513 21 is_stmt 1 view .LVU1818
 513:System/storage/Storage.c ****                     ItemSearch.item_index = item_i;
 5716              		.loc 1 513 42 is_stmt 0 view .LVU1819
 5717 00fe 0E9B     		ldr	r3, [sp, #56]
 5718 0100 1293     		str	r3, [sp, #72]
 514:System/storage/Storage.c ****                     ItemSearch.item = *p_item;
 5719              		.loc 1 514 21 is_stmt 1 view .LVU1820
 514:System/storage/Storage.c ****                     ItemSearch.item = *p_item;
 5720              		.loc 1 514 43 is_stmt 0 view .LVU1821
 5721 0102 8DF84C40 		strb	r4, [sp, #76]
 515:System/storage/Storage.c ****                     return ItemSearch;
 5722              		.loc 1 515 21 is_stmt 1 view .LVU1822
 515:System/storage/Storage.c ****                     return ItemSearch;
 5723              		.loc 1 515 37 is_stmt 0 view .LVU1823
 5724 0106 3346     		mov	r3, r6
 5725 0108 0DF14D02 		add	r2, sp, #77
 5726 010c 4036     		adds	r6, r6, #64
 5727              	.LVL680:
 5728              	.L433:
 515:System/storage/Storage.c ****                     return ItemSearch;
 5729              		.loc 1 515 37 view .LVU1824
 5730 010e 1D68     		ldr	r5, [r3]	@ unaligned
 5731 0110 5C68     		ldr	r4, [r3, #4]	@ unaligned
 5732 0112 9868     		ldr	r0, [r3, #8]	@ unaligned
 5733 0114 D968     		ldr	r1, [r3, #12]	@ unaligned
 5734 0116 1560     		str	r5, [r2]	@ unaligned
 5735 0118 5460     		str	r4, [r2, #4]	@ unaligned
 5736 011a 9060     		str	r0, [r2, #8]	@ unaligned
 5737 011c D160     		str	r1, [r2, #12]	@ unaligned
 5738 011e 1033     		adds	r3, r3, #16
 5739 0120 1032     		adds	r2, r2, #16
 5740 0122 B342     		cmp	r3, r6
 5741 0124 F3D1     		bne	.L433
 516:System/storage/Storage.c ****                 }
 5742              		.loc 1 516 21 is_stmt 1 view .LVU1825
 516:System/storage/Storage.c ****                 }
 5743              		.loc 1 516 28 is_stmt 0 view .LVU1826
 5744 0126 4522     		movs	r2, #69
 5745 0128 12A9     		add	r1, sp, #72
 5746 012a 0D98     		ldr	r0, [sp, #52]
 5747 012c FFF7FEFF 		bl	memcpy
 5748              	.LVL681:
 5749 0130 93E7     		b	.L423
 5750              	.LVL682:
 5751              	.L438:
 516:System/storage/Storage.c ****                 }
 5752              		.loc 1 516 28 view .LVU1827
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 169


 5753              	.LBE35:
 522:System/storage/Storage.c ****     }
 5754              		.loc 1 522 9 is_stmt 1 discriminator 2 view .LVU1828
 522:System/storage/Storage.c ****     }
 5755              		.loc 1 522 18 is_stmt 0 discriminator 2 view .LVU1829
 5756 0132 0E9A     		ldr	r2, [sp, #56]
 5757 0134 1A44     		add	r2, r2, r3
 5758 0136 0E92     		str	r2, [sp, #56]
 5759              	.LVL683:
 496:System/storage/Storage.c ****     {
 5760              		.loc 1 496 54 is_stmt 1 discriminator 2 view .LVU1830
 496:System/storage/Storage.c ****     {
 5761              		.loc 1 496 60 is_stmt 0 discriminator 2 view .LVU1831
 5762 0138 0BF10103 		add	r3, fp, #1
 5763 013c 5FFA83FB 		uxtb	fp, r3
 5764              	.LVL684:
 5765              	.L429:
 496:System/storage/Storage.c ****     {
 5766              		.loc 1 496 29 is_stmt 1 discriminator 1 view .LVU1832
 496:System/storage/Storage.c ****     {
 5767              		.loc 1 496 42 is_stmt 0 discriminator 1 view .LVU1833
 5768 0140 EB68     		ldr	r3, [r5, #12]	@ unaligned
 496:System/storage/Storage.c ****     {
 5769              		.loc 1 496 5 discriminator 1 view .LVU1834
 5770 0142 9B45     		cmp	fp, r3
 5771 0144 0AD2     		bcs	.L439
 498:System/storage/Storage.c ****             return ItemSearch;
 5772              		.loc 1 498 9 is_stmt 1 view .LVU1835
 498:System/storage/Storage.c ****             return ItemSearch;
 5773              		.loc 1 498 75 is_stmt 0 view .LVU1836
 5774 0146 2A69     		ldr	r2, [r5, #16]	@ unaligned
 498:System/storage/Storage.c ****             return ItemSearch;
 5775              		.loc 1 498 14 view .LVU1837
 5776 0148 B2FBF3F2 		udiv	r2, r2, r3
 5777 014c 0849     		ldr	r1, .L441+8
 5778 014e 0E98     		ldr	r0, [sp, #56]
 5779 0150 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 5780              	.LVL685:
 498:System/storage/Storage.c ****             return ItemSearch;
 5781              		.loc 1 498 12 view .LVU1838
 5782 0154 0028     		cmp	r0, #0
 5783 0156 8AD0     		beq	.L440
 5784              	.LBB36:
 503:System/storage/Storage.c ****         {
 5785              		.loc 1 503 23 view .LVU1839
 5786 0158 0024     		movs	r4, #0
 5787 015a 90E7     		b	.L430
 5788              	.L439:
 5789              	.LBE36:
 5790              	.LBE37:
 525:System/storage/Storage.c **** }
 5791              		.loc 1 525 5 is_stmt 1 view .LVU1840
 525:System/storage/Storage.c **** }
 5792              		.loc 1 525 12 is_stmt 0 view .LVU1841
 5793 015c 4522     		movs	r2, #69
 5794 015e 12A9     		add	r1, sp, #72
 5795 0160 0D98     		ldr	r0, [sp, #52]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 170


 5796 0162 FFF7FEFF 		bl	memcpy
 5797              	.LVL686:
 5798 0166 78E7     		b	.L423
 5799              	.L442:
 5800              		.align	2
 5801              	.L441:
 5802 0168 00000000 		.word	.LANCHOR0
 5803 016c 16000000 		.word	.LANCHOR0+22
 5804 0170 00000000 		.word	page_data_tmp
 5805              		.cfi_endproc
 5806              	.LFE151:
 5808              		.section	.rodata.Storage_Build_StorageInfo.str1.4,"aMS",%progbits,1
 5809              		.align	2
 5810              	.LC5:
 5811 0000 5B457874 		.ascii	"[ExternalFlash Storage]\000"
 5811      65726E61 
 5811      6C466C61 
 5811      73682053 
 5811      746F7261 
 5812              		.section	.text.Storage_Build_StorageInfo,"ax",%progbits
 5813              		.align	1
 5814              		.syntax unified
 5815              		.thumb
 5816              		.thumb_func
 5818              	Storage_Build_StorageInfo:
 5819              	.LFB162:
1473:System/storage/Storage.c ****     uint32_t page_num = 0;
 5820              		.loc 1 1473 1 is_stmt 1 view -0
 5821              		.cfi_startproc
 5822              		@ args = 0, pretend = 0, frame = 312
 5823              		@ frame_needed = 0, uses_anonymous_args = 0
 5824 0000 70B5     		push	{r4, r5, r6, lr}
 5825              	.LCFI61:
 5826              		.cfi_def_cfa_offset 16
 5827              		.cfi_offset 4, -16
 5828              		.cfi_offset 5, -12
 5829              		.cfi_offset 6, -8
 5830              		.cfi_offset 14, -4
 5831 0002 CEB0     		sub	sp, sp, #312
 5832              	.LCFI62:
 5833              		.cfi_def_cfa_offset 328
1474:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info;
 5834              		.loc 1 1474 5 view .LVU1843
 5835              	.LVL687:
1475:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info_Rx;
 5836              		.loc 1 1475 5 view .LVU1844
1476:System/storage/Storage.c ****     uint32_t addr_offset = 0;
 5837              		.loc 1 1476 5 view .LVU1845
1477:System/storage/Storage.c ****     uint32_t BaseInfo_start_addr = 0;
 5838              		.loc 1 1477 5 view .LVU1846
1478:System/storage/Storage.c ****     uint32_t tab_addr_offset = 0;
 5839              		.loc 1 1478 5 view .LVU1847
1479:System/storage/Storage.c ****     uint16_t crc = 0;
 5840              		.loc 1 1479 5 view .LVU1848
1480:System/storage/Storage.c ****     uint32_t remain_data_sec_size = 0;
 5841              		.loc 1 1480 5 view .LVU1849
1481:System/storage/Storage.c ****     uint32_t data_sec_size = 0;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 171


 5842              		.loc 1 1481 5 view .LVU1850
1482:System/storage/Storage.c **** 
 5843              		.loc 1 1482 5 view .LVU1851
1484:System/storage/Storage.c ****     memset(&Info_Rx, 0, sizeof(Storage_FlashInfo_TypeDef));
 5844              		.loc 1 1484 5 view .LVU1852
 5845 0004 9C25     		movs	r5, #156
 5846 0006 2A46     		mov	r2, r5
 5847 0008 0021     		movs	r1, #0
 5848 000a 0DEB0500 		add	r0, sp, r5
 5849 000e FFF7FEFF 		bl	memset
 5850              	.LVL688:
1485:System/storage/Storage.c ****     memcpy(Info.tag, EXTERNAL_STORAGE_PAGE_TAG, EXTERNAL_PAGE_TAG_SIZE);
 5851              		.loc 1 1485 5 view .LVU1853
 5852 0012 2A46     		mov	r2, r5
 5853 0014 0021     		movs	r1, #0
 5854 0016 6846     		mov	r0, sp
 5855 0018 FFF7FEFF 		bl	memset
 5856              	.LVL689:
1486:System/storage/Storage.c **** 
 5857              		.loc 1 1486 5 view .LVU1854
 5858 001c 0DEB050C 		add	ip, sp, r5
 5859 0020 424C     		ldr	r4, .L451
 5860 0022 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 5861 0024 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 5862 0028 94E80300 		ldm	r4, {r0, r1}
 5863 002c 4CF8040B 		str	r0, [ip], #4
 5864 0030 2CF8021B 		strh	r1, [ip], #2	@ movhi
 5865 0034 090C     		lsrs	r1, r1, #16
 5866 0036 8CF80010 		strb	r1, [ip]
1488:System/storage/Storage.c ****     Info.base_addr = Storage_Monitor.external_info.base_addr;
 5867              		.loc 1 1488 5 view .LVU1855
1488:System/storage/Storage.c ****     Info.base_addr = Storage_Monitor.external_info.base_addr;
 5868              		.loc 1 1488 21 is_stmt 0 view .LVU1856
 5869 003a 4FF40023 		mov	r3, #524288
 5870 003e 3093     		str	r3, [sp, #192]
1489:System/storage/Storage.c ****     
 5871              		.loc 1 1489 5 is_stmt 1 view .LVU1857
1489:System/storage/Storage.c ****     
 5872              		.loc 1 1489 51 is_stmt 0 view .LVU1858
 5873 0040 3B48     		ldr	r0, .L451+4
 5874 0042 D0F83630 		ldr	r3, [r0, #54]	@ unaligned
1489:System/storage/Storage.c ****     
 5875              		.loc 1 1489 20 view .LVU1859
 5876 0046 2F93     		str	r3, [sp, #188]
1491:System/storage/Storage.c ****     page_num = Storage_ExtFlash_Max_Capacity / (ExtFlash_Storage_TabSize / StorageItem_Size);
 5877              		.loc 1 1491 5 is_stmt 1 view .LVU1860
 5878              	.LVL690:
1492:System/storage/Storage.c ****     if (page_num == 0)
 5879              		.loc 1 1492 5 view .LVU1861
1493:System/storage/Storage.c ****         return false;
 5880              		.loc 1 1493 5 view .LVU1862
1496:System/storage/Storage.c ****     Info.boot_sec.tab_size = BootSection_Block_Size * BootTab_Num;
 5881              		.loc 1 1496 5 view .LVU1863
1496:System/storage/Storage.c ****     Info.boot_sec.tab_size = BootSection_Block_Size * BootTab_Num;
 5882              		.loc 1 1496 28 is_stmt 0 view .LVU1864
 5883 0048 4FF48066 		mov	r6, #1024
 5884 004c 3396     		str	r6, [sp, #204]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 172


1497:System/storage/Storage.c ****     Info.boot_sec.page_num = BootTab_Num;
 5885              		.loc 1 1497 5 is_stmt 1 view .LVU1865
1497:System/storage/Storage.c ****     Info.boot_sec.page_num = BootTab_Num;
 5886              		.loc 1 1497 28 is_stmt 0 view .LVU1866
 5887 004e 4FF48053 		mov	r3, #4096
 5888              	.LVL691:
1497:System/storage/Storage.c ****     Info.boot_sec.page_num = BootTab_Num;
 5889              		.loc 1 1497 28 view .LVU1867
 5890 0052 3793     		str	r3, [sp, #220]
1498:System/storage/Storage.c ****     Info.boot_sec.data_sec_size = ExternalFlash_BootDataSec_Size;
 5891              		.loc 1 1498 5 is_stmt 1 view .LVU1868
1498:System/storage/Storage.c ****     Info.boot_sec.data_sec_size = ExternalFlash_BootDataSec_Size;
 5892              		.loc 1 1498 28 is_stmt 0 view .LVU1869
 5893 0054 0123     		movs	r3, #1
 5894 0056 3693     		str	r3, [sp, #216]
1499:System/storage/Storage.c ****     Info.boot_sec.para_size = 0;
 5895              		.loc 1 1499 5 is_stmt 1 view .LVU1870
1499:System/storage/Storage.c ****     Info.boot_sec.para_size = 0;
 5896              		.loc 1 1499 33 is_stmt 0 view .LVU1871
 5897 0058 4FF40043 		mov	r3, #32768
 5898 005c 3593     		str	r3, [sp, #212]
1500:System/storage/Storage.c ****     Info.boot_sec.para_num = 0;
 5899              		.loc 1 1500 5 is_stmt 1 view .LVU1872
1501:System/storage/Storage.c ****     tab_addr_offset = (Info.boot_sec.tab_addr + Info.boot_sec.tab_size) + Storage_ReserveBlock_Size
 5900              		.loc 1 1501 5 view .LVU1873
1502:System/storage/Storage.c **** 
 5901              		.loc 1 1502 5 view .LVU1874
 5902              	.LVL692:
1504:System/storage/Storage.c ****     Info.sys_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
 5903              		.loc 1 1504 5 view .LVU1875
1504:System/storage/Storage.c ****     Info.sys_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
 5904              		.loc 1 1504 27 is_stmt 0 view .LVU1876
 5905 005e 4FF4A453 		mov	r3, #5248
 5906 0062 3C93     		str	r3, [sp, #240]
1505:System/storage/Storage.c ****     Info.sys_sec.data_sec_size = ExternalFlash_SysDataSec_Size;
 5907              		.loc 1 1505 5 is_stmt 1 view .LVU1877
1505:System/storage/Storage.c ****     Info.sys_sec.data_sec_size = ExternalFlash_SysDataSec_Size;
 5908              		.loc 1 1505 27 is_stmt 0 view .LVU1878
 5909 0064 4FF48033 		mov	r3, #65536
 5910 0068 4093     		str	r3, [sp, #256]
1506:System/storage/Storage.c ****     Info.sys_sec.page_num = page_num;
 5911              		.loc 1 1506 5 is_stmt 1 view .LVU1879
1506:System/storage/Storage.c ****     Info.sys_sec.page_num = page_num;
 5912              		.loc 1 1506 32 is_stmt 0 view .LVU1880
 5913 006a 3E93     		str	r3, [sp, #248]
1507:System/storage/Storage.c ****     Info.sys_sec.para_size = 0;
 5914              		.loc 1 1507 5 is_stmt 1 view .LVU1881
1507:System/storage/Storage.c ****     Info.sys_sec.para_size = 0;
 5915              		.loc 1 1507 27 is_stmt 0 view .LVU1882
 5916 006c 1022     		movs	r2, #16
 5917 006e 3F92     		str	r2, [sp, #252]
1508:System/storage/Storage.c ****     Info.sys_sec.para_num = 0;
 5918              		.loc 1 1508 5 is_stmt 1 view .LVU1883
1509:System/storage/Storage.c ****     tab_addr_offset += Info.sys_sec.tab_size + Storage_ReserveBlock_Size;
 5919              		.loc 1 1509 5 view .LVU1884
1510:System/storage/Storage.c ****         
 5920              		.loc 1 1510 5 view .LVU1885
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 173


 5921              	.LVL693:
1512:System/storage/Storage.c ****     Info.user_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
 5922              		.loc 1 1512 5 view .LVU1886
1512:System/storage/Storage.c ****     Info.user_sec.tab_size = page_num * ExtFlash_Storage_TabSize;
 5923              		.loc 1 1512 28 is_stmt 0 view .LVU1887
 5924 0070 3049     		ldr	r1, .L451+8
 5925 0072 4591     		str	r1, [sp, #276]
1513:System/storage/Storage.c ****     Info.user_sec.data_sec_size = ExternalFlash_UserDataSec_Size;
 5926              		.loc 1 1513 5 is_stmt 1 view .LVU1888
1513:System/storage/Storage.c ****     Info.user_sec.data_sec_size = ExternalFlash_UserDataSec_Size;
 5927              		.loc 1 1513 28 is_stmt 0 view .LVU1889
 5928 0074 4993     		str	r3, [sp, #292]
1514:System/storage/Storage.c ****     Info.user_sec.page_num = page_num;
 5929              		.loc 1 1514 5 is_stmt 1 view .LVU1890
1514:System/storage/Storage.c ****     Info.user_sec.page_num = page_num;
 5930              		.loc 1 1514 33 is_stmt 0 view .LVU1891
 5931 0076 4793     		str	r3, [sp, #284]
1515:System/storage/Storage.c ****     Info.user_sec.para_size = 0;
 5932              		.loc 1 1515 5 is_stmt 1 view .LVU1892
1515:System/storage/Storage.c ****     Info.user_sec.para_size = 0;
 5933              		.loc 1 1515 28 is_stmt 0 view .LVU1893
 5934 0078 4892     		str	r2, [sp, #288]
1516:System/storage/Storage.c ****     Info.user_sec.para_num = 0;
 5935              		.loc 1 1516 5 is_stmt 1 view .LVU1894
1517:System/storage/Storage.c ****     tab_addr_offset += Info.user_sec.tab_size + Storage_ReserveBlock_Size;
 5936              		.loc 1 1517 5 view .LVU1895
1518:System/storage/Storage.c ****     
 5937              		.loc 1 1518 5 view .LVU1896
 5938              	.LVL694:
1521:System/storage/Storage.c ****         return false;
 5939              		.loc 1 1521 5 view .LVU1897
1524:System/storage/Storage.c ****     data_sec_size += Info.boot_sec.data_sec_size + Storage_ReserveBlock_Size;
 5940              		.loc 1 1524 5 view .LVU1898
1525:System/storage/Storage.c ****     data_sec_size += Info.sys_sec.data_sec_size + Storage_ReserveBlock_Size;
 5941              		.loc 1 1525 5 view .LVU1899
1526:System/storage/Storage.c ****     data_sec_size += Info.user_sec.data_sec_size + Storage_ReserveBlock_Size;
 5942              		.loc 1 1526 5 view .LVU1900
1527:System/storage/Storage.c **** 
 5943              		.loc 1 1527 5 view .LVU1901
1529:System/storage/Storage.c ****         return false;
 5944              		.loc 1 1529 5 view .LVU1902
1532:System/storage/Storage.c ****     Info.data_sec_size = Info.boot_sec.data_sec_size + Info.sys_sec.data_sec_size + Info.user_sec.d
 5945              		.loc 1 1532 5 view .LVU1903
1532:System/storage/Storage.c ****     Info.data_sec_size = Info.boot_sec.data_sec_size + Info.sys_sec.data_sec_size + Info.user_sec.d
 5946              		.loc 1 1532 22 is_stmt 0 view .LVU1904
 5947 007a 2F4B     		ldr	r3, .L451+12
 5948 007c 3193     		str	r3, [sp, #196]
1533:System/storage/Storage.c **** 
 5949              		.loc 1 1533 5 is_stmt 1 view .LVU1905
1533:System/storage/Storage.c **** 
 5950              		.loc 1 1533 24 is_stmt 0 view .LVU1906
 5951 007e 4FF42033 		mov	r3, #163840
 5952 0082 3293     		str	r3, [sp, #200]
1536:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_BootDataSec_Size;
 5953              		.loc 1 1536 5 is_stmt 1 view .LVU1907
1536:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_BootDataSec_Size;
 5954              		.loc 1 1536 33 is_stmt 0 view .LVU1908
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 174


 5955 0084 A3F5D543 		sub	r3, r3, #27264
 5956 0088 3493     		str	r3, [sp, #208]
1537:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
 5957              		.loc 1 1537 5 is_stmt 1 view .LVU1909
 5958              	.LVL695:
1538:System/storage/Storage.c **** 
 5959              		.loc 1 1538 5 view .LVU1910
1540:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_SysDataSec_Size;
 5960              		.loc 1 1540 5 view .LVU1911
1540:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_SysDataSec_Size;
 5961              		.loc 1 1540 32 is_stmt 0 view .LVU1912
 5962 008a 2C4B     		ldr	r3, .L451+16
 5963 008c 3D93     		str	r3, [sp, #244]
1541:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
 5964              		.loc 1 1541 5 is_stmt 1 view .LVU1913
 5965              	.LVL696:
1542:System/storage/Storage.c **** 
 5966              		.loc 1 1542 5 view .LVU1914
1544:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_UserDataSec_Size;
 5967              		.loc 1 1544 5 view .LVU1915
1544:System/storage/Storage.c ****     tab_addr_offset += ExternalFlash_UserDataSec_Size;
 5968              		.loc 1 1544 33 is_stmt 0 view .LVU1916
 5969 008e 2C4B     		ldr	r3, .L451+20
 5970 0090 4693     		str	r3, [sp, #280]
1545:System/storage/Storage.c ****     tab_addr_offset += Storage_ReserveBlock_Size;
 5971              		.loc 1 1545 5 is_stmt 1 view .LVU1917
 5972              	.LVL697:
1546:System/storage/Storage.c **** 
 5973              		.loc 1 1546 5 view .LVU1918
1548:System/storage/Storage.c ****     addr_offset = BaseInfo_start_addr - Storage_Monitor.external_info.base_addr;
 5974              		.loc 1 1548 5 view .LVU1919
1548:System/storage/Storage.c ****     addr_offset = BaseInfo_start_addr - Storage_Monitor.external_info.base_addr;
 5975              		.loc 1 1548 35 is_stmt 0 view .LVU1920
 5976 0092 2A46     		mov	r2, r5
 5977 0094 0DEB0501 		add	r1, sp, r5
 5978 0098 1630     		adds	r0, r0, #22
 5979 009a FFF7FEFF 		bl	memcpy
 5980              	.LVL698:
1549:System/storage/Storage.c **** 
 5981              		.loc 1 1549 5 is_stmt 1 view .LVU1921
1552:System/storage/Storage.c **** 
 5982              		.loc 1 1552 5 view .LVU1922
 5983 009e 294C     		ldr	r4, .L451+24
 5984 00a0 3246     		mov	r2, r6
 5985 00a2 0021     		movs	r1, #0
 5986 00a4 2046     		mov	r0, r4
 5987 00a6 FFF7FEFF 		bl	memset
 5988              	.LVL699:
1555:System/storage/Storage.c ****         return false;
 5989              		.loc 1 1555 5 view .LVU1923
1555:System/storage/Storage.c ****         return false;
 5990              		.loc 1 1555 10 is_stmt 0 view .LVU1924
 5991 00aa 2A46     		mov	r2, r5
 5992 00ac 2146     		mov	r1, r4
 5993 00ae 0020     		movs	r0, #0
 5994 00b0 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 5995              	.LVL700:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 175


1555:System/storage/Storage.c ****         return false;
 5996              		.loc 1 1555 8 view .LVU1925
 5997 00b4 08B9     		cbnz	r0, .L448
 5998              	.LVL701:
 5999              	.L444:
1582:System/storage/Storage.c **** 
 6000              		.loc 1 1582 1 view .LVU1926
 6001 00b6 4EB0     		add	sp, sp, #312
 6002              	.LCFI63:
 6003              		.cfi_remember_state
 6004              		.cfi_def_cfa_offset 16
 6005              		@ sp needed
 6006 00b8 70BD     		pop	{r4, r5, r6, pc}
 6007              	.LVL702:
 6008              	.L448:
 6009              	.LCFI64:
 6010              		.cfi_restore_state
1559:System/storage/Storage.c ****     crc = Common_CRC16(page_data_tmp, Storage_InfoPageSize - sizeof(crc));
 6011              		.loc 1 1559 5 is_stmt 1 view .LVU1927
 6012 00ba 2A46     		mov	r2, r5
 6013 00bc 0DEB0501 		add	r1, sp, r5
 6014 00c0 2046     		mov	r0, r4
 6015 00c2 FFF7FEFF 		bl	memcpy
 6016              	.LVL703:
1560:System/storage/Storage.c ****     memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
 6017              		.loc 1 1560 5 view .LVU1928
1560:System/storage/Storage.c ****     memcpy(&page_data_tmp[Storage_InfoPageSize - sizeof(crc)], &crc, sizeof(crc));
 6018              		.loc 1 1560 11 is_stmt 0 view .LVU1929
 6019 00c6 40F2FE31 		movw	r1, #1022
 6020 00ca 2046     		mov	r0, r4
 6021 00cc FFF7FEFF 		bl	Common_CRC16
 6022              	.LVL704:
1561:System/storage/Storage.c **** 
 6023              		.loc 1 1561 5 is_stmt 1 view .LVU1930
 6024 00d0 A4F8FE03 		strh	r0, [r4, #1022]	@ movhi
1564:System/storage/Storage.c ****         return false;
 6025              		.loc 1 1564 5 view .LVU1931
1564:System/storage/Storage.c ****         return false;
 6026              		.loc 1 1564 10 is_stmt 0 view .LVU1932
 6027 00d4 3246     		mov	r2, r6
 6028 00d6 2146     		mov	r1, r4
 6029 00d8 0020     		movs	r0, #0
 6030              	.LVL705:
1564:System/storage/Storage.c ****         return false;
 6031              		.loc 1 1564 10 view .LVU1933
 6032 00da FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Write
 6033              	.LVL706:
1564:System/storage/Storage.c ****         return false;
 6034              		.loc 1 1564 8 view .LVU1934
 6035 00de 0028     		cmp	r0, #0
 6036 00e0 E9D0     		beq	.L444
1568:System/storage/Storage.c ****         return false;
 6037              		.loc 1 1568 5 is_stmt 1 view .LVU1935
1568:System/storage/Storage.c ****         return false;
 6038              		.loc 1 1568 10 is_stmt 0 view .LVU1936
 6039 00e2 2A46     		mov	r2, r5
 6040 00e4 2146     		mov	r1, r4
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 176


 6041 00e6 0020     		movs	r0, #0
 6042 00e8 FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 6043              	.LVL707:
1568:System/storage/Storage.c ****         return false;
 6044              		.loc 1 1568 8 view .LVU1937
 6045 00ec 0028     		cmp	r0, #0
 6046 00ee E2D0     		beq	.L444
1572:System/storage/Storage.c ****     if (memcmp(&Info_Rx, &Info, sizeof(Storage_FlashInfo_TypeDef)) != 0)
 6047              		.loc 1 1572 5 is_stmt 1 view .LVU1938
 6048 00f0 2A46     		mov	r2, r5
 6049 00f2 1449     		ldr	r1, .L451+24
 6050 00f4 6846     		mov	r0, sp
 6051 00f6 FFF7FEFF 		bl	memcpy
 6052              	.LVL708:
1573:System/storage/Storage.c ****         return false;
 6053              		.loc 1 1573 5 view .LVU1939
1573:System/storage/Storage.c ****         return false;
 6054              		.loc 1 1573 9 is_stmt 0 view .LVU1940
 6055 00fa 2A46     		mov	r2, r5
 6056 00fc 0DEB0501 		add	r1, sp, r5
 6057 0100 6846     		mov	r0, sp
 6058 0102 FFF7FEFF 		bl	memcmp
 6059              	.LVL709:
1573:System/storage/Storage.c ****         return false;
 6060              		.loc 1 1573 8 view .LVU1941
 6061 0106 08B1     		cbz	r0, .L449
1574:System/storage/Storage.c **** 
 6062              		.loc 1 1574 16 view .LVU1942
 6063 0108 0020     		movs	r0, #0
 6064 010a D4E7     		b	.L444
 6065              	.L449:
1576:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_Sys)  || \
 6066              		.loc 1 1576 5 is_stmt 1 view .LVU1943
1576:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_Sys)  || \
 6067              		.loc 1 1576 10 is_stmt 0 view .LVU1944
 6068 010c FFF7FEFF 		bl	Storage_Establish_Tab
 6069              	.LVL710:
1576:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_Sys)  || \
 6070              		.loc 1 1576 8 view .LVU1945
 6071 0110 08B9     		cbnz	r0, .L450
 6072              	.L445:
1579:System/storage/Storage.c **** 
 6073              		.loc 1 1579 9 is_stmt 1 view .LVU1946
1579:System/storage/Storage.c **** 
 6074              		.loc 1 1579 16 is_stmt 0 view .LVU1947
 6075 0112 0020     		movs	r0, #0
 6076 0114 CFE7     		b	.L444
 6077              	.L450:
1577:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_User))
 6078              		.loc 1 1577 10 discriminator 1 view .LVU1948
 6079 0116 0120     		movs	r0, #1
 6080 0118 FFF7FEFF 		bl	Storage_Establish_Tab
 6081              	.LVL711:
1576:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_Sys)  || \
 6082              		.loc 1 1576 43 discriminator 1 view .LVU1949
 6083 011c 0028     		cmp	r0, #0
 6084 011e F8D0     		beq	.L445
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 177


1578:System/storage/Storage.c ****         return false;
 6085              		.loc 1 1578 10 view .LVU1950
 6086 0120 0220     		movs	r0, #2
 6087 0122 FFF7FEFF 		bl	Storage_Establish_Tab
 6088              	.LVL712:
1577:System/storage/Storage.c ****         !Storage_Establish_Tab(Para_User))
 6089              		.loc 1 1577 43 view .LVU1951
 6090 0126 0028     		cmp	r0, #0
 6091 0128 C5D1     		bne	.L444
 6092 012a F2E7     		b	.L445
 6093              	.L452:
 6094              		.align	2
 6095              	.L451:
 6096 012c 00000000 		.word	.LC5
 6097 0130 00000000 		.word	.LANCHOR0
 6098 0134 00150100 		.word	70912
 6099 0138 00690300 		.word	223488
 6100 013c 00960200 		.word	169472
 6101 0140 80960300 		.word	235136
 6102 0144 00000000 		.word	page_data_tmp
 6103              		.cfi_endproc
 6104              	.LFE162:
 6106              		.section	.text.Storage_Get_StorageInfo,"ax",%progbits
 6107              		.align	1
 6108              		.syntax unified
 6109              		.thumb
 6110              		.thumb_func
 6112              	Storage_Get_StorageInfo:
 6113              	.LFB149:
 394:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef *p_Info = NULL;
 6114              		.loc 1 394 1 is_stmt 1 view -0
 6115              		.cfi_startproc
 6116              		@ args = 0, pretend = 0, frame = 208
 6117              		@ frame_needed = 0, uses_anonymous_args = 0
 6118 0000 10B5     		push	{r4, lr}
 6119              	.LCFI65:
 6120              		.cfi_def_cfa_offset 8
 6121              		.cfi_offset 4, -8
 6122              		.cfi_offset 14, -4
 6123 0002 B4B0     		sub	sp, sp, #208
 6124              	.LCFI66:
 6125              		.cfi_def_cfa_offset 216
 395:System/storage/Storage.c ****     Storage_FlashInfo_TypeDef Info_r;
 6126              		.loc 1 395 5 view .LVU1953
 6127              	.LVL713:
 396:System/storage/Storage.c ****     uint16_t crc = 0;
 6128              		.loc 1 396 5 view .LVU1954
 397:System/storage/Storage.c ****     uint16_t crc_read = 0;
 6129              		.loc 1 397 5 view .LVU1955
 398:System/storage/Storage.c ****     char flash_tag[INTERNAL_PAGE_TAG_SIZE + EXTERNAL_PAGE_TAG_SIZE];
 6130              		.loc 1 398 5 view .LVU1956
 399:System/storage/Storage.c **** 
 6131              		.loc 1 399 5 view .LVU1957
 401:System/storage/Storage.c ****     memset(&Info_r, 0, sizeof(Storage_FlashInfo_TypeDef));
 6132              		.loc 1 401 5 view .LVU1958
 6133 0004 2E22     		movs	r2, #46
 6134 0006 0021     		movs	r1, #0
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 178


 6135 0008 01A8     		add	r0, sp, #4
 6136              	.LVL714:
 401:System/storage/Storage.c ****     memset(&Info_r, 0, sizeof(Storage_FlashInfo_TypeDef));
 6137              		.loc 1 401 5 is_stmt 0 view .LVU1959
 6138 000a FFF7FEFF 		bl	memset
 6139              	.LVL715:
 402:System/storage/Storage.c **** 
 6140              		.loc 1 402 5 is_stmt 1 view .LVU1960
 6141 000e 9C22     		movs	r2, #156
 6142 0010 0021     		movs	r1, #0
 6143 0012 0DA8     		add	r0, sp, #52
 6144 0014 FFF7FEFF 		bl	memset
 6145              	.LVL716:
 404:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 6146              		.loc 1 404 5 view .LVU1961
 6147 0018 0DF1040C 		add	ip, sp, #4
 6148              	.LVL717:
 404:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 6149              		.loc 1 404 5 is_stmt 0 view .LVU1962
 6150 001c 314C     		ldr	r4, .L465
 6151 001e 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 6152 0020 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 6153              	.LVL718:
 404:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 6154              		.loc 1 404 5 view .LVU1963
 6155 0024 94E80300 		ldm	r4, {r0, r1}
 6156 0028 4CF8040B 		str	r0, [ip], #4
 6157              	.LVL719:
 404:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 6158              		.loc 1 404 5 view .LVU1964
 6159 002c 2CF8021B 		strh	r1, [ip], #2	@ movhi
 6160              	.LVL720:
 404:System/storage/Storage.c ****     p_Info = &Storage_Monitor.external_info;
 6161              		.loc 1 404 5 view .LVU1965
 6162 0030 090C     		lsrs	r1, r1, #16
 6163 0032 8CF80010 		strb	r1, [ip]
 405:System/storage/Storage.c ****     
 6164              		.loc 1 405 5 is_stmt 1 view .LVU1966
 6165              	.LVL721:
 407:System/storage/Storage.c ****     {
 6166              		.loc 1 407 5 view .LVU1967
 407:System/storage/Storage.c ****     {
 6167              		.loc 1 407 9 is_stmt 0 view .LVU1968
 6168 0036 4FF48052 		mov	r2, #4096
 6169 003a 2B49     		ldr	r1, .L465+4
 6170 003c 0020     		movs	r0, #0
 6171 003e FFF7FEFF 		bl	Storage_ExtFlash_ParaSec_Read
 6172              	.LVL722:
 407:System/storage/Storage.c ****     {
 6173              		.loc 1 407 8 view .LVU1969
 6174 0042 0446     		mov	r4, r0
 6175 0044 0028     		cmp	r0, #0
 6176 0046 3DD0     		beq	.L454
 410:System/storage/Storage.c ****         
 6177              		.loc 1 410 9 is_stmt 1 view .LVU1970
 410:System/storage/Storage.c ****         
 6178              		.loc 1 410 16 is_stmt 0 view .LVU1971
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 179


 6179 0048 9C22     		movs	r2, #156
 6180 004a 2749     		ldr	r1, .L465+4
 6181 004c 0DA8     		add	r0, sp, #52
 6182 004e FFF7FEFF 		bl	memcpy
 6183              	.LVL723:
 414:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 6184              		.loc 1 414 9 is_stmt 1 view .LVU1972
 414:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 6185              		.loc 1 414 14 is_stmt 0 view .LVU1973
 6186 0052 01A9     		add	r1, sp, #4
 6187              	.LVL724:
 414:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 6188              		.loc 1 414 14 view .LVU1974
 6189 0054 0DA8     		add	r0, sp, #52
 6190 0056 FFF7FEFF 		bl	strcmp
 6191              	.LVL725:
 414:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 6192              		.loc 1 414 12 view .LVU1975
 6193 005a 90BB     		cbnz	r0, .L455
 415:System/storage/Storage.c ****             (Info_r.sys_sec.tab_addr == 0) || \
 6194              		.loc 1 415 29 discriminator 1 view .LVU1976
 6195 005c 199B     		ldr	r3, [sp, #100]
 414:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == 0) || \
 6196              		.loc 1 414 64 discriminator 1 view .LVU1977
 6197 005e A3B3     		cbz	r3, .L456
 416:System/storage/Storage.c ****             (Info_r.user_sec.tab_addr == 0) || \
 6198              		.loc 1 416 28 view .LVU1978
 6199 0060 229A     		ldr	r2, [sp, #136]
 415:System/storage/Storage.c ****             (Info_r.sys_sec.tab_addr == 0) || \
 6200              		.loc 1 415 45 view .LVU1979
 6201 0062 A2B3     		cbz	r2, .L457
 417:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == Info_r.sys_sec.tab_addr) || \
 6202              		.loc 1 417 29 view .LVU1980
 6203 0064 2B99     		ldr	r1, [sp, #172]
 416:System/storage/Storage.c ****             (Info_r.user_sec.tab_addr == 0) || \
 6204              		.loc 1 416 44 view .LVU1981
 6205 0066 A1B3     		cbz	r1, .L458
 417:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == Info_r.sys_sec.tab_addr) || \
 6206              		.loc 1 417 45 view .LVU1982
 6207 0068 9342     		cmp	r3, r2
 6208 006a 34D0     		beq	.L459
 418:System/storage/Storage.c ****             (Info_r.boot_sec.tab_addr == Info_r.user_sec.tab_addr) || \
 6209              		.loc 1 418 67 view .LVU1983
 6210 006c 8B42     		cmp	r3, r1
 6211 006e 34D0     		beq	.L460
 419:System/storage/Storage.c ****             (Info_r.sys_sec.tab_addr == Info_r.user_sec.tab_addr))
 6212              		.loc 1 419 68 view .LVU1984
 6213 0070 8A42     		cmp	r2, r1
 6214 0072 34D0     		beq	.L461
 424:System/storage/Storage.c ****         crc = Common_CRC16(page_data_tmp, OnChipFlash_Storage_InfoPageSize - sizeof(crc));
 6215              		.loc 1 424 9 is_stmt 1 view .LVU1985
 6216 0074 1C48     		ldr	r0, .L465+4
 6217 0076 B0F8FE43 		ldrh	r4, [r0, #1022]
 6218              	.LVL726:
 425:System/storage/Storage.c ****         if (crc != crc_read)
 6219              		.loc 1 425 9 view .LVU1986
 425:System/storage/Storage.c ****         if (crc != crc_read)
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 180


 6220              		.loc 1 425 15 is_stmt 0 view .LVU1987
 6221 007a 40F2FE31 		movw	r1, #1022
 6222 007e FFF7FEFF 		bl	Common_CRC16
 6223              	.LVL727:
 425:System/storage/Storage.c ****         if (crc != crc_read)
 6224              		.loc 1 425 13 view .LVU1988
 6225 0082 80B2     		uxth	r0, r0
 6226              	.LVL728:
 426:System/storage/Storage.c ****             return false;
 6227              		.loc 1 426 9 is_stmt 1 view .LVU1989
 426:System/storage/Storage.c ****             return false;
 6228              		.loc 1 426 12 is_stmt 0 view .LVU1990
 6229 0084 8442     		cmp	r4, r0
 6230 0086 01D0     		beq	.L464
 427:System/storage/Storage.c **** 
 6231              		.loc 1 427 20 view .LVU1991
 6232 0088 0024     		movs	r4, #0
 6233              	.LVL729:
 427:System/storage/Storage.c **** 
 6234              		.loc 1 427 20 view .LVU1992
 6235 008a 1BE0     		b	.L454
 6236              	.LVL730:
 6237              	.L464:
 429:System/storage/Storage.c ****         /* check  boot  section tab & free slot info & stored item */
 6238              		.loc 1 429 9 is_stmt 1 view .LVU1993
 6239 008c 4FF48052 		mov	r2, #4096
 6240 0090 0021     		movs	r1, #0
 6241 0092 1548     		ldr	r0, .L465+4
 6242              	.LVL731:
 429:System/storage/Storage.c ****         /* check  boot  section tab & free slot info & stored item */
 6243              		.loc 1 429 9 is_stmt 0 view .LVU1994
 6244 0094 FFF7FEFF 		bl	memset
 6245              	.LVL732:
 433:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 6246              		.loc 1 433 9 is_stmt 1 view .LVU1995
 433:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 6247              		.loc 1 433 13 is_stmt 0 view .LVU1996
 6248 0098 19A8     		add	r0, sp, #100
 6249 009a FFF7FEFF 		bl	Storage_Check_Tab
 6250              	.LVL733:
 433:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 6251              		.loc 1 433 12 view .LVU1997
 6252 009e 0446     		mov	r4, r0
 6253              	.LVL734:
 433:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 6254              		.loc 1 433 12 view .LVU1998
 6255 00a0 80B1     		cbz	r0, .L454
 434:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.user_sec))
 6256              		.loc 1 434 13 discriminator 1 view .LVU1999
 6257 00a2 22A8     		add	r0, sp, #136
 6258 00a4 FFF7FEFF 		bl	Storage_Check_Tab
 6259              	.LVL735:
 433:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.sys_sec) && \
 6260              		.loc 1 433 49 discriminator 1 view .LVU2000
 6261 00a8 0446     		mov	r4, r0
 6262 00aa 58B1     		cbz	r0, .L454
 435:System/storage/Storage.c ****         {
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 181


 6263              		.loc 1 435 13 view .LVU2001
 6264 00ac 2BA8     		add	r0, sp, #172
 6265 00ae FFF7FEFF 		bl	Storage_Check_Tab
 6266              	.LVL736:
 434:System/storage/Storage.c ****             Storage_Check_Tab(&Info_r.user_sec))
 6267              		.loc 1 434 48 view .LVU2002
 6268 00b2 0446     		mov	r4, r0
 6269 00b4 30B1     		cbz	r0, .L454
 437:System/storage/Storage.c ****             return true;
 6270              		.loc 1 437 13 is_stmt 1 view .LVU2003
 6271 00b6 9C22     		movs	r2, #156
 6272 00b8 0DA9     		add	r1, sp, #52
 6273 00ba 0C48     		ldr	r0, .L465+8
 6274 00bc FFF7FEFF 		bl	memcpy
 6275              	.LVL737:
 438:System/storage/Storage.c ****         }
 6276              		.loc 1 438 13 view .LVU2004
 438:System/storage/Storage.c ****         }
 6277              		.loc 1 438 20 is_stmt 0 view .LVU2005
 6278 00c0 00E0     		b	.L454
 6279              	.LVL738:
 6280              	.L455:
 421:System/storage/Storage.c **** 
 6281              		.loc 1 421 20 view .LVU2006
 6282 00c2 0024     		movs	r4, #0
 6283              	.LVL739:
 6284              	.L454:
 443:System/storage/Storage.c **** 
 6285              		.loc 1 443 1 view .LVU2007
 6286 00c4 2046     		mov	r0, r4
 6287 00c6 34B0     		add	sp, sp, #208
 6288              	.LCFI67:
 6289              		.cfi_remember_state
 6290              		.cfi_def_cfa_offset 8
 6291              		@ sp needed
 6292 00c8 10BD     		pop	{r4, pc}
 6293              	.LVL740:
 6294              	.L456:
 6295              	.LCFI68:
 6296              		.cfi_restore_state
 421:System/storage/Storage.c **** 
 6297              		.loc 1 421 20 view .LVU2008
 6298 00ca 0024     		movs	r4, #0
 6299 00cc FAE7     		b	.L454
 6300              	.L457:
 6301 00ce 0024     		movs	r4, #0
 6302 00d0 F8E7     		b	.L454
 6303              	.L458:
 6304 00d2 0024     		movs	r4, #0
 6305 00d4 F6E7     		b	.L454
 6306              	.L459:
 6307 00d6 0024     		movs	r4, #0
 6308 00d8 F4E7     		b	.L454
 6309              	.L460:
 6310 00da 0024     		movs	r4, #0
 6311 00dc F2E7     		b	.L454
 6312              	.L461:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 182


 6313 00de 0024     		movs	r4, #0
 6314 00e0 F0E7     		b	.L454
 6315              	.L466:
 6316 00e2 00BF     		.align	2
 6317              	.L465:
 6318 00e4 00000000 		.word	.LC5
 6319 00e8 00000000 		.word	page_data_tmp
 6320 00ec 16000000 		.word	.LANCHOR0+22
 6321              		.cfi_endproc
 6322              	.LFE149:
 6324              		.section	.text.Storage_Init,"ax",%progbits
 6325              		.align	1
 6326              		.syntax unified
 6327              		.thumb
 6328              		.thumb_func
 6330              	Storage_Init:
 6331              	.LVL741:
 6332              	.LFB145:
  98:System/storage/Storage.c ****     void *ext_flash_bus_cfg = NULL;
 6333              		.loc 1 98 1 is_stmt 1 view -0
 6334              		.cfi_startproc
 6335              		@ args = 0, pretend = 0, frame = 200
 6336              		@ frame_needed = 0, uses_anonymous_args = 0
  98:System/storage/Storage.c ****     void *ext_flash_bus_cfg = NULL;
 6337              		.loc 1 98 1 is_stmt 0 view .LVU2010
 6338 0000 70B5     		push	{r4, r5, r6, lr}
 6339              	.LCFI69:
 6340              		.cfi_def_cfa_offset 16
 6341              		.cfi_offset 4, -16
 6342              		.cfi_offset 5, -12
 6343              		.cfi_offset 6, -8
 6344              		.cfi_offset 14, -4
 6345 0002 BAB0     		sub	sp, sp, #232
 6346              	.LCFI70:
 6347              		.cfi_def_cfa_offset 248
 6348 0004 0446     		mov	r4, r0
  99:System/storage/Storage.c ****     uint8_t extmodule_init_state;
 6349              		.loc 1 99 5 is_stmt 1 view .LVU2011
 6350              	.LVL742:
 100:System/storage/Storage.c ****     memset(&Storage_Monitor, 0, sizeof(Storage_Monitor));
 6351              		.loc 1 100 5 view .LVU2012
 101:System/storage/Storage.c **** 
 6352              		.loc 1 101 5 view .LVU2013
 6353 0006 B422     		movs	r2, #180
 6354 0008 0021     		movs	r1, #0
 6355 000a 7948     		ldr	r0, .L485
 6356              	.LVL743:
 101:System/storage/Storage.c **** 
 6357              		.loc 1 101 5 is_stmt 0 view .LVU2014
 6358 000c FFF7FEFF 		bl	memset
 6359              	.LVL744:
 103:System/storage/Storage.c ****     if (!BspFlash.init())
 6360              		.loc 1 103 5 is_stmt 1 view .LVU2015
 104:System/storage/Storage.c ****         return false;
 6361              		.loc 1 104 5 view .LVU2016
 104:System/storage/Storage.c ****         return false;
 6362              		.loc 1 104 18 is_stmt 0 view .LVU2017
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 183


 6363 0010 784B     		ldr	r3, .L485+4
 6364 0012 1B68     		ldr	r3, [r3]
 104:System/storage/Storage.c ****         return false;
 6365              		.loc 1 104 10 view .LVU2018
 6366 0014 9847     		blx	r3
 6367              	.LVL745:
 104:System/storage/Storage.c ****         return false;
 6368              		.loc 1 104 8 view .LVU2019
 6369 0016 38B1     		cbz	r0, .L468
 109:System/storage/Storage.c ****     {
 6370              		.loc 1 109 5 is_stmt 1 view .LVU2020
 109:System/storage/Storage.c ****     {
 6371              		.loc 1 109 8 is_stmt 0 view .LVU2021
 6372 0018 24B1     		cbz	r4, .L469
 109:System/storage/Storage.c ****     {
 6373              		.loc 1 109 26 discriminator 1 view .LVU2022
 6374 001a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 109:System/storage/Storage.c ****     {
 6375              		.loc 1 109 16 discriminator 1 view .LVU2023
 6376 001c 13B1     		cbz	r3, .L469
 111:System/storage/Storage.c ****         {
 6377              		.loc 1 111 9 is_stmt 1 view .LVU2024
 111:System/storage/Storage.c ****         {
 6378              		.loc 1 111 19 is_stmt 0 view .LVU2025
 6379 001e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 111:System/storage/Storage.c ****         {
 6380              		.loc 1 111 12 view .LVU2026
 6381 0020 012B     		cmp	r3, #1
 6382 0022 03D0     		beq	.L482
 6383              	.LVL746:
 6384              	.L469:
 225:System/storage/Storage.c **** }
 6385              		.loc 1 225 5 is_stmt 1 view .LVU2027
 225:System/storage/Storage.c **** }
 6386              		.loc 1 225 27 is_stmt 0 view .LVU2028
 6387 0024 724B     		ldr	r3, .L485
 6388 0026 187C     		ldrb	r0, [r3, #16]	@ zero_extendqisi2
 6389              	.L468:
 226:System/storage/Storage.c **** 
 6390              		.loc 1 226 1 view .LVU2029
 6391 0028 3AB0     		add	sp, sp, #232
 6392              	.LCFI71:
 6393              		.cfi_remember_state
 6394              		.cfi_def_cfa_offset 16
 6395              		@ sp needed
 6396 002a 70BD     		pop	{r4, r5, r6, pc}
 6397              	.LVL747:
 6398              	.L482:
 6399              	.LCFI72:
 6400              		.cfi_restore_state
 113:System/storage/Storage.c ****             ext_flash_bus_cfg = SrvOsCommon.malloc(sizeof(BspSPI_NorModeConfig_TypeDef));
 6401              		.loc 1 113 13 is_stmt 1 view .LVU2030
 113:System/storage/Storage.c ****             ext_flash_bus_cfg = SrvOsCommon.malloc(sizeof(BspSPI_NorModeConfig_TypeDef));
 6402              		.loc 1 113 40 is_stmt 0 view .LVU2031
 6403 002c 704B     		ldr	r3, .L485
 6404 002e 0022     		movs	r2, #0
 6405 0030 9A60     		str	r2, [r3, #8]
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 184


 114:System/storage/Storage.c **** 
 6406              		.loc 1 114 13 is_stmt 1 view .LVU2032
 114:System/storage/Storage.c **** 
 6407              		.loc 1 114 44 is_stmt 0 view .LVU2033
 6408 0032 714B     		ldr	r3, .L485+8
 6409 0034 9B6A     		ldr	r3, [r3, #40]
 114:System/storage/Storage.c **** 
 6410              		.loc 1 114 33 view .LVU2034
 6411 0036 2C20     		movs	r0, #44
 6412 0038 9847     		blx	r3
 6413              	.LVL748:
 116:System/storage/Storage.c ****             {
 6414              		.loc 1 116 13 is_stmt 1 view .LVU2035
 116:System/storage/Storage.c ****             {
 6415              		.loc 1 116 16 is_stmt 0 view .LVU2036
 6416 003a 0546     		mov	r5, r0
 6417 003c 0028     		cmp	r0, #0
 6418 003e 00F0D380 		beq	.L470
 118:System/storage/Storage.c **** 
 6419              		.loc 1 118 17 is_stmt 1 view .LVU2037
 6420 0042 2C22     		movs	r2, #44
 6421 0044 0021     		movs	r1, #0
 6422 0046 FFF7FEFF 		bl	memset
 6423              	.LVL749:
 120:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPhase = ExtFlash_Bus_CLKPhase;
 6424              		.loc 1 120 17 view .LVU2038
 120:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPhase = ExtFlash_Bus_CLKPhase;
 6425              		.loc 1 120 75 is_stmt 0 view .LVU2039
 6426 004a 0123     		movs	r3, #1
 6427 004c AB62     		str	r3, [r5, #40]
 121:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPolarity = ExtFlash_Bus_CLKPolarity;
 6428              		.loc 1 121 17 is_stmt 1 view .LVU2040
 121:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->CLKPolarity = ExtFlash_Bus_CLKPolarity;
 6429              		.loc 1 121 66 is_stmt 0 view .LVU2041
 6430 004e 6B62     		str	r3, [r5, #36]
 122:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Instance = ExtFLash_Bus_Instance;
 6431              		.loc 1 122 17 is_stmt 1 view .LVU2042
 122:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Instance = ExtFLash_Bus_Instance;
 6432              		.loc 1 122 69 is_stmt 0 view .LVU2043
 6433 0050 2B62     		str	r3, [r5, #32]
 123:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Pin = ExtFlash_Bus_Pin;
 6434              		.loc 1 123 17 is_stmt 1 view .LVU2044
 123:System/storage/Storage.c ****                 To_NormalSPI_ObjPtr(ext_flash_bus_cfg)->Pin = ExtFlash_Bus_Pin;
 6435              		.loc 1 123 66 is_stmt 0 view .LVU2045
 6436 0052 6A4B     		ldr	r3, .L485+12
 6437 0054 EB61     		str	r3, [r5, #28]
 124:System/storage/Storage.c **** 
 6438              		.loc 1 124 17 is_stmt 1 view .LVU2046
 124:System/storage/Storage.c **** 
 6439              		.loc 1 124 61 is_stmt 0 view .LVU2047
 6440 0056 AC46     		mov	ip, r5
 6441 0058 694E     		ldr	r6, .L485+16
 6442 005a 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 6443 005c ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 6444 0060 96E80700 		ldm	r6, {r0, r1, r2}
 6445 0064 8CE80700 		stm	ip, {r0, r1, r2}
 127:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 185


 6446              		.loc 1 127 17 is_stmt 1 view .LVU2048
 127:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
 6447              		.loc 1 127 37 is_stmt 0 view .LVU2049
 6448 0068 664B     		ldr	r3, .L485+20
 6449 006a 1E68     		ldr	r6, [r3]
 127:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
 6450              		.loc 1 127 21 view .LVU2050
 6451 006c 664B     		ldr	r3, .L485+24
 6452 006e 0793     		str	r3, [sp, #28]
 6453 0070 EC46     		mov	ip, sp
 6454 0072 05F1100E 		add	lr, r5, #16
 6455 0076 BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 6456 007a ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 6457 007e 9EE80700 		ldm	lr, {r0, r1, r2}
 6458 0082 8CE80700 		stm	ip, {r0, r1, r2}
 6459 0086 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 6460 008a B047     		blx	r6
 6461              	.LVL750:
 127:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
 6462              		.loc 1 127 20 view .LVU2051
 6463 008c 0028     		cmp	r0, #0
 6464 008e 00F0A780 		beq	.L471
 128:System/storage/Storage.c ****                 {
 6465              		.loc 1 128 28 discriminator 1 view .LVU2052
 6466 0092 5E4B     		ldr	r3, .L485+28
 6467 0094 5E68     		ldr	r6, [r3, #4]
 128:System/storage/Storage.c ****                 {
 6468              		.loc 1 128 21 discriminator 1 view .LVU2053
 6469 0096 5E4B     		ldr	r3, .L485+32
 6470 0098 93E80700 		ldm	r3, {r0, r1, r2}
 6471 009c B047     		blx	r6
 6472              	.LVL751:
 127:System/storage/Storage.c ****                     BspGPIO.out_init(ExtFlash_CS_Pin))
 6473              		.loc 1 127 103 discriminator 1 view .LVU2054
 6474 009e 0028     		cmp	r0, #0
 6475 00a0 00F09E80 		beq	.L471
 130:System/storage/Storage.c **** 
 6476              		.loc 1 130 21 is_stmt 1 view .LVU2055
 130:System/storage/Storage.c **** 
 6477              		.loc 1 130 51 is_stmt 0 view .LVU2056
 6478 00a4 524B     		ldr	r3, .L485
 6479 00a6 DD60     		str	r5, [r3, #12]
 132:System/storage/Storage.c ****                     {
 6480              		.loc 1 132 21 is_stmt 1 view .LVU2057
 132:System/storage/Storage.c ****                     {
 6481              		.loc 1 132 31 is_stmt 0 view .LVU2058
 6482 00a8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 132:System/storage/Storage.c ****                     {
 6483              		.loc 1 132 24 view .LVU2059
 6484 00aa 012B     		cmp	r3, #1
 6485 00ac 03D0     		beq	.L483
 214:System/storage/Storage.c ****                 }
 6486              		.loc 1 214 25 is_stmt 1 view .LVU2060
 214:System/storage/Storage.c ****                 }
 6487              		.loc 1 214 66 is_stmt 0 view .LVU2061
 6488 00ae 504B     		ldr	r3, .L485
 6489 00b0 0622     		movs	r2, #6
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 186


 6490 00b2 5A71     		strb	r2, [r3, #5]
 6491 00b4 B6E7     		b	.L469
 6492              	.L483:
 134:System/storage/Storage.c ****                         if (ExtDev->dev_obj)
 6493              		.loc 1 134 25 is_stmt 1 view .LVU2062
 134:System/storage/Storage.c ****                         if (ExtDev->dev_obj)
 6494              		.loc 1 134 54 is_stmt 0 view .LVU2063
 6495 00b6 504B     		ldr	r3, .L485+8
 6496 00b8 9B6A     		ldr	r3, [r3, #40]
 134:System/storage/Storage.c ****                         if (ExtDev->dev_obj)
 6497              		.loc 1 134 43 view .LVU2064
 6498 00ba 1C20     		movs	r0, #28
 6499 00bc 9847     		blx	r3
 6500              	.LVL752:
 134:System/storage/Storage.c ****                         if (ExtDev->dev_obj)
 6501              		.loc 1 134 41 view .LVU2065
 6502 00be E062     		str	r0, [r4, #44]
 135:System/storage/Storage.c ****                         {
 6503              		.loc 1 135 25 is_stmt 1 view .LVU2066
 135:System/storage/Storage.c ****                         {
 6504              		.loc 1 135 28 is_stmt 0 view .LVU2067
 6505 00c0 0028     		cmp	r0, #0
 6506 00c2 00F08980 		beq	.L473
 138:System/storage/Storage.c **** 
 6507              		.loc 1 138 29 is_stmt 1 view .LVU2068
 138:System/storage/Storage.c **** 
 6508              		.loc 1 138 85 is_stmt 0 view .LVU2069
 6509 00c6 4C4B     		ldr	r3, .L485+8
 6510 00c8 1B68     		ldr	r3, [r3]
 138:System/storage/Storage.c **** 
 6511              		.loc 1 138 72 view .LVU2070
 6512 00ca 8361     		str	r3, [r0, #24]
 141:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_tx = Storage_External_Chip_W25Qx
 6513              		.loc 1 141 29 is_stmt 1 view .LVU2071
 6514 00cc E36A     		ldr	r3, [r4, #44]
 141:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_tx = Storage_External_Chip_W25Qx
 6515              		.loc 1 141 71 is_stmt 0 view .LVU2072
 6516 00ce 514A     		ldr	r2, .L485+36
 6517 00d0 1A61     		str	r2, [r3, #16]
 142:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_rx = Storage_External_Chip_W25Qx
 6518              		.loc 1 142 29 is_stmt 1 view .LVU2073
 6519 00d2 E36A     		ldr	r3, [r4, #44]
 142:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_rx = Storage_External_Chip_W25Qx
 6520              		.loc 1 142 71 is_stmt 0 view .LVU2074
 6521 00d4 504A     		ldr	r2, .L485+40
 6522 00d6 5A60     		str	r2, [r3, #4]
 143:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_trans = Storage_External_Chip_W2
 6523              		.loc 1 143 29 is_stmt 1 view .LVU2075
 6524 00d8 E36A     		ldr	r3, [r4, #44]
 143:System/storage/Storage.c ****                             To_DevW25Qxx_OBJ(ExtDev->dev_obj)->bus_trans = Storage_External_Chip_W2
 6525              		.loc 1 143 71 is_stmt 0 view .LVU2076
 6526 00da 504A     		ldr	r2, .L485+44
 6527 00dc 9A60     		str	r2, [r3, #8]
 144:System/storage/Storage.c ****                             Storage_Monitor.ExtDev_ptr = ExtDev;
 6528              		.loc 1 144 29 is_stmt 1 view .LVU2077
 6529 00de E36A     		ldr	r3, [r4, #44]
 144:System/storage/Storage.c ****                             Storage_Monitor.ExtDev_ptr = ExtDev;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 187


 6530              		.loc 1 144 74 is_stmt 0 view .LVU2078
 6531 00e0 4F4A     		ldr	r2, .L485+48
 6532 00e2 DA60     		str	r2, [r3, #12]
 145:System/storage/Storage.c ****                             Storage_Monitor.ExternalFlash_ReInit_cnt = ExternalModule_ReInit_Cnt;
 6533              		.loc 1 145 29 is_stmt 1 view .LVU2079
 145:System/storage/Storage.c ****                             Storage_Monitor.ExternalFlash_ReInit_cnt = ExternalModule_ReInit_Cnt;
 6534              		.loc 1 145 56 is_stmt 0 view .LVU2080
 6535 00e4 424B     		ldr	r3, .L485
 6536 00e6 9C60     		str	r4, [r3, #8]
 146:System/storage/Storage.c **** 
 6537              		.loc 1 146 29 is_stmt 1 view .LVU2081
 146:System/storage/Storage.c **** 
 6538              		.loc 1 146 70 is_stmt 0 view .LVU2082
 6539 00e8 0522     		movs	r2, #5
 6540 00ea 9A70     		strb	r2, [r3, #2]
 6541              	.LVL753:
 6542              	.L474:
 149:System/storage/Storage.c ****                             Storage_Monitor.module_prod_type = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6543              		.loc 1 149 29 is_stmt 1 view .LVU2083
 149:System/storage/Storage.c ****                             Storage_Monitor.module_prod_type = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6544              		.loc 1 149 52 is_stmt 0 view .LVU2084
 6545 00ec 236B     		ldr	r3, [r4, #48]
 149:System/storage/Storage.c ****                             Storage_Monitor.module_prod_type = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6546              		.loc 1 149 85 view .LVU2085
 6547 00ee 1B68     		ldr	r3, [r3]
 149:System/storage/Storage.c ****                             Storage_Monitor.module_prod_type = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6548              		.loc 1 149 52 view .LVU2086
 6549 00f0 E06A     		ldr	r0, [r4, #44]
 6550 00f2 9847     		blx	r3
 6551              	.LVL754:
 6552 00f4 0546     		mov	r5, r0
 6553              	.LVL755:
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6554              		.loc 1 150 29 is_stmt 1 view .LVU2087
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6555              		.loc 1 150 64 is_stmt 0 view .LVU2088
 6556 00f6 236B     		ldr	r3, [r4, #48]
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6557              		.loc 1 150 97 view .LVU2089
 6558 00f8 DB69     		ldr	r3, [r3, #28]
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6559              		.loc 1 150 64 view .LVU2090
 6560 00fa E16A     		ldr	r1, [r4, #44]
 6561 00fc 09A8     		add	r0, sp, #36
 6562 00fe 9847     		blx	r3
 6563              	.LVL756:
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6564              		.loc 1 150 138 view .LVU2091
 6565 0100 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 150:System/storage/Storage.c ****                             Storage_Monitor.module_prod_code = To_DevW25Qxx_API(ExtDev->dev_api)->i
 6566              		.loc 1 150 62 view .LVU2092
 6567 0104 3A4E     		ldr	r6, .L485
 6568 0106 7382     		strh	r3, [r6, #18]	@ movhi
 151:System/storage/Storage.c **** 
 6569              		.loc 1 151 29 is_stmt 1 view .LVU2093
 151:System/storage/Storage.c **** 
 6570              		.loc 1 151 64 is_stmt 0 view .LVU2094
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 188


 6571 0108 236B     		ldr	r3, [r4, #48]
 151:System/storage/Storage.c **** 
 6572              		.loc 1 151 97 view .LVU2095
 6573 010a DB69     		ldr	r3, [r3, #28]
 151:System/storage/Storage.c **** 
 6574              		.loc 1 151 64 view .LVU2096
 6575 010c E16A     		ldr	r1, [r4, #44]
 6576 010e 10A8     		add	r0, sp, #64
 6577 0110 9847     		blx	r3
 6578              	.LVL757:
 151:System/storage/Storage.c **** 
 6579              		.loc 1 151 138 view .LVU2097
 6580 0112 BDF84230 		ldrh	r3, [sp, #66]
 151:System/storage/Storage.c **** 
 6581              		.loc 1 151 62 view .LVU2098
 6582 0116 B382     		strh	r3, [r6, #20]	@ movhi
 153:System/storage/Storage.c ****                             {
 6583              		.loc 1 153 29 is_stmt 1 view .LVU2099
 153:System/storage/Storage.c ****                             {
 6584              		.loc 1 153 32 is_stmt 0 view .LVU2100
 6585 0118 3DB1     		cbz	r5, .L484
 201:System/storage/Storage.c ****                                 {
 6586              		.loc 1 201 33 is_stmt 1 view .LVU2101
 201:System/storage/Storage.c ****                                 {
 6587              		.loc 1 201 52 is_stmt 0 view .LVU2102
 6588 011a 354B     		ldr	r3, .L485
 6589 011c 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 201:System/storage/Storage.c ****                                 {
 6590              		.loc 1 201 36 view .LVU2103
 6591 011e 002B     		cmp	r3, #0
 6592 0120 56D0     		beq	.L480
 203:System/storage/Storage.c ****                                     goto reinit_external_flash_module;
 6593              		.loc 1 203 37 is_stmt 1 view .LVU2104
 203:System/storage/Storage.c ****                                     goto reinit_external_flash_module;
 6594              		.loc 1 203 78 is_stmt 0 view .LVU2105
 6595 0122 013B     		subs	r3, r3, #1
 6596 0124 324A     		ldr	r2, .L485
 6597 0126 9370     		strb	r3, [r2, #2]
 204:System/storage/Storage.c ****                                 }
 6598              		.loc 1 204 37 is_stmt 1 view .LVU2106
 6599 0128 E0E7     		b	.L474
 6600              	.L484:
 155:System/storage/Storage.c ****                                 ExtDev->sector_num  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6601              		.loc 1 155 33 view .LVU2107
 155:System/storage/Storage.c ****                                 ExtDev->sector_num  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6602              		.loc 1 155 53 is_stmt 0 view .LVU2108
 6603 012a 6560     		str	r5, [r4, #4]
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6604              		.loc 1 156 33 is_stmt 1 view .LVU2109
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6605              		.loc 1 156 55 is_stmt 0 view .LVU2110
 6606 012c 236B     		ldr	r3, [r4, #48]
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6607              		.loc 1 156 88 view .LVU2111
 6608 012e DB69     		ldr	r3, [r3, #28]
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6609              		.loc 1 156 55 view .LVU2112
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 189


 6610 0130 E16A     		ldr	r1, [r4, #44]
 6611 0132 17A8     		add	r0, sp, #92
 6612 0134 9847     		blx	r3
 6613              	.LVL758:
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6614              		.loc 1 156 129 view .LVU2113
 6615 0136 BDF87430 		ldrh	r3, [sp, #116]
 156:System/storage/Storage.c ****                                 ExtDev->sector_size = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6616              		.loc 1 156 53 view .LVU2114
 6617 013a 6362     		str	r3, [r4, #36]
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6618              		.loc 1 157 33 is_stmt 1 view .LVU2115
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6619              		.loc 1 157 55 is_stmt 0 view .LVU2116
 6620 013c 236B     		ldr	r3, [r4, #48]
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6621              		.loc 1 157 88 view .LVU2117
 6622 013e DB69     		ldr	r3, [r3, #28]
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6623              		.loc 1 157 55 view .LVU2118
 6624 0140 E16A     		ldr	r1, [r4, #44]
 6625 0142 1EA8     		add	r0, sp, #120
 6626 0144 9847     		blx	r3
 6627              	.LVL759:
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6628              		.loc 1 157 129 view .LVU2119
 6629 0146 229B     		ldr	r3, [sp, #136]
 157:System/storage/Storage.c ****                                 ExtDev->total_size  = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6630              		.loc 1 157 53 view .LVU2120
 6631 0148 A362     		str	r3, [r4, #40]
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6632              		.loc 1 158 33 is_stmt 1 view .LVU2121
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6633              		.loc 1 158 55 is_stmt 0 view .LVU2122
 6634 014a 236B     		ldr	r3, [r4, #48]
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6635              		.loc 1 158 88 view .LVU2123
 6636 014c DB69     		ldr	r3, [r3, #28]
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6637              		.loc 1 158 55 view .LVU2124
 6638 014e E16A     		ldr	r1, [r4, #44]
 6639 0150 25A8     		add	r0, sp, #148
 6640 0152 9847     		blx	r3
 6641              	.LVL760:
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6642              		.loc 1 158 129 view .LVU2125
 6643 0154 279B     		ldr	r3, [sp, #156]
 158:System/storage/Storage.c ****                                 ExtDev->page_num    = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6644              		.loc 1 158 53 view .LVU2126
 6645 0156 A360     		str	r3, [r4, #8]
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6646              		.loc 1 159 33 is_stmt 1 view .LVU2127
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6647              		.loc 1 159 55 is_stmt 0 view .LVU2128
 6648 0158 236B     		ldr	r3, [r4, #48]
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6649              		.loc 1 159 88 view .LVU2129
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 190


 6650 015a DB69     		ldr	r3, [r3, #28]
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6651              		.loc 1 159 55 view .LVU2130
 6652 015c E16A     		ldr	r1, [r4, #44]
 6653 015e 2CA8     		add	r0, sp, #176
 6654 0160 9847     		blx	r3
 6655              	.LVL761:
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6656              		.loc 1 159 129 view .LVU2131
 6657 0162 BDF8CA30 		ldrh	r3, [sp, #202]
 159:System/storage/Storage.c ****                                 ExtDev->page_size   = To_DevW25Qxx_API(ExtDev->dev_api)->info(To_De
 6658              		.loc 1 159 53 view .LVU2132
 6659 0166 E360     		str	r3, [r4, #12]
 160:System/storage/Storage.c **** 
 6660              		.loc 1 160 33 is_stmt 1 view .LVU2133
 160:System/storage/Storage.c **** 
 6661              		.loc 1 160 55 is_stmt 0 view .LVU2134
 6662 0168 236B     		ldr	r3, [r4, #48]
 160:System/storage/Storage.c **** 
 6663              		.loc 1 160 88 view .LVU2135
 6664 016a DB69     		ldr	r3, [r3, #28]
 160:System/storage/Storage.c **** 
 6665              		.loc 1 160 55 view .LVU2136
 6666 016c E16A     		ldr	r1, [r4, #44]
 6667 016e 33A8     		add	r0, sp, #204
 6668 0170 9847     		blx	r3
 6669              	.LVL762:
 160:System/storage/Storage.c **** 
 6670              		.loc 1 160 129 view .LVU2137
 6671 0172 BDF8E030 		ldrh	r3, [sp, #224]
 160:System/storage/Storage.c **** 
 6672              		.loc 1 160 53 view .LVU2138
 6673 0176 2361     		str	r3, [r4, #16]
 163:System/storage/Storage.c ****                                 Storage_Monitor.ExternalFlash_Format_cnt = Format_Retry_Cnt;
 6674              		.loc 1 163 33 is_stmt 1 view .LVU2139
 163:System/storage/Storage.c ****                                 Storage_Monitor.ExternalFlash_Format_cnt = Format_Retry_Cnt;
 6675              		.loc 1 163 73 is_stmt 0 view .LVU2140
 6676 0178 F586     		strh	r5, [r6, #54]	@ movhi
 6677 017a 2422     		movs	r2, #36
 6678 017c 3287     		strh	r2, [r6, #56]	@ movhi
 164:System/storage/Storage.c ****                             
 6679              		.loc 1 164 33 is_stmt 1 view .LVU2141
 164:System/storage/Storage.c ****                             
 6680              		.loc 1 164 74 is_stmt 0 view .LVU2142
 6681 017e 0522     		movs	r2, #5
 6682 0180 7270     		strb	r2, [r6, #1]
 6683              	.L476:
 168:System/storage/Storage.c ****                                 {
 6684              		.loc 1 168 33 is_stmt 1 view .LVU2143
 168:System/storage/Storage.c ****                                 {
 6685              		.loc 1 168 38 is_stmt 0 view .LVU2144
 6686 0182 FFF7FEFF 		bl	Storage_Get_StorageInfo
 6687              	.LVL763:
 168:System/storage/Storage.c ****                                 {
 6688              		.loc 1 168 36 view .LVU2145
 6689 0186 F8B9     		cbnz	r0, .L477
 6690              	.L478:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 191


 171:System/storage/Storage.c ****                                     {
 6691              		.loc 1 171 37 is_stmt 1 view .LVU2146
 171:System/storage/Storage.c ****                                     {
 6692              		.loc 1 171 56 is_stmt 0 view .LVU2147
 6693 0188 194B     		ldr	r3, .L485
 6694 018a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 171:System/storage/Storage.c ****                                     {
 6695              		.loc 1 171 40 view .LVU2148
 6696 018c 002B     		cmp	r3, #0
 6697 018e 3FF449AF 		beq	.L469
 174:System/storage/Storage.c ****                                         {
 6698              		.loc 1 174 41 is_stmt 1 view .LVU2149
 174:System/storage/Storage.c ****                                         {
 6699              		.loc 1 174 46 is_stmt 0 view .LVU2150
 6700 0192 FFF7FEFF 		bl	Storage_Format
 6701              	.LVL764:
 174:System/storage/Storage.c ****                                         {
 6702              		.loc 1 174 44 view .LVU2151
 6703 0196 58B9     		cbnz	r0, .L479
 176:System/storage/Storage.c ****                                             Storage_Monitor.external_info.base_addr = ExtFlash_Star
 6704              		.loc 1 176 45 is_stmt 1 view .LVU2152
 176:System/storage/Storage.c ****                                             Storage_Monitor.external_info.base_addr = ExtFlash_Star
 6705              		.loc 1 176 60 is_stmt 0 view .LVU2153
 6706 0198 154A     		ldr	r2, .L485
 6707 019a 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 176:System/storage/Storage.c ****                                             Storage_Monitor.external_info.base_addr = ExtFlash_Star
 6708              		.loc 1 176 86 view .LVU2154
 6709 019c 013B     		subs	r3, r3, #1
 6710 019e DBB2     		uxtb	r3, r3
 6711 01a0 5370     		strb	r3, [r2, #1]
 177:System/storage/Storage.c ****                                             if (Storage_Monitor.ExternalFlash_Format_cnt)
 6712              		.loc 1 177 45 is_stmt 1 view .LVU2155
 177:System/storage/Storage.c ****                                             if (Storage_Monitor.ExternalFlash_Format_cnt)
 6713              		.loc 1 177 85 is_stmt 0 view .LVU2156
 6714 01a2 0021     		movs	r1, #0
 6715 01a4 D186     		strh	r1, [r2, #54]	@ movhi
 6716 01a6 2421     		movs	r1, #36
 6717 01a8 1187     		strh	r1, [r2, #56]	@ movhi
 178:System/storage/Storage.c ****                                                 goto reformat_external_flash_info;
 6718              		.loc 1 178 45 is_stmt 1 view .LVU2157
 178:System/storage/Storage.c ****                                                 goto reformat_external_flash_info;
 6719              		.loc 1 178 48 is_stmt 0 view .LVU2158
 6720 01aa 002B     		cmp	r3, #0
 6721 01ac ECD1     		bne	.L478
 6722 01ae 39E7     		b	.L469
 6723              	.L479:
 185:System/storage/Storage.c ****                                             {
 6724              		.loc 1 185 45 is_stmt 1 view .LVU2159
 185:System/storage/Storage.c ****                                             {
 6725              		.loc 1 185 49 is_stmt 0 view .LVU2160
 6726 01b0 FFF7FEFF 		bl	Storage_Build_StorageInfo
 6727              	.LVL765:
 185:System/storage/Storage.c ****                                             {
 6728              		.loc 1 185 48 view .LVU2161
 6729 01b4 0028     		cmp	r0, #0
 6730 01b6 3FF435AF 		beq	.L469
 187:System/storage/Storage.c ****                                                 Storage_Monitor.init_state = true;
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 192


 6731              		.loc 1 187 49 is_stmt 1 view .LVU2162
 187:System/storage/Storage.c ****                                                 Storage_Monitor.init_state = true;
 6732              		.loc 1 187 64 is_stmt 0 view .LVU2163
 6733 01ba 0D4B     		ldr	r3, .L485
 6734 01bc 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 187:System/storage/Storage.c ****                                                 Storage_Monitor.init_state = true;
 6735              		.loc 1 187 92 view .LVU2164
 6736 01be 0132     		adds	r2, r2, #1
 6737 01c0 1A71     		strb	r2, [r3, #4]
 188:System/storage/Storage.c **** 
 6738              		.loc 1 188 49 is_stmt 1 view .LVU2165
 188:System/storage/Storage.c **** 
 6739              		.loc 1 188 76 is_stmt 0 view .LVU2166
 6740 01c2 0122     		movs	r2, #1
 6741 01c4 1A74     		strb	r2, [r3, #16]
 191:System/storage/Storage.c ****                                             }
 6742              		.loc 1 191 49 is_stmt 1 view .LVU2167
 6743 01c6 DCE7     		b	.L476
 6744              	.L477:
 197:System/storage/Storage.c ****                             }
 6745              		.loc 1 197 37 view .LVU2168
 197:System/storage/Storage.c ****                             }
 6746              		.loc 1 197 64 is_stmt 0 view .LVU2169
 6747 01c8 094B     		ldr	r3, .L485
 6748 01ca 0122     		movs	r2, #1
 6749 01cc 1A74     		strb	r2, [r3, #16]
 6750 01ce 29E7     		b	.L469
 6751              	.L480:
 207:System/storage/Storage.c ****                             }
 6752              		.loc 1 207 33 is_stmt 1 view .LVU2170
 207:System/storage/Storage.c ****                             }
 6753              		.loc 1 207 74 is_stmt 0 view .LVU2171
 6754 01d0 074B     		ldr	r3, .L485
 6755 01d2 0722     		movs	r2, #7
 6756 01d4 5A71     		strb	r2, [r3, #5]
 6757 01d6 25E7     		b	.L469
 6758              	.LVL766:
 6759              	.L473:
 211:System/storage/Storage.c ****                     }
 6760              		.loc 1 211 29 is_stmt 1 view .LVU2172
 211:System/storage/Storage.c ****                     }
 6761              		.loc 1 211 70 is_stmt 0 view .LVU2173
 6762 01d8 054B     		ldr	r3, .L485
 6763 01da 0522     		movs	r2, #5
 6764 01dc 5A71     		strb	r2, [r3, #5]
 6765 01de 21E7     		b	.L469
 6766              	.L471:
 217:System/storage/Storage.c ****             }
 6767              		.loc 1 217 21 is_stmt 1 view .LVU2174
 217:System/storage/Storage.c ****             }
 6768              		.loc 1 217 62 is_stmt 0 view .LVU2175
 6769 01e0 034B     		ldr	r3, .L485
 6770 01e2 0222     		movs	r2, #2
 6771 01e4 5A71     		strb	r2, [r3, #5]
 6772 01e6 1DE7     		b	.L469
 6773              	.LVL767:
 6774              	.L470:
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 193


 220:System/storage/Storage.c ****         }
 6775              		.loc 1 220 17 is_stmt 1 view .LVU2176
 220:System/storage/Storage.c ****         }
 6776              		.loc 1 220 58 is_stmt 0 view .LVU2177
 6777 01e8 014B     		ldr	r3, .L485
 6778 01ea 0422     		movs	r2, #4
 6779 01ec 5A71     		strb	r2, [r3, #5]
 6780 01ee 19E7     		b	.L469
 6781              	.L486:
 6782              		.align	2
 6783              	.L485:
 6784 01f0 00000000 		.word	.LANCHOR0
 6785 01f4 00000000 		.word	BspFlash
 6786 01f8 00000000 		.word	SrvOsCommon
 6787 01fc 00380040 		.word	1073756160
 6788 0200 00000000 		.word	ExtFlash_SPIPin
 6789 0204 00000000 		.word	BspSPI
 6790 0208 00000000 		.word	.LANCHOR1
 6791 020c 00000000 		.word	BspGPIO
 6792 0210 00000000 		.word	ExtFlash_CSPin
 6793 0214 00000000 		.word	Storage_External_Chip_W25Qxx_SelectPin_Ctl
 6794 0218 00000000 		.word	Storage_External_Chip_W25Qxx_BusTx
 6795 021c 00000000 		.word	Storage_External_Chip_W25Qxx_BusRx
 6796 0220 00000000 		.word	Storage_External_Chip_W25Qxx_BusTrans
 6797              		.cfi_endproc
 6798              	.LFE145:
 6800              		.global	Storage
 6801              		.global	Storage_Monitor
 6802              		.global	ExtFlash_Bus_InstObj
 6803              		.section	.Perph_Section,"aw"
 6804              		.align	2
 6807              	flash_read_tmp:
 6808 0000 00000000 		.space	8192
 6808      00000000 
 6808      00000000 
 6808      00000000 
 6808      00000000 
 6811              	flash_write_tmp:
 6812 2000 00000000 		.space	8192
 6812      00000000 
 6812      00000000 
 6812      00000000 
 6812      00000000 
 6813              		.section	.bss.ExtFlash_Bus_InstObj,"aw",%nobits
 6814              		.align	2
 6815              		.set	.LANCHOR1,. + 0
 6818              	ExtFlash_Bus_InstObj:
 6819 0000 00000000 		.space	4
 6820              		.section	.bss.Storage_Monitor,"aw",%nobits
 6821              		.align	2
 6822              		.set	.LANCHOR0,. + 0
 6825              	Storage_Monitor:
 6826 0000 00000000 		.space	180
 6826      00000000 
 6826      00000000 
 6826      00000000 
 6826      00000000 
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 194


 6827              		.section	.bss.page_data_tmp,"aw",%nobits
 6828              		.align	2
 6831              	page_data_tmp:
 6832 0000 00000000 		.space	8192
 6832      00000000 
 6832      00000000 
 6832      00000000 
 6832      00000000 
 6833              		.section	.data.Storage,"aw"
 6834              		.align	2
 6837              	Storage:
 6838 0000 00000000 		.word	Storage_Init
 6839 0004 00000000 		.word	Storage_Search
 6840 0008 00000000 		.word	Storage_CreateItem
 6841 000c 00000000 		.word	Storage_SlotData_Update
 6842 0010 00000000 		.word	Storage_Get_Data
 6843 0014 00000000 		.word	Storage_Get_DevInfo
 6844 0018 00000000 		.word	Storage_Write_Section
 6845 001c 00000000 		.word	Storage_Read_Section
 6846 0020 00000000 		.word	Storage_Erase_Section
 6847 0024 00000000 		.word	Storage_Firmware_Format
 6848 0028 00000000 		.word	Storage_Frimware_Read
 6849 002c 00000000 		.word	Storage_Firmware_Write
 6850              		.text
 6851              	.Letext0:
 6852              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\lib\\gcc\\arm-none-eabi\
 6853              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 6854              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 6855              		.file 5 "HW_Lib/AT32F435/drivers/inc/at32f435_437_spi.h"
 6856              		.file 6 "HW_Lib/Port_Def/Bsp_GPIO_Port_Def.h"
 6857              		.file 7 "HW_Lib/Port_Def/Bsp_SPI_Port_Def.h"
 6858              		.file 8 "HW_Lib/AT32F435/bsp/Bsp_GPIO.h"
 6859              		.file 9 "HW_Lib/AT32F435/bsp/Bsp_SPI.h"
 6860              		.file 10 "HW_Lib/Port_Def/Bsp_Flash_Port_Def.h"
 6861              		.file 11 "HW_Lib/AT32F435/bsp/Bsp_Flash.h"
 6862              		.file 12 "debug/debug_util.h"
 6863              		.file 13 "common/Error_Log/../../common/gen_physic_def/imu_data.h"
 6864              		.file 14 "Device/Dev_W25Qxx.h"
 6865              		.file 15 "HW_Lib/AT32F435/PinPort_Def/CCRC_AT32_20/HW_Def.h"
 6866              		.file 16 "System/FreeRTOS/include/portable.h"
 6867              		.file 17 "Service/Srv_OsCommon.h"
 6868              		.file 18 "Service/../FCHW_Config.h"
 6869              		.file 19 "Service/control_data.h"
 6870              		.file 20 "System/storage/Storage.h"
 6871              		.file 21 "System/FreeRTOS/FreeRTOSConfig.h"
 6872              		.file 22 "<built-in>"
 6873              		.file 23 "common/util.h"
 6874              		.file 24 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 195


DEFINED SYMBOLS
                            *ABS*:00000000 Storage.c
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:20     .text.Storage_Get_SecInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:25     .text.Storage_Get_SecInfo:00000000 Storage_Get_SecInfo
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:79     .text.Storage_Erase_Section:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:84     .text.Storage_Erase_Section:00000000 Storage_Erase_Section
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:261    .text.Storage_Erase_Section:0000007c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:267    .text.Storage_Firmware_Format:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:272    .text.Storage_Firmware_Format:00000000 Storage_Firmware_Format
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:441    .text.Storage_Firmware_Format:00000090 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:447    .text.Storage_External_Chip_W25Qxx_SelectPin_Ctl:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:452    .text.Storage_External_Chip_W25Qxx_SelectPin_Ctl:00000000 Storage_External_Chip_W25Qxx_SelectPin_Ctl
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:484    .text.Storage_External_Chip_W25Qxx_SelectPin_Ctl:00000014 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:490    .text.Storage_External_Chip_W25Qxx_BusTx:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:495    .text.Storage_External_Chip_W25Qxx_BusTx:00000000 Storage_External_Chip_W25Qxx_BusTx
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:592    .text.Storage_External_Chip_W25Qxx_BusTx:00000040 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:599    .text.Storage_External_Chip_W25Qxx_BusRx:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:604    .text.Storage_External_Chip_W25Qxx_BusRx:00000000 Storage_External_Chip_W25Qxx_BusRx
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:701    .text.Storage_External_Chip_W25Qxx_BusRx:00000040 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:708    .text.Storage_External_Chip_W25Qxx_BusTrans:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:713    .text.Storage_External_Chip_W25Qxx_BusTrans:00000000 Storage_External_Chip_W25Qxx_BusTrans
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:832    .text.Storage_External_Chip_W25Qxx_BusTrans:00000050 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:839    .text.Storage_ExtFlash_ParaSec_Erase:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:844    .text.Storage_ExtFlash_ParaSec_Erase:00000000 Storage_ExtFlash_ParaSec_Erase
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:978    .text.Storage_ExtFlash_ParaSec_Erase:0000005c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:983    .text.Storage_Firmware_Write:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:988    .text.Storage_Firmware_Write:00000000 Storage_Firmware_Write
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1306   .text.Storage_Firmware_Write:00000114 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6807   .Perph_Section:00000000 flash_read_tmp
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1315   .text.Storage_Frimware_Read:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1320   .text.Storage_Frimware_Read:00000000 Storage_Frimware_Read
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1507   .text.Storage_Frimware_Read:0000009c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1513   .text.Storage_Get_DevInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1518   .text.Storage_Get_DevInfo:00000000 Storage_Get_DevInfo
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1608   .text.Storage_Get_DevInfo:00000054 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1613   .text.Storage_ExtFlash_ParaSec_Read:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1618   .text.Storage_ExtFlash_ParaSec_Read:00000000 Storage_ExtFlash_ParaSec_Read
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1936   .text.Storage_ExtFlash_ParaSec_Read:00000114 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1942   .text.Storage_Format:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:1947   .text.Storage_Format:00000000 Storage_Format
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2089   .text.Storage_Format:0000005c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6831   .bss.page_data_tmp:00000000 page_data_tmp
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2094   .text.Storage_ExtFlash_ParaSec_Write:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2099   .text.Storage_ExtFlash_ParaSec_Write:00000000 Storage_ExtFlash_ParaSec_Write
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2446   .text.Storage_ExtFlash_ParaSec_Write:0000012c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6811   .Perph_Section:00002000 flash_write_tmp
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2452   .text.Storage_Clear_Tab:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2457   .text.Storage_Clear_Tab:00000000 Storage_Clear_Tab
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2559   .text.Storage_Clear_Tab:00000048 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2564   .rodata.Storage_Read_Section.str1.4:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2571   .text.Storage_Read_Section:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2576   .text.Storage_Read_Section:00000000 Storage_Read_Section
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2790   .text.Storage_Read_Section:000000b8 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2799   .rodata.Storage_Write_Section.str1.4:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2806   .text.Storage_Write_Section:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:2811   .text.Storage_Write_Section:00000000 Storage_Write_Section
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3040   .text.Storage_Write_Section:000000c8 $d
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 196


C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3050   .text.Storage_Get_Data:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3055   .text.Storage_Get_Data:00000000 Storage_Get_Data
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3338   .text.Storage_Get_Data:00000120 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3345   .text.Storage_SlotData_Update:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3350   .text.Storage_SlotData_Update:00000000 Storage_SlotData_Update
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3865   .text.Storage_SlotData_Update:00000210 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3874   .text.Storage_Comput_ItemSlot_CRC:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3879   .text.Storage_Comput_ItemSlot_CRC:00000000 Storage_Comput_ItemSlot_CRC
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3930   .text.Storage_Compare_ItemSlot_CRC:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:3935   .text.Storage_Compare_ItemSlot_CRC:00000000 Storage_Compare_ItemSlot_CRC
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4002   .text.Storage_Check_Tab:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4007   .text.Storage_Check_Tab:00000000 Storage_Check_Tab
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4297   .text.Storage_Check_Tab:00000100 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4304   .text.Storage_Establish_Tab:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4309   .text.Storage_Establish_Tab:00000000 Storage_Establish_Tab
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4591   .text.Storage_Establish_Tab:00000120 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4599   .rodata.Storage_CreateItem.str1.4:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4603   .text.Storage_CreateItem:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:4608   .text.Storage_CreateItem:00000000 Storage_CreateItem
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5298   .text.Storage_CreateItem:00000360 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5307   .text.Storage_CreateItem:00000378 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5477   .text.Storage_CreateItem:00000444 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5483   .text.Storage_Search:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5488   .text.Storage_Search:00000000 Storage_Search
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5802   .text.Storage_Search:00000168 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5809   .rodata.Storage_Build_StorageInfo.str1.4:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5813   .text.Storage_Build_StorageInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:5818   .text.Storage_Build_StorageInfo:00000000 Storage_Build_StorageInfo
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6096   .text.Storage_Build_StorageInfo:0000012c $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6107   .text.Storage_Get_StorageInfo:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6112   .text.Storage_Get_StorageInfo:00000000 Storage_Get_StorageInfo
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6318   .text.Storage_Get_StorageInfo:000000e4 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6325   .text.Storage_Init:00000000 $t
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6330   .text.Storage_Init:00000000 Storage_Init
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6784   .text.Storage_Init:000001f0 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6837   .data.Storage:00000000 Storage
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6825   .bss.Storage_Monitor:00000000 Storage_Monitor
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6818   .bss.ExtFlash_Bus_InstObj:00000000 ExtFlash_Bus_InstObj
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6804   .Perph_Section:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6814   .bss.ExtFlash_Bus_InstObj:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6821   .bss.Storage_Monitor:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6828   .bss.page_data_tmp:00000000 $d
C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s:6834   .data.Storage:00000000 $d

UNDEFINED SYMBOLS
BspGPIO
ExtFlash_CSPin
BspSPI
memcpy
memset
__boot_s
BspFlash
__boot_e
Debug_Print
DebugPort
Common_CRC16
strlen
ARM GAS  C:\Users\8bit\AppData\Local\Temp\cc0WkVPZ.s 			page 197


memcmp
strcmp
SrvOsCommon
ExtFlash_SPIPin
